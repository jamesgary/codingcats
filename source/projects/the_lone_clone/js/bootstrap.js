/*!
 * jQuery JavaScript Library v1.8.2
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: Thu Sep 20 2012 21:13:05 GMT-0400 (Eastern Daylight Time)
 */

/*!
 * Sizzle CSS Selector Engine
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license
 * http://sizzlejs.com/
 */

/*
* Copyright (c) 2006-2007 Erin Catto http://www.gphysics.com
*
* This software is provided 'as-is', without any express or implied
* warranty.  In no event will the authors be held liable for any damages
* arising from the use of this software.
* Permission is granted to anyone to use this software for any purpose,
* including commercial applications, and to alter it and redistribute it
* freely, subject to the following restrictions:
* 1. The origin of this software must not be misrepresented; you must not
* claim that you wrote the original software. If you use this software
* in a product, an acknowledgment in the product documentation would be
* appreciated but is not required.
* 2. Altered source versions must be plainly marked as such, and must not be
* misrepresented as being the original software.
* 3. This notice may not be removed or altered from any source distribution.
*/

/**
 * @license RequireJS text 2.0.3 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

/*
 * jPlayer Plugin for jQuery JavaScript Library
 * http://www.jplayer.org
 *
 * Copyright (c) 2009 - 2012 Happyworm Ltd
 * Dual licensed under the MIT and GPL licenses.
 *  - http://www.opensource.org/licenses/mit-license.php
 *  - http://www.gnu.org/copyleft/gpl.html
 *
 * Author: Mark J Panaghiston
 * Version: 2.2.0
 * Date: 13th September 2012
 */

(function(e,t){function _(e){var t=M[e]={};return v.each(e.split(y),function(e,n){t[n]=!0}),t}function H(e,n,r){if(r===t&&e.nodeType===1){var i="data-"+n.replace(P,"-$1").toLowerCase();r=e.getAttribute(i);if(typeof r=="string"){try{r=r==="true"?!0:r==="false"?!1:r==="null"?null:+r+""===r?+r:D.test(r)?v.parseJSON(r):r}catch(s){}v.data(e,n,r)}else r=t}return r}function B(e){var t;for(t in e){if(t==="data"&&v.isEmptyObject(e[t]))continue;if(t!=="toJSON")return!1}return!0}function et(){return!1}function tt(){return!0}function ut(e){return!e||!e.parentNode||e.parentNode.nodeType===11}function at(e,t){do e=e[t];while(e&&e.nodeType!==1);return e}function ft(e,t,n){t=t||0;if(v.isFunction(t))return v.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return v.grep(e,function(e,r){return e===t===n});if(typeof t=="string"){var r=v.grep(e,function(e){return e.nodeType===1});if(it.test(t))return v.filter(t,r,!n);t=v.filter(t,r)}return v.grep(e,function(e,r){return v.inArray(e,t)>=0===n})}function lt(e){var t=ct.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function Lt(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function At(e,t){if(t.nodeType!==1||!v.hasData(e))return;var n,r,i,s=v._data(e),o=v._data(t,s),u=s.events;if(u){delete o.handle,o.events={};for(n in u)for(r=0,i=u[n].length;r<i;r++)v.event.add(t,n,u[n][r])}o.data&&(o.data=v.extend({},o.data))}function Ot(e,t){var n;if(t.nodeType!==1)return;t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),n=t.nodeName.toLowerCase(),n==="object"?(t.parentNode&&(t.outerHTML=e.outerHTML),v.support.html5Clone&&e.innerHTML&&!v.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):n==="input"&&Et.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):n==="option"?t.selected=e.defaultSelected:n==="input"||n==="textarea"?t.defaultValue=e.defaultValue:n==="script"&&t.text!==e.text&&(t.text=e.text),t.removeAttribute(v.expando)}function Mt(e){return typeof e.getElementsByTagName!="undefined"?e.getElementsByTagName("*"):typeof e.querySelectorAll!="undefined"?e.querySelectorAll("*"):[]}function _t(e){Et.test(e.type)&&(e.defaultChecked=e.checked)}function Qt(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=Jt.length;while(i--){t=Jt[i]+n;if(t in e)return t}return r}function Gt(e,t){return e=t||e,v.css(e,"display")==="none"||!v.contains(e.ownerDocument,e)}function Yt(e,t){var n,r,i=[],s=0,o=e.length;for(;s<o;s++){n=e[s];if(!n.style)continue;i[s]=v._data(n,"olddisplay"),t?(!i[s]&&n.style.display==="none"&&(n.style.display=""),n.style.display===""&&Gt(n)&&(i[s]=v._data(n,"olddisplay",nn(n.nodeName)))):(r=Dt(n,"display"),!i[s]&&r!=="none"&&v._data(n,"olddisplay",r))}for(s=0;s<o;s++){n=e[s];if(!n.style)continue;if(!t||n.style.display==="none"||n.style.display==="")n.style.display=t?i[s]||"":"none"}return e}function Zt(e,t,n){var r=Rt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function en(e,t,n,r){var i=n===(r?"border":"content")?4:t==="width"?1:0,s=0;for(;i<4;i+=2)n==="margin"&&(s+=v.css(e,n+$t[i],!0)),r?(n==="content"&&(s-=parseFloat(Dt(e,"padding"+$t[i]))||0),n!=="margin"&&(s-=parseFloat(Dt(e,"border"+$t[i]+"Width"))||0)):(s+=parseFloat(Dt(e,"padding"+$t[i]))||0,n!=="padding"&&(s+=parseFloat(Dt(e,"border"+$t[i]+"Width"))||0));return s}function tn(e,t,n){var r=t==="width"?e.offsetWidth:e.offsetHeight,i=!0,s=v.support.boxSizing&&v.css(e,"boxSizing")==="border-box";if(r<=0||r==null){r=Dt(e,t);if(r<0||r==null)r=e.style[t];if(Ut.test(r))return r;i=s&&(v.support.boxSizingReliable||r===e.style[t]),r=parseFloat(r)||0}return r+en(e,t,n||(s?"border":"content"),i)+"px"}function nn(e){if(Wt[e])return Wt[e];var t=v("<"+e+">").appendTo(i.body),n=t.css("display");t.remove();if(n==="none"||n===""){Pt=i.body.appendChild(Pt||v.extend(i.createElement("iframe"),{frameBorder:0,width:0,height:0}));if(!Ht||!Pt.createElement)Ht=(Pt.contentWindow||Pt.contentDocument).document,Ht.write("<!doctype html><html><body>"),Ht.close();t=Ht.body.appendChild(Ht.createElement(e)),n=Dt(t,"display"),i.body.removeChild(Pt)}return Wt[e]=n,n}function fn(e,t,n,r){var i;if(v.isArray(t))v.each(t,function(t,i){n||sn.test(e)?r(e,i):fn(e+"["+(typeof i=="object"?t:"")+"]",i,n,r)});else if(!n&&v.type(t)==="object")for(i in t)fn(e+"["+i+"]",t[i],n,r);else r(e,t)}function Cn(e){return function(t,n){typeof t!="string"&&(n=t,t="*");var r,i,s,o=t.toLowerCase().split(y),u=0,a=o.length;if(v.isFunction(n))for(;u<a;u++)r=o[u],s=/^\+/.test(r),s&&(r=r.substr(1)||"*"),i=e[r]=e[r]||[],i[s?"unshift":"push"](n)}}function kn(e,n,r,i,s,o){s=s||n.dataTypes[0],o=o||{},o[s]=!0;var u,a=e[s],f=0,l=a?a.length:0,c=e===Sn;for(;f<l&&(c||!u);f++)u=a[f](n,r,i),typeof u=="string"&&(!c||o[u]?u=t:(n.dataTypes.unshift(u),u=kn(e,n,r,i,u,o)));return(c||!u)&&!o["*"]&&(u=kn(e,n,r,i,"*",o)),u}function Ln(e,n){var r,i,s=v.ajaxSettings.flatOptions||{};for(r in n)n[r]!==t&&((s[r]?e:i||(i={}))[r]=n[r]);i&&v.extend(!0,e,i)}function An(e,n,r){var i,s,o,u,a=e.contents,f=e.dataTypes,l=e.responseFields;for(s in l)s in r&&(n[l[s]]=r[s]);while(f[0]==="*")f.shift(),i===t&&(i=e.mimeType||n.getResponseHeader("content-type"));if(i)for(s in a)if(a[s]&&a[s].test(i)){f.unshift(s);break}if(f[0]in r)o=f[0];else{for(s in r){if(!f[0]||e.converters[s+" "+f[0]]){o=s;break}u||(u=s)}o=o||u}if(o)return o!==f[0]&&f.unshift(o),r[o]}function On(e,t){var n,r,i,s,o=e.dataTypes.slice(),u=o[0],a={},f=0;e.dataFilter&&(t=e.dataFilter(t,e.dataType));if(o[1])for(n in e.converters)a[n.toLowerCase()]=e.converters[n];for(;i=o[++f];)if(i!=="*"){if(u!=="*"&&u!==i){n=a[u+" "+i]||a["* "+i];if(!n)for(r in a){s=r.split(" ");if(s[1]===i){n=a[u+" "+s[0]]||a["* "+s[0]];if(n){n===!0?n=a[r]:a[r]!==!0&&(i=s[0],o.splice(f--,0,i));break}}}if(n!==!0)if(n&&e["throws"])t=n(t);else try{t=n(t)}catch(l){return{state:"parsererror",error:n?l:"No conversion from "+u+" to "+i}}}u=i}return{state:"success",data:t}}function Fn(){try{return new e.XMLHttpRequest}catch(t){}}function In(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function $n(){return setTimeout(function(){qn=t},0),qn=v.now()}function Jn(e,t){v.each(t,function(t,n){var r=(Vn[t]||[]).concat(Vn["*"]),i=0,s=r.length;for(;i<s;i++)if(r[i].call(e,t,n))return})}function Kn(e,t,n){var r,i=0,s=0,o=Xn.length,u=v.Deferred().always(function(){delete a.elem}),a=function(){var t=qn||$n(),n=Math.max(0,f.startTime+f.duration-t),r=1-(n/f.duration||0),i=0,s=f.tweens.length;for(;i<s;i++)f.tweens[i].run(r);return u.notifyWith(e,[f,r,n]),r<1&&s?n:(u.resolveWith(e,[f]),!1)},f=u.promise({elem:e,props:v.extend({},t),opts:v.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:qn||$n(),duration:n.duration,tweens:[],createTween:function(t,n,r){var i=v.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(i),i},stop:function(t){var n=0,r=t?f.tweens.length:0;for(;n<r;n++)f.tweens[n].run(1);return t?u.resolveWith(e,[f,t]):u.rejectWith(e,[f,t]),this}}),l=f.props;Qn(l,f.opts.specialEasing);for(;i<o;i++){r=Xn[i].call(f,e,l,f.opts);if(r)return r}return Jn(f,l),v.isFunction(f.opts.start)&&f.opts.start.call(e,f),v.fx.timer(v.extend(a,{anim:f,queue:f.opts.queue,elem:e})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function Qn(e,t){var n,r,i,s,o;for(n in e){r=v.camelCase(n),i=t[r],s=e[n],v.isArray(s)&&(i=s[1],s=e[n]=s[0]),n!==r&&(e[r]=s,delete e[n]),o=v.cssHooks[r];if(o&&"expand"in o){s=o.expand(s),delete e[r];for(n in s)n in e||(e[n]=s[n],t[n]=i)}else t[r]=i}}function Gn(e,t,n){var r,i,s,o,u,a,f,l,c=this,h=e.style,p={},d=[],m=e.nodeType&&Gt(e);n.queue||(f=v._queueHooks(e,"fx"),f.unqueued==null&&(f.unqueued=0,l=f.empty.fire,f.empty.fire=function(){f.unqueued||l()}),f.unqueued++,c.always(function(){c.always(function(){f.unqueued--,v.queue(e,"fx").length||f.empty.fire()})})),e.nodeType===1&&("height"in t||"width"in t)&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],v.css(e,"display")==="inline"&&v.css(e,"float")==="none"&&(!v.support.inlineBlockNeedsLayout||nn(e.nodeName)==="inline"?h.display="inline-block":h.zoom=1)),n.overflow&&(h.overflow="hidden",v.support.shrinkWrapBlocks||c.done(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]}));for(r in t){s=t[r];if(Un.exec(s)){delete t[r];if(s===(m?"hide":"show"))continue;d.push(r)}}o=d.length;if(o){u=v._data(e,"fxshow")||v._data(e,"fxshow",{}),m?v(e).show():c.done(function(){v(e).hide()}),c.done(function(){var t;v.removeData(e,"fxshow",!0);for(t in p)v.style(e,t,p[t])});for(r=0;r<o;r++)i=d[r],a=c.createTween(i,m?u[i]:0),p[i]=u[i]||v.style(e,i),i in u||(u[i]=a.start,m&&(a.end=a.start,a.start=i==="width"||i==="height"?1:0))}}function Yn(e,t,n,r,i){return new Yn.prototype.init(e,t,n,r,i)}function Zn(e,t){var n,r={height:e},i=0;t=t?1:0;for(;i<4;i+=2-t)n=$t[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function tr(e){return v.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}var n,r,i=e.document,s=e.location,o=e.navigator,u=e.jQuery,a=e.$,f=Array.prototype.push,l=Array.prototype.slice,c=Array.prototype.indexOf,h=Object.prototype.toString,p=Object.prototype.hasOwnProperty,d=String.prototype.trim,v=function(e,t){return new v.fn.init(e,t,n)},m=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,g=/\S/,y=/\s+/,b=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,w=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,E=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,S=/^[\],:{}\s]*$/,x=/(?:^|:|,)(?:\s*\[)+/g,T=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,N=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,C=/^-ms-/,k=/-([\da-z])/gi,L=function(e,t){return(t+"").toUpperCase()},A=function(){i.addEventListener?(i.removeEventListener("DOMContentLoaded",A,!1),v.ready()):i.readyState==="complete"&&(i.detachEvent("onreadystatechange",A),v.ready())},O={};v.fn=v.prototype={constructor:v,init:function(e,n,r){var s,o,u,a;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if(typeof e=="string"){e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3?s=[null,e,null]:s=w.exec(e);if(s&&(s[1]||!n)){if(s[1])return n=n instanceof v?n[0]:n,a=n&&n.nodeType?n.ownerDocument||n:i,e=v.parseHTML(s[1],a,!0),E.test(s[1])&&v.isPlainObject(n)&&this.attr.call(e,n,!0),v.merge(this,e);o=i.getElementById(s[2]);if(o&&o.parentNode){if(o.id!==s[2])return r.find(e);this.length=1,this[0]=o}return this.context=i,this.selector=e,this}return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e)}return v.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),v.makeArray(e,this))},selector:"",jquery:"1.8.2",length:0,size:function(){return this.length},toArray:function(){return l.call(this)},get:function(e){return e==null?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e,t,n){var r=v.merge(this.constructor(),e);return r.prevObject=this,r.context=this.context,t==="find"?r.selector=this.selector+(this.selector?" ":"")+n:t&&(r.selector=this.selector+"."+t+"("+n+")"),r},each:function(e,t){return v.each(this,e,t)},ready:function(e){return v.ready.promise().done(e),this},eq:function(e){return e=+e,e===-1?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(l.apply(this,arguments),"slice",l.call(arguments).join(","))},map:function(e){return this.pushStack(v.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:[].sort,splice:[].splice},v.fn.init.prototype=v.fn,v.extend=v.fn.extend=function(){var e,n,r,i,s,o,u=arguments[0]||{},a=1,f=arguments.length,l=!1;typeof u=="boolean"&&(l=u,u=arguments[1]||{},a=2),typeof u!="object"&&!v.isFunction(u)&&(u={}),f===a&&(u=this,--a);for(;a<f;a++)if((e=arguments[a])!=null)for(n in e){r=u[n],i=e[n];if(u===i)continue;l&&i&&(v.isPlainObject(i)||(s=v.isArray(i)))?(s?(s=!1,o=r&&v.isArray(r)?r:[]):o=r&&v.isPlainObject(r)?r:{},u[n]=v.extend(l,o,i)):i!==t&&(u[n]=i)}return u},v.extend({noConflict:function(t){return e.$===v&&(e.$=a),t&&e.jQuery===v&&(e.jQuery=u),v},isReady:!1,readyWait:1,holdReady:function(e){e?v.readyWait++:v.ready(!0)},ready:function(e){if(e===!0?--v.readyWait:v.isReady)return;if(!i.body)return setTimeout(v.ready,1);v.isReady=!0;if(e!==!0&&--v.readyWait>0)return;r.resolveWith(i,[v]),v.fn.trigger&&v(i).trigger("ready").off("ready")},isFunction:function(e){return v.type(e)==="function"},isArray:Array.isArray||function(e){return v.type(e)==="array"},isWindow:function(e){return e!=null&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return e==null?String(e):O[h.call(e)]||"object"},isPlainObject:function(e){if(!e||v.type(e)!=="object"||e.nodeType||v.isWindow(e))return!1;try{if(e.constructor&&!p.call(e,"constructor")&&!p.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in e);return r===t||p.call(e,r)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,n){var r;return!e||typeof e!="string"?null:(typeof t=="boolean"&&(n=t,t=0),t=t||i,(r=E.exec(e))?[t.createElement(r[1])]:(r=v.buildFragment([e],t,n?null:[]),v.merge([],(r.cacheable?v.clone(r.fragment):r.fragment).childNodes)))},parseJSON:function(t){if(!t||typeof t!="string")return null;t=v.trim(t);if(e.JSON&&e.JSON.parse)return e.JSON.parse(t);if(S.test(t.replace(T,"@").replace(N,"]").replace(x,"")))return(new Function("return "+t))();v.error("Invalid JSON: "+t)},parseXML:function(n){var r,i;if(!n||typeof n!="string")return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(s){r=t}return(!r||!r.documentElement||r.getElementsByTagName("parsererror").length)&&v.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&g.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(C,"ms-").replace(k,L)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,n,r){var i,s=0,o=e.length,u=o===t||v.isFunction(e);if(r){if(u){for(i in e)if(n.apply(e[i],r)===!1)break}else for(;s<o;)if(n.apply(e[s++],r)===!1)break}else if(u){for(i in e)if(n.call(e[i],i,e[i])===!1)break}else for(;s<o;)if(n.call(e[s],s,e[s++])===!1)break;return e},trim:d&&!d.call("﻿ ")?function(e){return e==null?"":d.call(e)}:function(e){return e==null?"":(e+"").replace(b,"")},makeArray:function(e,t){var n,r=t||[];return e!=null&&(n=v.type(e),e.length==null||n==="string"||n==="function"||n==="regexp"||v.isWindow(e)?f.call(r,e):v.merge(r,e)),r},inArray:function(e,t,n){var r;if(t){if(c)return c.call(t,e,n);r=t.length,n=n?n<0?Math.max(0,r+n):n:0;for(;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,s=0;if(typeof r=="number")for(;s<r;s++)e[i++]=n[s];else while(n[s]!==t)e[i++]=n[s++];return e.length=i,e},grep:function(e,t,n){var r,i=[],s=0,o=e.length;n=!!n;for(;s<o;s++)r=!!t(e[s],s),n!==r&&i.push(e[s]);return i},map:function(e,n,r){var i,s,o=[],u=0,a=e.length,f=e instanceof v||a!==t&&typeof a=="number"&&(a>0&&e[0]&&e[a-1]||a===0||v.isArray(e));if(f)for(;u<a;u++)i=n(e[u],u,r),i!=null&&(o[o.length]=i);else for(s in e)i=n(e[s],s,r),i!=null&&(o[o.length]=i);return o.concat.apply([],o)},guid:1,proxy:function(e,n){var r,i,s;return typeof n=="string"&&(r=e[n],n=e,e=r),v.isFunction(e)?(i=l.call(arguments,2),s=function(){return e.apply(n,i.concat(l.call(arguments)))},s.guid=e.guid=e.guid||v.guid++,s):t},access:function(e,n,r,i,s,o,u){var a,f=r==null,l=0,c=e.length;if(r&&typeof r=="object"){for(l in r)v.access(e,n,l,r[l],1,o,i);s=1}else if(i!==t){a=u===t&&v.isFunction(i),f&&(a?(a=n,n=function(e,t,n){return a.call(v(e),n)}):(n.call(e,i),n=null));if(n)for(;l<c;l++)n(e[l],r,a?i.call(e[l],l,n(e[l],r)):i,u);s=1}return s?e:f?n.call(e):c?n(e[0],r):o},now:function(){return(new Date).getTime()}}),v.ready.promise=function(t){if(!r){r=v.Deferred();if(i.readyState==="complete")setTimeout(v.ready,1);else if(i.addEventListener)i.addEventListener("DOMContentLoaded",A,!1),e.addEventListener("load",v.ready,!1);else{i.attachEvent("onreadystatechange",A),e.attachEvent("onload",v.ready);var n=!1;try{n=e.frameElement==null&&i.documentElement}catch(s){}n&&n.doScroll&&function o(){if(!v.isReady){try{n.doScroll("left")}catch(e){return setTimeout(o,50)}v.ready()}}()}}return r.promise(t)},v.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){O["[object "+t+"]"]=t.toLowerCase()}),n=v(i);var M={};v.Callbacks=function(e){e=typeof e=="string"?M[e]||_(e):v.extend({},e);var n,r,i,s,o,u,a=[],f=!e.once&&[],l=function(t){n=e.memory&&t,r=!0,u=s||0,s=0,o=a.length,i=!0;for(;a&&u<o;u++)if(a[u].apply(t[0],t[1])===!1&&e.stopOnFalse){n=!1;break}i=!1,a&&(f?f.length&&l(f.shift()):n?a=[]:c.disable())},c={add:function(){if(a){var t=a.length;(function r(t){v.each(t,function(t,n){var i=v.type(n);i==="function"&&(!e.unique||!c.has(n))?a.push(n):n&&n.length&&i!=="string"&&r(n)})})(arguments),i?o=a.length:n&&(s=t,l(n))}return this},remove:function(){return a&&v.each(arguments,function(e,t){var n;while((n=v.inArray(t,a,n))>-1)a.splice(n,1),i&&(n<=o&&o--,n<=u&&u--)}),this},has:function(e){return v.inArray(e,a)>-1},empty:function(){return a=[],this},disable:function(){return a=f=n=t,this},disabled:function(){return!a},lock:function(){return f=t,n||c.disable(),this},locked:function(){return!f},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],a&&(!r||f)&&(i?f.push(t):l(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},v.extend({Deferred:function(e){var t=[["resolve","done",v.Callbacks("once memory"),"resolved"],["reject","fail",v.Callbacks("once memory"),"rejected"],["notify","progress",v.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return v.Deferred(function(n){v.each(t,function(t,r){var s=r[0],o=e[t];i[r[1]](v.isFunction(o)?function(){var e=o.apply(this,arguments);e&&v.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s+"With"](this===i?n:this,[e])}:n[s])}),e=null}).promise()},promise:function(e){return e!=null?v.extend(e,r):r}},i={};return r.pipe=r.then,v.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[e^1][2].disable,t[2][2].lock),i[s[0]]=o.fire,i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=l.call(arguments),r=n.length,i=r!==1||e&&v.isFunction(e.promise)?r:0,s=i===1?e:v.Deferred(),o=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?l.call(arguments):r,n===u?s.notifyWith(t,n):--i||s.resolveWith(t,n)}},u,a,f;if(r>1){u=new Array(r),a=new Array(r),f=new Array(r);for(;t<r;t++)n[t]&&v.isFunction(n[t].promise)?n[t].promise().done(o(t,f,n)).fail(s.reject).progress(o(t,a,u)):--i}return i||s.resolveWith(f,n),s.promise()}}),v.support=function(){var t,n,r,s,o,u,a,f,l,c,h,p=i.createElement("div");p.setAttribute("className","t"),p.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=p.getElementsByTagName("*"),r=p.getElementsByTagName("a")[0],r.style.cssText="top:1px;float:left;opacity:.5";if(!n||!n.length)return{};s=i.createElement("select"),o=s.appendChild(i.createElement("option")),u=p.getElementsByTagName("input")[0],t={leadingWhitespace:p.firstChild.nodeType===3,tbody:!p.getElementsByTagName("tbody").length,htmlSerialize:!!p.getElementsByTagName("link").length,style:/top/.test(r.getAttribute("style")),hrefNormalized:r.getAttribute("href")==="/a",opacity:/^0.5/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:u.value==="on",optSelected:o.selected,getSetAttribute:p.className!=="t",enctype:!!i.createElement("form").enctype,html5Clone:i.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",boxModel:i.compatMode==="CSS1Compat",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},u.checked=!0,t.noCloneChecked=u.cloneNode(!0).checked,s.disabled=!0,t.optDisabled=!o.disabled;try{delete p.test}catch(d){t.deleteExpando=!1}!p.addEventListener&&p.attachEvent&&p.fireEvent&&(p.attachEvent("onclick",h=function(){t.noCloneEvent=!1}),p.cloneNode(!0).fireEvent("onclick"),p.detachEvent("onclick",h)),u=i.createElement("input"),u.value="t",u.setAttribute("type","radio"),t.radioValue=u.value==="t",u.setAttribute("checked","checked"),u.setAttribute("name","t"),p.appendChild(u),a=i.createDocumentFragment(),a.appendChild(p.lastChild),t.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,t.appendChecked=u.checked,a.removeChild(u),a.appendChild(p);if(p.attachEvent)for(l in{submit:!0,change:!0,focusin:!0})f="on"+l,c=f in p,c||(p.setAttribute(f,"return;"),c=typeof p[f]=="function"),t[l+"Bubbles"]=c;return v(function(){var n,r,s,o,u="padding:0;margin:0;border:0;display:block;overflow:hidden;",a=i.getElementsByTagName("body")[0];if(!a)return;n=i.createElement("div"),n.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",a.insertBefore(n,a.firstChild),r=i.createElement("div"),n.appendChild(r),r.innerHTML="<table><tr><td></td><td>t</td></tr></table>",s=r.getElementsByTagName("td"),s[0].style.cssText="padding:0;margin:0;border:0;display:none",c=s[0].offsetHeight===0,s[0].style.display="",s[1].style.display="none",t.reliableHiddenOffsets=c&&s[0].offsetHeight===0,r.innerHTML="",r.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=r.offsetWidth===4,t.doesNotIncludeMarginInBodyOffset=a.offsetTop!==1,e.getComputedStyle&&(t.pixelPosition=(e.getComputedStyle(r,null)||{}).top!=="1%",t.boxSizingReliable=(e.getComputedStyle(r,null)||{width:"4px"}).width==="4px",o=i.createElement("div"),o.style.cssText=r.style.cssText=u,o.style.marginRight=o.style.width="0",r.style.width="1px",r.appendChild(o),t.reliableMarginRight=!parseFloat((e.getComputedStyle(o,null)||{}).marginRight)),typeof r.style.zoom!="undefined"&&(r.innerHTML="",r.style.cssText=u+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=r.offsetWidth===3,r.style.display="block",r.style.overflow="visible",r.innerHTML="<div></div>",r.firstChild.style.width="5px",t.shrinkWrapBlocks=r.offsetWidth!==3,n.style.zoom=1),a.removeChild(n),n=r=s=o=null}),a.removeChild(p),n=r=s=o=u=a=p=null,t}();var D=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,P=/([A-Z])/g;v.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(v.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?v.cache[e[v.expando]]:e[v.expando],!!e&&!B(e)},data:function(e,n,r,i){if(!v.acceptData(e))return;var s,o,u=v.expando,a=typeof n=="string",f=e.nodeType,l=f?v.cache:e,c=f?e[u]:e[u]&&u;if((!c||!l[c]||!i&&!l[c].data)&&a&&r===t)return;c||(f?e[u]=c=v.deletedIds.pop()||v.guid++:c=u),l[c]||(l[c]={},f||(l[c].toJSON=v.noop));if(typeof n=="object"||typeof n=="function")i?l[c]=v.extend(l[c],n):l[c].data=v.extend(l[c].data,n);return s=l[c],i||(s.data||(s.data={}),s=s.data),r!==t&&(s[v.camelCase(n)]=r),a?(o=s[n],o==null&&(o=s[v.camelCase(n)])):o=s,o},removeData:function(e,t,n){if(!v.acceptData(e))return;var r,i,s,o=e.nodeType,u=o?v.cache:e,a=o?e[v.expando]:v.expando;if(!u[a])return;if(t){r=n?u[a]:u[a].data;if(r){v.isArray(t)||(t in r?t=[t]:(t=v.camelCase(t),t in r?t=[t]:t=t.split(" ")));for(i=0,s=t.length;i<s;i++)delete r[t[i]];if(!(n?B:v.isEmptyObject)(r))return}}if(!n){delete u[a].data;if(!B(u[a]))return}o?v.cleanData([e],!0):v.support.deleteExpando||u!=u.window?delete u[a]:u[a]=null},_data:function(e,t,n){return v.data(e,t,n,!0)},acceptData:function(e){var t=e.nodeName&&v.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),v.fn.extend({data:function(e,n){var r,i,s,o,u,a=this[0],f=0,l=null;if(e===t){if(this.length){l=v.data(a);if(a.nodeType===1&&!v._data(a,"parsedAttrs")){s=a.attributes;for(u=s.length;f<u;f++)o=s[f].name,o.indexOf("data-")||(o=v.camelCase(o.substring(5)),H(a,o,l[o]));v._data(a,"parsedAttrs",!0)}}return l}return typeof e=="object"?this.each(function(){v.data(this,e)}):(r=e.split(".",2),r[1]=r[1]?"."+r[1]:"",i=r[1]+"!",v.access(this,function(n){if(n===t)return l=this.triggerHandler("getData"+i,[r[0]]),l===t&&a&&(l=v.data(a,e),l=H(a,e,l)),l===t&&r[1]?this.data(r[0]):l;r[1]=n,this.each(function(){var t=v(this);t.triggerHandler("setData"+i,r),v.data(this,e,n),t.triggerHandler("changeData"+i,r)})},null,n,arguments.length>1,null,!1))},removeData:function(e){return this.each(function(){v.removeData(this,e)})}}),v.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=v._data(e,t),n&&(!r||v.isArray(n)?r=v._data(e,t,v.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=v.queue(e,t),r=n.length,i=n.shift(),s=v._queueHooks(e,t),o=function(){v.dequeue(e,t)};i==="inprogress"&&(i=n.shift(),r--),i&&(t==="fx"&&n.unshift("inprogress"),delete s.stop,i.call(e,o,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return v._data(e,n)||v._data(e,n,{empty:v.Callbacks("once memory").add(function(){v.removeData(e,t+"queue",!0),v.removeData(e,n,!0)})})}}),v.fn.extend({queue:function(e,n){var r=2;return typeof e!="string"&&(n=e,e="fx",r--),arguments.length<r?v.queue(this[0],e):n===t?this:this.each(function(){var t=v.queue(this,e,n);v._queueHooks(this,e),e==="fx"&&t[0]!=="inprogress"&&v.dequeue(this,e)})},dequeue:function(e){return this.each(function(){v.dequeue(this,e)})},delay:function(e,t){return e=v.fx?v.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,s=v.Deferred(),o=this,u=this.length,a=function(){--i||s.resolveWith(o,[o])};typeof e!="string"&&(n=e,e=t),e=e||"fx";while(u--)r=v._data(o[u],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(a));return a(),s.promise(n)}});var j,F,I,q=/[\t\r\n]/g,R=/\r/g,U=/^(?:button|input)$/i,z=/^(?:button|input|object|select|textarea)$/i,W=/^a(?:rea|)$/i,X=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,V=v.support.getSetAttribute;v.fn.extend({attr:function(e,t){return v.access(this,v.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){v.removeAttr(this,e)})},prop:function(e,t){return v.access(this,v.prop,e,t,arguments.length>1)},removeProp:function(e){return e=v.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,s,o,u;if(v.isFunction(e))return this.each(function(t){v(this).addClass(e.call(this,t,this.className))});if(e&&typeof e=="string"){t=e.split(y);for(n=0,r=this.length;n<r;n++){i=this[n];if(i.nodeType===1)if(!i.className&&t.length===1)i.className=e;else{s=" "+i.className+" ";for(o=0,u=t.length;o<u;o++)s.indexOf(" "+t[o]+" ")<0&&(s+=t[o]+" ");i.className=v.trim(s)}}}return this},removeClass:function(e){var n,r,i,s,o,u,a;if(v.isFunction(e))return this.each(function(t){v(this).removeClass(e.call(this,t,this.className))});if(e&&typeof e=="string"||e===t){n=(e||"").split(y);for(u=0,a=this.length;u<a;u++){i=this[u];if(i.nodeType===1&&i.className){r=(" "+i.className+" ").replace(q," ");for(s=0,o=n.length;s<o;s++)while(r.indexOf(" "+n[s]+" ")>=0)r=r.replace(" "+n[s]+" "," ");i.className=e?v.trim(r):""}}}return this},toggleClass:function(e,t){var n=typeof e,r=typeof t=="boolean";return v.isFunction(e)?this.each(function(n){v(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(n==="string"){var i,s=0,o=v(this),u=t,a=e.split(y);while(i=a[s++])u=r?u:!o.hasClass(i),o[u?"addClass":"removeClass"](i)}else if(n==="undefined"||n==="boolean")this.className&&v._data(this,"__className__",this.className),this.className=this.className||e===!1?"":v._data(this,"__className__")||""})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;n<r;n++)if(this[n].nodeType===1&&(" "+this[n].className+" ").replace(q," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,s=this[0];if(!arguments.length){if(s)return n=v.valHooks[s.type]||v.valHooks[s.nodeName.toLowerCase()],n&&"get"in n&&(r=n.get(s,"value"))!==t?r:(r=s.value,typeof r=="string"?r.replace(R,""):r==null?"":r);return}return i=v.isFunction(e),this.each(function(r){var s,o=v(this);if(this.nodeType!==1)return;i?s=e.call(this,r,o.val()):s=e,s==null?s="":typeof s=="number"?s+="":v.isArray(s)&&(s=v.map(s,function(e){return e==null?"":e+""})),n=v.valHooks[this.type]||v.valHooks[this.nodeName.toLowerCase()];if(!n||!("set"in n)||n.set(this,s,"value")===t)this.value=s})}}),v.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r,i,s=e.selectedIndex,o=[],u=e.options,a=e.type==="select-one";if(s<0)return null;n=a?s:0,r=a?s+1:u.length;for(;n<r;n++){i=u[n];if(i.selected&&(v.support.optDisabled?!i.disabled:i.getAttribute("disabled")===null)&&(!i.parentNode.disabled||!v.nodeName(i.parentNode,"optgroup"))){t=v(i).val();if(a)return t;o.push(t)}}return a&&!o.length&&u.length?v(u[s]).val():o},set:function(e,t){var n=v.makeArray(t);return v(e).find("option").each(function(){this.selected=v.inArray(v(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attrFn:{},attr:function(e,n,r,i){var s,o,u,a=e.nodeType;if(!e||a===3||a===8||a===2)return;if(i&&v.isFunction(v.fn[n]))return v(e)[n](r);if(typeof e.getAttribute=="undefined")return v.prop(e,n,r);u=a!==1||!v.isXMLDoc(e),u&&(n=n.toLowerCase(),o=v.attrHooks[n]||(X.test(n)?F:j));if(r!==t){if(r===null){v.removeAttr(e,n);return}return o&&"set"in o&&u&&(s=o.set(e,r,n))!==t?s:(e.setAttribute(n,r+""),r)}return o&&"get"in o&&u&&(s=o.get(e,n))!==null?s:(s=e.getAttribute(n),s===null?t:s)},removeAttr:function(e,t){var n,r,i,s,o=0;if(t&&e.nodeType===1){r=t.split(y);for(;o<r.length;o++)i=r[o],i&&(n=v.propFix[i]||i,s=X.test(i),s||v.attr(e,i,""),e.removeAttribute(V?i:n),s&&n in e&&(e[n]=!1))}},attrHooks:{type:{set:function(e,t){if(U.test(e.nodeName)&&e.parentNode)v.error("type property can't be changed");else if(!v.support.radioValue&&t==="radio"&&v.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}},value:{get:function(e,t){return j&&v.nodeName(e,"button")?j.get(e,t):t in e?e.value:null},set:function(e,t,n){if(j&&v.nodeName(e,"button"))return j.set(e,t,n);e.value=t}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,s,o,u=e.nodeType;if(!e||u===3||u===8||u===2)return;return o=u!==1||!v.isXMLDoc(e),o&&(n=v.propFix[n]||n,s=v.propHooks[n]),r!==t?s&&"set"in s&&(i=s.set(e,r,n))!==t?i:e[n]=r:s&&"get"in s&&(i=s.get(e,n))!==null?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):z.test(e.nodeName)||W.test(e.nodeName)&&e.href?0:t}}}}),F={get:function(e,n){var r,i=v.prop(e,n);return i===!0||typeof i!="boolean"&&(r=e.getAttributeNode(n))&&r.nodeValue!==!1?n.toLowerCase():t},set:function(e,t,n){var r;return t===!1?v.removeAttr(e,n):(r=v.propFix[n]||n,r in e&&(e[r]=!0),e.setAttribute(n,n.toLowerCase())),n}},V||(I={name:!0,id:!0,coords:!0},j=v.valHooks.button={get:function(e,n){var r;return r=e.getAttributeNode(n),r&&(I[n]?r.value!=="":r.specified)?r.value:t},set:function(e,t,n){var r=e.getAttributeNode(n);return r||(r=i.createAttribute(n),e.setAttributeNode(r)),r.value=t+""}},v.each(["width","height"],function(e,t){v.attrHooks[t]=v.extend(v.attrHooks[t],{set:function(e,n){if(n==="")return e.setAttribute(t,"auto"),n}})}),v.attrHooks.contenteditable={get:j.get,set:function(e,t,n){t===""&&(t="false"),j.set(e,t,n)}}),v.support.hrefNormalized||v.each(["href","src","width","height"],function(e,n){v.attrHooks[n]=v.extend(v.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return r===null?t:r}})}),v.support.style||(v.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=t+""}}),v.support.optSelected||(v.propHooks.selected=v.extend(v.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),v.support.enctype||(v.propFix.enctype="encoding"),v.support.checkOn||v.each(["radio","checkbox"],function(){v.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value}}}),v.each(["radio","checkbox"],function(){v.valHooks[this]=v.extend(v.valHooks[this],{set:function(e,t){if(v.isArray(t))return e.checked=v.inArray(v(e).val(),t)>=0}})});var $=/^(?:textarea|input|select)$/i,J=/^([^\.]*|)(?:\.(.+)|)$/,K=/(?:^|\s)hover(\.\S+|)\b/,Q=/^key/,G=/^(?:mouse|contextmenu)|click/,Y=/^(?:focusinfocus|focusoutblur)$/,Z=function(e){return v.event.special.hover?e:e.replace(K,"mouseenter$1 mouseleave$1")};v.event={add:function(e,n,r,i,s){var o,u,a,f,l,c,h,p,d,m,g;if(e.nodeType===3||e.nodeType===8||!n||!r||!(o=v._data(e)))return;r.handler&&(d=r,r=d.handler,s=d.selector),r.guid||(r.guid=v.guid++),a=o.events,a||(o.events=a={}),u=o.handle,u||(o.handle=u=function(e){return typeof v=="undefined"||!!e&&v.event.triggered===e.type?t:v.event.dispatch.apply(u.elem,arguments)},u.elem=e),n=v.trim(Z(n)).split(" ");for(f=0;f<n.length;f++){l=J.exec(n[f])||[],c=l[1],h=(l[2]||"").split(".").sort(),g=v.event.special[c]||{},c=(s?g.delegateType:g.bindType)||c,g=v.event.special[c]||{},p=v.extend({type:c,origType:l[1],data:i,handler:r,guid:r.guid,selector:s,needsContext:s&&v.expr.match.needsContext.test(s),namespace:h.join(".")},d),m=a[c];if(!m){m=a[c]=[],m.delegateCount=0;if(!g.setup||g.setup.call(e,i,h,u)===!1)e.addEventListener?e.addEventListener(c,u,!1):e.attachEvent&&e.attachEvent("on"+c,u)}g.add&&(g.add.call(e,p),p.handler.guid||(p.handler.guid=r.guid)),s?m.splice(m.delegateCount++,0,p):m.push(p),v.event.global[c]=!0}e=null},global:{},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,m,g=v.hasData(e)&&v._data(e);if(!g||!(h=g.events))return;t=v.trim(Z(t||"")).split(" ");for(s=0;s<t.length;s++){o=J.exec(t[s])||[],u=a=o[1],f=o[2];if(!u){for(u in h)v.event.remove(e,u+t[s],n,r,!0);continue}p=v.event.special[u]||{},u=(r?p.delegateType:p.bindType)||u,d=h[u]||[],l=d.length,f=f?new RegExp("(^|\\.)"+f.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null;for(c=0;c<d.length;c++)m=d[c],(i||a===m.origType)&&(!n||n.guid===m.guid)&&(!f||f.test(m.namespace))&&(!r||r===m.selector||r==="**"&&m.selector)&&(d.splice(c--,1),m.selector&&d.delegateCount--,p.remove&&p.remove.call(e,m));d.length===0&&l!==d.length&&((!p.teardown||p.teardown.call(e,f,g.handle)===!1)&&v.removeEvent(e,u,g.handle),delete h[u])}v.isEmptyObject(h)&&(delete g.handle,v.removeData(e,"events",!0))},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(n,r,s,o){if(!s||s.nodeType!==3&&s.nodeType!==8){var u,a,f,l,c,h,p,d,m,g,y=n.type||n,b=[];if(Y.test(y+v.event.triggered))return;y.indexOf("!")>=0&&(y=y.slice(0,-1),a=!0),y.indexOf(".")>=0&&(b=y.split("."),y=b.shift(),b.sort());if((!s||v.event.customEvent[y])&&!v.event.global[y])return;n=typeof n=="object"?n[v.expando]?n:new v.Event(y,n):new v.Event(y),n.type=y,n.isTrigger=!0,n.exclusive=a,n.namespace=b.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,h=y.indexOf(":")<0?"on"+y:"";if(!s){u=v.cache;for(f in u)u[f].events&&u[f].events[y]&&v.event.trigger(n,r,u[f].handle.elem,!0);return}n.result=t,n.target||(n.target=s),r=r!=null?v.makeArray(r):[],r.unshift(n),p=v.event.special[y]||{};if(p.trigger&&p.trigger.apply(s,r)===!1)return;m=[[s,p.bindType||y]];if(!o&&!p.noBubble&&!v.isWindow(s)){g=p.delegateType||y,l=Y.test(g+y)?s:s.parentNode;for(c=s;l;l=l.parentNode)m.push([l,g]),c=l;c===(s.ownerDocument||i)&&m.push([c.defaultView||c.parentWindow||e,g])}for(f=0;f<m.length&&!n.isPropagationStopped();f++)l=m[f][0],n.type=m[f][1],d=(v._data(l,"events")||{})[n.type]&&v._data(l,"handle"),d&&d.apply(l,r),d=h&&l[h],d&&v.acceptData(l)&&d.apply&&d.apply(l,r)===!1&&n.preventDefault();return n.type=y,!o&&!n.isDefaultPrevented()&&(!p._default||p._default.apply(s.ownerDocument,r)===!1)&&(y!=="click"||!v.nodeName(s,"a"))&&v.acceptData(s)&&h&&s[y]&&(y!=="focus"&&y!=="blur"||n.target.offsetWidth!==0)&&!v.isWindow(s)&&(c=s[h],c&&(s[h]=null),v.event.triggered=y,s[y](),v.event.triggered=t,c&&(s[h]=c)),n.result}return},dispatch:function(n){n=v.event.fix(n||e.event);var r,i,s,o,u,a,f,c,h,p,d=(v._data(this,"events")||{})[n.type]||[],m=d.delegateCount,g=l.call(arguments),y=!n.exclusive&&!n.namespace,b=v.event.special[n.type]||{},w=[];g[0]=n,n.delegateTarget=this;if(b.preDispatch&&b.preDispatch.call(this,n)===!1)return;if(m&&(!n.button||n.type!=="click"))for(s=n.target;s!=this;s=s.parentNode||this)if(s.disabled!==!0||n.type!=="click"){u={},f=[];for(r=0;r<m;r++)c=d[r],h=c.selector,u[h]===t&&(u[h]=c.needsContext?v(h,this).index(s)>=0:v.find(h,this,null,[s]).length),u[h]&&f.push(c);f.length&&w.push({elem:s,matches:f})}d.length>m&&w.push({elem:this,matches:d.slice(m)});for(r=0;r<w.length&&!n.isPropagationStopped();r++){a=w[r],n.currentTarget=a.elem;for(i=0;i<a.matches.length&&!n.isImmediatePropagationStopped();i++){c=a.matches[i];if(y||!n.namespace&&!c.namespace||n.namespace_re&&n.namespace_re.test(c.namespace))n.data=c.data,n.handleObj=c,o=((v.event.special[c.origType]||{}).handle||c.handler).apply(a.elem,g),o!==t&&(n.result=o,o===!1&&(n.preventDefault(),n.stopPropagation()))}}return b.postDispatch&&b.postDispatch.call(this,n),n.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return e.which==null&&(e.which=t.charCode!=null?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,s,o,u=n.button,a=n.fromElement;return e.pageX==null&&n.clientX!=null&&(r=e.target.ownerDocument||i,s=r.documentElement,o=r.body,e.pageX=n.clientX+(s&&s.scrollLeft||o&&o.scrollLeft||0)-(s&&s.clientLeft||o&&o.clientLeft||0),e.pageY=n.clientY+(s&&s.scrollTop||o&&o.scrollTop||0)-(s&&s.clientTop||o&&o.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?n.toElement:a),!e.which&&u!==t&&(e.which=u&1?1:u&2?3:u&4?2:0),e}},fix:function(e){if(e[v.expando])return e;var t,n,r=e,s=v.event.fixHooks[e.type]||{},o=s.props?this.props.concat(s.props):this.props;e=v.Event(r);for(t=o.length;t;)n=o[--t],e[n]=r[n];return e.target||(e.target=r.srcElement||i),e.target.nodeType===3&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,r):e},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,n){v.isWindow(this)&&(this.onbeforeunload=n)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,n,r){var i=v.extend(new v.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?v.event.trigger(i,null,t):v.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},v.event.handle=v.event.dispatch,v.removeEvent=i.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]=="undefined"&&(e[r]=null),e.detachEvent(r,n))},v.Event=function(e,t){if(!(this instanceof v.Event))return new v.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?tt:et):this.type=e,t&&v.extend(this,t),this.timeStamp=e&&e.timeStamp||v.now(),this[v.expando]=!0},v.Event.prototype={preventDefault:function(){this.isDefaultPrevented=tt;var e=this.originalEvent;if(!e)return;e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=tt;var e=this.originalEvent;if(!e)return;e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=tt,this.stopPropagation()},isDefaultPrevented:et,isPropagationStopped:et,isImmediatePropagationStopped:et},v.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){v.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj,o=s.selector;if(!i||i!==r&&!v.contains(r,i))e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t;return n}}}),v.support.submitBubbles||(v.event.special.submit={setup:function(){if(v.nodeName(this,"form"))return!1;v.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=v.nodeName(n,"input")||v.nodeName(n,"button")?n.form:t;r&&!v._data(r,"_submit_attached")&&(v.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),v._data(r,"_submit_attached",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&v.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(v.nodeName(this,"form"))return!1;v.event.remove(this,"._submit")}}),v.support.changeBubbles||(v.event.special.change={setup:function(){if($.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")v.event.add(this,"propertychange._change",function(e){e.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),v.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),v.event.simulate("change",this,e,!0)});return!1}v.event.add(this,"beforeactivate._change",function(e){var t=e.target;$.test(t.nodeName)&&!v._data(t,"_change_attached")&&(v.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&v.event.simulate("change",this.parentNode,e,!0)}),v._data(t,"_change_attached",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||t.type!=="radio"&&t.type!=="checkbox")return e.handleObj.handler.apply(this,arguments)},teardown:function(){return v.event.remove(this,"._change"),!$.test(this.nodeName)}}),v.support.focusinBubbles||v.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){v.event.simulate(t,e.target,v.event.fix(e),!0)};v.event.special[t]={setup:function(){n++===0&&i.addEventListener(e,r,!0)},teardown:function(){--n===0&&i.removeEventListener(e,r,!0)}}}),v.fn.extend({on:function(e,n,r,i,s){var o,u;if(typeof e=="object"){typeof n!="string"&&(r=r||n,n=t);for(u in e)this.on(u,n,r,e[u],s);return this}r==null&&i==null?(i=n,r=n=t):i==null&&(typeof n=="string"?(i=r,r=t):(i=r,r=n,n=t));if(i===!1)i=et;else if(!i)return this;return s===1&&(o=i,i=function(e){return v().off(e),o.apply(this,arguments)},i.guid=o.guid||(o.guid=v.guid++)),this.each(function(){v.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,s;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,v(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if(typeof e=="object"){for(s in e)this.off(s,n,e[s]);return this}if(n===!1||typeof n=="function")r=n,n=t;return r===!1&&(r=et),this.each(function(){v.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,n){return v(this.context).on(e,this.selector,t,n),this},die:function(e,t){return v(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){v.event.trigger(e,t,this)})},triggerHandler:function(e,t){if(this[0])return v.event.trigger(e,t,this[0],!0)},toggle:function(e){var t=arguments,n=e.guid||v.guid++,r=0,i=function(n){var i=(v._data(this,"lastToggle"+e.guid)||0)%r;return v._data(this,"lastToggle"+e.guid,i+1),n.preventDefault(),t[i].apply(this,arguments)||!1};i.guid=n;while(r<t.length)t[r++].guid=n;return this.click(i)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),v.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){v.fn[t]=function(e,n){return n==null&&(n=e,e=null),arguments.length>0?this.on(t,null,e,n):this.trigger(t)},Q.test(t)&&(v.event.fixHooks[t]=v.event.keyHooks),G.test(t)&&(v.event.fixHooks[t]=v.event.mouseHooks)}),function(e,t){function nt(e,t,n,r){n=n||[],t=t||g;var i,s,a,f,l=t.nodeType;if(!e||typeof e!="string")return n;if(l!==1&&l!==9)return[];a=o(t);if(!a&&!r)if(i=R.exec(e))if(f=i[1]){if(l===9){s=t.getElementById(f);if(!s||!s.parentNode)return n;if(s.id===f)return n.push(s),n}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(f))&&u(t,s)&&s.id===f)return n.push(s),n}else{if(i[2])return S.apply(n,x.call(t.getElementsByTagName(e),0)),n;if((f=i[3])&&Z&&t.getElementsByClassName)return S.apply(n,x.call(t.getElementsByClassName(f),0)),n}return vt(e.replace(j,"$1"),t,n,r,a)}function rt(e){return function(t){var n=t.nodeName.toLowerCase();return n==="input"&&t.type===e}}function it(e){return function(t){var n=t.nodeName.toLowerCase();return(n==="input"||n==="button")&&t.type===e}}function st(e){return N(function(t){return t=+t,N(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function ot(e,t,n){if(e===t)return n;var r=e.nextSibling;while(r){if(r===t)return-1;r=r.nextSibling}return 1}function ut(e,t){var n,r,s,o,u,a,f,l=L[d][e];if(l)return t?0:l.slice(0);u=e,a=[],f=i.preFilter;while(u){if(!n||(r=F.exec(u)))r&&(u=u.slice(r[0].length)),a.push(s=[]);n=!1;if(r=I.exec(u))s.push(n=new m(r.shift())),u=u.slice(n.length),n.type=r[0].replace(j," ");for(o in i.filter)(r=J[o].exec(u))&&(!f[o]||(r=f[o](r,g,!0)))&&(s.push(n=new m(r.shift())),u=u.slice(n.length),n.type=o,n.matches=r);if(!n)break}return t?u.length:u?nt.error(e):L(e,a).slice(0)}function at(e,t,r){var i=t.dir,s=r&&t.dir==="parentNode",o=w++;return t.first?function(t,n,r){while(t=t[i])if(s||t.nodeType===1)return e(t,n,r)}:function(t,r,u){if(!u){var a,f=b+" "+o+" ",l=f+n;while(t=t[i])if(s||t.nodeType===1){if((a=t[d])===l)return t.sizset;if(typeof a=="string"&&a.indexOf(f)===0){if(t.sizset)return t}else{t[d]=l;if(e(t,r,u))return t.sizset=!0,t;t.sizset=!1}}}else while(t=t[i])if(s||t.nodeType===1)if(e(t,r,u))return t}}function ft(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function lt(e,t,n,r,i){var s,o=[],u=0,a=e.length,f=t!=null;for(;u<a;u++)if(s=e[u])if(!n||n(s,r,i))o.push(s),f&&t.push(u);return o}function ct(e,t,n,r,i,s){return r&&!r[d]&&(r=ct(r)),i&&!i[d]&&(i=ct(i,s)),N(function(s,o,u,a){if(s&&i)return;var f,l,c,h=[],p=[],d=o.length,v=s||dt(t||"*",u.nodeType?[u]:u,[],s),m=e&&(s||!t)?lt(v,h,e,u,a):v,g=n?i||(s?e:d||r)?[]:o:m;n&&n(m,g,u,a);if(r){c=lt(g,p),r(c,[],u,a),f=c.length;while(f--)if(l=c[f])g[p[f]]=!(m[p[f]]=l)}if(s){f=e&&g.length;while(f--)if(l=g[f])s[h[f]]=!(o[h[f]]=l)}else g=lt(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):S.apply(o,g)})}function ht(e){var t,n,r,s=e.length,o=i.relative[e[0].type],u=o||i.relative[" "],a=o?1:0,f=at(function(e){return e===t},u,!0),l=at(function(e){return T.call(t,e)>-1},u,!0),h=[function(e,n,r){return!o&&(r||n!==c)||((t=n).nodeType?f(e,n,r):l(e,n,r))}];for(;a<s;a++)if(n=i.relative[e[a].type])h=[at(ft(h),n)];else{n=i.filter[e[a].type].apply(null,e[a].matches);if(n[d]){r=++a;for(;r<s;r++)if(i.relative[e[r].type])break;return ct(a>1&&ft(h),a>1&&e.slice(0,a-1).join("").replace(j,"$1"),n,a<r&&ht(e.slice(a,r)),r<s&&ht(e=e.slice(r)),r<s&&e.join(""))}h.push(n)}return ft(h)}function pt(e,t){var r=t.length>0,s=e.length>0,o=function(u,a,f,l,h){var p,d,v,m=[],y=0,w="0",x=u&&[],T=h!=null,N=c,C=u||s&&i.find.TAG("*",h&&a.parentNode||a),k=b+=N==null?1:Math.E;T&&(c=a!==g&&a,n=o.el);for(;(p=C[w])!=null;w++){if(s&&p){for(d=0;v=e[d];d++)if(v(p,a,f)){l.push(p);break}T&&(b=k,n=++o.el)}r&&((p=!v&&p)&&y--,u&&x.push(p))}y+=w;if(r&&w!==y){for(d=0;v=t[d];d++)v(x,m,a,f);if(u){if(y>0)while(w--)!x[w]&&!m[w]&&(m[w]=E.call(l));m=lt(m)}S.apply(l,m),T&&!u&&m.length>0&&y+t.length>1&&nt.uniqueSort(l)}return T&&(b=k,c=N),x};return o.el=0,r?N(o):o}function dt(e,t,n,r){var i=0,s=t.length;for(;i<s;i++)nt(e,t[i],n,r);return n}function vt(e,t,n,r,s){var o,u,f,l,c,h=ut(e),p=h.length;if(!r&&h.length===1){u=h[0]=h[0].slice(0);if(u.length>2&&(f=u[0]).type==="ID"&&t.nodeType===9&&!s&&i.relative[u[1].type]){t=i.find.ID(f.matches[0].replace($,""),t,s)[0];if(!t)return n;e=e.slice(u.shift().length)}for(o=J.POS.test(e)?-1:u.length-1;o>=0;o--){f=u[o];if(i.relative[l=f.type])break;if(c=i.find[l])if(r=c(f.matches[0].replace($,""),z.test(u[0].type)&&t.parentNode||t,s)){u.splice(o,1),e=r.length&&u.join("");if(!e)return S.apply(n,x.call(r,0)),n;break}}}return a(e,h)(r,t,s,n,z.test(e)),n}function mt(){}var n,r,i,s,o,u,a,f,l,c,h=!0,p="undefined",d=("sizcache"+Math.random()).replace(".",""),m=String,g=e.document,y=g.documentElement,b=0,w=0,E=[].pop,S=[].push,x=[].slice,T=[].indexOf||function(e){var t=0,n=this.length;for(;t<n;t++)if(this[t]===e)return t;return-1},N=function(e,t){return e[d]=t==null||t,e},C=function(){var e={},t=[];return N(function(n,r){return t.push(n)>i.cacheLength&&delete e[t.shift()],e[n]=r},e)},k=C(),L=C(),A=C(),O="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",_=M.replace("w","w#"),D="([*^$|!~]?=)",P="\\["+O+"*("+M+")"+O+"*(?:"+D+O+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+_+")|)|)"+O+"*\\]",H=":("+M+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+P+")|[^:]|\\\\.)*|.*))\\)|)",B=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+O+"*((?:-\\d)?\\d*)"+O+"*\\)|)(?=[^-]|$)",j=new RegExp("^"+O+"+|((?:^|[^\\\\])(?:\\\\.)*)"+O+"+$","g"),F=new RegExp("^"+O+"*,"+O+"*"),I=new RegExp("^"+O+"*([\\x20\\t\\r\\n\\f>+~])"+O+"*"),q=new RegExp(H),R=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,U=/^:not/,z=/[\x20\t\r\n\f]*[+~]/,W=/:not\($/,X=/h\d/i,V=/input|select|textarea|button/i,$=/\\(?!\\)/g,J={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),NAME:new RegExp("^\\[name=['\"]?("+M+")['\"]?\\]"),TAG:new RegExp("^("+M.replace("w","w*")+")"),ATTR:new RegExp("^"+P),PSEUDO:new RegExp("^"+H),POS:new RegExp(B,"i"),CHILD:new RegExp("^:(only|nth|first|last)-child(?:\\("+O+"*(even|odd|(([+-]|)(\\d*)n|)"+O+"*(?:([+-]|)"+O+"*(\\d+)|))"+O+"*\\)|)","i"),needsContext:new RegExp("^"+O+"*[>+~]|"+B,"i")},K=function(e){var t=g.createElement("div");try{return e(t)}catch(n){return!1}finally{t=null}},Q=K(function(e){return e.appendChild(g.createComment("")),!e.getElementsByTagName("*").length}),G=K(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==p&&e.firstChild.getAttribute("href")==="#"}),Y=K(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return t!=="boolean"&&t!=="string"}),Z=K(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!e.getElementsByClassName||!e.getElementsByClassName("e").length?!1:(e.lastChild.className="e",e.getElementsByClassName("e").length===2)}),et=K(function(e){e.id=d+0,e.innerHTML="<a name='"+d+"'></a><div name='"+d+"'></div>",y.insertBefore(e,y.firstChild);var t=g.getElementsByName&&g.getElementsByName(d).length===2+g.getElementsByName(d+0).length;return r=!g.getElementById(d),y.removeChild(e),t});try{x.call(y.childNodes,0)[0].nodeType}catch(tt){x=function(e){var t,n=[];for(;t=this[e];e++)n.push(t);return n}}nt.matches=function(e,t){return nt(e,null,null,t)},nt.matchesSelector=function(e,t){return nt(t,null,null,[e]).length>0},s=nt.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(i===1||i===9||i===11){if(typeof e.textContent=="string")return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=s(e)}else if(i===3||i===4)return e.nodeValue}else for(;t=e[r];r++)n+=s(t);return n},o=nt.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":!1},u=nt.contains=y.contains?function(e,t){var n=e.nodeType===9?e.documentElement:e,r=t&&t.parentNode;return e===r||!!(r&&r.nodeType===1&&n.contains&&n.contains(r))}:y.compareDocumentPosition?function(e,t){return t&&!!(e.compareDocumentPosition(t)&16)}:function(e,t){while(t=t.parentNode)if(t===e)return!0;return!1},nt.attr=function(e,t){var n,r=o(e);return r||(t=t.toLowerCase()),(n=i.attrHandle[t])?n(e):r||Y?e.getAttribute(t):(n=e.getAttributeNode(t),n?typeof e[t]=="boolean"?e[t]?t:null:n.specified?n.value:null:null)},i=nt.selectors={cacheLength:50,createPseudo:N,match:J,attrHandle:G?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},find:{ID:r?function(e,t,n){if(typeof t.getElementById!==p&&!n){var r=t.getElementById(e);return r&&r.parentNode?[r]:[]}}:function(e,n,r){if(typeof n.getElementById!==p&&!r){var i=n.getElementById(e);return i?i.id===e||typeof i.getAttributeNode!==p&&i.getAttributeNode("id").value===e?[i]:t:[]}},TAG:Q?function(e,t){if(typeof t.getElementsByTagName!==p)return t.getElementsByTagName(e)}:function(e,t){var n=t.getElementsByTagName(e);if(e==="*"){var r,i=[],s=0;for(;r=n[s];s++)r.nodeType===1&&i.push(r);return i}return n},NAME:et&&function(e,t){if(typeof t.getElementsByName!==p)return t.getElementsByName(name)},CLASS:Z&&function(e,t,n){if(typeof t.getElementsByClassName!==p&&!n)return t.getElementsByClassName(e)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace($,""),e[3]=(e[4]||e[5]||"").replace($,""),e[2]==="~="&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),e[1]==="nth"?(e[2]||nt.error(e[0]),e[3]=+(e[3]?e[4]+(e[5]||1):2*(e[2]==="even"||e[2]==="odd")),e[4]=+(e[6]+e[7]||e[2]==="odd")):e[2]&&nt.error(e[0]),e},PSEUDO:function(e){var t,n;if(J.CHILD.test(e[0]))return null;if(e[3])e[2]=e[3];else if(t=e[4])q.test(t)&&(n=ut(t,!0))&&(n=t.indexOf(")",t.length-n)-t.length)&&(t=t.slice(0,n),e[0]=e[0].slice(0,n)),e[2]=t;return e.slice(0,3)}},filter:{ID:r?function(e){return e=e.replace($,""),function(t){return t.getAttribute("id")===e}}:function(e){return e=e.replace($,""),function(t){var n=typeof t.getAttributeNode!==p&&t.getAttributeNode("id");return n&&n.value===e}},TAG:function(e){return e==="*"?function(){return!0}:(e=e.replace($,"").toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=k[d][e];return t||(t=k(e,new RegExp("(^|"+O+")"+e+"("+O+"|$)"))),function(e){return t.test(e.className||typeof e.getAttribute!==p&&e.getAttribute("class")||"")}},ATTR:function(e,t,n){return function(r,i){var s=nt.attr(r,e);return s==null?t==="!=":t?(s+="",t==="="?s===n:t==="!="?s!==n:t==="^="?n&&s.indexOf(n)===0:t==="*="?n&&s.indexOf(n)>-1:t==="$="?n&&s.substr(s.length-n.length)===n:t==="~="?(" "+s+" ").indexOf(n)>-1:t==="|="?s===n||s.substr(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r){return e==="nth"?function(e){var t,i,s=e.parentNode;if(n===1&&r===0)return!0;if(s){i=0;for(t=s.firstChild;t;t=t.nextSibling)if(t.nodeType===1){i++;if(e===t)break}}return i-=r,i===n||i%n===0&&i/n>=0}:function(t){var n=t;switch(e){case"only":case"first":while(n=n.previousSibling)if(n.nodeType===1)return!1;if(e==="first")return!0;n=t;case"last":while(n=n.nextSibling)if(n.nodeType===1)return!1;return!0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||nt.error("unsupported pseudo: "+e);return r[d]?r(t):r.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?N(function(e,n){var i,s=r(e,t),o=s.length;while(o--)i=T.call(e,s[o]),e[i]=!(n[i]=s[o])}):function(e){return r(e,0,n)}):r}},pseudos:{not:N(function(e){var t=[],n=[],r=a(e.replace(j,"$1"));return r[d]?N(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)if(s=o[u])e[u]=!(t[u]=s)}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:N(function(e){return function(t){return nt(e,t).length>0}}),contains:N(function(e){return function(t){return(t.textContent||t.innerText||s(t)).indexOf(e)>-1}}),enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!i.pseudos.empty(e)},empty:function(e){var t;e=e.firstChild;while(e){if(e.nodeName>"@"||(t=e.nodeType)===3||t===4)return!1;e=e.nextSibling}return!0},header:function(e){return X.test(e.nodeName)},text:function(e){var t,n;return e.nodeName.toLowerCase()==="input"&&(t=e.type)==="text"&&((n=e.getAttribute("type"))==null||n.toLowerCase()===t)},radio:rt("radio"),checkbox:rt("checkbox"),file:rt("file"),password:rt("password"),image:rt("image"),submit:it("submit"),reset:it("reset"),button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},input:function(e){return V.test(e.nodeName)},focus:function(e){var t=e.ownerDocument;return e===t.activeElement&&(!t.hasFocus||t.hasFocus())&&(!!e.type||!!e.href)},active:function(e){return e===e.ownerDocument.activeElement},first:st(function(e,t,n){return[0]}),last:st(function(e,t,n){return[t-1]}),eq:st(function(e,t,n){return[n<0?n+t:n]}),even:st(function(e,t,n){for(var r=0;r<t;r+=2)e.push(r);return e}),odd:st(function(e,t,n){for(var r=1;r<t;r+=2)e.push(r);return e}),lt:st(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:st(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}},f=y.compareDocumentPosition?function(e,t){return e===t?(l=!0,0):(!e.compareDocumentPosition||!t.compareDocumentPosition?e.compareDocumentPosition:e.compareDocumentPosition(t)&4)?-1:1}:function(e,t){if(e===t)return l=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var n,r,i=[],s=[],o=e.parentNode,u=t.parentNode,a=o;if(o===u)return ot(e,t);if(!o)return-1;if(!u)return 1;while(a)i.unshift(a),a=a.parentNode;a=u;while(a)s.unshift(a),a=a.parentNode;n=i.length,r=s.length;for(var f=0;f<n&&f<r;f++)if(i[f]!==s[f])return ot(i[f],s[f]);return f===n?ot(e,s[f],-1):ot(i[f],t,1)},[0,0].sort(f),h=!l,nt.uniqueSort=function(e){var t,n=1;l=h,e.sort(f);if(l)for(;t=e[n];n++)t===e[n-1]&&e.splice(n--,1);return e},nt.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},a=nt.compile=function(e,t){var n,r=[],i=[],s=A[d][e];if(!s){t||(t=ut(e)),n=t.length;while(n--)s=ht(t[n]),s[d]?r.push(s):i.push(s);s=A(e,pt(i,r))}return s},g.querySelectorAll&&function(){var e,t=vt,n=/'|\\/g,r=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,i=[":focus"],s=[":active",":focus"],u=y.matchesSelector||y.mozMatchesSelector||y.webkitMatchesSelector||y.oMatchesSelector||y.msMatchesSelector;K(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||i.push("\\["+O+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||i.push(":checked")}),K(function(e){e.innerHTML="<p test=''></p>",e.querySelectorAll("[test^='']").length&&i.push("[*^$]="+O+"*(?:\"\"|'')"),e.innerHTML="<input type='hidden'/>",e.querySelectorAll(":enabled").length||i.push(":enabled",":disabled")}),i=new RegExp(i.join("|")),vt=function(e,r,s,o,u){if(!o&&!u&&(!i||!i.test(e))){var a,f,l=!0,c=d,h=r,p=r.nodeType===9&&e;if(r.nodeType===1&&r.nodeName.toLowerCase()!=="object"){a=ut(e),(l=r.getAttribute("id"))?c=l.replace(n,"\\$&"):r.setAttribute("id",c),c="[id='"+c+"'] ",f=a.length;while(f--)a[f]=c+a[f].join("");h=z.test(e)&&r.parentNode||r,p=a.join(",")}if(p)try{return S.apply(s,x.call(h.querySelectorAll(p),0)),s}catch(v){}finally{l||r.removeAttribute("id")}}return t(e,r,s,o,u)},u&&(K(function(t){e=u.call(t,"div");try{u.call(t,"[test!='']:sizzle"),s.push("!=",H)}catch(n){}}),s=new RegExp(s.join("|")),nt.matchesSelector=function(t,n){n=n.replace(r,"='$1']");if(!o(t)&&!s.test(n)&&(!i||!i.test(n)))try{var a=u.call(t,n);if(a||e||t.document&&t.document.nodeType!==11)return a}catch(f){}return nt(n,null,null,[t]).length>0})}(),i.pseudos.nth=i.pseudos.eq,i.filters=mt.prototype=i.pseudos,i.setFilters=new mt,nt.attr=v.attr,v.find=nt,v.expr=nt.selectors,v.expr[":"]=v.expr.pseudos,v.unique=nt.uniqueSort,v.text=nt.getText,v.isXMLDoc=nt.isXML,v.contains=nt.contains}(e);var nt=/Until$/,rt=/^(?:parents|prev(?:Until|All))/,it=/^.[^:#\[\.,]*$/,st=v.expr.match.needsContext,ot={children:!0,contents:!0,next:!0,prev:!0};v.fn.extend({find:function(e){var t,n,r,i,s,o,u=this;if(typeof e!="string")return v(e).filter(function(){for(t=0,n=u.length;t<n;t++)if(v.contains(u[t],this))return!0});o=this.pushStack("","find",e);for(t=0,n=this.length;t<n;t++){r=o.length,v.find(e,this[t],o);if(t>0)for(i=r;i<o.length;i++)for(s=0;s<r;s++)if(o[s]===o[i]){o.splice(i--,1);break}}return o},has:function(e){var t,n=v(e,this),r=n.length;return this.filter(function(){for(t=0;t<r;t++)if(v.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ft(this,e,!1),"not",e)},filter:function(e){return this.pushStack(ft(this,e,!0),"filter",e)},is:function(e){return!!e&&(typeof e=="string"?st.test(e)?v(e,this.context).index(this[0])>=0:v.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n,r=0,i=this.length,s=[],o=st.test(e)||typeof e!="string"?v(e,t||this.context):0;for(;r<i;r++){n=this[r];while(n&&n.ownerDocument&&n!==t&&n.nodeType!==11){if(o?o.index(n)>-1:v.find.matchesSelector(n,e)){s.push(n);break}n=n.parentNode}}return s=s.length>1?v.unique(s):s,this.pushStack(s,"closest",e)},index:function(e){return e?typeof e=="string"?v.inArray(this[0],v(e)):v.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var n=typeof e=="string"?v(e,t):v.makeArray(e&&e.nodeType?[e]:e),r=v.merge(this.get(),n);return this.pushStack(ut(n[0])||ut(r[0])?r:v.unique(r))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}}),v.fn.andSelf=v.fn.addBack,v.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return v.dir(e,"parentNode")},parentsUntil:function(e,t,n){return v.dir(e,"parentNode",n)},next:function(e){return at(e,"nextSibling")},prev:function(e){return at(e,"previousSibling")},nextAll:function(e){return v.dir(e,"nextSibling")},prevAll:function(e){return v.dir(e,"previousSibling")},nextUntil:function(e,t,n){return v.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return v.dir(e,"previousSibling",n)},siblings:function(e){return v.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return v.sibling(e.firstChild)},contents:function(e){return v.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:v.merge([],e.childNodes)}},function(e,t){v.fn[e]=function(n,r){var i=v.map(this,t,n);return nt.test(e)||(r=n),r&&typeof r=="string"&&(i=v.filter(r,i)),i=this.length>1&&!ot[e]?v.unique(i):i,this.length>1&&rt.test(e)&&(i=i.reverse()),this.pushStack(i,e,l.call(arguments).join(","))}}),v.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),t.length===1?v.find.matchesSelector(t[0],e)?[t[0]]:[]:v.find.matches(e,t)},dir:function(e,n,r){var i=[],s=e[n];while(s&&s.nodeType!==9&&(r===t||s.nodeType!==1||!v(s).is(r)))s.nodeType===1&&i.push(s),s=s[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n}});var ct="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",ht=/ jQuery\d+="(?:null|\d+)"/g,pt=/^\s+/,dt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,vt=/<([\w:]+)/,mt=/<tbody/i,gt=/<|&#?\w+;/,yt=/<(?:script|style|link)/i,bt=/<(?:script|object|embed|option|style)/i,wt=new RegExp("<(?:"+ct+")[\\s/>]","i"),Et=/^(?:checkbox|radio)$/,St=/checked\s*(?:[^=]|=\s*.checked.)/i,xt=/\/(java|ecma)script/i,Tt=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,Nt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},Ct=lt(i),kt=Ct.appendChild(i.createElement("div"));Nt.optgroup=Nt.option,Nt.tbody=Nt.tfoot=Nt.colgroup=Nt.caption=Nt.thead,Nt.th=Nt.td,v.support.htmlSerialize||(Nt._default=[1,"X<div>","</div>"]),v.fn.extend({text:function(e){return v.access(this,function(e){return e===t?v.text(this):this.empty().append((this[0]&&this[0].ownerDocument||i).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(v.isFunction(e))return this.each(function(t){v(this).wrapAll(e.call(this,t))});if(this[0]){var t=v(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&e.firstChild.nodeType===1)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return v.isFunction(e)?this.each(function(t){v(this).wrapInner(e.call(this,t))}):this.each(function(){var t=v(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=v.isFunction(e);return this.each(function(n){v(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){v.nodeName(this,"body")||v(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11)&&this.insertBefore(e,this.firstChild)})},before:function(){if(!ut(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=v.clean(arguments);return this.pushStack(v.merge(e,this),"before",this.selector)}},after:function(){if(!ut(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=v.clean(arguments);return this.pushStack(v.merge(this,e),"after",this.selector)}},remove:function(e,t){var n,r=0;for(;(n=this[r])!=null;r++)if(!e||v.filter(e,[n]).length)!t&&n.nodeType===1&&(v.cleanData(n.getElementsByTagName("*")),v.cleanData([n])),n.parentNode&&n.parentNode.removeChild(n);return this},empty:function(){var e,t=0;for(;(e=this[t])!=null;t++){e.nodeType===1&&v.cleanData(e.getElementsByTagName("*"));while(e.firstChild)e.removeChild(e.firstChild)}return this},clone:function(e,t){return e=e==null?!1:e,t=t==null?e:t,this.map(function(){return v.clone(this,e,t)})},html:function(e){return v.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return n.nodeType===1?n.innerHTML.replace(ht,""):t;if(typeof e=="string"&&!yt.test(e)&&(v.support.htmlSerialize||!wt.test(e))&&(v.support.leadingWhitespace||!pt.test(e))&&!Nt[(vt.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(dt,"<$1></$2>");try{for(;r<i;r++)n=this[r]||{},n.nodeType===1&&(v.cleanData(n.getElementsByTagName("*")),n.innerHTML=e);n=0}catch(s){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){return ut(this[0])?this.length?this.pushStack(v(v.isFunction(e)?e():e),"replaceWith",e):this:v.isFunction(e)?this.each(function(t){var n=v(this),r=n.html();n.replaceWith(e.call(this,t,r))}):(typeof e!="string"&&(e=v(e).detach()),this.each(function(){var t=this.nextSibling,n=this.parentNode;v(this).remove(),t?v(t).before(e):v(n).append(e)}))},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){e=[].concat.apply([],e);var i,s,o,u,a=0,f=e[0],l=[],c=this.length;if(!v.support.checkClone&&c>1&&typeof f=="string"&&St.test(f))return this.each(function(){v(this).domManip(e,n,r)});if(v.isFunction(f))return this.each(function(i){var s=v(this);e[0]=f.call(this,i,n?s.html():t),s.domManip(e,n,r)});if(this[0]){i=v.buildFragment(e,this,l),o=i.fragment,s=o.firstChild,o.childNodes.length===1&&(o=s);if(s){n=n&&v.nodeName(s,"tr");for(u=i.cacheable||c-1;a<c;a++)r.call(n&&v.nodeName(this[a],"table")?Lt(this[a],"tbody"):this[a],a===u?o:v.clone(o,!0,!0))}o=s=null,l.length&&v.each(l,function(e,t){t.src?v.ajax?v.ajax({url:t.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):v.error("no ajax"):v.globalEval((t.text||t.textContent||t.innerHTML||"").replace(Tt,"")),t.parentNode&&t.parentNode.removeChild(t)})}return this}}),v.buildFragment=function(e,n,r){var s,o,u,a=e[0];return n=n||i,n=!n.nodeType&&n[0]||n,n=n.ownerDocument||n,e.length===1&&typeof a=="string"&&a.length<512&&n===i&&a.charAt(0)==="<"&&!bt.test(a)&&(v.support.checkClone||!St.test(a))&&(v.support.html5Clone||!wt.test(a))&&(o=!0,s=v.fragments[a],u=s!==t),s||(s=n.createDocumentFragment(),v.clean(e,n,s,r),o&&(v.fragments[a]=u&&s)),{fragment:s,cacheable:o}},v.fragments={},v.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){v.fn[e]=function(n){var r,i=0,s=[],o=v(n),u=o.length,a=this.length===1&&this[0].parentNode;if((a==null||a&&a.nodeType===11&&a.childNodes.length===1)&&u===1)return o[t](this[0]),this;for(;i<u;i++)r=(i>0?this.clone(!0):this).get(),v(o[i])[t](r),s=s.concat(r);return this.pushStack(s,e,o.selector)}}),v.extend({clone:function(e,t,n){var r,i,s,o;v.support.html5Clone||v.isXMLDoc(e)||!wt.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(kt.innerHTML=e.outerHTML,kt.removeChild(o=kt.firstChild));if((!v.support.noCloneEvent||!v.support.noCloneChecked)&&(e.nodeType===1||e.nodeType===11)&&!v.isXMLDoc(e)){Ot(e,o),r=Mt(e),i=Mt(o);for(s=0;r[s];++s)i[s]&&Ot(r[s],i[s])}if(t){At(e,o);if(n){r=Mt(e),i=Mt(o);for(s=0;r[s];++s)At(r[s],i[s])}}return r=i=null,o},clean:function(e,t,n,r){var s,o,u,a,f,l,c,h,p,d,m,g,y=t===i&&Ct,b=[];if(!t||typeof t.createDocumentFragment=="undefined")t=i;for(s=0;(u=e[s])!=null;s++){typeof u=="number"&&(u+="");if(!u)continue;if(typeof u=="string")if(!gt.test(u))u=t.createTextNode(u);else{y=y||lt(t),c=t.createElement("div"),y.appendChild(c),u=u.replace(dt,"<$1></$2>"),a=(vt.exec(u)||["",""])[1].toLowerCase(),f=Nt[a]||Nt._default,l=f[0],c.innerHTML=f[1]+u+f[2];while(l--)c=c.lastChild;if(!v.support.tbody){h=mt.test(u),p=a==="table"&&!h?c.firstChild&&c.firstChild.childNodes:f[1]==="<table>"&&!h?c.childNodes:[];for(o=p.length-1;o>=0;--o)v.nodeName(p[o],"tbody")&&!p[o].childNodes.length&&p[o].parentNode.removeChild(p[o])}!v.support.leadingWhitespace&&pt.test(u)&&c.insertBefore(t.createTextNode(pt.exec(u)[0]),c.firstChild),u=c.childNodes,c.parentNode.removeChild(c)}u.nodeType?b.push(u):v.merge(b,u)}c&&(u=c=y=null);if(!v.support.appendChecked)for(s=0;(u=b[s])!=null;s++)v.nodeName(u,"input")?_t(u):typeof u.getElementsByTagName!="undefined"&&v.grep(u.getElementsByTagName("input"),_t);if(n){m=function(e){if(!e.type||xt.test(e.type))return r?r.push(e.parentNode?e.parentNode.removeChild(e):e):n.appendChild(e)};for(s=0;(u=b[s])!=null;s++)if(!v.nodeName(u,"script")||!m(u))n.appendChild(u),typeof u.getElementsByTagName!="undefined"&&(g=v.grep(v.merge([],u.getElementsByTagName("script")),m),b.splice.apply(b,[s+1,0].concat(g)),s+=g.length)}return b},cleanData:function(e,t){var n,r,i,s,o=0,u=v.expando,a=v.cache,f=v.support.deleteExpando,l=v.event.special;for(;(i=e[o])!=null;o++)if(t||v.acceptData(i)){r=i[u],n=r&&a[r];if(n){if(n.events)for(s in n.events)l[s]?v.event.remove(i,s):v.removeEvent(i,s,n.handle);a[r]&&(delete a[r],f?delete i[u]:i.removeAttribute?i.removeAttribute(u):i[u]=null,v.deletedIds.push(r))}}}}),function(){var e,t;v.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},e=v.uaMatch(o.userAgent),t={},e.browser&&(t[e.browser]=!0,t.version=e.version),t.chrome?t.webkit=!0:t.webkit&&(t.safari=!0),v.browser=t,v.sub=function(){function e(t,n){return new e.fn.init(t,n)}v.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(r,i){return i&&i instanceof v&&!(i instanceof e)&&(i=e(i)),v.fn.init.call(this,r,i,t)},e.fn.init.prototype=e.fn;var t=e(i);return e}}();var Dt,Pt,Ht,Bt=/alpha\([^)]*\)/i,jt=/opacity=([^)]*)/,Ft=/^(top|right|bottom|left)$/,It=/^(none|table(?!-c[ea]).+)/,qt=/^margin/,Rt=new RegExp("^("+m+")(.*)$","i"),Ut=new RegExp("^("+m+")(?!px)[a-z%]+$","i"),zt=new RegExp("^([-+])=("+m+")","i"),Wt={},Xt={position:"absolute",visibility:"hidden",display:"block"},Vt={letterSpacing:0,fontWeight:400},$t=["Top","Right","Bottom","Left"],Jt=["Webkit","O","Moz","ms"],Kt=v.fn.toggle;v.fn.extend({css:function(e,n){return v.access(this,function(e,n,r){return r!==t?v.style(e,n,r):v.css(e,n)},e,n,arguments.length>1)},show:function(){return Yt(this,!0)},hide:function(){return Yt(this)},toggle:function(e,t){var n=typeof e=="boolean";return v.isFunction(e)&&v.isFunction(t)?Kt.apply(this,arguments):this.each(function(){(n?e:Gt(this))?v(this).show():v(this).hide()})}}),v.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Dt(e,"opacity");return n===""?"1":n}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":v.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(!e||e.nodeType===3||e.nodeType===8||!e.style)return;var s,o,u,a=v.camelCase(n),f=e.style;n=v.cssProps[a]||(v.cssProps[a]=Qt(f,a)),u=v.cssHooks[n]||v.cssHooks[a];if(r===t)return u&&"get"in u&&(s=u.get(e,!1,i))!==t?s:f[n];o=typeof r,o==="string"&&(s=zt.exec(r))&&(r=(s[1]+1)*s[2]+parseFloat(v.css(e,n)),o="number");if(r==null||o==="number"&&isNaN(r))return;o==="number"&&!v.cssNumber[a]&&(r+="px");if(!u||!("set"in u)||(r=u.set(e,r,i))!==t)try{f[n]=r}catch(l){}},css:function(e,n,r,i){var s,o,u,a=v.camelCase(n);return n=v.cssProps[a]||(v.cssProps[a]=Qt(e.style,a)),u=v.cssHooks[n]||v.cssHooks[a],u&&"get"in u&&(s=u.get(e,!0,i)),s===t&&(s=Dt(e,n)),s==="normal"&&n in Vt&&(s=Vt[n]),r||i!==t?(o=parseFloat(s),r||v.isNumeric(o)?o||0:s):s},swap:function(e,t,n){var r,i,s={};for(i in t)s[i]=e.style[i],e.style[i]=t[i];r=n.call(e);for(i in t)e.style[i]=s[i];return r}}),e.getComputedStyle?Dt=function(t,n){var r,i,s,o,u=e.getComputedStyle(t,null),a=t.style;return u&&(r=u[n],r===""&&!v.contains(t.ownerDocument,t)&&(r=v.style(t,n)),Ut.test(r)&&qt.test(n)&&(i=a.width,s=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=r,r=u.width,a.width=i,a.minWidth=s,a.maxWidth=o)),r}:i.documentElement.currentStyle&&(Dt=function(e,t){var n,r,i=e.currentStyle&&e.currentStyle[t],s=e.style;return i==null&&s&&s[t]&&(i=s[t]),Ut.test(i)&&!Ft.test(t)&&(n=s.left,r=e.runtimeStyle&&e.runtimeStyle.left,r&&(e.runtimeStyle.left=e.currentStyle.left),s.left=t==="fontSize"?"1em":i,i=s.pixelLeft+"px",s.left=n,r&&(e.runtimeStyle.left=r)),i===""?"auto":i}),v.each(["height","width"],function(e,t){v.cssHooks[t]={get:function(e,n,r){if(n)return e.offsetWidth===0&&It.test(Dt(e,"display"))?v.swap(e,Xt,function(){return tn(e,t,r)}):tn(e,t,r)},set:function(e,n,r){return Zt(e,n,r?en(e,t,r,v.support.boxSizing&&v.css(e,"boxSizing")==="border-box"):0)}}}),v.support.opacity||(v.cssHooks.opacity={get:function(e,t){return jt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=v.isNumeric(t)?"alpha(opacity="+t*100+")":"",s=r&&r.filter||n.filter||"";n.zoom=1;if(t>=1&&v.trim(s.replace(Bt,""))===""&&n.removeAttribute){n.removeAttribute("filter");if(r&&!r.filter)return}n.filter=Bt.test(s)?s.replace(Bt,i):s+" "+i}}),v(function(){v.support.reliableMarginRight||(v.cssHooks.marginRight={get:function(e,t){return v.swap(e,{display:"inline-block"},function(){if(t)return Dt(e,"marginRight")})}}),!v.support.pixelPosition&&v.fn.position&&v.each(["top","left"],function(e,t){v.cssHooks[t]={get:function(e,n){if(n){var r=Dt(e,t);return Ut.test(r)?v(e).position()[t]+"px":r}}}})}),v.expr&&v.expr.filters&&(v.expr.filters.hidden=function(e){return e.offsetWidth===0&&e.offsetHeight===0||!v.support.reliableHiddenOffsets&&(e.style&&e.style.display||Dt(e,"display"))==="none"},v.expr.filters.visible=function(e){return!v.expr.filters.hidden(e)}),v.each({margin:"",padding:"",border:"Width"},function(e,t){v.cssHooks[e+t]={expand:function(n){var r,i=typeof n=="string"?n.split(" "):[n],s={};for(r=0;r<4;r++)s[e+$t[r]+t]=i[r]||i[r-2]||i[0];return s}},qt.test(e)||(v.cssHooks[e+t].set=Zt)});var rn=/%20/g,sn=/\[\]$/,on=/\r?\n/g,un=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,an=/^(?:select|textarea)/i;v.fn.extend({serialize:function(){return v.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?v.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||an.test(this.nodeName)||un.test(this.type))}).map(function(e,t){var n=v(this).val();return n==null?null:v.isArray(n)?v.map(n,function(e,n){return{name:t.name,value:e.replace(on,"\r\n")}}):{name:t.name,value:n.replace(on,"\r\n")}}).get()}}),v.param=function(e,n){var r,i=[],s=function(e,t){t=v.isFunction(t)?t():t==null?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};n===t&&(n=v.ajaxSettings&&v.ajaxSettings.traditional);if(v.isArray(e)||e.jquery&&!v.isPlainObject(e))v.each(e,function(){s(this.name,this.value)});else for(r in e)fn(r,e[r],n,s);return i.join("&").replace(rn,"+")};var ln,cn,hn=/#.*$/,pn=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,dn=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,vn=/^(?:GET|HEAD)$/,mn=/^\/\//,gn=/\?/,yn=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bn=/([?&])_=[^&]*/,wn=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,En=v.fn.load,Sn={},xn={},Tn=["*/"]+["*"];try{cn=s.href}catch(Nn){cn=i.createElement("a"),cn.href="",cn=cn.href}ln=wn.exec(cn.toLowerCase())||[],v.fn.load=function(e,n,r){if(typeof e!="string"&&En)return En.apply(this,arguments);if(!this.length)return this;var i,s,o,u=this,a=e.indexOf(" ");return a>=0&&(i=e.slice(a,e.length),e=e.slice(0,a)),v.isFunction(n)?(r=n,n=t):n&&typeof n=="object"&&(s="POST"),v.ajax({url:e,type:s,dataType:"html",data:n,complete:function(e,t){r&&u.each(r,o||[e.responseText,t,e])}}).done(function(e){o=arguments,u.html(i?v("<div>").append(e.replace(yn,"")).find(i):e)}),this},v.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){v.fn[t]=function(e){return this.on(t,e)}}),v.each(["get","post"],function(e,n){v[n]=function(e,r,i,s){return v.isFunction(r)&&(s=s||i,i=r,r=t),v.ajax({type:n,url:e,data:r,success:i,dataType:s})}}),v.extend({getScript:function(e,n){return v.get(e,t,n,"script")},getJSON:function(e,t,n){return v.get(e,t,n,"json")},ajaxSetup:function(e,t){return t?Ln(e,v.ajaxSettings):(t=e,e=v.ajaxSettings),Ln(e,t),e},ajaxSettings:{url:cn,isLocal:dn.test(ln[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Tn},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":v.parseJSON,"text xml":v.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:Cn(Sn),ajaxTransport:Cn(xn),ajax:function(e,n){function T(e,n,s,a){var l,y,b,w,S,T=n;if(E===2)return;E=2,u&&clearTimeout(u),o=t,i=a||"",x.readyState=e>0?4:0,s&&(w=An(c,x,s));if(e>=200&&e<300||e===304)c.ifModified&&(S=x.getResponseHeader("Last-Modified"),S&&(v.lastModified[r]=S),S=x.getResponseHeader("Etag"),S&&(v.etag[r]=S)),e===304?(T="notmodified",l=!0):(l=On(c,w),T=l.state,y=l.data,b=l.error,l=!b);else{b=T;if(!T||e)T="error",e<0&&(e=0)}x.status=e,x.statusText=(n||T)+"",l?d.resolveWith(h,[y,T,x]):d.rejectWith(h,[x,T,b]),x.statusCode(g),g=t,f&&p.trigger("ajax"+(l?"Success":"Error"),[x,c,l?y:b]),m.fireWith(h,[x,T]),f&&(p.trigger("ajaxComplete",[x,c]),--v.active||v.event.trigger("ajaxStop"))}typeof e=="object"&&(n=e,e=t),n=n||{};var r,i,s,o,u,a,f,l,c=v.ajaxSetup({},n),h=c.context||c,p=h!==c&&(h.nodeType||h instanceof v)?v(h):v.event,d=v.Deferred(),m=v.Callbacks("once memory"),g=c.statusCode||{},b={},w={},E=0,S="canceled",x={readyState:0,setRequestHeader:function(e,t){if(!E){var n=e.toLowerCase();e=w[n]=w[n]||e,b[e]=t}return this},getAllResponseHeaders:function(){return E===2?i:null},getResponseHeader:function(e){var n;if(E===2){if(!s){s={};while(n=pn.exec(i))s[n[1].toLowerCase()]=n[2]}n=s[e.toLowerCase()]}return n===t?null:n},overrideMimeType:function(e){return E||(c.mimeType=e),this},abort:function(e){return e=e||S,o&&o.abort(e),T(0,e),this}};d.promise(x),x.success=x.done,x.error=x.fail,x.complete=m.add,x.statusCode=function(e){if(e){var t;if(E<2)for(t in e)g[t]=[g[t],e[t]];else t=e[x.status],x.always(t)}return this},c.url=((e||c.url)+"").replace(hn,"").replace(mn,ln[1]+"//"),c.dataTypes=v.trim(c.dataType||"*").toLowerCase().split(y),c.crossDomain==null&&(a=wn.exec(c.url.toLowerCase())||!1,c.crossDomain=a&&a.join(":")+(a[3]?"":a[1]==="http:"?80:443)!==ln.join(":")+(ln[3]?"":ln[1]==="http:"?80:443)),c.data&&c.processData&&typeof c.data!="string"&&(c.data=v.param(c.data,c.traditional)),kn(Sn,c,n,x);if(E===2)return x;f=c.global,c.type=c.type.toUpperCase(),c.hasContent=!vn.test(c.type),f&&v.active++===0&&v.event.trigger("ajaxStart");if(!c.hasContent){c.data&&(c.url+=(gn.test(c.url)?"&":"?")+c.data,delete c.data),r=c.url;if(c.cache===!1){var N=v.now(),C=c.url.replace(bn,"$1_="+N);c.url=C+(C===c.url?(gn.test(c.url)?"&":"?")+"_="+N:"")}}(c.data&&c.hasContent&&c.contentType!==!1||n.contentType)&&x.setRequestHeader("Content-Type",c.contentType),c.ifModified&&(r=r||c.url,v.lastModified[r]&&x.setRequestHeader("If-Modified-Since",v.lastModified[r]),v.etag[r]&&x.setRequestHeader("If-None-Match",v.etag[r])),x.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+(c.dataTypes[0]!=="*"?", "+Tn+"; q=0.01":""):c.accepts["*"]);for(l in c.headers)x.setRequestHeader(l,c.headers[l]);if(!c.beforeSend||c.beforeSend.call(h,x,c)!==!1&&E!==2){S="abort";for(l in{success:1,error:1,complete:1})x[l](c[l]);o=kn(xn,c,n,x);if(!o)T(-1,"No Transport");else{x.readyState=1,f&&p.trigger("ajaxSend",[x,c]),c.async&&c.timeout>0&&(u=setTimeout(function(){x.abort("timeout")},c.timeout));try{E=1,o.send(b,T)}catch(k){if(!(E<2))throw k;T(-1,k)}}return x}return x.abort()},active:0,lastModified:{},etag:{}});var Mn=[],_n=/\?/,Dn=/(=)\?(?=&|$)|\?\?/,Pn=v.now();v.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Mn.pop()||v.expando+"_"+Pn++;return this[e]=!0,e}}),v.ajaxPrefilter("json jsonp",function(n,r,i){var s,o,u,a=n.data,f=n.url,l=n.jsonp!==!1,c=l&&Dn.test(f),h=l&&!c&&typeof a=="string"&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Dn.test(a);if(n.dataTypes[0]==="jsonp"||c||h)return s=n.jsonpCallback=v.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,o=e[s],c?n.url=f.replace(Dn,"$1"+s):h?n.data=a.replace(Dn,"$1"+s):l&&(n.url+=(_n.test(f)?"&":"?")+n.jsonp+"="+s),n.converters["script json"]=function(){return u||v.error(s+" was not called"),u[0]},n.dataTypes[0]="json",e[s]=function(){u=arguments},i.always(function(){e[s]=o,n[s]&&(n.jsonpCallback=r.jsonpCallback,Mn.push(s)),u&&v.isFunction(o)&&o(u[0]),u=o=t}),"script"}),v.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return v.globalEval(e),e}}}),v.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),v.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=i.head||i.getElementsByTagName("head")[0]||i.documentElement;return{send:function(s,o){n=i.createElement("script"),n.async="async",e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,i){if(i||!n.readyState||/loaded|complete/.test(n.readyState))n.onload=n.onreadystatechange=null,r&&n.parentNode&&r.removeChild(n),n=t,i||o(200,"success")},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(0,1)}}}});var Hn,Bn=e.ActiveXObject?function(){for(var e in Hn)Hn[e](0,1)}:!1,jn=0;v.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&Fn()||In()}:Fn,function(e){v.extend(v.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(v.ajaxSettings.xhr()),v.support.ajax&&v.ajaxTransport(function(n){if(!n.crossDomain||v.support.cors){var r;return{send:function(i,s){var o,u,a=n.xhr();n.username?a.open(n.type,n.url,n.async,n.username,n.password):a.open(n.type,n.url,n.async);if(n.xhrFields)for(u in n.xhrFields)a[u]=n.xhrFields[u];n.mimeType&&a.overrideMimeType&&a.overrideMimeType(n.mimeType),!n.crossDomain&&!i["X-Requested-With"]&&(i["X-Requested-With"]="XMLHttpRequest");try{for(u in i)a.setRequestHeader(u,i[u])}catch(f){}a.send(n.hasContent&&n.data||null),r=function(e,i){var u,f,l,c,h;try{if(r&&(i||a.readyState===4)){r=t,o&&(a.onreadystatechange=v.noop,Bn&&delete Hn[o]);if(i)a.readyState!==4&&a.abort();else{u=a.status,l=a.getAllResponseHeaders(),c={},h=a.responseXML,h&&h.documentElement&&(c.xml=h);try{c.text=a.responseText}catch(e){}try{f=a.statusText}catch(p){f=""}!u&&n.isLocal&&!n.crossDomain?u=c.text?200:404:u===1223&&(u=204)}}}catch(d){i||s(-1,d)}c&&s(u,f,c,l)},n.async?a.readyState===4?setTimeout(r,0):(o=++jn,Bn&&(Hn||(Hn={},v(e).unload(Bn)),Hn[o]=r),a.onreadystatechange=r):r()},abort:function(){r&&r(0,1)}}}});var qn,Rn,Un=/^(?:toggle|show|hide)$/,zn=new RegExp("^(?:([-+])=|)("+m+")([a-z%]*)$","i"),Wn=/queueHooks$/,Xn=[Gn],Vn={"*":[function(e,t){var n,r,i=this.createTween(e,t),s=zn.exec(t),o=i.cur(),u=+o||0,a=1,f=20;if(s){n=+s[2],r=s[3]||(v.cssNumber[e]?"":"px");if(r!=="px"&&u){u=v.css(i.elem,e,!0)||n||1;do a=a||".5",u/=a,v.style(i.elem,e,u+r);while(a!==(a=i.cur()/o)&&a!==1&&--f)}i.unit=r,i.start=u,i.end=s[1]?u+(s[1]+1)*n:n}return i}]};v.Animation=v.extend(Kn,{tweener:function(e,t){v.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;r<i;r++)n=e[r],Vn[n]=Vn[n]||[],Vn[n].unshift(t)},prefilter:function(e,t){t?Xn.unshift(e):Xn.push(e)}}),v.Tween=Yn,Yn.prototype={constructor:Yn,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(v.cssNumber[n]?"":"px")},cur:function(){var e=Yn.propHooks[this.prop];return e&&e.get?e.get(this):Yn.propHooks._default.get(this)},run:function(e){var t,n=Yn.propHooks[this.prop];return this.options.duration?this.pos=t=v.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Yn.propHooks._default.set(this),this}},Yn.prototype.init.prototype=Yn.prototype,Yn.propHooks={_default:{get:function(e){var t;return e.elem[e.prop]==null||!!e.elem.style&&e.elem.style[e.prop]!=null?(t=v.css(e.elem,e.prop,!1,""),!t||t==="auto"?0:t):e.elem[e.prop]},set:function(e){v.fx.step[e.prop]?v.fx.step[e.prop](e):e.elem.style&&(e.elem.style[v.cssProps[e.prop]]!=null||v.cssHooks[e.prop])?v.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Yn.propHooks.scrollTop=Yn.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},v.each(["toggle","show","hide"],function(e,t){var n=v.fn[t];v.fn[t]=function(r,i,s){return r==null||typeof r=="boolean"||!e&&v.isFunction(r)&&v.isFunction(i)?n.apply(this,arguments):this.animate(Zn(t,!0),r,i,s)}}),v.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Gt).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=v.isEmptyObject(e),s=v.speed(t,n,r),o=function(){var t=Kn(this,v.extend({},e),s);i&&t.stop(!0)};return i||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return typeof e!="string"&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=e!=null&&e+"queueHooks",s=v.timers,o=v._data(this);if(n)o[n]&&o[n].stop&&i(o[n]);else for(n in o)o[n]&&o[n].stop&&Wn.test(n)&&i(o[n]);for(n=s.length;n--;)s[n].elem===this&&(e==null||s[n].queue===e)&&(s[n].anim.stop(r),t=!1,s.splice(n,1));(t||!r)&&v.dequeue(this,e)})}}),v.each({slideDown:Zn("show"),slideUp:Zn("hide"),slideToggle:Zn("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){v.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),v.speed=function(e,t,n){var r=e&&typeof e=="object"?v.extend({},e):{complete:n||!n&&t||v.isFunction(e)&&e,duration:e,easing:n&&t||t&&!v.isFunction(t)&&t};r.duration=v.fx.off?0:typeof r.duration=="number"?r.duration:r.duration in v.fx.speeds?v.fx.speeds[r.duration]:v.fx.speeds._default;if(r.queue==null||r.queue===!0)r.queue="fx";return r.old=r.complete,r.complete=function(){v.isFunction(r.old)&&r.old.call(this),r.queue&&v.dequeue(this,r.queue)},r},v.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},v.timers=[],v.fx=Yn.prototype.init,v.fx.tick=function(){var e,t=v.timers,n=0;for(;n<t.length;n++)e=t[n],!e()&&t[n]===e&&t.splice(n--,1);t.length||v.fx.stop()},v.fx.timer=function(e){e()&&v.timers.push(e)&&!Rn&&(Rn=setInterval(v.fx.tick,v.fx.interval))},v.fx.interval=13,v.fx.stop=function(){clearInterval(Rn),Rn=null},v.fx.speeds={slow:600,fast:200,_default:400},v.fx.step={},v.expr&&v.expr.filters&&(v.expr.filters.animated=function(e){return v.grep(v.timers,function(t){return e===t.elem}).length});var er=/^(?:body|html)$/i;v.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){v.offset.setOffset(this,e,t)});var n,r,i,s,o,u,a,f={top:0,left:0},l=this[0],c=l&&l.ownerDocument;if(!c)return;return(r=c.body)===l?v.offset.bodyOffset(l):(n=c.documentElement,v.contains(n,l)?(typeof l.getBoundingClientRect!="undefined"&&(f=l.getBoundingClientRect()),i=tr(c),s=n.clientTop||r.clientTop||0,o=n.clientLeft||r.clientLeft||0,u=i.pageYOffset||n.scrollTop,a=i.pageXOffset||n.scrollLeft,{top:f.top+u-s,left:f.left+a-o}):f)},v.offset={bodyOffset:function(e){var t=e.offsetTop,n=e.offsetLeft;return v.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(v.css(e,"marginTop"))||0,n+=parseFloat(v.css(e,"marginLeft"))||0),{top:t,left:n}},setOffset:function(e,t,n){var r=v.css(e,"position");r==="static"&&(e.style.position="relative");var i=v(e),s=i.offset(),o=v.css(e,"top"),u=v.css(e,"left"),a=(r==="absolute"||r==="fixed")&&v.inArray("auto",[o,u])>-1,f={},l={},c,h;a?(l=i.position(),c=l.top,h=l.left):(c=parseFloat(o)||0,h=parseFloat(u)||0),v.isFunction(t)&&(t=t.call(e,n,s)),t.top!=null&&(f.top=t.top-s.top+c),t.left!=null&&(f.left=t.left-s.left+h),"using"in t?t.using.call(e,f):i.css(f)}},v.fn.extend({position:function(){if(!this[0])return;var e=this[0],t=this.offsetParent(),n=this.offset(),r=er.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(v.css(e,"marginTop"))||0,n.left-=parseFloat(v.css(e,"marginLeft"))||0,r.top+=parseFloat(v.css(t[0],"borderTopWidth"))||0,r.left+=parseFloat(v.css(t[0],"borderLeftWidth"))||0,{top:n.top-r.top,left:n.left-r.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||i.body;while(e&&!er.test(e.nodeName)&&v.css(e,"position")==="static")e=e.offsetParent;return e||i.body})}}),v.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);v.fn[e]=function(i){return v.access(this,function(e,i,s){var o=tr(e);if(s===t)return o?n in o?o[n]:o.document.documentElement[i]:e[i];o?o.scrollTo(r?v(o).scrollLeft():s,r?s:v(o).scrollTop()):e[i]=s},e,i,arguments.length,null)}}),v.each({Height:"height",Width:"width"},function(e,n){v.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){v.fn[i]=function(i,s){var o=arguments.length&&(r||typeof i!="boolean"),u=r||(i===!0||s===!0?"margin":"border");return v.access(this,function(n,r,i){var s;return v.isWindow(n)?n.document.documentElement["client"+e]:n.nodeType===9?(s=n.documentElement,Math.max(n.body["scroll"+e],s["scroll"+e],n.body["offset"+e],s["offset"+e],s["client"+e])):i===t?v.css(n,r,i,u):v.style(n,r,i,u)},n,o?i:t,o,null)}})}),e.jQuery=e.$=v,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return v})})(window),define("box2d",[],function(){var e={};(function(e,t){function n(){}!(Object.prototype.defineProperty instanceof Function)&&Object.prototype.__defineGetter__ instanceof Function&&Object.prototype.__defineSetter__ instanceof Function&&(Object.defineProperty=function(e,t,n){n.get instanceof Function&&e.__defineGetter__(t,n.get),n.set instanceof Function&&e.__defineSetter__(t,n.set)}),e.inherit=function(e,t){var r=e;n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=r},e.generateCallback=function(t,n){return function(){n.apply(t,arguments)}},e.NVector=function(n){n===t&&(n=0);var r=new Array(n||0);for(var i=0;i<n;++i)r[i]=0;return r},e.is=function(n,r){return n===null?!1:r instanceof Function&&n instanceof r?!0:n.constructor.__implements!=t&&n.constructor.__implements[r]?!0:!1},e.parseUInt=function(e){return Math.abs(parseInt(e))}})(e);var t=Array,n=e.NVector;typeof e=="undefined"&&(e={}),typeof e.Collision=="undefined"&&(e.Collision={}),typeof e.Collision.Shapes=="undefined"&&(e.Collision.Shapes={}),typeof e.Common=="undefined"&&(e.Common={}),typeof e.Common.Math=="undefined"&&(e.Common.Math={}),typeof e.Dynamics=="undefined"&&(e.Dynamics={}),typeof e.Dynamics.Contacts=="undefined"&&(e.Dynamics.Contacts={}),typeof e.Dynamics.Controllers=="undefined"&&(e.Dynamics.Controllers={}),typeof e.Dynamics.Joints=="undefined"&&(e.Dynamics.Joints={}),function(){function t(){t.b2AABB.apply(this,arguments)}function n(){n.b2Bound.apply(this,arguments)}function r(){r.b2BoundValues.apply(this,arguments),this.constructor===r&&this.b2BoundValues.apply(this,arguments)}function i(){i.b2Collision.apply(this,arguments)}function s(){s.b2ContactID.apply(this,arguments),this.constructor===s&&this.b2ContactID.apply(this,arguments)}function o(){o.b2ContactPoint.apply(this,arguments)}function u(){u.b2Distance.apply(this,arguments)}function a(){a.b2DistanceInput.apply(this,arguments)}function f(){f.b2DistanceOutput.apply(this,arguments)}function l(){l.b2DistanceProxy.apply(this,arguments)}function c(){c.b2DynamicTree.apply(this,arguments),this.constructor===c&&this.b2DynamicTree.apply(this,arguments)}function h(){h.b2DynamicTreeBroadPhase.apply(this,arguments)}function p(){p.b2DynamicTreeNode.apply(this,arguments)}function d(){d.b2DynamicTreePair.apply(this,arguments)}function v(){v.b2Manifold.apply(this,arguments),this.constructor===v&&this.b2Manifold.apply(this,arguments)}function m(){m.b2ManifoldPoint.apply(this,arguments),this.constructor===m&&this.b2ManifoldPoint.apply(this,arguments)}function g(){g.b2Point.apply(this,arguments)}function y(){y.b2RayCastInput.apply(this,arguments),this.constructor===y&&this.b2RayCastInput.apply(this,arguments)}function b(){b.b2RayCastOutput.apply(this,arguments)}function w(){w.b2Segment.apply(this,arguments)}function E(){E.b2SeparationFunction.apply(this,arguments)}function S(){S.b2Simplex.apply(this,arguments),this.constructor===S&&this.b2Simplex.apply(this,arguments)}function x(){x.b2SimplexCache.apply(this,arguments)}function T(){T.b2SimplexVertex.apply(this,arguments)}function N(){N.b2TimeOfImpact.apply(this,arguments)}function C(){C.b2TOIInput.apply(this,arguments)}function k(){k.b2WorldManifold.apply(this,arguments),this.constructor===k&&this.b2WorldManifold.apply(this,arguments)}function L(){L.ClipVertex.apply(this,arguments)}function A(){A.Features.apply(this,arguments)}function O(){O.b2CircleShape.apply(this,arguments),this.constructor===O&&this.b2CircleShape.apply(this,arguments)}function M(){M.b2EdgeChainDef.apply(this,arguments),this.constructor===M&&this.b2EdgeChainDef.apply(this,arguments)}function _(){_.b2EdgeShape.apply(this,arguments),this.constructor===_&&this.b2EdgeShape.apply(this,arguments)}function D(){D.b2MassData.apply(this,arguments)}function P(){P.b2PolygonShape.apply(this,arguments),this.constructor===P&&this.b2PolygonShape.apply(this,arguments)}function H(){H.b2Shape.apply(this,arguments),this.constructor===H&&this.b2Shape.apply(this,arguments)}function B(){B.b2Color.apply(this,arguments),this.constructor===B&&this.b2Color.apply(this,arguments)}function j(){j.b2Settings.apply(this,arguments)}function F(){F.b2Mat22.apply(this,arguments),this.constructor===F&&this.b2Mat22.apply(this,arguments)}function I(){I.b2Mat33.apply(this,arguments),this.constructor===I&&this.b2Mat33.apply(this,arguments)}function q(){q.b2Math.apply(this,arguments)}function R(){R.b2Sweep.apply(this,arguments)}function U(){U.b2Transform.apply(this,arguments),this.constructor===U&&this.b2Transform.apply(this,arguments)}function z(){z.b2Vec2.apply(this,arguments),this.constructor===z&&this.b2Vec2.apply(this,arguments)}function W(){W.b2Vec3.apply(this,arguments),this.constructor===W&&this.b2Vec3.apply(this,arguments)}function X(){X.b2Body.apply(this,arguments),this.constructor===X&&this.b2Body.apply(this,arguments)}function V(){V.b2BodyDef.apply(this,arguments),this.constructor===V&&this.b2BodyDef.apply(this,arguments)}function $(){$.b2ContactFilter.apply(this,arguments)}function J(){J.b2ContactImpulse.apply(this,arguments)}function K(){K.b2ContactListener.apply(this,arguments)}function Q(){Q.b2ContactManager.apply(this,arguments),this.constructor===Q&&this.b2ContactManager.apply(this,arguments)}function G(){G.b2DebugDraw.apply(this,arguments),this.constructor===G&&this.b2DebugDraw.apply(this,arguments)}function Y(){Y.b2DestructionListener.apply(this,arguments)}function Z(){Z.b2FilterData.apply(this,arguments)}function et(){et.b2Fixture.apply(this,arguments),this.constructor===et&&this.b2Fixture.apply(this,arguments)}function tt(){tt.b2FixtureDef.apply(this,arguments),this.constructor===tt&&this.b2FixtureDef.apply(this,arguments)}function nt(){nt.b2Island.apply(this,arguments),this.constructor===nt&&this.b2Island.apply(this,arguments)}function rt(){rt.b2TimeStep.apply(this,arguments)}function it(){it.b2World.apply(this,arguments),this.constructor===it&&this.b2World.apply(this,arguments)}function st(){st.b2CircleContact.apply(this,arguments)}function ot(){ot.b2Contact.apply(this,arguments),this.constructor===ot&&this.b2Contact.apply(this,arguments)}function ut(){ut.b2ContactConstraint.apply(this,arguments),this.constructor===ut&&this.b2ContactConstraint.apply(this,arguments)}function at(){at.b2ContactConstraintPoint.apply(this,arguments)}function ft(){ft.b2ContactEdge.apply(this,arguments)}function lt(){lt.b2ContactFactory.apply(this,arguments),this.constructor===lt&&this.b2ContactFactory.apply(this,arguments)}function ct(){ct.b2ContactRegister.apply(this,arguments)}function ht(){ht.b2ContactResult.apply(this,arguments)}function pt(){pt.b2ContactSolver.apply(this,arguments),this.constructor===pt&&this.b2ContactSolver.apply(this,arguments)}function dt(){dt.b2EdgeAndCircleContact.apply(this,arguments)}function vt(){vt.b2NullContact.apply(this,arguments),this.constructor===vt&&this.b2NullContact.apply(this,arguments)}function mt(){mt.b2PolyAndCircleContact.apply(this,arguments)}function gt(){gt.b2PolyAndEdgeContact.apply(this,arguments)}function yt(){yt.b2PolygonContact.apply(this,arguments)}function bt(){bt.b2PositionSolverManifold.apply(this,arguments),this.constructor===bt&&this.b2PositionSolverManifold.apply(this,arguments)}function wt(){wt.b2BuoyancyController.apply(this,arguments)}function Et(){Et.b2ConstantAccelController.apply(this,arguments)}function St(){St.b2ConstantForceController.apply(this,arguments)}function xt(){xt.b2Controller.apply(this,arguments)}function Tt(){Tt.b2ControllerEdge.apply(this,arguments)}function Nt(){Nt.b2GravityController.apply(this,arguments)}function Ct(){Ct.b2TensorDampingController.apply(this,arguments)}function kt(){kt.b2DistanceJoint.apply(this,arguments),this.constructor===kt&&this.b2DistanceJoint.apply(this,arguments)}function Lt(){Lt.b2DistanceJointDef.apply(this,arguments),this.constructor===Lt&&this.b2DistanceJointDef.apply(this,arguments)}function At(){At.b2FrictionJoint.apply(this,arguments),this.constructor===At&&this.b2FrictionJoint.apply(this,arguments)}function Ot(){Ot.b2FrictionJointDef.apply(this,arguments),this.constructor===Ot&&this.b2FrictionJointDef.apply(this,arguments)}function Mt(){Mt.b2GearJoint.apply(this,arguments),this.constructor===Mt&&this.b2GearJoint.apply(this,arguments)}function _t(){_t.b2GearJointDef.apply(this,arguments),this.constructor===_t&&this.b2GearJointDef.apply(this,arguments)}function Dt(){Dt.b2Jacobian.apply(this,arguments)}function Pt(){Pt.b2Joint.apply(this,arguments),this.constructor===Pt&&this.b2Joint.apply(this,arguments)}function Ht(){Ht.b2JointDef.apply(this,arguments),this.constructor===Ht&&this.b2JointDef.apply(this,arguments)}function Bt(){Bt.b2JointEdge.apply(this,arguments)}function jt(){jt.b2LineJoint.apply(this,arguments),this.constructor===jt&&this.b2LineJoint.apply(this,arguments)}function Ft(){Ft.b2LineJointDef.apply(this,arguments),this.constructor===Ft&&this.b2LineJointDef.apply(this,arguments)}function It(){It.b2MouseJoint.apply(this,arguments),this.constructor===It&&this.b2MouseJoint.apply(this,arguments)}function qt(){qt.b2MouseJointDef.apply(this,arguments),this.constructor===qt&&this.b2MouseJointDef.apply(this,arguments)}function Rt(){Rt.b2PrismaticJoint.apply(this,arguments),this.constructor===Rt&&this.b2PrismaticJoint.apply(this,arguments)}function Ut(){Ut.b2PrismaticJointDef.apply(this,arguments),this.constructor===Ut&&this.b2PrismaticJointDef.apply(this,arguments)}function zt(){zt.b2PulleyJoint.apply(this,arguments),this.constructor===zt&&this.b2PulleyJoint.apply(this,arguments)}function Wt(){Wt.b2PulleyJointDef.apply(this,arguments),this.constructor===Wt&&this.b2PulleyJointDef.apply(this,arguments)}function Xt(){Xt.b2RevoluteJoint.apply(this,arguments),this.constructor===Xt&&this.b2RevoluteJoint.apply(this,arguments)}function Vt(){Vt.b2RevoluteJointDef.apply(this,arguments),this.constructor===Vt&&this.b2RevoluteJointDef.apply(this,arguments)}function $t(){$t.b2WeldJoint.apply(this,arguments),this.constructor===$t&&this.b2WeldJoint.apply(this,arguments)}function Jt(){Jt.b2WeldJointDef.apply(this,arguments),this.constructor===Jt&&this.b2WeldJointDef.apply(this,arguments)}e.Collision.IBroadPhase="Box2D.Collision.IBroadPhase",e.Collision.b2AABB=t,e.Collision.b2Bound=n,e.Collision.b2BoundValues=r,e.Collision.b2Collision=i,e.Collision.b2ContactID=s,e.Collision.b2ContactPoint=o,e.Collision.b2Distance=u,e.Collision.b2DistanceInput=a,e.Collision.b2DistanceOutput=f,e.Collision.b2DistanceProxy=l,e.Collision.b2DynamicTree=c,e.Collision.b2DynamicTreeBroadPhase=h,e.Collision.b2DynamicTreeNode=p,e.Collision.b2DynamicTreePair=d,e.Collision.b2Manifold=v,e.Collision.b2ManifoldPoint=m,e.Collision.b2Point=g,e.Collision.b2RayCastInput=y,e.Collision.b2RayCastOutput=b,e.Collision.b2Segment=w,e.Collision.b2SeparationFunction=E,e.Collision.b2Simplex=S,e.Collision.b2SimplexCache=x,e.Collision.b2SimplexVertex=T,e.Collision.b2TimeOfImpact=N,e.Collision.b2TOIInput=C,e.Collision.b2WorldManifold=k,e.Collision.ClipVertex=L,e.Collision.Features=A,e.Collision.Shapes.b2CircleShape=O,e.Collision.Shapes.b2EdgeChainDef=M,e.Collision.Shapes.b2EdgeShape=_,e.Collision.Shapes.b2MassData=D,e.Collision.Shapes.b2PolygonShape=P,e.Collision.Shapes.b2Shape=H,e.Common.b2internal="Box2D.Common.b2internal",e.Common.b2Color=B,e.Common.b2Settings=j,e.Common.Math.b2Mat22=F,e.Common.Math.b2Mat33=I,e.Common.Math.b2Math=q,e.Common.Math.b2Sweep=R,e.Common.Math.b2Transform=U,e.Common.Math.b2Vec2=z,e.Common.Math.b2Vec3=W,e.Dynamics.b2Body=X,e.Dynamics.b2BodyDef=V,e.Dynamics.b2ContactFilter=$,e.Dynamics.b2ContactImpulse=J,e.Dynamics.b2ContactListener=K,e.Dynamics.b2ContactManager=Q,e.Dynamics.b2DebugDraw=G,e.Dynamics.b2DestructionListener=Y,e.Dynamics.b2FilterData=Z,e.Dynamics.b2Fixture=et,e.Dynamics.b2FixtureDef=tt,e.Dynamics.b2Island=nt,e.Dynamics.b2TimeStep=rt,e.Dynamics.b2World=it,e.Dynamics.Contacts.b2CircleContact=st,e.Dynamics.Contacts.b2Contact=ot,e.Dynamics.Contacts.b2ContactConstraint=ut,e.Dynamics.Contacts.b2ContactConstraintPoint=at,e.Dynamics.Contacts.b2ContactEdge=ft,e.Dynamics.Contacts.b2ContactFactory=lt,e.Dynamics.Contacts.b2ContactRegister=ct,e.Dynamics.Contacts.b2ContactResult=ht,e.Dynamics.Contacts.b2ContactSolver=pt,e.Dynamics.Contacts.b2EdgeAndCircleContact=dt,e.Dynamics.Contacts.b2NullContact=vt,e.Dynamics.Contacts.b2PolyAndCircleContact=mt,e.Dynamics.Contacts.b2PolyAndEdgeContact=gt,e.Dynamics.Contacts.b2PolygonContact=yt,e.Dynamics.Contacts.b2PositionSolverManifold=bt,e.Dynamics.Controllers.b2BuoyancyController=wt,e.Dynamics.Controllers.b2ConstantAccelController=Et,e.Dynamics.Controllers.b2ConstantForceController=St,e.Dynamics.Controllers.b2Controller=xt,e.Dynamics.Controllers.b2ControllerEdge=Tt,e.Dynamics.Controllers.b2GravityController=Nt,e.Dynamics.Controllers.b2TensorDampingController=Ct,e.Dynamics.Joints.b2DistanceJoint=kt,e.Dynamics.Joints.b2DistanceJointDef=Lt,e.Dynamics.Joints.b2FrictionJoint=At,e.Dynamics.Joints.b2FrictionJointDef=Ot,e.Dynamics.Joints.b2GearJoint=Mt,e.Dynamics.Joints.b2GearJointDef=_t,e.Dynamics.Joints.b2Jacobian=Dt,e.Dynamics.Joints.b2Joint=Pt,e.Dynamics.Joints.b2JointDef=Ht,e.Dynamics.Joints.b2JointEdge=Bt,e.Dynamics.Joints.b2LineJoint=jt,e.Dynamics.Joints.b2LineJointDef=Ft,e.Dynamics.Joints.b2MouseJoint=It,e.Dynamics.Joints.b2MouseJointDef=qt,e.Dynamics.Joints.b2PrismaticJoint=Rt,e.Dynamics.Joints.b2PrismaticJointDef=Ut,e.Dynamics.Joints.b2PulleyJoint=zt,e.Dynamics.Joints.b2PulleyJointDef=Wt,e.Dynamics.Joints.b2RevoluteJoint=Xt,e.Dynamics.Joints.b2RevoluteJointDef=Vt,e.Dynamics.Joints.b2WeldJoint=$t,e.Dynamics.Joints.b2WeldJointDef=Jt}(),e.postDefs=[],function(){var r=e.Collision.Shapes.b2CircleShape,i=e.Collision.Shapes.b2EdgeChainDef,s=e.Collision.Shapes.b2EdgeShape,o=e.Collision.Shapes.b2MassData,u=e.Collision.Shapes.b2PolygonShape,a=e.Collision.Shapes.b2Shape,f=e.Common.b2Color,l=e.Common.b2internal,c=e.Common.b2Settings,h=e.Common.Math.b2Mat22,p=e.Common.Math.b2Mat33,d=e.Common.Math.b2Math,v=e.Common.Math.b2Sweep,m=e.Common.Math.b2Transform,g=e.Common.Math.b2Vec2,y=e.Common.Math.b2Vec3,b=e.Collision.b2AABB,w=e.Collision.b2Bound,E=e.Collision.b2BoundValues,S=e.Collision.b2Collision,x=e.Collision.b2ContactID,T=e.Collision.b2ContactPoint,N=e.Collision.b2Distance,C=e.Collision.b2DistanceInput,k=e.Collision.b2DistanceOutput,L=e.Collision.b2DistanceProxy,A=e.Collision.b2DynamicTree,O=e.Collision.b2DynamicTreeBroadPhase,M=e.Collision.b2DynamicTreeNode,_=e.Collision.b2DynamicTreePair,D=e.Collision.b2Manifold,P=e.Collision.b2ManifoldPoint,H=e.Collision.b2Point,B=e.Collision.b2RayCastInput,j=e.Collision.b2RayCastOutput,F=e.Collision.b2Segment,I=e.Collision.b2SeparationFunction,q=e.Collision.b2Simplex,R=e.Collision.b2SimplexCache,U=e.Collision.b2SimplexVertex,z=e.Collision.b2TimeOfImpact,W=e.Collision.b2TOIInput,X=e.Collision.b2WorldManifold,V=e.Collision.ClipVertex,$=e.Collision.Features,J=e.Collision.IBroadPhase;b.b2AABB=function(){this.lowerBound=new g,this.upperBound=new g},b.prototype.IsValid=function(){var e=this.upperBound.x-this.lowerBound.x,t=this.upperBound.y-this.lowerBound.y,n=e>=0&&t>=0;return n=n&&this.lowerBound.IsValid()&&this.upperBound.IsValid(),n},b.prototype.GetCenter=function(){return new g((this.lowerBound.x+this.upperBound.x)/2,(this.lowerBound.y+this.upperBound.y)/2)},b.prototype.GetExtents=function(){return new g((this.upperBound.x-this.lowerBound.x)/2,(this.upperBound.y-this.lowerBound.y)/2)},b.prototype.Contains=function(e){var t=!0;return t=t&&this.lowerBound.x<=e.lowerBound.x,t=t&&this.lowerBound.y<=e.lowerBound.y,t=t&&e.upperBound.x<=this.upperBound.x,t=t&&e.upperBound.y<=this.upperBound.y,t},b.prototype.RayCast=function(e,t){var n=-Number.MAX_VALUE,r=Number.MAX_VALUE,i=t.p1.x,s=t.p1.y,o=t.p2.x-t.p1.x,u=t.p2.y-t.p1.y,a=Math.abs(o),f=Math.abs(u),l=e.normal,c=0,h=0,p=0,d=0,v=0;if(a<Number.MIN_VALUE){if(i<this.lowerBound.x||this.upperBound.x<i)return!1}else{c=1/o,h=(this.lowerBound.x-i)*c,p=(this.upperBound.x-i)*c,v=-1,h>p&&(d=h,h=p,p=d,v=1),h>n&&(l.x=v,l.y=0,n=h),r=Math.min(r,p);if(n>r)return!1}if(f<Number.MIN_VALUE){if(s<this.lowerBound.y||this.upperBound.y<s)return!1}else{c=1/u,h=(this.lowerBound.y-s)*c,p=(this.upperBound.y-s)*c,v=-1,h>p&&(d=h,h=p,p=d,v=1),h>n&&(l.y=v,l.x=0,n=h),r=Math.min(r,p);if(n>r)return!1}return e.fraction=n,!0},b.prototype.TestOverlap=function(e){var t=e.lowerBound.x-this.upperBound.x,n=e.lowerBound.y-this.upperBound.y,r=this.lowerBound.x-e.upperBound.x,i=this.lowerBound.y-e.upperBound.y;return t>0||n>0?!1:r>0||i>0?!1:!0},b.Combine=function(e,t){var n=new b;return n.Combine(e,t),n},b.prototype.Combine=function(e,t){this.lowerBound.x=Math.min(e.lowerBound.x,t.lowerBound.x),this.lowerBound.y=Math.min(e.lowerBound.y,t.lowerBound.y),this.upperBound.x=Math.max(e.upperBound.x,t.upperBound.x),this.upperBound.y=Math.max(e.upperBound.y,t.upperBound.y)},w.b2Bound=function(){},w.prototype.IsLower=function(){return(this.value&1)==0},w.prototype.IsUpper=function(){return(this.value&1)==1},w.prototype.Swap=function(e){var t=this.value,n=this.proxy,r=this.stabbingCount;this.value=e.value,this.proxy=e.proxy,this.stabbingCount=e.stabbingCount,e.value=t,e.proxy=n,e.stabbingCount=r},E.b2BoundValues=function(){},E.prototype.b2BoundValues=function(){this.lowerValues=new n,this.lowerValues[0]=0,this.lowerValues[1]=0,this.upperValues=new n,this.upperValues[0]=0,this.upperValues[1]=0},S.b2Collision=function(){},S.ClipSegmentToLine=function(e,t,n,r){r===undefined&&(r=0);var i,s=0;i=t[0];var o=i.v;i=t[1];var u=i.v,a=n.x*o.x+n.y*o.y-r,f=n.x*u.x+n.y*u.y-r;a<=0&&e[s++].Set(t[0]),f<=0&&e[s++].Set(t[1]);if(a*f<0){var l=a/(a-f);i=e[s];var c=i.v;c.x=o.x+l*(u.x-o.x),c.y=o.y+l*(u.y-o.y),i=e[s];var h;a>0?(h=t[0],i.id=h.id):(h=t[1],i.id=h.id),++s}return s},S.EdgeSeparation=function(e,t,n,r,i){n===undefined&&(n=0);var s=parseInt(e.m_vertexCount),o=e.m_vertices,u=e.m_normals,a=parseInt(r.m_vertexCount),f=r.m_vertices,l,c;l=t.R,c=u[n];var h=l.col1.x*c.x+l.col2.x*c.y,p=l.col1.y*c.x+l.col2.y*c.y;l=i.R;var d=l.col1.x*h+l.col1.y*p,v=l.col2.x*h+l.col2.y*p,m=0,g=Number.MAX_VALUE;for(var y=0;y<a;++y){c=f[y];var b=c.x*d+c.y*v;b<g&&(g=b,m=y)}c=o[n],l=t.R;var w=t.position.x+(l.col1.x*c.x+l.col2.x*c.y),E=t.position.y+(l.col1.y*c.x+l.col2.y*c.y);c=f[m],l=i.R;var S=i.position.x+(l.col1.x*c.x+l.col2.x*c.y),x=i.position.y+(l.col1.y*c.x+l.col2.y*c.y);S-=w,x-=E;var T=S*h+x*p;return T},S.FindMaxSeparation=function(e,t,n,r,i){var s=parseInt(t.m_vertexCount),o=t.m_normals,u,a;a=i.R,u=r.m_centroid;var f=i.position.x+(a.col1.x*u.x+a.col2.x*u.y),l=i.position.y+(a.col1.y*u.x+a.col2.y*u.y);a=n.R,u=t.m_centroid,f-=n.position.x+(a.col1.x*u.x+a.col2.x*u.y),l-=n.position.y+(a.col1.y*u.x+a.col2.y*u.y);var c=f*n.R.col1.x+l*n.R.col1.y,h=f*n.R.col2.x+l*n.R.col2.y,p=0,d=-Number.MAX_VALUE;for(var v=0;v<s;++v){u=o[v];var m=u.x*c+u.y*h;m>d&&(d=m,p=v)}var g=S.EdgeSeparation(t,n,p,r,i),y=parseInt(p-1>=0?p-1:s-1),b=S.EdgeSeparation(t,n,y,r,i),w=parseInt(p+1<s?p+1:0),E=S.EdgeSeparation(t,n,w,r,i),x=0,T=0,N=0;if(b>g&&b>E)N=-1,x=y,T=b;else{if(!(E>g))return e[0]=p,g;N=1,x=w,T=E}for(;;){N==-1?p=x-1>=0?x-1:s-1:p=x+1<s?x+1:0,g=S.EdgeSeparation(t,n,p,r,i);if(!(g>T))break;x=p,T=g}return e[0]=x,T},S.FindIncidentEdge=function(e,t,n,r,i,s){r===undefined&&(r=0);var o=parseInt(t.m_vertexCount),u=t.m_normals,a=parseInt(i.m_vertexCount),f=i.m_vertices,l=i.m_normals,c,h;c=n.R,h=u[r];var p=c.col1.x*h.x+c.col2.x*h.y,d=c.col1.y*h.x+c.col2.y*h.y;c=s.R;var v=c.col1.x*p+c.col1.y*d;d=c.col2.x*p+c.col2.y*d,p=v;var m=0,g=Number.MAX_VALUE;for(var y=0;y<a;++y){h=l[y];var b=p*h.x+d*h.y;b<g&&(g=b,m=y)}var w,E=parseInt(m),S=parseInt(E+1<a?E+1:0);w=e[0],h=f[E],c=s.R,w.v.x=s.position.x+(c.col1.x*h.x+c.col2.x*h.y),w.v.y=s.position.y+(c.col1.y*h.x+c.col2.y*h.y),w.id.features.referenceEdge=r,w.id.features.incidentEdge=E,w.id.features.incidentVertex=0,w=e[1],h=f[S],c=s.R,w.v.x=s.position.x+(c.col1.x*h.x+c.col2.x*h.y),w.v.y=s.position.y+(c.col1.y*h.x+c.col2.y*h.y),w.id.features.referenceEdge=r,w.id.features.incidentEdge=S,w.id.features.incidentVertex=1},S.MakeClipPointVector=function(){var e=new t(2);return e[0]=new V,e[1]=new V,e},S.CollidePolygons=function(e,t,n,r,i){var s;e.m_pointCount=0;var o=t.m_radius+r.m_radius,u=0;S.s_edgeAO[0]=u;var a=S.FindMaxSeparation(S.s_edgeAO,t,n,r,i);u=S.s_edgeAO[0];if(a>o)return;var f=0;S.s_edgeBO[0]=f;var l=S.FindMaxSeparation(S.s_edgeBO,r,i,t,n);f=S.s_edgeBO[0];if(l>o)return;var h,p,d,v,m=0,g=0,y=.98,b=.001,w;l>y*a+b?(h=r,p=t,d=i,v=n,m=f,e.m_type=D.e_faceB,g=1):(h=t,p=r,d=n,v=i,m=u,e.m_type=D.e_faceA,g=0);var E=S.s_incidentEdge;S.FindIncidentEdge(E,h,d,m,p,v);var x=parseInt(h.m_vertexCount),T=h.m_vertices,N=T[m],C;m+1<x?C=T[parseInt(m+1)]:C=T[0];var k=S.s_localTangent;k.Set(C.x-N.x,C.y-N.y),k.Normalize();var L=S.s_localNormal;L.x=k.y,L.y=-k.x;var A=S.s_planePoint;A.Set(.5*(N.x+C.x),.5*(N.y+C.y));var O=S.s_tangent;w=d.R,O.x=w.col1.x*k.x+w.col2.x*k.y,O.y=w.col1.y*k.x+w.col2.y*k.y;var M=S.s_tangent2;M.x=-O.x,M.y=-O.y;var _=S.s_normal;_.x=O.y,_.y=-O.x;var P=S.s_v11,H=S.s_v12;P.x=d.position.x+(w.col1.x*N.x+w.col2.x*N.y),P.y=d.position.y+(w.col1.y*N.x+w.col2.y*N.y),H.x=d.position.x+(w.col1.x*C.x+w.col2.x*C.y),H.y=d.position.y+(w.col1.y*C.x+w.col2.y*C.y);var B=_.x*P.x+_.y*P.y,j=-O.x*P.x-O.y*P.y+o,F=O.x*H.x+O.y*H.y+o,I=S.s_clipPoints1,q=S.s_clipPoints2,R=0;R=S.ClipSegmentToLine(I,E,M,j);if(R<2)return;R=S.ClipSegmentToLine(q,I,O,F);if(R<2)return;e.m_localPlaneNormal.SetV(L),e.m_localPoint.SetV(A);var U=0;for(var z=0;z<c.b2_maxManifoldPoints;++z){s=q[z];var W=_.x*s.v.x+_.y*s.v.y-B;if(W<=o){var X=e.m_points[U];w=v.R;var V=s.v.x-v.position.x,$=s.v.y-v.position.y;X.m_localPoint.x=V*w.col1.x+$*w.col1.y,X.m_localPoint.y=V*w.col2.x+$*w.col2.y,X.m_id.Set(s.id),X.m_id.features.flip=g,++U}}e.m_pointCount=U},S.CollideCircles=function(e,t,n,r,i){e.m_pointCount=0;var s,o;s=n.R,o=t.m_p;var u=n.position.x+(s.col1.x*o.x+s.col2.x*o.y),a=n.position.y+(s.col1.y*o.x+s.col2.y*o.y);s=i.R,o=r.m_p;var f=i.position.x+(s.col1.x*o.x+s.col2.x*o.y),l=i.position.y+(s.col1.y*o.x+s.col2.y*o.y),c=f-u,h=l-a,p=c*c+h*h,d=t.m_radius+r.m_radius;if(p>d*d)return;e.m_type=D.e_circles,e.m_localPoint.SetV(t.m_p),e.m_localPlaneNormal.SetZero(),e.m_pointCount=1,e.m_points[0].m_localPoint.SetV(r.m_p),e.m_points[0].m_id.key=0},S.CollidePolygonAndCircle=function(e,t,n,r,i){e.m_pointCount=0;var s,o=0,u=0,a=0,f=0,l,c;c=i.R,l=r.m_p;var h=i.position.x+(c.col1.x*l.x+c.col2.x*l.y),p=i.position.y+(c.col1.y*l.x+c.col2.y*l.y);o=h-n.position.x,u=p-n.position.y,c=n.R;var d=o*c.col1.x+u*c.col1.y,v=o*c.col2.x+u*c.col2.y,m=0,g=0,y=-Number.MAX_VALUE,b=t.m_radius+r.m_radius,w=parseInt(t.m_vertexCount),E=t.m_vertices,S=t.m_normals;for(var x=0;x<w;++x){l=E[x],o=d-l.x,u=v-l.y,l=S[x];var T=l.x*o+l.y*u;if(T>b)return;T>y&&(y=T,g=x)}var N=parseInt(g),C=parseInt(N+1<w?N+1:0),k=E[N],L=E[C];if(y<Number.MIN_VALUE){e.m_pointCount=1,e.m_type=D.e_faceA,e.m_localPlaneNormal.SetV(S[g]),e.m_localPoint.x=.5*(k.x+L.x),e.m_localPoint.y=.5*(k.y+L.y),e.m_points[0].m_localPoint.SetV(r.m_p),e.m_points[0].m_id.key=0;return}var A=(d-k.x)*(L.x-k.x)+(v-k.y)*(L.y-k.y),O=(d-L.x)*(k.x-L.x)+(v-L.y)*(k.y-L.y);if(A<=0){if((d-k.x)*(d-k.x)+(v-k.y)*(v-k.y)>b*b)return;e.m_pointCount=1,e.m_type=D.e_faceA,e.m_localPlaneNormal.x=d-k.x,e.m_localPlaneNormal.y=v-k.y,e.m_localPlaneNormal.Normalize(),e.m_localPoint.SetV(k),e.m_points[0].m_localPoint.SetV(r.m_p),e.m_points[0].m_id.key=0}else if(O<=0){if((d-L.x)*(d-L.x)+(v-L.y)*(v-L.y)>b*b)return;e.m_pointCount=1,e.m_type=D.e_faceA,e.m_localPlaneNormal.x=d-L.x,e.m_localPlaneNormal.y=v-L.y,e.m_localPlaneNormal.Normalize(),e.m_localPoint.SetV(L),e.m_points[0].m_localPoint.SetV(r.m_p),e.m_points[0].m_id.key=0}else{var M=.5*(k.x+L.x),_=.5*(k.y+L.y);y=(d-M)*S[N].x+(v-_)*S[N].y;if(y>b)return;e.m_pointCount=1,e.m_type=D.e_faceA,e.m_localPlaneNormal.x=S[N].x,e.m_localPlaneNormal.y=S[N].y,e.m_localPlaneNormal.Normalize(),e.m_localPoint.Set(M,_),e.m_points[0].m_localPoint.SetV(r.m_p),e.m_points[0].m_id.key=0}},S.TestOverlap=function(e,t){var n=t.lowerBound,r=e.upperBound,i=n.x-r.x,s=n.y-r.y;n=e.lowerBound,r=t.upperBound;var o=n.x-r.x,u=n.y-r.y;return i>0||s>0?!1:o>0||u>0?!1:!0},e.postDefs.push(function(){e.Collision.b2Collision.s_incidentEdge=S.MakeClipPointVector(),e.Collision.b2Collision.s_clipPoints1=S.MakeClipPointVector(),e.Collision.b2Collision.s_clipPoints2=S.MakeClipPointVector(),e.Collision.b2Collision.s_edgeAO=new n(1),e.Collision.b2Collision.s_edgeBO=new n(1),e.Collision.b2Collision.s_localTangent=new g,e.Collision.b2Collision.s_localNormal=new g,e.Collision.b2Collision.s_planePoint=new g,e.Collision.b2Collision.s_normal=new g,e.Collision.b2Collision.s_tangent=new g,e.Collision.b2Collision.s_tangent2=new g,e.Collision.b2Collision.s_v11=new g,e.Collision.b2Collision.s_v12=new g,e.Collision.b2Collision.b2CollidePolyTempVec=new g,e.Collision.b2Collision.b2_nullFeature=255}),x.b2ContactID=function(){this.features=new $},x.prototype.b2ContactID=function(){this.features._m_id=this},x.prototype.Set=function(e){this.key=e._key},x.prototype.Copy=function(){var e=new x;return e.key=this.key,e},Object.defineProperty(x.prototype,"key",{enumerable:!1,configurable:!0,get:function(){return this._key}}),Object.defineProperty(x.prototype,"key",{enumerable:!1,configurable:!0,set:function(e){e===undefined&&(e=0),this._key=e,this.features._referenceEdge=this._key&255,this.features._incidentEdge=(this._key&65280)>>8&255,this.features._incidentVertex=(this._key&16711680)>>16&255,this.features._flip=(this._key&4278190080)>>24&255}}),T.b2ContactPoint=function(){this.position=new g,this.velocity=new g,this.normal=new g,this.id=new x},N.b2Distance=function(){},N.Distance=function(e,t,n){++N.b2_gjkCalls;var r=n.proxyA,i=n.proxyB,s=n.transformA,o=n.transformB,u=N.s_simplex;u.ReadCache(t,r,s,i,o);var a=u.m_vertices,f=20,l=N.s_saveA,h=N.s_saveB,p=0,v=u.GetClosestPoint(),m=v.LengthSquared(),y=m,b=0,w,E=0;while(E<f){p=u.m_count;for(b=0;b<p;b++)l[b]=a[b].indexA,h[b]=a[b].indexB;switch(u.m_count){case 1:break;case 2:u.Solve2();break;case 3:u.Solve3();break;default:c.b2Assert(!1)}if(u.m_count==3)break;w=u.GetClosestPoint(),y=w.LengthSquared(),y>m,m=y;var S=u.GetSearchDirection();if(S.LengthSquared()<Number.MIN_VALUE*Number.MIN_VALUE)break;var x=a[u.m_count];x.indexA=r.GetSupport(d.MulTMV(s.R,S.GetNegative())),x.wA=d.MulX(s,r.GetVertex(x.indexA)),x.indexB=i.GetSupport(d.MulTMV(o.R,S)),x.wB=d.MulX(o,i.GetVertex(x.indexB)),x.w=d.SubtractVV(x.wB,x.wA),++E,++N.b2_gjkIters;var T=!1;for(b=0;b<p;b++)if(x.indexA==l[b]&&x.indexB==h[b]){T=!0;break}if(T)break;++u.m_count}N.b2_gjkMaxIters=d.Max(N.b2_gjkMaxIters,E),u.GetWitnessPoints(e.pointA,e.pointB),e.distance=d.SubtractVV(e.pointA,e.pointB).Length(),e.iterations=E,u.WriteCache(t);if(n.useRadii){var C=r.m_radius,k=i.m_radius;if(e.distance>C+k&&e.distance>Number.MIN_VALUE){e.distance-=C+k;var L=d.SubtractVV(e.pointB,e.pointA);L.Normalize(),e.pointA.x+=C*L.x,e.pointA.y+=C*L.y,e.pointB.x-=k*L.x,e.pointB.y-=k*L.y}else w=new g,w.x=.5*(e.pointA.x+e.pointB.x),w.y=.5*(e.pointA.y+e.pointB.y),e.pointA.x=e.pointB.x=w.x,e.pointA.y=e.pointB.y=w.y,e.distance=0}},e.postDefs.push(function(){e.Collision.b2Distance.s_simplex=new q,e.Collision.b2Distance.s_saveA=new n(3),e.Collision.b2Distance.s_saveB=new n(3)}),C.b2DistanceInput=function(){},k.b2DistanceOutput=function(){this.pointA=new g,this.pointB=new g},L.b2DistanceProxy=function(){},L.prototype.Set=function(e){switch(e.GetType()){case a.e_circleShape:var n=e instanceof r?e:null;this.m_vertices=new t(1,!0),this.m_vertices[0]=n.m_p,this.m_count=1,this.m_radius=n.m_radius;break;case a.e_polygonShape:var i=e instanceof u?e:null;this.m_vertices=i.m_vertices,this.m_count=i.m_vertexCount,this.m_radius=i.m_radius;break;default:c.b2Assert(!1)}},L.prototype.GetSupport=function(e){var t=0,n=this.m_vertices[0].x*e.x+this.m_vertices[0].y*e.y;for(var r=1;r<this.m_count;++r){var i=this.m_vertices[r].x*e.x+this.m_vertices[r].y*e.y;i>n&&(t=r,n=i)}return t},L.prototype.GetSupportVertex=function(e){var t=0,n=this.m_vertices[0].x*e.x+this.m_vertices[0].y*e.y;for(var r=1;r<this.m_count;++r){var i=this.m_vertices[r].x*e.x+this.m_vertices[r].y*e.y;i>n&&(t=r,n=i)}return this.m_vertices[t]},L.prototype.GetVertexCount=function(){return this.m_count},L.prototype.GetVertex=function(e){return e===undefined&&(e=0),c.b2Assert(0<=e&&e<this.m_count),this.m_vertices[e]},A.b2DynamicTree=function(){},A.prototype.b2DynamicTree=function(){this.m_root=null,this.m_freeList=null,this.m_path=0,this.m_insertionCount=0},A.prototype.CreateProxy=function(e,t){var n=this.AllocateNode(),r=c.b2_aabbExtension,i=c.b2_aabbExtension;return n.aabb.lowerBound.x=e.lowerBound.x-r,n.aabb.lowerBound.y=e.lowerBound.y-i,n.aabb.upperBound.x=e.upperBound.x+r,n.aabb.upperBound.y=e.upperBound.y+i,n.userData=t,this.InsertLeaf(n),n},A.prototype.DestroyProxy=function(e){this.RemoveLeaf(e),this.FreeNode(e)},A.prototype.MoveProxy=function(e,t,n){c.b2Assert(e.IsLeaf());if(e.aabb.Contains(t))return!1;this.RemoveLeaf(e);var r=c.b2_aabbExtension+c.b2_aabbMultiplier*(n.x>0?n.x:-n.x),i=c.b2_aabbExtension+c.b2_aabbMultiplier*(n.y>0?n.y:-n.y);return e.aabb.lowerBound.x=t.lowerBound.x-r,e.aabb.lowerBound.y=t.lowerBound.y-i,e.aabb.upperBound.x=t.upperBound.x+r,e.aabb.upperBound.y=t.upperBound.y+i,this.InsertLeaf(e),!0},A.prototype.Rebalance=function(e){e===undefined&&(e=0);if(this.m_root==null)return;for(var t=0;t<e;t++){var n=this.m_root,r=0;while(n.IsLeaf()==0)n=this.m_path>>r&1?n.child2:n.child1,r=r+1&31;++this.m_path,this.RemoveLeaf(n),this.InsertLeaf(n)}},A.prototype.GetFatAABB=function(e){return e.aabb},A.prototype.GetUserData=function(e){return e.userData},A.prototype.Query=function(e,n){if(this.m_root==null)return;var r=new t,i=0;r[i++]=this.m_root;while(i>0){var s=r[--i];if(s.aabb.TestOverlap(n))if(s.IsLeaf()){var o=e(s);if(!o)return}else r[i++]=s.child1,r[i++]=s.child2}},A.prototype.RayCast=function(e,n){if(this.m_root==null)return;var r=n.p1,i=n.p2,s=d.SubtractVV(r,i);s.Normalize();var o=d.CrossFV(1,s),u=d.AbsV(o),a=n.maxFraction,f=new b,l=0,c=0;l=r.x+a*(i.x-r.x),c=r.y+a*(i.y-r.y),f.lowerBound.x=Math.min(r.x,l),f.lowerBound.y=Math.min(r.y,c),f.upperBound.x=Math.max(r.x,l),f.upperBound.y=Math.max(r.y,c);var h=new t,p=0;h[p++]=this.m_root;while(p>0){var v=h[--p];if(v.aabb.TestOverlap(f)==0)continue;var m=v.aabb.GetCenter(),g=v.aabb.GetExtents(),y=Math.abs(o.x*(r.x-m.x)+o.y*(r.y-m.y))-u.x*g.x-u.y*g.y;if(y>0)continue;if(v.IsLeaf()){var w=new B;w.p1=n.p1,w.p2=n.p2,w.maxFraction=n.maxFraction,a=e(w,v);if(a==0)return;a>0&&(l=r.x+a*(i.x-r.x),c=r.y+a*(i.y-r.y),f.lowerBound.x=Math.min(r.x,l),f.lowerBound.y=Math.min(r.y,c),f.upperBound.x=Math.max(r.x,l),f.upperBound.y=Math.max(r.y,c))}else h[p++]=v.child1,h[p++]=v.child2}},A.prototype.AllocateNode=function(){if(this.m_freeList){var e=this.m_freeList;return this.m_freeList=e.parent,e.parent=null,e.child1=null,e.child2=null,e}return new M},A.prototype.FreeNode=function(e){e.parent=this.m_freeList,this.m_freeList=e},A.prototype.InsertLeaf=function(e){++this.m_insertionCount;if(this.m_root==null){this.m_root=e,this.m_root.parent=null;return}var t=e.aabb.GetCenter(),n=this.m_root;if(n.IsLeaf()==0)do{var r=n.child1,i=n.child2,s=Math.abs((r.aabb.lowerBound.x+r.aabb.upperBound.x)/2-t.x)+Math.abs((r.aabb.lowerBound.y+r.aabb.upperBound.y)/2-t.y),o=Math.abs((i.aabb.lowerBound.x+i.aabb.upperBound.x)/2-t.x)+Math.abs((i.aabb.lowerBound.y+i.aabb.upperBound.y)/2-t.y);s<o?n=r:n=i}while(n.IsLeaf()==0);var u=n.parent,a=this.AllocateNode();a.parent=u,a.userData=null,a.aabb.Combine(e.aabb,n.aabb);if(u){n.parent.child1==n?u.child1=a:u.child2=a,a.child1=n,a.child2=e,n.parent=a,e.parent=a;do{if(u.aabb.Contains(a.aabb))break;u.aabb.Combine(u.child1.aabb,u.child2.aabb),a=u,u=u.parent}while(u)}else a.child1=n,a.child2=e,n.parent=a,e.parent=a,this.m_root=a},A.prototype.RemoveLeaf=function(e){if(e==this.m_root){this.m_root=null;return}var t=e.parent,n=t.parent,r;t.child1==e?r=t.child2:r=t.child1;if(n){n.child1==t?n.child1=r:n.child2=r,r.parent=n,this.FreeNode(t);while(n){var i=n.aabb;n.aabb=b.Combine(n.child1.aabb,n.child2.aabb);if(i.Contains(n.aabb))break;n=n.parent}}else this.m_root=r,r.parent=null,this.FreeNode(t)},O.b2DynamicTreeBroadPhase=function(){this.m_tree=new A,this.m_moveBuffer=new t,this.m_pairBuffer=new t,this.m_pairCount=0},O.prototype.CreateProxy=function(e,t){var n=this.m_tree.CreateProxy(e,t);return++this.m_proxyCount,this.BufferMove(n),n},O.prototype.DestroyProxy=function(e){this.UnBufferMove(e),--this.m_proxyCount,this.m_tree.DestroyProxy(e)},O.prototype.MoveProxy=function(e,t,n){var r=this.m_tree.MoveProxy(e,t,n);r&&this.BufferMove(e)},O.prototype.TestOverlap=function(e,t){var n=this.m_tree.GetFatAABB(e),r=this.m_tree.GetFatAABB(t);return n.TestOverlap(r)},O.prototype.GetUserData=function(e){return this.m_tree.GetUserData(e)},O.prototype.GetFatAABB=function(e){return this.m_tree.GetFatAABB(e)},O.prototype.GetProxyCount=function(){return this.m_proxyCount},O.prototype.UpdatePairs=function(e){var t=this;t.m_pairCount=0;var n=0,r;for(n=0;n<t.m_moveBuffer.length;++n){r=t.m_moveBuffer[n];function i(e){if(e==r)return!0;t.m_pairCount==t.m_pairBuffer.length&&(t.m_pairBuffer[t.m_pairCount]=new _);var n=t.m_pairBuffer[t.m_pairCount];return n.proxyA=e<r?e:r,n.proxyB=e>=r?e:r,++t.m_pairCount,!0}var s=t.m_tree.GetFatAABB(r);t.m_tree.Query(i,s)}t.m_moveBuffer.length=0;for(var n=0;n<t.m_pairCount;){var o=t.m_pairBuffer[n],u=t.m_tree.GetUserData(o.proxyA),a=t.m_tree.GetUserData(o.proxyB);e(u,a),++n;while(n<t.m_pairCount){var f=t.m_pairBuffer[n];if(f.proxyA!=o.proxyA||f.proxyB!=o.proxyB)break;++n}}},O.prototype.Query=function(e,t){this.m_tree.Query(e,t)},O.prototype.RayCast=function(e,t){this.m_tree.RayCast(e,t)},O.prototype.Validate=function(){},O.prototype.Rebalance=function(e){e===undefined&&(e=0),this.m_tree.Rebalance(e)},O.prototype.BufferMove=function(e){this.m_moveBuffer[this.m_moveBuffer.length]=e},O.prototype.UnBufferMove=function(e){var t=parseInt(this.m_moveBuffer.indexOf(e));this.m_moveBuffer.splice(t,1)},O.prototype.ComparePairs=function(e,t){return 0},O.__implements={},O.__implements[J]=!0,M.b2DynamicTreeNode=function(){this.aabb=new b},M.prototype.IsLeaf=function(){return this.child1==null},_.b2DynamicTreePair=function(){},D.b2Manifold=function(){this.m_pointCount=0},D.prototype.b2Manifold=function(){this.m_points=new t(c.b2_maxManifoldPoints);for(var e=0;e<c.b2_maxManifoldPoints;e++)this.m_points[e]=new P;this.m_localPlaneNormal=new g,this.m_localPoint=new g},D.prototype.Reset=function(){for(var e=0;e<c.b2_maxManifoldPoints;e++)(this.m_points[e]instanceof P?this.m_points[e]:null).Reset();this.m_localPlaneNormal.SetZero(),this.m_localPoint.SetZero(),this.m_type=0,this.m_pointCount=0},D.prototype.Set=function(e){this.m_pointCount=e.m_pointCount;for(var t=0;t<c.b2_maxManifoldPoints;t++)(this.m_points[t]instanceof P?this.m_points[t]:null).Set(e.m_points[t]);this.m_localPlaneNormal.SetV(e.m_localPlaneNormal),this.m_localPoint.SetV(e.m_localPoint),this.m_type=e.m_type},D.prototype.Copy=function(){var e=new D;return e.Set(this),e},e.postDefs.push(function(){e.Collision.b2Manifold.e_circles=1,e.Collision.b2Manifold.e_faceA=2,e.Collision.b2Manifold.e_faceB=4}),P.b2ManifoldPoint=function(){this.m_localPoint=new g,this.m_id=new x},P.prototype.b2ManifoldPoint=function(){this.Reset()},P.prototype.Reset=function(){this.m_localPoint.SetZero(),this.m_normalImpulse=0,this.m_tangentImpulse=0,this.m_id.key=0},P.prototype.Set=function(e){this.m_localPoint.SetV(e.m_localPoint),this.m_normalImpulse=e.m_normalImpulse,this.m_tangentImpulse=e.m_tangentImpulse,this.m_id.Set(e.m_id)},H.b2Point=function(){this.p=new g},H.prototype.Support=function(e,t,n){return t===undefined&&(t=0),n===undefined&&(n=0),this.p},H.prototype.GetFirstVertex=function(e){return this.p},B.b2RayCastInput=function(){this.p1=new g,this.p2=new g},B.prototype.b2RayCastInput=function(e,t,n){e===undefined&&(e=null),t===undefined&&(t=null),n===undefined&&(n=1),e&&this.p1.SetV(e),t&&this.p2.SetV(t),this.maxFraction=n},j.b2RayCastOutput=function(){this.normal=new g},F.b2Segment=function(){this.p1=new g,this.p2=new g},F.prototype.TestSegment=function(e,t,n,r){r===undefined&&(r=0);var i=n.p1,s=n.p2.x-i.x,o=n.p2.y-i.y,u=this.p2.x-this.p1.x,a=this.p2.y-this.p1.y,f=a,l=-u,c=100*Number.MIN_VALUE,h=-(s*f+o*l);if(h>c){var p=i.x-this.p1.x,d=i.y-this.p1.y,v=p*f+d*l;if(0<=v&&v<=r*h){var m=-s*d+o*p;if(-c*h<=m&&m<=h*(1+c)){v/=h;var g=Math.sqrt(f*f+l*l);return f/=g,l/=g,e[0]=v,t.Set(f,l),!0}}}return!1},F.prototype.Extend=function(e){this.ExtendForward(e),this.ExtendBackward(e)},F.prototype.ExtendForward=function(e){var t=this.p2.x-this.p1.x,n=this.p2.y-this.p1.y,r=Math.min(t>0?(e.upperBound.x-this.p1.x)/t:t<0?(e.lowerBound.x-this.p1.x)/t:Number.POSITIVE_INFINITY,n>0?(e.upperBound.y-this.p1.y)/n:n<0?(e.lowerBound.y-this.p1.y)/n:Number.POSITIVE_INFINITY);this.p2.x=this.p1.x+t*r,this.p2.y=this.p1.y+n*r},F.prototype.ExtendBackward=function(e){var t=-this.p2.x+this.p1.x,n=-this.p2.y+this.p1.y,r=Math.min(t>0?(e.upperBound.x-this.p2.x)/t:t<0?(e.lowerBound.x-this.p2.x)/t:Number.POSITIVE_INFINITY,n>0?(e.upperBound.y-this.p2.y)/n:n<0?(e.lowerBound.y-this.p2.y)/n:Number.POSITIVE_INFINITY);this.p1.x=this.p2.x+t*r,this.p1.y=this.p2.y+n*r},I.b2SeparationFunction=function(){this.m_localPoint=new g,this.m_axis=new g},I.prototype.Initialize=function(e,t,n,r,i){this.m_proxyA=t,this.m_proxyB=r;var s=parseInt(e.count);c.b2Assert(0<s&&s<3);var o,u,a,f,l,h,p=0,v=0,m=0,y=0,b=0,w=0,E,S,x=0,T=0;if(s==1)this.m_type=I.e_points,o=this.m_proxyA.GetVertex(e.indexA[0]),f=this.m_proxyB.GetVertex(e.indexB[0]),S=o,E=n.R,p=n.position.x+(E.col1.x*S.x+E.col2.x*S.y),v=n.position.y+(E.col1.y*S.x+E.col2.y*S.y),S=f,E=i.R,m=i.position.x+(E.col1.x*S.x+E.col2.x*S.y),y=i.position.y+(E.col1.y*S.x+E.col2.y*S.y),this.m_axis.x=m-p,this.m_axis.y=y-v,this.m_axis.Normalize();else if(e.indexB[0]==e.indexB[1])this.m_type=I.e_faceA,u=this.m_proxyA.GetVertex(e.indexA[0]),a=this.m_proxyA.GetVertex(e.indexA[1]),f=this.m_proxyB.GetVertex(e.indexB[0]),this.m_localPoint.x=.5*(u.x+a.x),this.m_localPoint.y=.5*(u.y+a.y),this.m_axis=d.CrossVF(d.SubtractVV(a,u),1),this.m_axis.Normalize(),S=this.m_axis,E=n.R,b=E.col1.x*S.x+E.col2.x*S.y,w=E.col1.y*S.x+E.col2.y*S.y,S=this.m_localPoint,E=n.R,p=n.position.x+(E.col1.x*S.x+E.col2.x*S.y),v=n.position.y+(E.col1.y*S.x+E.col2.y*S.y),S=f,E=i.R,m=i.position.x+(E.col1.x*S.x+E.col2.x*S.y),y=i.position.y+(E.col1.y*S.x+E.col2.y*S.y),x=(m-p)*b+(y-v)*w,x<0&&this.m_axis.NegativeSelf();else if(e.indexA[0]==e.indexA[0])this.m_type=I.e_faceB,l=this.m_proxyB.GetVertex(e.indexB[0]),h=this.m_proxyB.GetVertex(e.indexB[1]),o=this.m_proxyA.GetVertex(e.indexA[0]),this.m_localPoint.x=.5*(l.x+h.x),this.m_localPoint.y=.5*(l.y+h.y),this.m_axis=d.CrossVF(d.SubtractVV(h,l),1),this.m_axis.Normalize(),S=this.m_axis,E=i.R,b=E.col1.x*S.x+E.col2.x*S.y,w=E.col1.y*S.x+E.col2.y*S.y,S=this.m_localPoint,E=i.R,m=i.position.x+(E.col1.x*S.x+E.col2.x*S.y),y=i.position.y+(E.col1.y*S.x+E.col2.y*S.y),S=o,E=n.R,p=n.position.x+(E.col1.x*S.x+E.col2.x*S.y),v=n.position.y+(E.col1.y*S.x+E.col2.y*S.y),x=(p-m)*b+(v-y)*w,x<0&&this.m_axis.NegativeSelf();else{u=this.m_proxyA.GetVertex(e.indexA[0]),a=this.m_proxyA.GetVertex(e.indexA[1]),l=this.m_proxyB.GetVertex(e.indexB[0]),h=this.m_proxyB.GetVertex(e.indexB[1]);var N=d.MulX(n,o),C=d.MulMV(n.R,d.SubtractVV(a,u)),k=d.MulX(i,f),L=d.MulMV(i.R,d.SubtractVV(h,l)),A=C.x*C.x+C.y*C.y,O=L.x*L.x+L.y*L.y,M=d.SubtractVV(L,C),_=C.x*M.x+C.y*M.y,D=L.x*M.x+L.y*M.y,P=C.x*L.x+C.y*L.y,H=A*O-P*P;x=0,H!=0&&(x=d.Clamp((P*D-_*O)/H,0,1));var B=(P*x+D)/O;B<0&&(B=0,x=d.Clamp((P-_)/A,0,1)),o=new g,o.x=u.x+x*(a.x-u.x),o.y=u.y+x*(a.y-u.y),f=new g,f.x=l.x+x*(h.x-l.x),f.y=l.y+x*(h.y-l.y),x==0||x==1?(this.m_type=I.e_faceB,this.m_axis=d.CrossVF(d.SubtractVV(h,l),1),this.m_axis.Normalize(),this.m_localPoint=f,S=this.m_axis,E=i.R,b=E.col1.x*S.x+E.col2.x*S.y,w=E.col1.y*S.x+E.col2.y*S.y,S=this.m_localPoint,E=i.R,m=i.position.x+(E.col1.x*S.x+E.col2.x*S.y),y=i.position.y+(E.col1.y*S.x+E.col2.y*S.y),S=o,E=n.R,p=n.position.x+(E.col1.x*S.x+E.col2.x*S.y),v=n.position.y+(E.col1.y*S.x+E.col2.y*S.y),T=(p-m)*b+(v-y)*w,x<0&&this.m_axis.NegativeSelf()):(this.m_type=I.e_faceA,this.m_axis=d.CrossVF(d.SubtractVV(a,u),1),this.m_localPoint=o,S=this.m_axis,E=n.R,b=E.col1.x*S.x+E.col2.x*S.y,w=E.col1.y*S.x+E.col2.y*S.y,S=this.m_localPoint,E=n.R,p=n.position.x+(E.col1.x*S.x+E.col2.x*S.y),v=n.position.y+(E.col1.y*S.x+E.col2.y*S.y),S=f,E=i.R,m=i.position.x+(E.col1.x*S.x+E.col2.x*S.y),y=i.position.y+(E.col1.y*S.x+E.col2.y*S.y),T=(m-p)*b+(y-v)*w,x<0&&this.m_axis.NegativeSelf())}},I.prototype.Evaluate=function(e,t){var n,r,i,s,o,u,a=0,f;switch(this.m_type){case I.e_points:return n=d.MulTMV(e.R,this.m_axis),r=d.MulTMV(t.R,this.m_axis.GetNegative()),i=this.m_proxyA.GetSupportVertex(n),s=this.m_proxyB.GetSupportVertex(r),o=d.MulX(e,i),u=d.MulX(t,s),a=(u.x-o.x)*this.m_axis.x+(u.y-o.y)*this.m_axis.y,a;case I.e_faceA:return f=d.MulMV(e.R,this.m_axis),o=d.MulX(e,this.m_localPoint),r=d.MulTMV(t.R,f.GetNegative()),s=this.m_proxyB.GetSupportVertex(r),u=d.MulX(t,s),a=(u.x-o.x)*f.x+(u.y-o.y)*f.y,a;case I.e_faceB:return f=d.MulMV(t.R,this.m_axis),u=d.MulX(t,this.m_localPoint),n=d.MulTMV(e.R,f.GetNegative()),i=this.m_proxyA.GetSupportVertex(n),o=d.MulX(e,i),a=(o.x-u.x)*f.x+(o.y-u.y)*f.y,a;default:return c.b2Assert(!1),0}},e.postDefs.push(function(){e.Collision.b2SeparationFunction.e_points=1,e.Collision.b2SeparationFunction.e_faceA=2,e.Collision.b2SeparationFunction.e_faceB=4}),q.b2Simplex=function(){this.m_v1=new U,this.m_v2=new U,this.m_v3=new U,this.m_vertices=new t(3)},q.prototype.b2Simplex=function(){this.m_vertices[0]=this.m_v1,this.m_vertices[1]=this.m_v2,this.m_vertices[2]=this.m_v3},q.prototype.ReadCache=function(e,t,n,r,i){c.b2Assert(0<=e.count&&e.count<=3);var s,o;this.m_count=e.count;var u=this.m_vertices;for(var a=0;a<this.m_count;a++){var f=u[a];f.indexA=e.indexA[a],f.indexB=e.indexB[a],s=t.GetVertex(f.indexA),o=r.GetVertex(f.indexB),f.wA=d.MulX(n,s),f.wB=d.MulX(i,o),f.w=d.SubtractVV(f.wB,f.wA),f.a=0}if(this.m_count>1){var l=e.metric,h=this.GetMetric();if(h<.5*l||2*l<h||h<Number.MIN_VALUE)this.m_count=0}this.m_count==0&&(f=u[0],f.indexA=0,f.indexB=0,s=t.GetVertex(0),o=r.GetVertex(0),f.wA=d.MulX(n,s),f.wB=d.MulX(i,o),f.w=d.SubtractVV(f.wB,f.wA),this.m_count=1)},q.prototype.WriteCache=function(t){t.metric=this.GetMetric(),t.count=e.parseUInt(this.m_count);var n=this.m_vertices;for(var r=0;r<this.m_count;r++)t.indexA[r]=e.parseUInt(n[r].indexA),t.indexB[r]=e.parseUInt(n[r].indexB)},q.prototype.GetSearchDirection=function(){switch(this.m_count){case 1:return this.m_v1.w.GetNegative();case 2:var e=d.SubtractVV(this.m_v2.w,this.m_v1.w),t=d.CrossVV(e,this.m_v1.w.GetNegative());return t>0?d.CrossFV(1,e):d.CrossVF(e,1);default:return c.b2Assert(!1),new g}},q.prototype.GetClosestPoint=function(){switch(this.m_count){case 0:return c.b2Assert(!1),new g;case 1:return this.m_v1.w;case 2:return new g(this.m_v1.a*this.m_v1.w.x+this.m_v2.a*this.m_v2.w.x,this.m_v1.a*this.m_v1.w.y+this.m_v2.a*this.m_v2.w.y);default:return c.b2Assert(!1),new g}},q.prototype.GetWitnessPoints=function(e,t){switch(this.m_count){case 0:c.b2Assert(!1);break;case 1:e.SetV(this.m_v1.wA),t.SetV(this.m_v1.wB);break;case 2:e.x=this.m_v1.a*this.m_v1.wA.x+this.m_v2.a*this.m_v2.wA.x,e.y=this.m_v1.a*this.m_v1.wA.y+this.m_v2.a*this.m_v2.wA.y,t.x=this.m_v1.a*this.m_v1.wB.x+this.m_v2.a*this.m_v2.wB.x,t.y=this.m_v1.a*this.m_v1.wB.y+this.m_v2.a*this.m_v2.wB.y;break;case 3:t.x=e.x=this.m_v1.a*this.m_v1.wA.x+this.m_v2.a*this.m_v2.wA.x+this.m_v3.a*this.m_v3.wA.x,t.y=e.y=this.m_v1.a*this.m_v1.wA.y+this.m_v2.a*this.m_v2.wA.y+this.m_v3.a*this.m_v3.wA.y;break;default:c.b2Assert(!1)}},q.prototype.GetMetric=function(){switch(this.m_count){case 0:return c.b2Assert(!1),0;case 1:return 0;case 2:return d.SubtractVV(this.m_v1.w,this.m_v2.w).Length();case 3:return d.CrossVV(d.SubtractVV(this.m_v2.w,this.m_v1.w),d.SubtractVV(this.m_v3.w,this.m_v1.w));default:return c.b2Assert(!1),0}},q.prototype.Solve2=function(){var e=this.m_v1.w,t=this.m_v2.w,n=d.SubtractVV(t,e),r=-(e.x*n.x+e.y*n.y);if(r<=0){this.m_v1.a=1,this.m_count=1;return}var i=t.x*n.x+t.y*n.y;if(i<=0){this.m_v2.a=1,this.m_count=1,this.m_v1.Set(this.m_v2);return}var s=1/(i+r);this.m_v1.a=i*s,this.m_v2.a=r*s,this.m_count=2},q.prototype.Solve3=function(){var e=this.m_v1.w,t=this.m_v2.w,n=this.m_v3.w,r=d.SubtractVV(t,e),i=d.Dot(e,r),s=d.Dot(t,r),o=s,u=-i,a=d.SubtractVV(n,e),f=d.Dot(e,a),l=d.Dot(n,a),c=l,h=-f,p=d.SubtractVV(n,t),v=d.Dot(t,p),m=d.Dot(n,p),g=m,y=-v,b=d.CrossVV(r,a),w=b*d.CrossVV(t,n),E=b*d.CrossVV(n,e),S=b*d.CrossVV(e,t);if(u<=0&&h<=0){this.m_v1.a=1,this.m_count=1;return}if(o>0&&u>0&&S<=0){var x=1/(o+u);this.m_v1.a=o*x,this.m_v2.a=u*x,this.m_count=2;return}if(c>0&&h>0&&E<=0){var T=1/(c+h);this.m_v1.a=c*T,this.m_v3.a=h*T,this.m_count=2,this.m_v2.Set(this.m_v3);return}if(o<=0&&y<=0){this.m_v2.a=1,this.m_count=1,this.m_v1.Set(this.m_v2);return}if(c<=0&&g<=0){this.m_v3.a=1,this.m_count=1,this.m_v1.Set(this.m_v3);return}if(g>0&&y>0&&w<=0){var N=1/(g+y);this.m_v2.a=g*N,this.m_v3.a=y*N,this.m_count=2,this.m_v1.Set(this.m_v3);return}var C=1/(w+E+S);this.m_v1.a=w*C,this.m_v2.a=E*C,this.m_v3.a=S*C,this.m_count=3},R.b2SimplexCache=function(){this.indexA=new n(3),this.indexB=new n(3)},U.b2SimplexVertex=function(){},U.prototype.Set=function(e){this.wA.SetV(e.wA),this.wB.SetV(e.wB),this.w.SetV(e.w),this.a=e.a,this.indexA=e.indexA,this.indexB=e.indexB},z.b2TimeOfImpact=function(){},z.TimeOfImpact=function(e){++z.b2_toiCalls;var t=e.proxyA,n=e.proxyB,r=e.sweepA,i=e.sweepB;c.b2Assert(r.t0==i.t0),c.b2Assert(1-r.t0>Number.MIN_VALUE);var s=t.m_radius+n.m_radius,o=e.tolerance,u=0,a=1e3,f=0,l=0;z.s_cache.count=0,z.s_distanceInput.useRadii=!1;for(;;){r.GetTransform(z.s_xfA,u),i.GetTransform(z.s_xfB,u),z.s_distanceInput.proxyA=t,z.s_distanceInput.proxyB=n,z.s_distanceInput.transformA=z.s_xfA,z.s_distanceInput.transformB=z.s_xfB,N.Distance(z.s_distanceOutput,z.s_cache,z.s_distanceInput);if(z.s_distanceOutput.distance<=0){u=1;break}z.s_fcn.Initialize(z.s_cache,t,z.s_xfA,n,z.s_xfB);var h=z.s_fcn.Evaluate(z.s_xfA,z.s_xfB);if(h<=0){u=1;break}f==0&&(h>s?l=d.Max(s-o,.75*s):l=d.Max(h-o,.02*s));if(h-l<.5*o){if(f==0){u=1;break}break}var p=u,v=u,m=1,g=h;r.GetTransform(z.s_xfA,m),i.GetTransform(z.s_xfB,m);var y=z.s_fcn.Evaluate(z.s_xfA,z.s_xfB);if(y>=l){u=1;break}var b=0;for(;;){var w=0;b&1?w=v+(l-g)*(m-v)/(y-g):w=.5*(v+m),r.GetTransform(z.s_xfA,w),i.GetTransform(z.s_xfB,w);var E=z.s_fcn.Evaluate(z.s_xfA,z.s_xfB);if(d.Abs(E-l)<.025*o){p=w;break}E>l?(v=w,g=E):(m=w,y=E),++b,++z.b2_toiRootIters;if(b==50)break}z.b2_toiMaxRootIters=d.Max(z.b2_toiMaxRootIters,b);if(p<(1+100*Number.MIN_VALUE)*u)break;u=p,f++,++z.b2_toiIters;if(f==a)break}return z.b2_toiMaxIters=d.Max(z.b2_toiMaxIters,f),u},e.postDefs.push(function(){e.Collision.b2TimeOfImpact.b2_toiCalls=0,e.Collision.b2TimeOfImpact.b2_toiIters=0,e.Collision.b2TimeOfImpact.b2_toiMaxIters=0,e.Collision.b2TimeOfImpact.b2_toiRootIters=0,e.Collision.b2TimeOfImpact.b2_toiMaxRootIters=0,e.Collision.b2TimeOfImpact.s_cache=new R,e.Collision.b2TimeOfImpact.s_distanceInput=new C,e.Collision.b2TimeOfImpact.s_xfA=new m,e.Collision.b2TimeOfImpact.s_xfB=new m,e.Collision.b2TimeOfImpact.s_fcn=new I,e.Collision.b2TimeOfImpact.s_distanceOutput=new k}),W.b2TOIInput=function(){this.proxyA=new L,this.proxyB=new L,this.sweepA=new v,this.sweepB=new v},X.b2WorldManifold=function(){this.m_normal=new g},X.prototype.b2WorldManifold=function(){this.m_points=new t(c.b2_maxManifoldPoints);for(var e=0;e<c.b2_maxManifoldPoints;e++)this.m_points[e]=new g},X.prototype.Initialize=function(e,t,n,r,i){n===undefined&&(n=0),i===undefined&&(i=0);if(e.m_pointCount==0)return;var s=0,o,u,a=0,f=0,l=0,c=0,h=0,p=0;switch(e.m_type){case D.e_circles:u=t.R,o=e.m_localPoint;var d=t.position.x+u.col1.x*o.x+u.col2.x*o.y,v=t.position.y+u.col1.y*o.x+u.col2.y*o.y;u=r.R,o=e.m_points[0].m_localPoint;var m=r.position.x+u.col1.x*o.x+u.col2.x*o.y,g=r.position.y+u.col1.y*o.x+u.col2.y*o.y,y=m-d,b=g-v,w=y*y+b*b;if(w>Number.MIN_VALUE*Number.MIN_VALUE){var E=Math.sqrt(w);this.m_normal.x=y/E,this.m_normal.y=b/E}else this.m_normal.x=1,this.m_normal.y=0;var S=d+n*this.m_normal.x,x=v+n*this.m_normal.y,T=m-i*this.m_normal.x,N=g-i*this.m_normal.y;this.m_points[0].x=.5*(S+T),this.m_points[0].y=.5*(x+N);break;case D.e_faceA:u=t.R,o=e.m_localPlaneNormal,a=u.col1.x*o.x+u.col2.x*o.y,f=u.col1.y*o.x+u.col2.y*o.y,u=t.R,o=e.m_localPoint,l=t.position.x+u.col1.x*o.x+u.col2.x*o.y,c=t.position.y+u.col1.y*o.x+u.col2.y*o.y,this.m_normal.x=a,this.m_normal.y=f;for(s=0;s<e.m_pointCount;s++)u=r.R,o=e.m_points[s].m_localPoint,h=r.position.x+u.col1.x*o.x+u.col2.x*o.y,p=r.position.y+u.col1.y*o.x+u.col2.y*o.y,this.m_points[s].x=h+.5*(n-(h-l)*a-(p-c)*f-i)*a,this.m_points[s].y=p+.5*(n-(h-l)*a-(p-c)*f-i)*f;break;case D.e_faceB:u=r.R,o=e.m_localPlaneNormal,a=u.col1.x*o.x+u.col2.x*o.y,f=u.col1.y*o.x+u.col2.y*o.y,u=r.R,o=e.m_localPoint,l=r.position.x+u.col1.x*o.x+u.col2.x*o.y,c=r.position.y+u.col1.y*o.x+u.col2.y*o.y,this.m_normal.x=-a,this.m_normal.y=-f;for(s=0;s<e.m_pointCount;s++)u=t.R,o=e.m_points[s].m_localPoint,h=t.position.x+u.col1.x*o.x+u.col2.x*o.y,p=t.position.y+u.col1.y*o.x+u.col2.y*o.y,this.m_points[s].x=h+.5*(i-(h-l)*a-(p-c)*f-n)*a,this.m_points[s].y=p+.5*(i-(h-l)*a-(p-c)*f-n)*f}},V.ClipVertex=function(){this.v=new g,this.id=new x},V.prototype.Set=function(e){this.v.SetV(e.v),this.id.Set(e.id)},$.Features=function(){},Object.defineProperty($.prototype,"referenceEdge",{enumerable:!1,configurable:!0,get:function(){return this._referenceEdge}}),Object.defineProperty($.prototype,"referenceEdge",{enumerable:!1,configurable:!0,set:function(e){e===undefined&&(e=0),this._referenceEdge=e,this._m_id._key=this._m_id._key&4294967040|this._referenceEdge&255}}),Object.defineProperty($.prototype,"incidentEdge",{enumerable:!1,configurable:!0,get:function(){return this._incidentEdge}}),Object.defineProperty($.prototype,"incidentEdge",{enumerable:!1,configurable:!0,set:function(e){e===undefined&&(e=0),this._incidentEdge=e,this._m_id._key=this._m_id._key&4294902015|this._incidentEdge<<8&65280}}),Object.defineProperty($.prototype,"incidentVertex",{enumerable:!1,configurable:!0,get:function(){return this._incidentVertex}}),Object.defineProperty($.prototype,"incidentVertex",{enumerable:!1,configurable:!0,set:function(e){e===undefined&&(e=0),this._incidentVertex=e,this._m_id._key=this._m_id._key&4278255615|this._incidentVertex<<16&16711680}}),Object.defineProperty($.prototype,"flip",{enumerable:!1,configurable:!0,get:function(){return this._flip}}),Object.defineProperty($.prototype,"flip",{enumerable:!1,configurable:!0,set:function(e){e===undefined&&(e=0),this._flip=e,this._m_id._key=this._m_id._key&16777215|this._flip<<24&4278190080}})}(),function(){var r=e.Common.b2Color,i=e.Common.b2internal,s=e.Common.b2Settings,o=e.Collision.Shapes.b2CircleShape,u=e.Collision.Shapes.b2EdgeChainDef,a=e.Collision.Shapes.b2EdgeShape,f=e.Collision.Shapes.b2MassData,l=e.Collision.Shapes.b2PolygonShape,c=e.Collision.Shapes.b2Shape,h=e.Common.Math.b2Mat22,p=e.Common.Math.b2Mat33,d=e.Common.Math.b2Math,v=e.Common.Math.b2Sweep,m=e.Common.Math.b2Transform,g=e.Common.Math.b2Vec2,y=e.Common.Math.b2Vec3,b=e.Dynamics.b2Body,w=e.Dynamics.b2BodyDef,E=e.Dynamics.b2ContactFilter,S=e.Dynamics.b2ContactImpulse,x=e.Dynamics.b2ContactListener,T=e.Dynamics.b2ContactManager,N=e.Dynamics.b2DebugDraw,C=e.Dynamics.b2DestructionListener,k=e.Dynamics.b2FilterData,L=e.Dynamics.b2Fixture,A=e.Dynamics.b2FixtureDef,O=e.Dynamics.b2Island,M=e.Dynamics.b2TimeStep,_=e.Dynamics.b2World,D=e.Collision.b2AABB,P=e.Collision.b2Bound,H=e.Collision.b2BoundValues,B=e.Collision.b2Collision,j=e.Collision.b2ContactID,F=e.Collision.b2ContactPoint,I=e.Collision.b2Distance,q=e.Collision.b2DistanceInput,R=e.Collision.b2DistanceOutput,U=e.Collision.b2DistanceProxy,z=e.Collision.b2DynamicTree,W=e.Collision.b2DynamicTreeBroadPhase,X=e.Collision.b2DynamicTreeNode,V=e.Collision.b2DynamicTreePair,$=e.Collision.b2Manifold,J=e.Collision.b2ManifoldPoint,K=e.Collision.b2Point,Q=e.Collision.b2RayCastInput,G=e.Collision.b2RayCastOutput,Y=e.Collision.b2Segment,Z=e.Collision.b2SeparationFunction,et=e.Collision.b2Simplex,tt=e.Collision.b2SimplexCache,nt=e.Collision.b2SimplexVertex,rt=e.Collision.b2TimeOfImpact,it=e.Collision.b2TOIInput,st=e.Collision.b2WorldManifold,ot=e.Collision.ClipVertex,ut=e.Collision.Features,at=e.Collision.IBroadPhase;e.inherit(o,e.Collision.Shapes.b2Shape),o.prototype.__super=e.Collision.Shapes.b2Shape.prototype,o.b2CircleShape=function(){e.Collision.Shapes.b2Shape.b2Shape.apply(this,arguments),this.m_p=new g},o.prototype.Copy=function(){var e=new o;return e.Set(this),e},o.prototype.Set=function(t){this.__super.Set.call(this,t);if(e.is(t,o)){var n=t instanceof o?t:null;this.m_p.SetV(n.m_p)}},o.prototype.TestPoint=function(e,t){var n=e.R,r=e.position.x+(n.col1.x*this.m_p.x+n.col2.x*this.m_p.y),i=e.position.y+(n.col1.y*this.m_p.x+n.col2.y*this.m_p.y);return r=t.x-r,i=t.y-i,r*r+i*i<=this.m_radius*this.m_radius},o.prototype.RayCast=function(e,t,n){var r=n.R,i=n.position.x+(r.col1.x*this.m_p.x+r.col2.x*this.m_p.y),s=n.position.y+(r.col1.y*this.m_p.x+r.col2.y*this.m_p.y),o=t.p1.x-i,u=t.p1.y-s,a=o*o+u*u-this.m_radius*this.m_radius,f=t.p2.x-t.p1.x,l=t.p2.y-t.p1.y,c=o*f+u*l,h=f*f+l*l,p=c*c-h*a;if(p<0||h<Number.MIN_VALUE)return!1;var d=-(c+Math.sqrt(p));return 0<=d&&d<=t.maxFraction*h?(d/=h,e.fraction=d,e.normal.x=o+d*f,e.normal.y=u+d*l,e.normal.Normalize(),!0):!1},o.prototype.ComputeAABB=function(e,t){var n=t.R,r=t.position.x+(n.col1.x*this.m_p.x+n.col2.x*this.m_p.y),i=t.position.y+(n.col1.y*this.m_p.x+n.col2.y*this.m_p.y);e.lowerBound.Set(r-this.m_radius,i-this.m_radius),e.upperBound.Set(r+this.m_radius,i+this.m_radius)},o.prototype.ComputeMass=function(e,t){t===undefined&&(t=0),e.mass=t*s.b2_pi*this.m_radius*this.m_radius,e.center.SetV(this.m_p),e.I=e.mass*(.5*this.m_radius*this.m_radius+(this.m_p.x*this.m_p.x+this.m_p.y*this.m_p.y))},o.prototype.ComputeSubmergedArea=function(e,t,n,r){t===undefined&&(t=0);var i=d.MulX(n,this.m_p),s=-(d.Dot(e,i)-t);if(s<-this.m_radius+Number.MIN_VALUE)return 0;if(s>this.m_radius)return r.SetV(i),Math.PI*this.m_radius*this.m_radius;var o=this.m_radius*this.m_radius,u=s*s,a=o*(Math.asin(s/this.m_radius)+Math.PI/2)+s*Math.sqrt(o-u),f=-2/3*Math.pow(o-u,1.5)/a;return r.x=i.x+e.x*f,r.y=i.y+e.y*f,a},o.prototype.GetLocalPosition=function(){return this.m_p},o.prototype.SetLocalPosition=function(e){this.m_p.SetV(e)},o.prototype.GetRadius=function(){return this.m_radius},o.prototype.SetRadius=function(e){e===undefined&&(e=0),this.m_radius=e},o.prototype.b2CircleShape=function(e){e===undefined&&(e=0),this.__super.b2Shape.call(this),this.m_type=c.e_circleShape,this.m_radius=e},u.b2EdgeChainDef=function(){},u.prototype.b2EdgeChainDef=function(){this.vertexCount=0,this.isALoop=!0,this.vertices=[]},e.inherit(a,e.Collision.Shapes.b2Shape),a.prototype.__super=e.Collision.Shapes.b2Shape.prototype,a.b2EdgeShape=function(){e.Collision.Shapes.b2Shape.b2Shape.apply(this,arguments),this.s_supportVec=new g,this.m_v1=new g,this.m_v2=new g,this.m_coreV1=new g,this.m_coreV2=new g,this.m_normal=new g,this.m_direction=new g,this.m_cornerDir1=new g,this.m_cornerDir2=new g},a.prototype.TestPoint=function(e,t){return!1},a.prototype.RayCast=function(e,t,n){var r,i=t.p2.x-t.p1.x,s=t.p2.y-t.p1.y;r=n.R;var o=n.position.x+(r.col1.x*this.m_v1.x+r.col2.x*this.m_v1.y),u=n.position.y+(r.col1.y*this.m_v1.x+r.col2.y*this.m_v1.y),a=n.position.y+(r.col1.y*this.m_v2.x+r.col2.y*this.m_v2.y)-u,f=-(n.position.x+(r.col1.x*this.m_v2.x+r.col2.x*this.m_v2.y)-o),l=100*Number.MIN_VALUE,c=-(i*a+s*f);if(c>l){var h=t.p1.x-o,p=t.p1.y-u,d=h*a+p*f;if(0<=d&&d<=t.maxFraction*c){var v=-i*p+s*h;if(-l*c<=v&&v<=c*(1+l)){d/=c,e.fraction=d;var m=Math.sqrt(a*a+f*f);return e.normal.x=a/m,e.normal.y=f/m,!0}}}return!1},a.prototype.ComputeAABB=function(e,t){var n=t.R,r=t.position.x+(n.col1.x*this.m_v1.x+n.col2.x*this.m_v1.y),i=t.position.y+(n.col1.y*this.m_v1.x+n.col2.y*this.m_v1.y),s=t.position.x+(n.col1.x*this.m_v2.x+n.col2.x*this.m_v2.y),o=t.position.y+(n.col1.y*this.m_v2.x+n.col2.y*this.m_v2.y);r<s?(e.lowerBound.x=r,e.upperBound.x=s):(e.lowerBound.x=s,e.upperBound.x=r),i<o?(e.lowerBound.y=i,e.upperBound.y=o):(e.lowerBound.y=o,e.upperBound.y=i)},a.prototype.ComputeMass=function(e,t){t===undefined&&(t=0),e.mass=0,e.center.SetV(this.m_v1),e.I=0},a.prototype.ComputeSubmergedArea=function(e,t,n,r){t===undefined&&(t=0);var i=new g(e.x*t,e.y*t),s=d.MulX(n,this.m_v1),o=d.MulX(n,this.m_v2),u=d.Dot(e,s)-t,a=d.Dot(e,o)-t;if(u>0){if(a>0)return 0;s.x=-a/(u-a)*s.x+u/(u-a)*o.x,s.y=-a/(u-a)*s.y+u/(u-a)*o.y}else a>0&&(o.x=-a/(u-a)*s.x+u/(u-a)*o.x,o.y=-a/(u-a)*s.y+u/(u-a)*o.y);return r.x=(i.x+s.x+o.x)/3,r.y=(i.y+s.y+o.y)/3,.5*((s.x-i.x)*(o.y-i.y)-(s.y-i.y)*(o.x-i.x))},a.prototype.GetLength=function(){return this.m_length},a.prototype.GetVertex1=function(){return this.m_v1},a.prototype.GetVertex2=function(){return this.m_v2},a.prototype.GetCoreVertex1=function(){return this.m_coreV1},a.prototype.GetCoreVertex2=function(){return this.m_coreV2},a.prototype.GetNormalVector=function(){return this.m_normal},a.prototype.GetDirectionVector=function(){return this.m_direction},a.prototype.GetCorner1Vector=function(){return this.m_cornerDir1},a.prototype.GetCorner2Vector=function(){return this.m_cornerDir2},a.prototype.Corner1IsConvex=function(){return this.m_cornerConvex1},a.prototype.Corner2IsConvex=function(){return this.m_cornerConvex2},a.prototype.GetFirstVertex=function(e){var t=e.R;return new g(e.position.x+(t.col1.x*this.m_coreV1.x+t.col2.x*this.m_coreV1.y),e.position.y+(t.col1.y*this.m_coreV1.x+t.col2.y*this.m_coreV1.y))},a.prototype.GetNextEdge=function(){return this.m_nextEdge},a.prototype.GetPrevEdge=function(){return this.m_prevEdge},a.prototype.Support=function(e,t,n){t===undefined&&(t=0),n===undefined&&(n=0);var r=e.R,i=e.position.x+(r.col1.x*this.m_coreV1.x+r.col2.x*this.m_coreV1.y),s=e.position.y+(r.col1.y*this.m_coreV1.x+r.col2.y*this.m_coreV1.y),o=e.position.x+(r.col1.x*this.m_coreV2.x+r.col2.x*this.m_coreV2.y),u=e.position.y+(r.col1.y*this.m_coreV2.x+r.col2.y*this.m_coreV2.y);return i*t+s*n>o*t+u*n?(this.s_supportVec.x=i,this.s_supportVec.y=s):(this.s_supportVec.x=o,this.s_supportVec.y=u),this.s_supportVec},a.prototype.b2EdgeShape=function(e,t){this.__super.b2Shape.call(this),this.m_type=c.e_edgeShape,this.m_prevEdge=null,this.m_nextEdge=null,this.m_v1=e,this.m_v2=t,this.m_direction.Set(this.m_v2.x-this.m_v1.x,this.m_v2.y-this.m_v1.y),this.m_length=this.m_direction.Normalize(),this.m_normal.Set(this.m_direction.y,-this.m_direction.x),this.m_coreV1.Set(-s.b2_toiSlop*(this.m_normal.x-this.m_direction.x)+this.m_v1.x,-s.b2_toiSlop*(this.m_normal.y-this.m_direction.y)+this.m_v1.y),this.m_coreV2.Set(-s.b2_toiSlop*(this.m_normal.x+this.m_direction.x)+this.m_v2.x,-s.b2_toiSlop*(this.m_normal.y+this.m_direction.y)+this.m_v2.y),this.m_cornerDir1=this.m_normal,this.m_cornerDir2.Set(-this.m_normal.x,-this.m_normal.y)},a.prototype.SetPrevEdge=function(e,t,n,r){this.m_prevEdge=e,this.m_coreV1=t,this.m_cornerDir1=n,this.m_cornerConvex1=r},a.prototype.SetNextEdge=function(e,t,n,r){this.m_nextEdge=e,this.m_coreV2=t,this.m_cornerDir2=n,this.m_cornerConvex2=r},f.b2MassData=function(){this.mass=0,this.center=new g(0,0),this.I=0},e.inherit(l,e.Collision.Shapes.b2Shape),l.prototype.__super=e.Collision.Shapes.b2Shape.prototype,l.b2PolygonShape=function(){e.Collision.Shapes.b2Shape.b2Shape.apply(this,arguments)},l.prototype.Copy=function(){var e=new l;return e.Set(this),e},l.prototype.Set=function(t){this.__super.Set.call(this,t);if(e.is(t,l)){var n=t instanceof l?t:null;this.m_centroid.SetV(n.m_centroid),this.m_vertexCount=n.m_vertexCount,this.Reserve(this.m_vertexCount);for(var r=0;r<this.m_vertexCount;r++)this.m_vertices[r].SetV(n.m_vertices[r]),this.m_normals[r].SetV(n.m_normals[r])}},l.prototype.SetAsArray=function(e,n){n===undefined&&(n=0);var r=new t,i=0,s;for(i=0;i<e.length;++i)s=e[i],r.push(s);this.SetAsVector(r,n)},l.AsArray=function(e,t){t===undefined&&(t=0);var n=new l;return n.SetAsArray(e,t),n},l.prototype.SetAsVector=function(e,t){t===undefined&&(t=0),t==0&&(t=e.length),s.b2Assert(2<=t),this.m_vertexCount=t,this.Reserve(t);var n=0;for(n=0;n<this.m_vertexCount;n++)this.m_vertices[n].SetV(e[n]);for(n=0;n<this.m_vertexCount;++n){var r=parseInt(n),i=parseInt(n+1<this.m_vertexCount?n+1:0),o=d.SubtractVV(this.m_vertices[i],this.m_vertices[r]);s.b2Assert(o.LengthSquared()>Number.MIN_VALUE),this.m_normals[n].SetV(d.CrossVF(o,1)),this.m_normals[n].Normalize()}this.m_centroid=l.ComputeCentroid(this.m_vertices,this.m_vertexCount)},l.AsVector=function(e,t){t===undefined&&(t=0);var n=new l;return n.SetAsVector(e,t),n},l.prototype.SetAsBox=function(e,t){e===undefined&&(e=0),t===undefined&&(t=0),this.m_vertexCount=4,this.Reserve(4),this.m_vertices[0].Set(-e,-t),this.m_vertices[1].Set(e,-t),this.m_vertices[2].Set(e,t),this.m_vertices[3].Set(-e,t),this.m_normals[0].Set(0,-1),this.m_normals[1].Set(1,0),this.m_normals[2].Set(0,1),this.m_normals[3].Set(-1,0),this.m_centroid.SetZero()},l.AsBox=function(e,t){e===undefined&&(e=0),t===undefined&&(t=0);var n=new l;return n.SetAsBox(e,t),n},l.prototype.SetAsOrientedBox=function(e,t,n,r){e===undefined&&(e=0),t===undefined&&(t=0),n===undefined&&(n=null),r===undefined&&(r=0),this.m_vertexCount=4,this.Reserve(4),this.m_vertices[0].Set(-e,-t),this.m_vertices[1].Set(e,-t),this.m_vertices[2].Set(e,t),this.m_vertices[3].Set(-e,t),this.m_normals[0].Set(0,-1),this.m_normals[1].Set(1,0),this.m_normals[2].Set(0,1),this.m_normals[3].Set(-1,0),this.m_centroid=n;var i=new m;i.position=n,i.R.Set(r);for(var s=0;s<this.m_vertexCount;++s)this.m_vertices[s]=d.MulX(i,this.m_vertices[s]),this.m_normals[s]=d.MulMV(i.R,this.m_normals[s])},l.AsOrientedBox=function(e,t,n,r){e===undefined&&(e=0),t===undefined&&(t=0),n===undefined&&(n=null),r===undefined&&(r=0);var i=new l;return i.SetAsOrientedBox(e,t,n,r),i},l.prototype.SetAsEdge=function(e,t){this.m_vertexCount=2,this.Reserve(2),this.m_vertices[0].SetV(e),this.m_vertices[1].SetV(t),this.m_centroid.x=.5*(e.x+t.x),this.m_centroid.y=.5*(e.y+t.y),this.m_normals[0]=d.CrossVF(d.SubtractVV(t,e),1),this.m_normals[0].Normalize(),this.m_normals[1].x=-this.m_normals[0].x,this.m_normals[1].y=-this.m_normals[0].y},l.AsEdge=function(e,t){var n=new l;return n.SetAsEdge(e,t),n},l.prototype.TestPoint=function(e,t){var n,r=e.R,i=t.x-e.position.x,s=t.y-e.position.y,o=i*r.col1.x+s*r.col1.y,u=i*r.col2.x+s*r.col2.y;for(var a=0;a<this.m_vertexCount;++a){n=this.m_vertices[a],i=o-n.x,s=u-n.y,n=this.m_normals[a];var f=n.x*i+n.y*s;if(f>0)return!1}return!0},l.prototype.RayCast=function(e,t,n){var r=0,i=t.maxFraction,s=0,o=0,u,a;s=t.p1.x-n.position.x,o=t.p1.y-n.position.y,u=n.R;var f=s*u.col1.x+o*u.col1.y,l=s*u.col2.x+o*u.col2.y;s=t.p2.x-n.position.x,o=t.p2.y-n.position.y,u=n.R;var c=s*u.col1.x+o*u.col1.y,h=s*u.col2.x+o*u.col2.y,p=c-f,d=h-l,v=parseInt(-1);for(var m=0;m<this.m_vertexCount;++m){a=this.m_vertices[m],s=a.x-f,o=a.y-l,a=this.m_normals[m];var g=a.x*s+a.y*o,y=a.x*p+a.y*d;if(y==0){if(g<0)return!1}else y<0&&g<r*y?(r=g/y,v=m):y>0&&g<i*y&&(i=g/y);if(i<r-Number.MIN_VALUE)return!1}return v>=0?(e.fraction=r,u=n.R,a=this.m_normals[v],e.normal.x=u.col1.x*a.x+u.col2.x*a.y,e.normal.y=u.col1.y*a.x+u.col2.y*a.y,!0):!1},l.prototype.ComputeAABB=function(e,t){var n=t.R,r=this.m_vertices[0],i=t.position.x+(n.col1.x*r.x+n.col2.x*r.y),s=t.position.y+(n.col1.y*r.x+n.col2.y*r.y),o=i,u=s;for(var a=1;a<this.m_vertexCount;++a){r=this.m_vertices[a];var f=t.position.x+(n.col1.x*r.x+n.col2.x*r.y),l=t.position.y+(n.col1.y*r.x+n.col2.y*r.y);i=i<f?i:f,s=s<l?s:l,o=o>f?o:f,u=u>l?u:l}e.lowerBound.x=i-this.m_radius,e.lowerBound.y=s-this.m_radius,e.upperBound.x=o+this.m_radius,e.upperBound.y=u+this.m_radius},l.prototype.ComputeMass=function(e,t){t===undefined&&(t=0);if(this.m_vertexCount==2){e.center.x=.5*(this.m_vertices[0].x+this.m_vertices[1].x),e.center.y=.5*(this.m_vertices[0].y+this.m_vertices[1].y),e.mass=0,e.I=0;return}var n=0,r=0,i=0,s=0,o=0,u=0,a=1/3;for(var f=0;f<this.m_vertexCount;++f){var l=this.m_vertices[f],c=f+1<this.m_vertexCount?this.m_vertices[parseInt(f+1)]:this.m_vertices[0],h=l.x-o,p=l.y-u,d=c.x-o,v=c.y-u,m=h*v-p*d,g=.5*m;i+=g,n+=g*a*(o+l.x+c.x),r+=g*a*(u+l.y+c.y);var y=o,b=u,w=h,E=p,S=d,x=v,T=a*(.25*(w*w+S*w+S*S)+(y*w+y*S))+.5*y*y,N=a*(.25*(E*E+x*E+x*x)+(b*E+b*x))+.5*b*b;s+=m*(T+N)}e.mass=t*i,n*=1/i,r*=1/i,e.center.Set(n,r),e.I=t*s},l.prototype.ComputeSubmergedArea=function(e,t,r,i){t===undefined&&(t=0);var s=d.MulTMV(r.R,e),o=t-d.Dot(e,r.position),u=new n,a=0,l=parseInt(-1),c=parseInt(-1),h=!1,p=0;for(p=0;p<this.m_vertexCount;++p){u[p]=d.Dot(s,this.m_vertices[p])-o;var v=u[p]<-Number.MIN_VALUE;p>0&&(v?h||(l=p-1,a++):h&&(c=p-1,a++)),h=v}switch(a){case 0:if(h){var m=new f;return this.ComputeMass(m,1),i.SetV(d.MulX(r,m.center)),m.mass}return 0;case 1:l==-1?l=this.m_vertexCount-1:c=this.m_vertexCount-1}var y=parseInt((l+1)%this.m_vertexCount),b=parseInt((c+1)%this.m_vertexCount),w=(0-u[l])/(u[y]-u[l]),E=(0-u[c])/(u[b]-u[c]),S=new g(this.m_vertices[l].x*(1-w)+this.m_vertices[y].x*w,this.m_vertices[l].y*(1-w)+this.m_vertices[y].y*w),x=new g(this.m_vertices[c].x*(1-E)+this.m_vertices[b].x*E,this.m_vertices[c].y*(1-E)+this.m_vertices[b].y*E),T=0,N=new g,C=this.m_vertices[y],k;p=y;while(p!=b){p=(p+1)%this.m_vertexCount,p==b?k=x:k=this.m_vertices[p];var L=.5*((C.x-S.x)*(k.y-S.y)-(C.y-S.y)*(k.x-S.x));T+=L,N.x+=L*(S.x+C.x+k.x)/3,N.y+=L*(S.y+C.y+k.y)/3,C=k}return N.Multiply(1/T),i.SetV(d.MulX(r,N)),T},l.prototype.GetVertexCount=function(){return this.m_vertexCount},l.prototype.GetVertices=function(){return this.m_vertices},l.prototype.GetNormals=function(){return this.m_normals},l.prototype.GetSupport=function(e){var t=0,n=this.m_vertices[0].x*e.x+this.m_vertices[0].y*e.y;for(var r=1;r<this.m_vertexCount;++r){var i=this.m_vertices[r].x*e.x+this.m_vertices[r].y*e.y;i>n&&(t=r,n=i)}return t},l.prototype.GetSupportVertex=function(e){var t=0,n=this.m_vertices[0].x*e.x+this.m_vertices[0].y*e.y;for(var r=1;r<this.m_vertexCount;++r){var i=this.m_vertices[r].x*e.x+this.m_vertices[r].y*e.y;i>n&&(t=r,n=i)}return this.m_vertices[t]},l.prototype.Validate=function(){return!1},l.prototype.b2PolygonShape=function(){this.__super.b2Shape.call(this),this.m_type=c.e_polygonShape,this.m_centroid=new g,this.m_vertices=new t,this.m_normals=new t},l.prototype.Reserve=function(e){e===undefined&&(e=0);for(var t=parseInt(this.m_vertices.length);t<e;t++)this.m_vertices[t]=new g,this.m_normals[t]=new g},l.ComputeCentroid=function(e,t){t===undefined&&(t=0);var n=new g,r=0,i=0,s=0,o=1/3;for(var u=0;u<t;++u){var a=e[u],f=u+1<t?e[parseInt(u+1)]:e[0],l=a.x-i,c=a.y-s,h=f.x-i,p=f.y-s,d=l*p-c*h,v=.5*d;r+=v,n.x+=v*o*(i+a.x+f.x),n.y+=v*o*(s+a.y+f.y)}return n.x*=1/r,n.y*=1/r,n},l.ComputeOBB=function(e,n,r){r===undefined&&(r=0);var i=0,s=new t(r+1);for(i=0;i<r;++i)s[i]=n[i];s[r]=s[0];var o=Number.MAX_VALUE;for(i=1;i<=r;++i){var u=s[parseInt(i-1)],a=s[i].x-u.x,f=s[i].y-u.y,l=Math.sqrt(a*a+f*f);a/=l,f/=l;var c=-f,h=a,p=Number.MAX_VALUE,d=Number.MAX_VALUE,v=-Number.MAX_VALUE,m=-Number.MAX_VALUE;for(var g=0;g<r;++g){var y=s[g].x-u.x,b=s[g].y-u.y,w=a*y+f*b,E=c*y+h*b;w<p&&(p=w),E<d&&(d=E),w>v&&(v=w),E>m&&(m=E)}var S=(v-p)*(m-d);if(S<.95*o){o=S,e.R.col1.x=a,e.R.col1.y=f,e.R.col2.x=c,e.R.col2.y=h;var x=.5*(p+v),T=.5*(d+m),N=e.R;e.center.x=u.x+(N.col1.x*x+N.col2.x*T),e.center.y=u.y+(N.col1.y*x+N.col2.y*T),e.extents.x=.5*(v-p),e.extents.y=.5*(m-d)}}},e.postDefs.push(function(){e.Collision.Shapes.b2PolygonShape.s_mat=new h}),c.b2Shape=function(){},c.prototype.Copy=function(){return null},c.prototype.Set=function(e){this.m_radius=e.m_radius},c.prototype.GetType=function(){return this.m_type},c.prototype.TestPoint=function(e,t){return!1},c.prototype.RayCast=function(e,t,n){return!1},c.prototype.ComputeAABB=function(e,t){},c.prototype.ComputeMass=function(e,t){t===undefined&&(t=0)},c.prototype.ComputeSubmergedArea=function(e,t,n,r){return t===undefined&&(t=0),0},c.TestOverlap=function(e,t,n,r){var i=new q;i.proxyA=new U,i.proxyA.Set(e),i.proxyB=new U,i.proxyB.Set(n),i.transformA=t,i.transformB=r,i.useRadii=!0;var s=new tt;s.count=0;var o=new R;return I.Distance(o,s,i),o.distance<10*Number.MIN_VALUE},c.prototype.b2Shape=function(){this.m_type=c.e_unknownShape,this.m_radius=s.b2_linearSlop},e.postDefs.push(function(){e.Collision.Shapes.b2Shape.e_unknownShape=parseInt(-1),e.Collision.Shapes.b2Shape.e_circleShape=0,e.Collision.Shapes.b2Shape.e_polygonShape=1,e.Collision.Shapes.b2Shape.e_edgeShape=2,e.Collision.Shapes.b2Shape.e_shapeTypeCount=3,e.Collision.Shapes.b2Shape.e_hitCollide=1,e.Collision.Shapes.b2Shape.e_missCollide=0,e.Collision.Shapes.b2Shape.e_startsInsideCollide=parseInt(-1)})}(),function(){var t=e.Common.b2Color,n=e.Common.b2internal,r=e.Common.b2Settings,i=e.Common.Math.b2Mat22,s=e.Common.Math.b2Mat33,o=e.Common.Math.b2Math,u=e.Common.Math.b2Sweep,a=e.Common.Math.b2Transform,f=e.Common.Math.b2Vec2,l=e.Common.Math.b2Vec3;t.b2Color=function(){this._r=0,this._g=0,this._b=0},t.prototype.b2Color=function(t,n,r){t===undefined&&(t=0),n===undefined&&(n=0),r===undefined&&(r=0),this._r=e.parseUInt(255*o.Clamp(t,0,1)),this._g=e.parseUInt(255*o.Clamp(n,0,1)),this._b=e.parseUInt(255*o.Clamp(r,0,1))},t.prototype.Set=function(t,n,r){t===undefined&&(t=0),n===undefined&&(n=0),r===undefined&&(r=0),this._r=e.parseUInt(255*o.Clamp(t,0,1)),this._g=e.parseUInt(255*o.Clamp(n,0,1)),this._b=e.parseUInt(255*o.Clamp(r,0,1))},Object.defineProperty(t.prototype,"r",{enumerable:!1,configurable:!0,set:function(t){t===undefined&&(t=0),this._r=e.parseUInt(255*o.Clamp(t,0,1))}}),Object.defineProperty(t.prototype,"g",{enumerable:!1,configurable:!0,set:function(t){t===undefined&&(t=0),this._g=e.parseUInt(255*o.Clamp(t,0,1))}}),Object.defineProperty(t.prototype,"b",{enumerable:!1,configurable:!0,set:function(t){t===undefined&&(t=0),this._b=e.parseUInt(255*o.Clamp(t,0,1))}}),Object.defineProperty(t.prototype,"color",{enumerable:!1,configurable:!0,get:function(){return this._r<<16|this._g<<8|this._b}}),r.b2Settings=function(){},r.b2MixFriction=function(e,t){return e===undefined&&(e=0),t===undefined&&(t=0),Math.sqrt(e*t)},r.b2MixRestitution=function(e,t){return e===undefined&&(e=0),t===undefined&&(t=0),e>t?e:t},r.b2Assert=function(e){if(!e)throw"Assertion Failed"},e.postDefs.push(function(){e.Common.b2Settings.VERSION="2.1alpha",e.Common.b2Settings.USHRT_MAX=65535,e.Common.b2Settings.b2_pi=Math.PI,e.Common.b2Settings.b2_maxManifoldPoints=2,e.Common.b2Settings.b2_aabbExtension=.1,e.Common.b2Settings.b2_aabbMultiplier=2,e.Common.b2Settings.b2_polygonRadius=2*r.b2_linearSlop,e.Common.b2Settings.b2_linearSlop=.005,e.Common.b2Settings.b2_angularSlop=2/180*r.b2_pi,e.Common.b2Settings.b2_toiSlop=8*r.b2_linearSlop,e.Common.b2Settings.b2_maxTOIContactsPerIsland=32,e.Common.b2Settings.b2_maxTOIJointsPerIsland=32,e.Common.b2Settings.b2_velocityThreshold=1,e.Common.b2Settings.b2_maxLinearCorrection=.2,e.Common.b2Settings.b2_maxAngularCorrection=8/180*r.b2_pi,e.Common.b2Settings.b2_maxTranslation=2,e.Common.b2Settings.b2_maxTranslationSquared=r.b2_maxTranslation*r.b2_maxTranslation,e.Common.b2Settings.b2_maxRotation=.5*r.b2_pi,e.Common.b2Settings.b2_maxRotationSquared=r.b2_maxRotation*r.b2_maxRotation,e.Common.b2Settings.b2_contactBaumgarte=.2,e.Common.b2Settings.b2_timeToSleep=.5,e.Common.b2Settings.b2_linearSleepTolerance=.01,e.Common.b2Settings.b2_angularSleepTolerance=2/180*r.b2_pi})}(),function(){var t=e.Collision.b2AABB,n=e.Common.b2Color,r=e.Common.b2internal,i=e.Common.b2Settings,s=e.Common.Math.b2Mat22,o=e.Common.Math.b2Mat33,u=e.Common.Math.b2Math,a=e.Common.Math.b2Sweep,f=e.Common.Math.b2Transform,l=e.Common.Math.b2Vec2,c=e.Common.Math.b2Vec3;s.b2Mat22=function(){this.col1=new l,this.col2=new l},s.prototype.b2Mat22=function(){this.SetIdentity()},s.FromAngle=function(e){e===undefined&&(e=0);var t=new s;return t.Set(e),t},s.FromVV=function(e,t){var n=new s;return n.SetVV(e,t),n},s.prototype.Set=function(e){e===undefined&&(e=0);var t=Math.cos(e),n=Math.sin(e);this.col1.x=t,this.col2.x=-n,this.col1.y=n,this.col2.y=t},s.prototype.SetVV=function(e,t){this.col1.SetV(e),this.col2.SetV(t)},s.prototype.Copy=function(){var e=new s;return e.SetM(this),e},s.prototype.SetM=function(e){this.col1.SetV(e.col1),this.col2.SetV(e.col2)},s.prototype.AddM=function(e){this.col1.x+=e.col1.x,this.col1.y+=e.col1.y,this.col2.x+=e.col2.x,this.col2.y+=e.col2.y},s.prototype.SetIdentity=function(){this.col1.x=1,this.col2.x=0,this.col1.y=0,this.col2.y=1},s.prototype.SetZero=function(){this.col1.x=0,this.col2.x=0,this.col1.y=0,this.col2.y=0},s.prototype.GetAngle=function(){return Math.atan2(this.col1.y,this.col1.x)},s.prototype.GetInverse=function(e){var t=this.col1.x,n=this.col2.x,r=this.col1.y,i=this.col2.y,s=t*i-n*r;return s!=0&&(s=1/s),e.col1.x=s*i,e.col2.x=-s*n,e.col1.y=-s*r,e.col2.y=s*t,e},s.prototype.Solve=function(e,t,n){t===undefined&&(t=0),n===undefined&&(n=0);var r=this.col1.x,i=this.col2.x,s=this.col1.y,o=this.col2.y,u=r*o-i*s;return u!=0&&(u=1/u),e.x=u*(o*t-i*n),e.y=u*(r*n-s*t),e},s.prototype.Abs=function(){this.col1.Abs(),this.col2.Abs()},o.b2Mat33=function(){this.col1=new c,this.col2=new c,this.col3=new c},o.prototype.b2Mat33=function(e,t,n){e===undefined&&(e=null),t===undefined&&(t=null),n===undefined&&(n=null),!e&&!t&&!n?(this.col1.SetZero(),this.col2.SetZero(),this.col3.SetZero()):(this.col1.SetV(e),this.col2.SetV(t),this.col3.SetV(n))},o.prototype.SetVVV=function(e,t,n){this.col1.SetV(e),this.col2.SetV(t),this.col3.SetV(n)},o.prototype.Copy=function(){return new o(this.col1,this.col2,this.col3)},o.prototype.SetM=function(e){this.col1.SetV(e.col1),this.col2.SetV(e.col2),this.col3.SetV(e.col3)},o.prototype.AddM=function(e){this.col1.x+=e.col1.x,this.col1.y+=e.col1.y,this.col1.z+=e.col1.z,this.col2.x+=e.col2.x,this.col2.y+=e.col2.y,this.col2.z+=e.col2.z,this.col3.x+=e.col3.x,this.col3.y+=e.col3.y,this.col3.z+=e.col3.z},o.prototype.SetIdentity=function(){this.col1.x=1,this.col2.x=0,this.col3.x=0,this.col1.y=0,this.col2.y=1,this.col3.y=0,this.col1.z=0,this.col2.z=0,this.col3.z=1},o.prototype.SetZero=function(){this.col1.x=0,this.col2.x=0,this.col3.x=0,this.col1.y=0,this.col2.y=0,this.col3.y=0,this.col1.z=0,this.col2.z=0,this.col3.z=0},o.prototype.Solve22=function(e,t,n){t===undefined&&(t=0),n===undefined&&(n=0);var r=this.col1.x,i=this.col2.x,s=this.col1.y,o=this.col2.y,u=r*o-i*s;return u!=0&&(u=1/u),e.x=u*(o*t-i*n),e.y=u*(r*n-s*t),e},o.prototype.Solve33=function(e,t,n,r){t===undefined&&(t=0),n===undefined&&(n=0),r===undefined&&(r=0);var i=this.col1.x,s=this.col1.y,o=this.col1.z,u=this.col2.x,a=this.col2.y,f=this.col2.z,l=this.col3.x,c=this.col3.y,h=this.col3.z,p=i*(a*h-f*c)+s*(f*l-u*h)+o*(u*c-a*l);return p!=0&&(p=1/p),e.x=p*(t*(a*h-f*c)+n*(f*l-u*h)+r*(u*c-a*l)),e.y=p*(i*(n*h-r*c)+s*(r*l-t*h)+o*(t*c-n*l)),e.z=p*(i*(a*r-f*n)+s*(f*t-u*r)+o*(u*n-a*t)),e},u.b2Math=function(){},u.IsValid=function(e){return e===undefined&&(e=0),isFinite(e)},u.Dot=function(e,t){return e.x*t.x+e.y*t.y},u.CrossVV=function(e,t){return e.x*t.y-e.y*t.x},u.CrossVF=function(e,t){t===undefined&&(t=0);var n=new l(t*e.y,-t*e.x);return n},u.CrossFV=function(e,t){e===undefined&&(e=0);var n=new l(-e*t.y,e*t.x);return n},u.MulMV=function(e,t){var n=new l(e.col1.x*t.x+e.col2.x*t.y,e.col1.y*t.x+e.col2.y*t.y);return n},u.MulTMV=function(e,t){var n=new l(u.Dot(t,e.col1),u.Dot(t,e.col2));return n},u.MulX=function(e,t){var n=u.MulMV(e.R,t);return n.x+=e.position.x,n.y+=e.position.y,n},u.MulXT=function(e,t){var n=u.SubtractVV(t,e.position),r=n.x*e.R.col1.x+n.y*e.R.col1.y;return n.y=n.x*e.R.col2.x+n.y*e.R.col2.y,n.x=r,n},u.AddVV=function(e,t){var n=new l(e.x+t.x,e.y+t.y);return n},u.SubtractVV=function(e,t){var n=new l(e.x-t.x,e.y-t.y);return n},u.Distance=function(e,t){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)},u.DistanceSquared=function(e,t){var n=e.x-t.x,r=e.y-t.y;return n*n+r*r},u.MulFV=function(e,t){e===undefined&&(e=0);var n=new l(e*t.x,e*t.y);return n},u.AddMM=function(e,t){var n=s.FromVV(u.AddVV(e.col1,t.col1),u.AddVV(e.col2,t.col2));return n},u.MulMM=function(e,t){var n=s.FromVV(u.MulMV(e,t.col1),u.MulMV(e,t.col2));return n},u.MulTMM=function(e,t){var n=new l(u.Dot(e.col1,t.col1),u.Dot(e.col2,t.col1)),r=new l(u.Dot(e.col1,t.col2),u.Dot(e.col2,t.col2)),i=s.FromVV(n,r);return i},u.Abs=function(e){return e===undefined&&(e=0),e>0?e:-e},u.AbsV=function(e){var t=new l(u.Abs(e.x),u.Abs(e.y));return t},u.AbsM=function(e){var t=s.FromVV(u.AbsV(e.col1),u.AbsV(e.col2));return t},u.Min=function(e,t){return e===undefined&&(e=0),t===undefined&&(t=0),e<t?e:t},u.MinV=function(e,t){var n=new l(u.Min(e.x,t.x),u.Min(e.y,t.y));return n},u.Max=function(e,t){return e===undefined&&(e=0),t===undefined&&(t=0),e>t?e:t},u.MaxV=function(e,t){var n=new l(u.Max(e.x,t.x),u.Max(e.y,t.y));return n},u.Clamp=function(e,t,n){return e===undefined&&(e=0),t===undefined&&(t=0),n===undefined&&(n=0),e<t?t:e>n?n:e},u.ClampV=function(e,t,n){return u.MaxV(t,u.MinV(e,n))},u.Swap=function(e,t){var n=e[0];e[0]=t[0],t[0]=n},u.Random=function(){return Math.random()*2-1},u.RandomRange=function(e,t){e===undefined&&(e=0),t===undefined&&(t=0);var n=Math.random();return n=(t-e)*n+e,n},u.NextPowerOfTwo=function(e){return e===undefined&&(e=0),e|=e>>1&2147483647,e|=e>>2&1073741823,e|=e>>4&268435455,e|=e>>8&16777215,e|=e>>16&65535,e+1},u.IsPowerOfTwo=function(e){e===undefined&&(e=0);var t=e>0&&(e&e-1)==0;return t},e.postDefs.push(function(){e.Common.Math.b2Math.b2Vec2_zero=new l(0,0),e.Common.Math.b2Math.b2Mat22_identity=s.FromVV(new l(1,0),new l(0,1)),e.Common.Math.b2Math.b2Transform_identity=new f(u.b2Vec2_zero,u.b2Mat22_identity)}),a.b2Sweep=function(){this.localCenter=new l,this.c0=new l,this.c=new l},a.prototype.Set=function(e){this.localCenter.SetV(e.localCenter),this.c0.SetV(e.c0),this.c.SetV(e.c),this.a0=e.a0,this.a=e.a,this.t0=e.t0},a.prototype.Copy=function(){var e=new a;return e.localCenter.SetV(this.localCenter),e.c0.SetV(this.c0),e.c.SetV(this.c),e.a0=this.a0,e.a=this.a,e.t0=this.t0,e},a.prototype.GetTransform=function(e,t){t===undefined&&(t=0),e.position.x=(1-t)*this.c0.x+t*this.c.x,e.position.y=(1-t)*this.c0.y+t*this.c.y;var n=(1-t)*this.a0+t*this.a;e.R.Set(n);var r=e.R;e.position.x-=r.col1.x*this.localCenter.x+r.col2.x*this.localCenter.y,e.position.y-=r.col1.y*this.localCenter.x+r.col2.y*this.localCenter.y},a.prototype.Advance=function(e){e===undefined&&(e=0);if(this.t0<e&&1-this.t0>Number.MIN_VALUE){var t=(e-this.t0)/(1-this.t0);this.c0.x=(1-t)*this.c0.x+t*this.c.x,this.c0.y=(1-t)*this.c0.y+t*this.c.y,this.a0=(1-t)*this.a0+t*this.a,this.t0=e}},f.b2Transform=function(){this.position=new l,this.R=new s},f.prototype.b2Transform=function(e,t){e===undefined&&(e=null),t===undefined&&(t=null),e&&(this.position.SetV(e),this.R.SetM(t))},f.prototype.Initialize=function(e,t){this.position.SetV(e),this.R.SetM(t)},f.prototype.SetIdentity=function(){this.position.SetZero(),this.R.SetIdentity()},f.prototype.Set=function(e){this.position.SetV(e.position),this.R.SetM(e.R)},f.prototype.GetAngle=function(){return Math.atan2(this.R.col1.y,this.R.col1.x)},l.b2Vec2=function(){},l.prototype.b2Vec2=function(e,t){e===undefined&&(e=0),t===undefined&&(t=0),this.x=e,this.y=t},l.prototype.SetZero=function(){this.x=0,this.y=0},l.prototype.Set=function(e,t){e===undefined&&(e=0),t===undefined&&(t=0),this.x=e,this.y=t},l.prototype.SetV=function(e){this.x=e.x,this.y=e.y},l.prototype.GetNegative=function(){return new l(-this.x,-this.y)},l.prototype.NegativeSelf=function(){this.x=-this.x,this.y=-this.y},l.Make=function(e,t){return e===undefined&&(e=0),t===undefined&&(t=0),new l(e,t)},l.prototype.Copy=function(){return new l(this.x,this.y)},l.prototype.Add=function(e){this.x+=e.x,this.y+=e.y},l.prototype.Subtract=function(e){this.x-=e.x,this.y-=e.y},l.prototype.Multiply=function(e){e===undefined&&(e=0),this.x*=e,this.y*=e},l.prototype.MulM=function(e){var t=this.x;this.x=e.col1.x*t+e.col2.x*this.y,this.y=e.col1.y*t+e.col2.y*this.y},l.prototype.MulTM=function(e){var t=u.Dot(this,e.col1);this.y=u.Dot(this,e.col2),this.x=t},l.prototype.CrossVF=function(e){e===undefined&&(e=0);var t=this.x;this.x=e*this.y,this.y=-e*t},l.prototype.CrossFV=function(e){e===undefined&&(e=0);var t=this.x;this.x=-e*this.y,this.y=e*t},l.prototype.MinV=function(e){this.x=this.x<e.x?this.x:e.x,this.y=this.y<e.y?this.y:e.y},l.prototype.MaxV=function(e){this.x=this.x>e.x?this.x:e.x,this.y=this.y>e.y?this.y:e.y},l.prototype.Abs=function(){this.x<0&&(this.x=-this.x),this.y<0&&(this.y=-this.y)},l.prototype.Length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},l.prototype.LengthSquared=function(){return this.x*this.x+this.y*this.y},l.prototype.Normalize=function(){var e=Math.sqrt(this.x*this.x+this.y*this.y);if(e<Number.MIN_VALUE)return 0;var t=1/e;return this.x*=t,this.y*=t,e},l.prototype.IsValid=function(){return u.IsValid(this.x)&&u.IsValid(this.y)},c.b2Vec3=function(){},c.prototype.b2Vec3=function(e,t,n){e===undefined&&(e=0),t===undefined&&(t=0),n===undefined&&(n=0),this.x=e,this.y=t,this.z=n},c.prototype.SetZero=function(){this.x=this.y=this.z=0},c.prototype.Set=function(e,t,n){e===undefined&&(e=0),t===undefined&&(t=0),n===undefined&&(n=0),this.x=e,this.y=t,this.z=n},c.prototype.SetV=function(e){this.x=e.x,this.y=e.y,this.z=e.z},c.prototype.GetNegative=function(){return new c(-this.x,-this.y,-this.z)},c.prototype.NegativeSelf=function(){this.x=-this.x,this.y=-this.y,this.z=-this.z},c.prototype.Copy=function(){return new c(this.x,this.y,this.z)},c.prototype.Add=function(e){this.x+=e.x,this.y+=e.y,this.z+=e.z},c.prototype.Subtract=function(e){this.x-=e.x,this.y-=e.y,this.z-=e.z},c.prototype.Multiply=function(e){e===undefined&&(e=0),this.x*=e,this.y*=e,this.z*=e}}(),function(){var r=e.Dynamics.Controllers.b2ControllerEdge,i=e.Common.Math.b2Mat22,s=e.Common.Math.b2Mat33,o=e.Common.Math.b2Math,u=e.Common.Math.b2Sweep,a=e.Common.Math.b2Transform,f=e.Common.Math.b2Vec2,l=e.Common.Math.b2Vec3,c=e.Common.b2Color,h=e.Common.b2internal,p=e.Common.b2Settings,d=e.Collision.b2AABB,v=e.Collision.b2Bound,m=e.Collision.b2BoundValues,g=e.Collision.b2Collision,y=e.Collision.b2ContactID,b=e.Collision.b2ContactPoint,w=e.Collision.b2Distance,E=e.Collision.b2DistanceInput,S=e.Collision.b2DistanceOutput,x=e.Collision.b2DistanceProxy,T=e.Collision.b2DynamicTree,N=e.Collision.b2DynamicTreeBroadPhase,C=e.Collision.b2DynamicTreeNode,k=e.Collision.b2DynamicTreePair,L=e.Collision.b2Manifold,A=e.Collision.b2ManifoldPoint,O=e.Collision.b2Point,M=e.Collision.b2RayCastInput,_=e.Collision.b2RayCastOutput,D=e.Collision.b2Segment,P=e.Collision.b2SeparationFunction,H=e.Collision.b2Simplex,B=e.Collision.b2SimplexCache,j=e.Collision.b2SimplexVertex,F=e.Collision.b2TimeOfImpact,I=e.Collision.b2TOIInput,q=e.Collision.b2WorldManifold,R=e.Collision.ClipVertex,U=e.Collision.Features,z=e.Collision.IBroadPhase,W=e.Collision.Shapes.b2CircleShape,X=e.Collision.Shapes.b2EdgeChainDef,V=e.Collision.Shapes.b2EdgeShape,$=e.Collision.Shapes.b2MassData,J=e.Collision.Shapes.b2PolygonShape,K=e.Collision.Shapes.b2Shape,Q=e.Dynamics.b2Body,G=e.Dynamics.b2BodyDef,Y=e.Dynamics.b2ContactFilter,Z=e.Dynamics.b2ContactImpulse,et=e.Dynamics.b2ContactListener,tt=e.Dynamics.b2ContactManager,nt=e.Dynamics.b2DebugDraw,rt=e.Dynamics.b2DestructionListener,it=e.Dynamics.b2FilterData,st=e.Dynamics.b2Fixture,ot=e.Dynamics.b2FixtureDef,ut=e.Dynamics.b2Island,at=e.Dynamics.b2TimeStep,ft=e.Dynamics.b2World,lt=e.Dynamics.Contacts.b2CircleContact,ct=e.Dynamics.Contacts.b2Contact,ht=e.Dynamics.Contacts.b2ContactConstraint,pt=e.Dynamics.Contacts.b2ContactConstraintPoint,dt=e.Dynamics.Contacts.b2ContactEdge,vt=e.Dynamics.Contacts.b2ContactFactory,mt=e.Dynamics.Contacts.b2ContactRegister,gt=e.Dynamics.Contacts.b2ContactResult,yt=e.Dynamics.Contacts.b2ContactSolver,bt=e.Dynamics.Contacts.b2EdgeAndCircleContact,wt=e.Dynamics.Contacts.b2NullContact,Et=e.Dynamics.Contacts.b2PolyAndCircleContact,St=e.Dynamics.Contacts.b2PolyAndEdgeContact,xt=e.Dynamics.Contacts.b2PolygonContact,Tt=e.Dynamics.Contacts.b2PositionSolverManifold,Nt=e.Dynamics.Controllers.b2Controller,Ct=e.Dynamics.Joints.b2DistanceJoint,kt=e.Dynamics.Joints.b2DistanceJointDef,Lt=e.Dynamics.Joints.b2FrictionJoint,At=e.Dynamics.Joints.b2FrictionJointDef,Ot=e.Dynamics.Joints.b2GearJoint,Mt=e.Dynamics.Joints.b2GearJointDef,_t=e.Dynamics.Joints.b2Jacobian,Dt=e.Dynamics.Joints.b2Joint,Pt=e.Dynamics.Joints.b2JointDef,Ht=e.Dynamics.Joints.b2JointEdge,Bt=e.Dynamics.Joints.b2LineJoint,jt=e.Dynamics.Joints.b2LineJointDef,Ft=e.Dynamics.Joints.b2MouseJoint,It=e.Dynamics.Joints.b2MouseJointDef,qt=e.Dynamics.Joints.b2PrismaticJoint,Rt=e.Dynamics.Joints.b2PrismaticJointDef,Ut=e.Dynamics.Joints.b2PulleyJoint,zt=e.Dynamics.Joints.b2PulleyJointDef,Wt=e.Dynamics.Joints.b2RevoluteJoint,Xt=e.Dynamics.Joints.b2RevoluteJointDef,Vt=e.Dynamics.Joints.b2WeldJoint,$t=e.Dynamics.Joints.b2WeldJointDef;Q.b2Body=function(){this.m_xf=new a,this.m_sweep=new u,this.m_linearVelocity=new f,this.m_force=new f},Q.prototype.connectEdges=function(e,t,n){n===undefined&&(n=0);var r=Math.atan2(t.GetDirectionVector().y,t.GetDirectionVector().x),i=Math.tan((r-n)*.5),s=o.MulFV(i,t.GetDirectionVector());s=o.SubtractVV(s,t.GetNormalVector()),s=o.MulFV(p.b2_toiSlop,s),s=o.AddVV(s,t.GetVertex1());var u=o.AddVV(e.GetDirectionVector(),t.GetDirectionVector());u.Normalize();var a=o.Dot(e.GetDirectionVector(),t.GetNormalVector())>0;return e.SetNextEdge(t,s,u,a),t.SetPrevEdge(e,s,u,a),r},Q.prototype.CreateFixture=function(e){if(this.m_world.IsLocked()==1)return null;var t=new st;t.Create(this,this.m_xf,e);if(this.m_flags&Q.e_activeFlag){var n=this.m_world.m_contactManager.m_broadPhase;t.CreateProxy(n,this.m_xf)}return t.m_next=this.m_fixtureList,this.m_fixtureList=t,++this.m_fixtureCount,t.m_body=this,t.m_density>0&&this.ResetMassData(),this.m_world.m_flags|=ft.e_newFixture,t},Q.prototype.CreateFixture2=function(e,t){t===undefined&&(t=0);var n=new ot;return n.shape=e,n.density=t,this.CreateFixture(n)},Q.prototype.DestroyFixture=function(e){if(this.m_world.IsLocked()==1)return;var t=this.m_fixtureList,n=null,r=!1;while(t!=null){if(t==e){n?n.m_next=e.m_next:this.m_fixtureList=e.m_next,r=!0;break}n=t,t=t.m_next}var i=this.m_contactList;while(i){var s=i.contact;i=i.next;var o=s.GetFixtureA(),u=s.GetFixtureB();(e==o||e==u)&&this.m_world.m_contactManager.Destroy(s)}if(this.m_flags&Q.e_activeFlag){var a=this.m_world.m_contactManager.m_broadPhase;e.DestroyProxy(a)}e.Destroy(),e.m_body=null,e.m_next=null,--this.m_fixtureCount,this.ResetMassData()},Q.prototype.SetPositionAndAngle=function(e,t){t===undefined&&(t=0);var n;if(this.m_world.IsLocked()==1)return;this.m_xf.R.Set(t),this.m_xf.position.SetV(e);var r=this.m_xf.R,i=this.m_sweep.localCenter;this.m_sweep.c.x=r.col1.x*i.x+r.col2.x*i.y,this.m_sweep.c.y=r.col1.y*i.x+r.col2.y*i.y,this.m_sweep.c.x+=this.m_xf.position.x,this.m_sweep.c.y+=this.m_xf.position.y,this.m_sweep.c0.SetV(this.m_sweep.c),this.m_sweep.a0=this.m_sweep.a=t;var s=this.m_world.m_contactManager.m_broadPhase;for(n=this.m_fixtureList;n;n=n.m_next)n.Synchronize(s,this.m_xf,this.m_xf);this.m_world.m_contactManager.FindNewContacts()},Q.prototype.SetTransform=function(e){this.SetPositionAndAngle(e.position,e.GetAngle())},Q.prototype.GetTransform=function(){return this.m_xf},Q.prototype.GetPosition=function(){return this.m_xf.position},Q.prototype.SetPosition=function(e){this.SetPositionAndAngle(e,this.GetAngle())},Q.prototype.GetAngle=function(){return this.m_sweep.a},Q.prototype.SetAngle=function(e){e===undefined&&(e=0),this.SetPositionAndAngle(this.GetPosition(),e)},Q.prototype.GetWorldCenter=function(){return this.m_sweep.c},Q.prototype.GetLocalCenter=function(){return this.m_sweep.localCenter},Q.prototype.SetLinearVelocity=function(e){if(this.m_type==Q.b2_staticBody)return;this.m_linearVelocity.SetV(e)},Q.prototype.GetLinearVelocity=function(){return this.m_linearVelocity},Q.prototype.SetAngularVelocity=function(e){e===undefined&&(e=0);if(this.m_type==Q.b2_staticBody)return;this.m_angularVelocity=e},Q.prototype.GetAngularVelocity=function(){return this.m_angularVelocity},Q.prototype.GetDefinition=function(){var e=new G;return e.type=this.GetType(),e.allowSleep=(this.m_flags&Q.e_allowSleepFlag)==Q.e_allowSleepFlag,e.angle=this.GetAngle(),e.angularDamping=this.m_angularDamping,e.angularVelocity=this.m_angularVelocity,e.fixedRotation=(this.m_flags&Q.e_fixedRotationFlag)==Q.e_fixedRotationFlag,e.bullet=(this.m_flags&Q.e_bulletFlag)==Q.e_bulletFlag,e.awake=(this.m_flags&Q.e_awakeFlag)==Q.e_awakeFlag,e.linearDamping=this.m_linearDamping,e.linearVelocity.SetV(this.GetLinearVelocity()),e.position=this.GetPosition(),e.userData=this.GetUserData(),e},Q.prototype.ApplyForce=function(e,t){if(this.m_type!=Q.b2_dynamicBody)return;this.IsAwake()==0&&this.SetAwake(!0),this.m_force.x+=e.x,this.m_force.y+=e.y,this.m_torque+=(t.x-this.m_sweep.c.x)*e.y-(t.y-this.m_sweep.c.y)*e.x},Q.prototype.ApplyTorque=function(e){e===undefined&&(e=0);if(this.m_type!=Q.b2_dynamicBody)return;this.IsAwake()==0&&this.SetAwake(!0),this.m_torque+=e},Q.prototype.ApplyImpulse=function(e,t){if(this.m_type!=Q.b2_dynamicBody)return;this.IsAwake()==0&&this.SetAwake(!0),this.m_linearVelocity.x+=this.m_invMass*e.x,this.m_linearVelocity.y+=this.m_invMass*e.y,this.m_angularVelocity+=this.m_invI*((t.x-this.m_sweep.c.x)*e.y-(t.y-this.m_sweep.c.y)*e.x)},Q.prototype.Split=function(e){var t=this.GetLinearVelocity().Copy(),n=this.GetAngularVelocity(),r=this.GetWorldCenter(),i=this,s=this.m_world.CreateBody(this.GetDefinition()),u;for(var a=i.m_fixtureList;a;)if(e(a)){var f=a.m_next;u?u.m_next=f:i.m_fixtureList=f,i.m_fixtureCount--,a.m_next=s.m_fixtureList,s.m_fixtureList=a,s.m_fixtureCount++,a.m_body=s,a=f}else u=a,a=a.m_next;i.ResetMassData(),s.ResetMassData();var l=i.GetWorldCenter(),c=s.GetWorldCenter(),h=o.AddVV(t,o.CrossFV(n,o.SubtractVV(l,r))),p=o.AddVV(t,o.CrossFV(n,o.SubtractVV(c,r)));return i.SetLinearVelocity(h),s.SetLinearVelocity(p),i.SetAngularVelocity(n),s.SetAngularVelocity(n),i.SynchronizeFixtures(),s.SynchronizeFixtures(),s},Q.prototype.Merge=function(e){var t;for(t=e.m_fixtureList;t;){var n=t.m_next;e.m_fixtureCount--,t.m_next=this.m_fixtureList,this.m_fixtureList=t,this.m_fixtureCount++,t.m_body=i,t=n}r.m_fixtureCount=0;var r=this,i=e,s=r.GetWorldCenter(),o=i.GetWorldCenter(),u=r.GetLinearVelocity().Copy(),a=i.GetLinearVelocity().Copy(),f=r.GetAngularVelocity(),l=i.GetAngularVelocity();r.ResetMassData(),this.SynchronizeFixtures()},Q.prototype.GetMass=function(){return this.m_mass},Q.prototype.GetInertia=function(){return this.m_I},Q.prototype.GetMassData=function(e){e.mass=this.m_mass,e.I=this.m_I,e.center.SetV(this.m_sweep.localCenter)},Q.prototype.SetMassData=function(e){p.b2Assert(this.m_world.IsLocked()==0);if(this.m_world.IsLocked()==1)return;if(this.m_type!=Q.b2_dynamicBody)return;this.m_invMass=0,this.m_I=0,this.m_invI=0,this.m_mass=e.mass,this.m_mass<=0&&(this.m_mass=1),this.m_invMass=1/this.m_mass,e.I>0&&(this.m_flags&Q.e_fixedRotationFlag)==0&&(this.m_I=e.I-this.m_mass*(e.center.x*e.center.x+e.center.y*e.center.y),this.m_invI=1/this.m_I);var t=this.m_sweep.c.Copy();this.m_sweep.localCenter.SetV(e.center),this.m_sweep.c0.SetV(o.MulX(this.m_xf,this.m_sweep.localCenter)),this.m_sweep.c.SetV(this.m_sweep.c0),this.m_linearVelocity.x+=this.m_angularVelocity*-(this.m_sweep.c.y-t.y),this.m_linearVelocity.y+=this.m_angularVelocity*+(this.m_sweep.c.x-t.x)},Q.prototype.ResetMassData=function(){this.m_mass=0,this.m_invMass=0,this.m_I=0,this.m_invI=0,this.m_sweep.localCenter.SetZero();if(this.m_type==Q.b2_staticBody||this.m_type==Q.b2_kinematicBody)return;var e=f.Make(0,0);for(var t=this.m_fixtureList;t;t=t.m_next){if(t.m_density==0)continue;var n=t.GetMassData();this.m_mass+=n.mass,e.x+=n.center.x*n.mass,e.y+=n.center.y*n.mass,this.m_I+=n.I}this.m_mass>0?(this.m_invMass=1/this.m_mass,e.x*=this.m_invMass,e.y*=this.m_invMass):(this.m_mass=1,this.m_invMass=1),this.m_I>0&&(this.m_flags&Q.e_fixedRotationFlag)==0?(this.m_I-=this.m_mass*(e.x*e.x+e.y*e.y),this.m_I*=this.m_inertiaScale,p.b2Assert(this.m_I>0),this.m_invI=1/this.m_I):(this.m_I=0,this.m_invI=0);var r=this.m_sweep.c.Copy();this.m_sweep.localCenter.SetV(e),this.m_sweep.c0.SetV(o.MulX(this.m_xf,this.m_sweep.localCenter)),this.m_sweep.c.SetV(this.m_sweep.c0),this.m_linearVelocity.x+=this.m_angularVelocity*-(this.m_sweep.c.y-r.y),this.m_linearVelocity.y+=this.m_angularVelocity*+(this.m_sweep.c.x-r.x)},Q.prototype.GetWorldPoint=function(e){var t=this.m_xf.R,n=new f(t.col1.x*e.x+t.col2.x*e.y,t.col1.y*e.x+t.col2.y*e.y);return n.x+=this.m_xf.position.x,n.y+=this.m_xf.position.y,n},Q.prototype.GetWorldVector=function(e){return o.MulMV(this.m_xf.R,e)},Q.prototype.GetLocalPoint=function(e){return o.MulXT(this.m_xf,e)},Q.prototype.GetLocalVector=function(e){return o.MulTMV(this.m_xf.R,e)},Q.prototype.GetLinearVelocityFromWorldPoint=function(e){return new f(this.m_linearVelocity.x-this.m_angularVelocity*(e.y-this.m_sweep.c.y),this.m_linearVelocity.y+this.m_angularVelocity*(e.x-this.m_sweep.c.x))},Q.prototype.GetLinearVelocityFromLocalPoint=function(e){var t=this.m_xf.R,n=new f(t.col1.x*e.x+t.col2.x*e.y,t.col1.y*e.x+t.col2.y*e.y);return n.x+=this.m_xf.position.x,n.y+=this.m_xf.position.y,new f(this.m_linearVelocity.x-this.m_angularVelocity*(n.y-this.m_sweep.c.y),this.m_linearVelocity.y+this.m_angularVelocity*(n.x-this.m_sweep.c.x))},Q.prototype.GetLinearDamping=function(){return this.m_linearDamping},Q.prototype.SetLinearDamping=function(e){e===undefined&&(e=0),this.m_linearDamping=e},Q.prototype.GetAngularDamping=function(){return this.m_angularDamping},Q.prototype.SetAngularDamping=function(e){e===undefined&&(e=0),this.m_angularDamping=e},Q.prototype.SetType=function(e){e===undefined&&(e=0);if(this.m_type==e)return;this.m_type=e,this.ResetMassData(),this.m_type==Q.b2_staticBody&&(this.m_linearVelocity.SetZero(),this.m_angularVelocity=0),this.SetAwake(!0),this.m_force.SetZero(),this.m_torque=0;for(var t=this.m_contactList;t;t=t.next)t.contact.FlagForFiltering()},Q.prototype.GetType=function(){return this.m_type},Q.prototype.SetBullet=function(e){e?this.m_flags|=Q.e_bulletFlag:this.m_flags&=~Q.e_bulletFlag},Q.prototype.IsBullet=function(){return(this.m_flags&Q.e_bulletFlag)==Q.e_bulletFlag},Q.prototype.SetSleepingAllowed=function(e){e?this.m_flags|=Q.e_allowSleepFlag:(this.m_flags&=~Q.e_allowSleepFlag,this.SetAwake(!0))},Q.prototype.SetAwake=function(e){e?(this.m_flags|=Q.e_awakeFlag,this.m_sleepTime=0):(this.m_flags&=~Q.e_awakeFlag,this.m_sleepTime=0,this.m_linearVelocity.SetZero(),this.m_angularVelocity=0,this.m_force.SetZero(),this.m_torque=0)},Q.prototype.IsAwake=function(){return(this.m_flags&Q.e_awakeFlag)==Q.e_awakeFlag},Q.prototype.SetFixedRotation=function(e){e?this.m_flags|=Q.e_fixedRotationFlag:this.m_flags&=~Q.e_fixedRotationFlag,this.ResetMassData()},Q.prototype.IsFixedRotation=function(){return(this.m_flags&Q.e_fixedRotationFlag)==Q.e_fixedRotationFlag},Q.prototype.SetActive=function(e){if(e==this.IsActive())return;var t,n;if(e){this.m_flags|=Q.e_activeFlag,t=this.m_world.m_contactManager.m_broadPhase;for(n=this.m_fixtureList;n;n=n.m_next)n.CreateProxy(t,this.m_xf)}else{this.m_flags&=~Q.e_activeFlag,t=this.m_world.m_contactManager.m_broadPhase;for(n=this.m_fixtureList;n;n=n.m_next)n.DestroyProxy(t);var r=this.m_contactList;while(r){var i=r;r=r.next,this.m_world.m_contactManager.Destroy(i.contact)}this.m_contactList=null}},Q.prototype.IsActive=function(){return(this.m_flags&Q.e_activeFlag)==Q.e_activeFlag},Q.prototype.IsSleepingAllowed=function(){return(this.m_flags&Q.e_allowSleepFlag)==Q.e_allowSleepFlag},Q.prototype.GetFixtureList=function(){return this.m_fixtureList},Q.prototype.GetJointList=function(){return this.m_jointList},Q.prototype.GetControllerList=function(){return this.m_controllerList},Q.prototype.GetContactList=function(){return this.m_contactList},Q.prototype.GetNext=function(){return this.m_next},Q.prototype.GetUserData=function(){return this.m_userData},Q.prototype.SetUserData=function(e){this.m_userData=e},Q.prototype.GetWorld=function(){return this.m_world},Q.prototype.b2Body=function(e,t){this.m_flags=0,e.bullet&&(this.m_flags|=Q.e_bulletFlag),e.fixedRotation&&(this.m_flags|=Q.e_fixedRotationFlag),e.allowSleep&&(this.m_flags|=Q.e_allowSleepFlag),e.awake&&(this.m_flags|=Q.e_awakeFlag),e.active&&(this.m_flags|=Q.e_activeFlag),this.m_world=t,this.m_xf.position.SetV(e.position),this.m_xf.R.Set(e.angle),this.m_sweep.localCenter.SetZero(),this.m_sweep.t0=1,this.m_sweep.a0=this.m_sweep.a=e.angle;var n=this.m_xf.R,r=this.m_sweep.localCenter;this.m_sweep.c.x=n.col1.x*r.x+n.col2.x*r.y,this.m_sweep.c.y=n.col1.y*r.x+n.col2.y*r.y,this.m_sweep.c.x+=this.m_xf.position.x,this.m_sweep.c.y+=this.m_xf.position.y,this.m_sweep.c0.SetV(this.m_sweep.c),this.m_jointList=null,this.m_controllerList=null,this.m_contactList=null,this.m_controllerCount=0,this.m_prev=null,this.m_next=null,this.m_linearVelocity.SetV(e.linearVelocity),this.m_angularVelocity=e.angularVelocity,this.m_linearDamping=e.linearDamping,this.m_angularDamping=e.angularDamping,this.m_force.Set(0,0),this.m_torque=0,this.m_sleepTime=0,this.m_type=e.type,this.m_type==Q.b2_dynamicBody?(this.m_mass=1,this.m_invMass=1):(this.m_mass=0,this.m_invMass=0),this.m_I=0,this.m_invI=0,this.m_inertiaScale=e.inertiaScale,this.m_userData=e.userData,this.m_fixtureList=null,this.m_fixtureCount=0},Q.prototype.SynchronizeFixtures=function(){var e=Q.s_xf1;e.R.Set(this.m_sweep.a0);var t=e.R,n=this.m_sweep.localCenter;e.position.x=this.m_sweep.c0.x-(t.col1.x*n.x+t.col2.x*n.y),e.position.y=this.m_sweep.c0.y-(t.col1.y*n.x+t.col2.y*n.y);var r,i=this.m_world.m_contactManager.m_broadPhase;for(r=this.m_fixtureList;r;r=r.m_next)r.Synchronize(i,e,this.m_xf)},Q.prototype.SynchronizeTransform=function(){this.m_xf.R.Set(this.m_sweep.a);var e=this.m_xf.R,t=this.m_sweep.localCenter;this.m_xf.position.x=this.m_sweep.c.x-(e.col1.x*t.x+e.col2.x*t.y),this.m_xf.position.y=this.m_sweep.c.y-(e.col1.y*t.x+e.col2.y*t.y)},Q.prototype.ShouldCollide=function(e){if(this.m_type!=Q.b2_dynamicBody&&e.m_type!=Q.b2_dynamicBody)return!1;for(var t=this.m_jointList;t;t=t.next)if(t.other==e&&t.joint.m_collideConnected==0)return!1;return!0},Q.prototype.Advance=function(e){e===undefined&&(e=0),this.m_sweep.Advance(e),this.m_sweep.c.SetV(this.m_sweep.c0),this.m_sweep.a=this.m_sweep.a0,this.SynchronizeTransform()},e.postDefs.push(function(){e.Dynamics.b2Body.s_xf1=new a,e.Dynamics.b2Body.e_islandFlag=1,e.Dynamics.b2Body.e_awakeFlag=2,e.Dynamics.b2Body.e_allowSleepFlag=4,e.Dynamics.b2Body.e_bulletFlag=8,e.Dynamics.b2Body.e_fixedRotationFlag=16,e.Dynamics.b2Body.e_activeFlag=32,e.Dynamics.b2Body.b2_staticBody=0,e.Dynamics.b2Body.b2_kinematicBody=1,e.Dynamics.b2Body.b2_dynamicBody=2}),G.b2BodyDef=function(){this.position=new f,this.linearVelocity=new f},G.prototype.b2BodyDef=function(){this.userData=null,this.position.Set(0,0),this.angle=0,this.linearVelocity.Set(0,0),this.angularVelocity=0,this.linearDamping=0,this.angularDamping=0,this.allowSleep=!0,this.awake=!0,this.fixedRotation=!1,this.bullet=!1,this.type=Q.b2_staticBody,this.active=!0,this.inertiaScale=1},Y.b2ContactFilter=function(){},Y.prototype.ShouldCollide=function(e,t){var n=e.GetFilterData(),r=t.GetFilterData();if(n.groupIndex==r.groupIndex&&n.groupIndex!=0)return n.groupIndex>0;var i=(n.maskBits&r.categoryBits)!=0&&(n.categoryBits&r.maskBits)!=0;return i},Y.prototype.RayCollide=function(e,t){return e?this.ShouldCollide(e instanceof st?e:null,t):!0},e.postDefs.push(function(){e.Dynamics.b2ContactFilter.b2_defaultFilter=new Y}),Z.b2ContactImpulse=function(){this.normalImpulses=new n(p.b2_maxManifoldPoints),this.tangentImpulses=new n(p.b2_maxManifoldPoints)},et.b2ContactListener=function(){},et.prototype.BeginContact=function(e){},et.prototype.EndContact=function(e){},et.prototype.PreSolve=function(e,t){},et.prototype.PostSolve=function(e,t){},e.postDefs.push(function(){e.Dynamics.b2ContactListener.b2_defaultListener=new et}),tt.b2ContactManager=function(){},tt.prototype.b2ContactManager=function(){this.m_world=null,this.m_contactCount=0,this.m_contactFilter=Y.b2_defaultFilter,this.m_contactListener=et.b2_defaultListener,this.m_contactFactory=new vt(this.m_allocator),this.m_broadPhase=new N},tt.prototype.AddPair=function(e,t){var n=e instanceof st?e:null,r=t instanceof st?t:null,i=n.GetBody(),s=r.GetBody();if(i==s)return;var o=s.GetContactList();while(o){if(o.other==i){var u=o.contact.GetFixtureA(),a=o.contact.GetFixtureB();if(u==n&&a==r)return;if(u==r&&a==n)return}o=o.next}if(s.ShouldCollide(i)==0)return;if(this.m_contactFilter.ShouldCollide(n,r)==0)return;var f=this.m_contactFactory.Create(n,r);n=f.GetFixtureA(),r=f.GetFixtureB(),i=n.m_body,s=r.m_body,f.m_prev=null,f.m_next=this.m_world.m_contactList,this.m_world.m_contactList!=null&&(this.m_world.m_contactList.m_prev=f),this.m_world.m_contactList=f,f.m_nodeA.contact=f,f.m_nodeA.other=s,f.m_nodeA.prev=null,f.m_nodeA.next=i.m_contactList,i.m_contactList!=null&&(i.m_contactList.prev=f.m_nodeA),i.m_contactList=f.m_nodeA,f.m_nodeB.contact=f,f.m_nodeB.other=i,f.m_nodeB.prev=null,f.m_nodeB.next=s.m_contactList,s.m_contactList!=null&&(s.m_contactList.prev=f.m_nodeB),s.m_contactList=f.m_nodeB,++this.m_world.m_contactCount;return},tt.prototype.FindNewContacts=function(){this.m_broadPhase.UpdatePairs(e.generateCallback(this,this.AddPair))},tt.prototype.Destroy=function(e){var t=e.GetFixtureA(),n=e.GetFixtureB(),r=t.GetBody(),i=n.GetBody();e.IsTouching()&&this.m_contactListener.EndContact(e),e.m_prev&&(e.m_prev.m_next=e.m_next),e.m_next&&(e.m_next.m_prev=e.m_prev),e==this.m_world.m_contactList&&(this.m_world.m_contactList=e.m_next),e.m_nodeA.prev&&(e.m_nodeA.prev.next=e.m_nodeA.next),e.m_nodeA.next&&(e.m_nodeA.next.prev=e.m_nodeA.prev),e.m_nodeA==r.m_contactList&&(r.m_contactList=e.m_nodeA.next),e.m_nodeB.prev&&(e.m_nodeB.prev.next=e.m_nodeB.next),e.m_nodeB.next&&(e.m_nodeB.next.prev=e.m_nodeB.prev),e.m_nodeB==i.m_contactList&&(i.m_contactList=e.m_nodeB.next),this.m_contactFactory.Destroy(e),--this.m_contactCount},tt.prototype.Collide=function(){var e=this.m_world.m_contactList;while(e){var t=e.GetFixtureA(),n=e.GetFixtureB(),r=t.GetBody(),i=n.GetBody();if(r.IsAwake()==0&&i.IsAwake()==0){e=e.GetNext();continue}if(e.m_flags&ct.e_filterFlag){if(i.ShouldCollide(r)==0){var s=e;e=s.GetNext(),this.Destroy(s);continue}if(this.m_contactFilter.ShouldCollide(t,n)==0){s=e,e=s.GetNext(),this.Destroy(s);continue}e.m_flags&=~ct.e_filterFlag}var o=t.m_proxy,u=n.m_proxy,a=this.m_broadPhase.TestOverlap(o,u);if(a==0){s=e,e=s.GetNext(),this.Destroy(s);continue}e.Update(this.m_contactListener),e=e.GetNext()}},e.postDefs.push(function(){e.Dynamics.b2ContactManager.s_evalCP=new b}),nt.b2DebugDraw=function(){},nt.prototype.b2DebugDraw=function(){},nt.prototype.SetFlags=function(e){e===undefined&&(e=0)},nt.prototype.GetFlags=function(){},nt.prototype.AppendFlags=function(e){e===undefined&&(e=0)},nt.prototype.ClearFlags=function(e){e===undefined&&(e=0)},nt.prototype.SetSprite=function(e){},nt.prototype.GetSprite=function(){},nt.prototype.SetDrawScale=function(e){e===undefined&&(e=0)},nt.prototype.GetDrawScale=function(){},nt.prototype.SetLineThickness=function(e){e===undefined&&(e=0)},nt.prototype.GetLineThickness=function(){},nt.prototype.SetAlpha=function(e){e===undefined&&(e=0)},nt.prototype.GetAlpha=function(){},nt.prototype.SetFillAlpha=function(e){e===undefined&&(e=0)},nt.prototype.GetFillAlpha=function(){},nt.prototype.SetXFormScale=function(e){e===undefined&&(e=0)},nt.prototype.GetXFormScale=function(){},nt.prototype.DrawPolygon=function(e,t,n){t===undefined&&(t=0)},nt.prototype.DrawSolidPolygon=function(e,t,n){t===undefined&&(t=0)},nt.prototype.DrawCircle=function(e,t,n){t===undefined&&(t=0)},nt.prototype.DrawSolidCircle=function(e,t,n,r){t===undefined&&(t=0)},nt.prototype.DrawSegment=function(e,t,n){},nt.prototype.DrawTransform=function(e){},e.postDefs.push(function(){e.Dynamics.b2DebugDraw.e_shapeBit=1,e.Dynamics.b2DebugDraw.e_jointBit=2,e.Dynamics.b2DebugDraw.e_aabbBit=4,e.Dynamics.b2DebugDraw.e_pairBit=8,e.Dynamics.b2DebugDraw.e_centerOfMassBit=16,e.Dynamics.b2DebugDraw.e_controllerBit=32}),rt.b2DestructionListener=function(){},rt.prototype.SayGoodbyeJoint=function(e){},rt.prototype.SayGoodbyeFixture=function(e){},it.b2FilterData=function(){this.categoryBits=1,this.maskBits=65535,this.groupIndex=0},it.prototype.Copy=function(){var e=new it;return e.categoryBits=this.categoryBits,e.maskBits=this.maskBits,e.groupIndex=this.groupIndex,e},st.b2Fixture=function(){this.m_filter=new it},st.prototype.GetType=function(){return this.m_shape.GetType()},st.prototype.GetShape=function(){return this.m_shape},st.prototype.SetSensor=function(e){if(this.m_isSensor==e)return;this.m_isSensor=e;if(this.m_body==null)return;var t=this.m_body.GetContactList();while(t){var n=t.contact,r=n.GetFixtureA(),i=n.GetFixtureB();(r==this||i==this)&&n.SetSensor(r.IsSensor()||i.IsSensor()),t=t.next}},st.prototype.IsSensor=function(){return this.m_isSensor},st.prototype.SetFilterData=function(e){this.m_filter=e.Copy();if(this.m_body)return;var t=this.m_body.GetContactList();while(t){var n=t.contact,r=n.GetFixtureA(),i=n.GetFixtureB();(r==this||i==this)&&n.FlagForFiltering(),t=t.next}},st.prototype.GetFilterData=function(){return this.m_filter.Copy()},st.prototype.GetBody=function(){return this.m_body},st.prototype.GetNext=function(){return this.m_next},st.prototype.GetUserData=function(){return this.m_userData},st.prototype.SetUserData=function(e){this.m_userData=e},st.prototype.TestPoint=function(e){return this.m_shape.TestPoint(this.m_body.GetTransform(),e)},st.prototype.RayCast=function(e,t){return this.m_shape.RayCast(e,t,this.m_body.GetTransform())},st.prototype.GetMassData=function(e){return e===undefined&&(e=null),e==null&&(e=new $),this.m_shape.ComputeMass(e,this.m_density),e},st.prototype.SetDensity=function(e){e===undefined&&(e=0),this.m_density=e},st.prototype.GetDensity=function(){return this.m_density},st.prototype.GetFriction=function(){return this.m_friction},st.prototype.SetFriction=function(e){e===undefined&&(e=0),this.m_friction=e},st.prototype.GetRestitution=function(){return this.m_restitution},st.prototype.SetRestitution=function(e){e===undefined&&(e=0),this.m_restitution=e},st.prototype.GetAABB=function(){return this.m_aabb},st.prototype.b2Fixture=function(){this.m_aabb=new d,this.m_userData=null,this.m_body=null,this.m_next=null,this.m_shape=null,this.m_density=0,this.m_friction=0,this.m_restitution=0},st.prototype.Create=function(e,t,n){this.m_userData=n.userData,this.m_friction=n.friction,this.m_restitution=n.restitution,this.m_body=e,this.m_next=null,this.m_filter=n.filter.Copy(),this.m_isSensor=n.isSensor,this.m_shape=n.shape.Copy(),this.m_density=n.density},st.prototype.Destroy=function(){this.m_shape=null},st.prototype.CreateProxy=function(e,t){this.m_shape.ComputeAABB(this.m_aabb,t),this.m_proxy=e.CreateProxy(this.m_aabb,this)},st.prototype.DestroyProxy=function(e){if(this.m_proxy==null)return;e.DestroyProxy(this.m_proxy),this.m_proxy=null},st.prototype.Synchronize=function(e,t,n){if(!this.m_proxy)return;var r=new d,i=new d;this.m_shape.ComputeAABB(r,t),this.m_shape.ComputeAABB(i,n),this.m_aabb.Combine(r,i);var s=o.SubtractVV(n.position,t.position);e.MoveProxy(this.m_proxy,this.m_aabb,s)},ot.b2FixtureDef=function(){this.filter=new it},ot.prototype.b2FixtureDef=function(){this.shape=null,this.userData=null,this.friction=.2,this.restitution=0,this.density=0,this.filter.categoryBits=1,this.filter.maskBits=65535,this.filter.groupIndex=0,this.isSensor=!1},ut.b2Island=function(){},ut.prototype.b2Island=function(){this.m_bodies=new t,this.m_contacts=new t,this.m_joints=new t},ut.prototype.Initialize=function(e,t,n,r,i,s){e===undefined&&(e=0),t===undefined&&(t=0),n===undefined&&(n=0);var o=0;this.m_bodyCapacity=e,this.m_contactCapacity=t,this.m_jointCapacity=n,this.m_bodyCount=0,this.m_contactCount=0,this.m_jointCount=0,this.m_allocator=r,this.m_listener=i,this.m_contactSolver=s;for(o=this.m_bodies.length;o<e;o++)this.m_bodies[o]=null;for(o=this.m_contacts.length;o<t;o++)this.m_contacts[o]=null;for(o=this.m_joints.length;o<n;o++)this.m_joints[o]=null},ut.prototype.Clear=function(){this.m_bodyCount=0,this.m_contactCount=0,this.m_jointCount=0},ut.prototype.Solve=function(e,t,n){var r=0,i=0,s,u;for(r=0;r<this.m_bodyCount;++r){s=this.m_bodies[r];if(s.GetType()!=Q.b2_dynamicBody)continue;s.m_linearVelocity.x+=e.dt*(t.x+s.m_invMass*s.m_force.x),s.m_linearVelocity.y+=e.dt*(t.y+s.m_invMass*s.m_force.y),s.m_angularVelocity+=e.dt*s.m_invI*s.m_torque,s.m_linearVelocity.Multiply(o.Clamp(1-e.dt*s.m_linearDamping,0,1)),s.m_angularVelocity*=o.Clamp(1-e.dt*s.m_angularDamping,0,1)}this.m_contactSolver.Initialize(e,this.m_contacts,this.m_contactCount,this.m_allocator);var a=this.m_contactSolver;a.InitVelocityConstraints(e);for(r=0;r<this.m_jointCount;++r)u=this.m_joints[r],u.InitVelocityConstraints(e);for(r=0;r<e.velocityIterations;++r){for(i=0;i<this.m_jointCount;++i)u=this.m_joints[i],u.SolveVelocityConstraints(e);a.SolveVelocityConstraints()}for(r=0;r<this.m_jointCount;++r)u=this.m_joints[r],u.FinalizeVelocityConstraints();a.FinalizeVelocityConstraints();for(r=0;r<this.m_bodyCount;++r){s=this.m_bodies[r];if(s.GetType()==Q.b2_staticBody)continue;var f=e.dt*s.m_linearVelocity.x,l=e.dt*s.m_linearVelocity.y;f*f+l*l>p.b2_maxTranslationSquared&&(s.m_linearVelocity.Normalize(),s.m_linearVelocity.x*=p.b2_maxTranslation*e.inv_dt,s.m_linearVelocity.y*=p.b2_maxTranslation*e.inv_dt);var c=e.dt*s.m_angularVelocity;c*c>p.b2_maxRotationSquared&&(s.m_angularVelocity<0?s.m_angularVelocity=-p.b2_maxRotation*e.inv_dt:s.m_angularVelocity=p.b2_maxRotation*e.inv_dt),s.m_sweep.c0.SetV(s.m_sweep.c),s.m_sweep.a0=s.m_sweep.a,s.m_sweep.c.x+=e.dt*s.m_linearVelocity.x,s.m_sweep.c.y+=e.dt*s.m_linearVelocity.y,s.m_sweep.a+=e.dt*s.m_angularVelocity,s.SynchronizeTransform()}for(r=0;r<e.positionIterations;++r){var h=a.SolvePositionConstraints(p.b2_contactBaumgarte),d=!0;for(i=0;i<this.m_jointCount;++i){u=this.m_joints[i];var v=u.SolvePositionConstraints(p.b2_contactBaumgarte);d=d&&v}if(h&&d)break}this.Report(a.m_constraints);if(n){var m=Number.MAX_VALUE,g=p.b2_linearSleepTolerance*p.b2_linearSleepTolerance,y=p.b2_angularSleepTolerance*p.b2_angularSleepTolerance;for(r=0;r<this.m_bodyCount;++r){s=this.m_bodies[r];if(s.GetType()==Q.b2_staticBody)continue;(s.m_flags&Q.e_allowSleepFlag)==0&&(s.m_sleepTime=0,m=0),(s.m_flags&Q.e_allowSleepFlag)==0||s.m_angularVelocity*s.m_angularVelocity>y||o.Dot(s.m_linearVelocity,s.m_linearVelocity)>g?(s.m_sleepTime=0,m=0):(s.m_sleepTime+=e.dt,m=o.Min(m,s.m_sleepTime))}if(m>=p.b2_timeToSleep)for(r=0;r<this.m_bodyCount;++r)s=this.m_bodies[r],s.SetAwake(!1)}},ut.prototype.SolveTOI=function(e){var t=0,n=0;this.m_contactSolver.Initialize(e,this.m_contacts,this.m_contactCount,this.m_allocator);var r=this.m_contactSolver;for(t=0;t<this.m_jointCount;++t)this.m_joints[t].InitVelocityConstraints(e);for(t=0;t<e.velocityIterations;++t){r.SolveVelocityConstraints();for(n=0;n<this.m_jointCount;++n)this.m_joints[n].SolveVelocityConstraints(e)}for(t=0;t<this.m_bodyCount;++t){var i=this.m_bodies[t];if(i.GetType()==Q.b2_staticBody)continue;var s=e.dt*i.m_linearVelocity.x,o=e.dt*i.m_linearVelocity.y;s*s+o*o>p.b2_maxTranslationSquared&&(i.m_linearVelocity.Normalize(),i.m_linearVelocity.x*=p.b2_maxTranslation*e.inv_dt,i.m_linearVelocity.y*=p.b2_maxTranslation*e.inv_dt);var u=e.dt*i.m_angularVelocity;u*u>p.b2_maxRotationSquared&&(i.m_angularVelocity<0?i.m_angularVelocity=-p.b2_maxRotation*e.inv_dt:i.m_angularVelocity=p.b2_maxRotation*e.inv_dt),i.m_sweep.c0.SetV(i.m_sweep.c),i.m_sweep.a0=i.m_sweep.a,i.m_sweep.c.x+=e.dt*i.m_linearVelocity.x,i.m_sweep.c.y+=e.dt*i.m_linearVelocity.y,i.m_sweep.a+=e.dt*i.m_angularVelocity,i.SynchronizeTransform()}var a=.75;for(t=0;t<e.positionIterations;++t){var f=r.SolvePositionConstraints(a),l=!0;for(n=0;n<this.m_jointCount;++n){var c=this.m_joints[n].SolvePositionConstraints(p.b2_contactBaumgarte);l=l&&c}if(f&&l)break}this.Report(r.m_constraints)},ut.prototype.Report=function(e){if(this.m_listener==null)return;for(var t=0;t<this.m_contactCount;++t){var n=this.m_contacts[t],r=e[t];for(var i=0;i<r.pointCount;++i)ut.s_impulse.normalImpulses[i]=r.points[i].normalImpulse,ut.s_impulse.tangentImpulses[i]=r.points[i].tangentImpulse;this.m_listener.PostSolve(n,ut.s_impulse)}},ut.prototype.AddBody=function(e){e.m_islandIndex=this.m_bodyCount,this.m_bodies[this.m_bodyCount++]=e},ut.prototype.AddContact=function(e){this.m_contacts[this.m_contactCount++]=e},ut.prototype.AddJoint=function(e){this.m_joints[this.m_jointCount++]=e},e.postDefs.push(function(){e.Dynamics.b2Island.s_impulse=new Z}),at.b2TimeStep=function(){},at.prototype.Set=function(e){this.dt=e.dt,this.inv_dt=e.inv_dt,this.positionIterations=e.positionIterations,this.velocityIterations=e.velocityIterations,this.warmStarting=e.warmStarting},ft.b2World=function(){this.s_stack=new t,this.m_contactManager=new tt,this.m_contactSolver=new yt,this.m_island=new ut},ft.prototype.b2World=function(e,t){this.m_destructionListener=null,this.m_debugDraw=null,this.m_bodyList=null,this.m_contactList=null,this.m_jointList=null,this.m_controllerList=null,this.m_bodyCount=0,this.m_contactCount=0,this.m_jointCount=0,this.m_controllerCount=0,ft.m_warmStarting=!0,ft.m_continuousPhysics=!0,this.m_allowSleep=t,this.m_gravity=e,this.m_inv_dt0=0,this.m_contactManager.m_world=this;var n=new G;this.m_groundBody=this.CreateBody(n)},ft.prototype.SetDestructionListener=function(e){this.m_destructionListener=e},ft.prototype.SetContactFilter=function(e){this.m_contactManager.m_contactFilter=e},ft.prototype.SetContactListener=function(e){this.m_contactManager.m_contactListener=e},ft.prototype.SetDebugDraw=function(e){this.m_debugDraw=e},ft.prototype.SetBroadPhase=function(e){var t=this.m_contactManager.m_broadPhase;this.m_contactManager.m_broadPhase=e;for(var n=this.m_bodyList;n;n=n.m_next)for(var r=n.m_fixtureList;r;r=r.m_next)r.m_proxy=e.CreateProxy(t.GetFatAABB(r.m_proxy),r)},ft.prototype.Validate=function(){this.m_contactManager.m_broadPhase.Validate()},ft.prototype.GetProxyCount=function(){return this.m_contactManager.m_broadPhase.GetProxyCount()},ft.prototype.CreateBody=function(e){if(this.IsLocked()==1)return null;var t=new Q(e,this);return t.m_prev=null,t.m_next=this.m_bodyList,this.m_bodyList&&(this.m_bodyList.m_prev=t),this.m_bodyList=t,++this.m_bodyCount,t},ft.prototype.DestroyBody=function(e){if(this.IsLocked()==1)return;var t=e.m_jointList;while(t){var n=t;t=t.next,this.m_destructionListener&&this.m_destructionListener.SayGoodbyeJoint(n.joint),this.DestroyJoint(n.joint)}var r=e.m_controllerList;while(r){var i=r;r=r.nextController,i.controller.RemoveBody(e)}var s=e.m_contactList;while(s){var o=s;s=s.next,this.m_contactManager.Destroy(o.contact)}e.m_contactList=null;var u=e.m_fixtureList;while(u){var a=u;u=u.m_next,this.m_destructionListener&&this.m_destructionListener.SayGoodbyeFixture(a),a.DestroyProxy(this.m_contactManager.m_broadPhase),a.Destroy()}e.m_fixtureList=null,e.m_fixtureCount=0,e.m_prev&&(e.m_prev.m_next=e.m_next),e.m_next&&(e.m_next.m_prev=e.m_prev),e==this.m_bodyList&&(this.m_bodyList=e.m_next),--this.m_bodyCount},ft.prototype.CreateJoint=function(e){var t=Dt.Create(e,null);t.m_prev=null,t.m_next=this.m_jointList,this.m_jointList&&(this.m_jointList.m_prev=t),this.m_jointList=t,++this.m_jointCount,t.m_edgeA.joint=t,t.m_edgeA.other=t.m_bodyB,t.m_edgeA.prev=null,t.m_edgeA.next=t.m_bodyA.m_jointList,t.m_bodyA.m_jointList&&(t.m_bodyA.m_jointList.prev=t.m_edgeA),t.m_bodyA.m_jointList=t.m_edgeA,t.m_edgeB.joint=t,t.m_edgeB.other=t.m_bodyA,t.m_edgeB.prev=null,t.m_edgeB.next=t.m_bodyB.m_jointList,t.m_bodyB.m_jointList&&(t.m_bodyB.m_jointList.prev=t.m_edgeB),t.m_bodyB.m_jointList=t.m_edgeB;var n=e.bodyA,r=e.bodyB;if(e.collideConnected==0){var i=r.GetContactList();while(i)i.other==n&&i.contact.FlagForFiltering(),i=i.next}return t},ft.prototype.DestroyJoint=function(e){var t=e.m_collideConnected;e.m_prev&&(e.m_prev.m_next=e.m_next),e.m_next&&(e.m_next.m_prev=e.m_prev),e==this.m_jointList&&(this.m_jointList=e.m_next);var n=e.m_bodyA,r=e.m_bodyB;n.SetAwake(!0),r.SetAwake(!0),e.m_edgeA.prev&&(e.m_edgeA.prev.next=e.m_edgeA.next),e.m_edgeA.next&&(e.m_edgeA.next.prev=e.m_edgeA.prev),e.m_edgeA==n.m_jointList&&(n.m_jointList=e.m_edgeA.next),e.m_edgeA.prev=null,e.m_edgeA.next=null,e.m_edgeB.prev&&(e.m_edgeB.prev.next=e.m_edgeB.next),e.m_edgeB.next&&(e.m_edgeB.next.prev=e.m_edgeB.prev),e.m_edgeB==r.m_jointList&&(r.m_jointList=e.m_edgeB.next),e.m_edgeB.prev=null,e.m_edgeB.next=null,Dt.Destroy(e,null),--this.m_jointCount;if(t==0){var i=r.GetContactList();while(i)i.other==n&&i.contact.FlagForFiltering(),i=i.next}},ft.prototype.AddController=function(e){return e.m_next=this.m_controllerList,e.m_prev=null,this.m_controllerList=e,e.m_world=this,this.m_controllerCount++,e},ft.prototype.RemoveController=function(e){e.m_prev&&(e.m_prev.m_next=e.m_next),e.m_next&&(e.m_next.m_prev=e.m_prev),this.m_controllerList==e&&(this.m_controllerList=e.m_next),this.m_controllerCount--},ft.prototype.CreateController=function(e){if(e.m_world!=this)throw new Error("Controller can only be a member of one world");return e.m_next=this.m_controllerList,e.m_prev=null,this.m_controllerList&&(this.m_controllerList.m_prev=e),this.m_controllerList=e,++this.m_controllerCount,e.m_world=this,e},ft.prototype.DestroyController=function(e){e.Clear(),e.m_next&&(e.m_next.m_prev=e.m_prev),e.m_prev&&(e.m_prev.m_next=e.m_next),e==this.m_controllerList&&(this.m_controllerList=e.m_next),--this.m_controllerCount},ft.prototype.SetWarmStarting=function(e){ft.m_warmStarting=e},ft.prototype.SetContinuousPhysics=function(e){ft.m_continuousPhysics=e},ft.prototype.GetBodyCount=function(){return this.m_bodyCount},ft.prototype.GetJointCount=function(){return this.m_jointCount},ft.prototype.GetContactCount=function(){return this.m_contactCount},ft.prototype.SetGravity=function(e){this.m_gravity=e},ft.prototype.GetGravity=function(){return this.m_gravity},ft.prototype.GetGroundBody=function(){return this.m_groundBody},ft.prototype.Step=function(e,t,n){e===undefined&&(e=0),t===undefined&&(t=0),n===undefined&&(n=0),this.m_flags&ft.e_newFixture&&(this.m_contactManager.FindNewContacts(),this.m_flags&=~ft.e_newFixture),this.m_flags|=ft.e_locked;var r=ft.s_timestep2;r.dt=e,r.velocityIterations=t,r.positionIterations=n,e>0?r.inv_dt=1/e:r.inv_dt=0,r.dtRatio=this.m_inv_dt0*e,r.warmStarting=ft.m_warmStarting,this.m_contactManager.Collide(),r.dt>0&&this.Solve(r),ft.m_continuousPhysics&&r.dt>0&&this.SolveTOI(r),r.dt>0&&(this.m_inv_dt0=r.inv_dt),this.m_flags&=~ft.e_locked},ft.prototype.ClearForces=function(){for(var e=this.m_bodyList;e;e=e.m_next)e.m_force.SetZero(),e.m_torque=0},ft.prototype.DrawDebugData=function(){if(this.m_debugDraw==null)return;this.m_debugDraw.m_sprite.graphics.clear();var e=this.m_debugDraw.GetFlags(),t=0,n,r,i,s,o,u=new f,a=new f,l=new f,h,p=new d,v=new d,m=[new f,new f,new f,new f],g=new c(0,0,0);if(e&nt.e_shapeBit)for(n=this.m_bodyList;n;n=n.m_next){h=n.m_xf;for(r=n.GetFixtureList();r;r=r.m_next)i=r.GetShape(),n.IsActive()==0?(g.Set(.5,.5,.3),this.DrawShape(i,h,g)):n.GetType()==Q.b2_staticBody?(g.Set(.5,.9,.5),this.DrawShape(i,h,g)):n.GetType()==Q.b2_kinematicBody?(g.Set(.5,.5,.9),this.DrawShape(i,h,g)):n.IsAwake()==0?(g.Set(.6,.6,.6),this.DrawShape(i,h,g)):(g.Set(.9,.7,.7),this.DrawShape(i,h,g))}if(e&nt.e_jointBit)for(s=this.m_jointList;s;s=s.m_next)this.DrawJoint(s);if(e&nt.e_controllerBit)for(var y=this.m_controllerList;y;y=y.m_next)y.Draw(this.m_debugDraw);if(e&nt.e_pairBit){g.Set(.3,.9,.9);for(var b=this.m_contactManager.m_contactList;b;b=b.GetNext()){var w=b.GetFixtureA(),E=b.GetFixtureB(),S=w.GetAABB().GetCenter(),x=E.GetAABB().GetCenter();this.m_debugDraw.DrawSegment(S,x,g)}}if(e&nt.e_aabbBit){o=this.m_contactManager.m_broadPhase,m=[new f,new f,new f,new f];for(n=this.m_bodyList;n;n=n.GetNext()){if(n.IsActive()==0)continue;for(r=n.GetFixtureList();r;r=r.GetNext()){var T=o.GetFatAABB(r.m_proxy);m[0].Set(T.lowerBound.x,T.lowerBound.y),m[1].Set(T.upperBound.x,T.lowerBound.y),m[2].Set(T.upperBound.x,T.upperBound.y),m[3].Set(T.lowerBound.x,T.upperBound.y),this.m_debugDraw.DrawPolygon(m,4,g)}}}if(e&nt.e_centerOfMassBit)for(n=this.m_bodyList;n;n=n.m_next)h=ft.s_xf,h.R=n.m_xf.R,h.position=n.GetWorldCenter(),this.m_debugDraw.DrawTransform(h)},ft.prototype.QueryAABB=function(e,t){function i(t){return e(r.GetUserData(t))}var n=this,r=n.m_contactManager.m_broadPhase;r.Query(i,t)},ft.prototype.QueryShape=function(e,t,n){function s(r){var s=i.GetUserData(r)instanceof st?i.GetUserData(r):null;return K.TestOverlap(t,n,s.GetShape(),s.GetBody().GetTransform())?e(s):!0}var r=this;n===undefined&&(n=null),n==null&&(n=new a,n.SetIdentity());var i=r.m_contactManager.m_broadPhase,o=new d;t.ComputeAABB(o,n),i.Query(s,o)},ft.prototype.QueryPoint=function(e,t){function i(n){var i=r.GetUserData(n)instanceof st?r.GetUserData(n):null;return i.TestPoint(t)?e(i):!0}var n=this,r=n.m_contactManager.m_broadPhase,s=new d;s.lowerBound.Set(t.x-p.b2_linearSlop,t.y-p.b2_linearSlop),s.upperBound.Set(t.x+p.b2_linearSlop,t.y+p.b2_linearSlop),r.Query(i,s)},ft.prototype.RayCast=function(e,t,n){function o(r,o){var u=i.GetUserData(o),a=u instanceof st?u:null,l=a.RayCast(s,r);if(l){var c=s.fraction,h=new f((1-c)*t.x+c*n.x,(1-c)*t.y+c*n.y);return e(a,h,s.normal,c)}return r.maxFraction}var r=this,i=r.m_contactManager.m_broadPhase,s=new _,u=new M(t,n);i.RayCast(o,u)},ft.prototype.RayCastOne=function(e,t){function i(e,t,n,i){return i===undefined&&(i=0),r=e,i}var n=this,r;return n.RayCast(i,e,t),r},ft.prototype.RayCastAll=function(e,n){function s(e,t,n,r){return r===undefined&&(r=0),i[i.length]=e,1}var r=this,i=new t;return r.RayCast(s,e,n),i},ft.prototype.GetBodyList=function(){return this.m_bodyList},ft.prototype.GetJointList=function(){return this.m_jointList},ft.prototype.GetContactList=function(){return this.m_contactList},ft.prototype.IsLocked=function(){return(this.m_flags&ft.e_locked)>0},ft.prototype.Solve=function(e){var t;for(var n=this.m_controllerList;n;n=n.m_next)n.Step(e);var r=this.m_island;r.Initialize(this.m_bodyCount,this.m_contactCount,this.m_jointCount,null,this.m_contactManager.m_contactListener,this.m_contactSolver);for(t=this.m_bodyList;t;t=t.m_next)t.m_flags&=~Q.e_islandFlag;for(var i=this.m_contactList;i;i=i.m_next)i.m_flags&=~ct.e_islandFlag;for(var s=this.m_jointList;s;s=s.m_next)s.m_islandFlag=!1;var o=parseInt(this.m_bodyCount),u=this.s_stack;for(var a=this.m_bodyList;a;a=a.m_next){if(a.m_flags&Q.e_islandFlag)continue;if(a.IsAwake()==0||a.IsActive()==0)continue;if(a.GetType()==Q.b2_staticBody)continue;r.Clear();var f=0;u[f++]=a,a.m_flags|=Q.e_islandFlag;while(f>0){t=u[--f],r.AddBody(t),t.IsAwake()==0&&t.SetAwake(!0);if(t.GetType()==Q.b2_staticBody)continue;var l;for(var c=t.m_contactList;c;c=c.next){if(c.contact.m_flags&ct.e_islandFlag)continue;if(c.contact.IsSensor()==1||c.contact.IsEnabled()==0||c.contact.IsTouching()==0)continue;r.AddContact(c.contact),c.contact.m_flags|=ct.e_islandFlag,l=c.other;if(l.m_flags&Q.e_islandFlag)continue;u[f++]=l,l.m_flags|=Q.e_islandFlag}for(var h=t.m_jointList;h;h=h.next){if(h.joint.m_islandFlag==1)continue;l=h.other;if(l.IsActive()==0)continue;r.AddJoint(h.joint),h.joint.m_islandFlag=!0;if(l.m_flags&Q.e_islandFlag)continue;u[f++]=l,l.m_flags|=Q.e_islandFlag}}r.Solve(e,this.m_gravity,this.m_allowSleep);for(var p=0;p<r.m_bodyCount;++p)t=r.m_bodies[p],t.GetType()==Q.b2_staticBody&&(t.m_flags&=~Q.e_islandFlag)}for(p=0;p<u.length;++p){if(!u[p])break;u[p]=null}for(t=this.m_bodyList;t;t=t.m_next){if(t.IsAwake()==0||t.IsActive()==0)continue;if(t.GetType()==Q.b2_staticBody)continue;t.SynchronizeFixtures()}this.m_contactManager.FindNewContacts()},ft.prototype.SolveTOI=function(e){var t,n,r,i,s,o,u,a=this.m_island;a.Initialize(this.m_bodyCount,p.b2_maxTOIContactsPerIsland,p.b2_maxTOIJointsPerIsland,null,this.m_contactManager.m_contactListener,this.m_contactSolver);var f=ft.s_queue;for(t=this.m_bodyList;t;t=t.m_next)t.m_flags&=~Q.e_islandFlag,t.m_sweep.t0=0;var l;for(l=this.m_contactList;l;l=l.m_next)l.m_flags&=~(ct.e_toiFlag|ct.e_islandFlag);for(u=this.m_jointList;u;u=u.m_next)u.m_islandFlag=!1;for(;;){var c=null,h=1;for(l=this.m_contactList;l;l=l.m_next){if(l.IsSensor()==1||l.IsEnabled()==0||l.IsContinuous()==0)continue;var d=1;if(l.m_flags&ct.e_toiFlag)d=l.m_toi;else{n=l.m_fixtureA,r=l.m_fixtureB,i=n.m_body,s=r.m_body;if(!(i.GetType()==Q.b2_dynamicBody&&i.IsAwake()!=0||s.GetType()==Q.b2_dynamicBody&&s.IsAwake()!=0))continue;var v=i.m_sweep.t0;i.m_sweep.t0<s.m_sweep.t0?(v=s.m_sweep.t0,i.m_sweep.Advance(v)):s.m_sweep.t0<i.m_sweep.t0&&(v=i.m_sweep.t0,s.m_sweep.Advance(v)),d=l.ComputeTOI(i.m_sweep,s.m_sweep),p.b2Assert(0<=d&&d<=1),d>0&&d<1&&(d=(1-d)*v+d,d>1&&(d=1)),l.m_toi=d,l.m_flags|=ct.e_toiFlag}Number.MIN_VALUE<d&&d<h&&(c=l,h=d)}if(c==null||1-100*Number.MIN_VALUE<h)break;n=c.m_fixtureA,r=c.m_fixtureB,i=n.m_body,s=r.m_body,ft.s_backupA.Set(i.m_sweep),ft.s_backupB.Set(s.m_sweep),i.Advance(h),s.Advance(h),c.Update(this.m_contactManager.m_contactListener),c.m_flags&=~ct.e_toiFlag;if(c.IsSensor()==1||c.IsEnabled()==0){i.m_sweep.Set(ft.s_backupA),s.m_sweep.Set(ft.s_backupB),i.SynchronizeTransform(),s.SynchronizeTransform();continue}if(c.IsTouching()==0)continue;var m=i;m.GetType()!=Q.b2_dynamicBody&&(m=s),a.Clear();var g=0,y=0;f[g+y++]=m,m.m_flags|=Q.e_islandFlag;while(y>0){t=f[g++],--y,a.AddBody(t),t.IsAwake()==0&&t.SetAwake(!0);if(t.GetType()!=Q.b2_dynamicBody)continue;for(o=t.m_contactList;o;o=o.next){if(a.m_contactCount==a.m_contactCapacity)break;if(o.contact.m_flags&ct.e_islandFlag)continue;if(o.contact.IsSensor()==1||o.contact.IsEnabled()==0||o.contact.IsTouching()==0)continue;a.AddContact(o.contact),o.contact.m_flags|=ct.e_islandFlag;var b=o.other;if(b.m_flags&Q.e_islandFlag)continue;b.GetType()!=Q.b2_staticBody&&(b.Advance(h),b.SetAwake(!0)),f[g+y]=b,++y,b.m_flags|=Q.e_islandFlag}for(var w=t.m_jointList;w;w=w.next){if(a.m_jointCount==a.m_jointCapacity)continue;if(w.joint.m_islandFlag==1)continue;b=w.other;if(b.IsActive()==0)continue;a.AddJoint(w.joint),w.joint.m_islandFlag=!0;if(b.m_flags&Q.e_islandFlag)continue;b.GetType()!=Q.b2_staticBody&&(b.Advance(h),b.SetAwake(!0)),f[g+y]=b,++y,b.m_flags|=Q.e_islandFlag}}var E=ft.s_timestep;E.warmStarting=!1,E.dt=(1-h)*e.dt,E.inv_dt=1/E.dt,E.dtRatio=0,E.velocityIterations=e.velocityIterations,E.positionIterations=e.positionIterations,a.SolveTOI(E);var S=0;for(S=0;S<a.m_bodyCount;++S){t=a.m_bodies[S],t.m_flags&=~Q.e_islandFlag;if(t.IsAwake()==0)continue;if(t.GetType()!=Q.b2_dynamicBody)continue;t.SynchronizeFixtures();for(o=t.m_contactList;o;o=o.next)o.contact.m_flags&=~ct.e_toiFlag}for(S=0;S<a.m_contactCount;++S)l=a.m_contacts[S],l.m_flags&=~(ct.e_toiFlag|ct.e_islandFlag);for(S=0;S<a.m_jointCount;++S)u=a.m_joints[S],u.m_islandFlag=!1;this.m_contactManager.FindNewContacts()}},ft.prototype.DrawJoint=function(e){var t=e.GetBodyA(),n=e.GetBodyB(),r=t.m_xf,i=n.m_xf,s=r.position,o=i.position,u=e.GetAnchorA(),a=e.GetAnchorB(),f=ft.s_jointColor;switch(e.m_type){case Dt.e_distanceJoint:this.m_debugDraw.DrawSegment(u,a,f);break;case Dt.e_pulleyJoint:var l=e instanceof Ut?e:null,c=l.GetGroundAnchorA(),h=l.GetGroundAnchorB();this.m_debugDraw.DrawSegment(c,u,f),this.m_debugDraw.DrawSegment(h,a,f),this.m_debugDraw.DrawSegment(c,h,f);break;case Dt.e_mouseJoint:this.m_debugDraw.DrawSegment(u,a,f);break;default:t!=this.m_groundBody&&this.m_debugDraw.DrawSegment(s,u,f),this.m_debugDraw.DrawSegment(u,a,f),n!=this.m_groundBody&&this.m_debugDraw.DrawSegment(o,a,f)}},ft.prototype.DrawShape=function(e,n,r){switch(e.m_type){case K.e_circleShape:var i=e instanceof W?e:null,s=o.MulX(n,i.m_p),u=i.m_radius,a=n.R.col1;this.m_debugDraw.DrawSolidCircle(s,u,a,r);break;case K.e_polygonShape:var f=0,l=e instanceof J?e:null,c=parseInt(l.GetVertexCount()),h=l.GetVertices(),p=new t(c);for(f=0;f<c;++f)p[f]=o.MulX(n,h[f]);this.m_debugDraw.DrawSolidPolygon(p,c,r);break;case K.e_edgeShape:var d=e instanceof V?e:null;this.m_debugDraw.DrawSegment(o.MulX(n,d.GetVertex1()),o.MulX(n,d.GetVertex2()),r)}},e.postDefs.push(function(){e.Dynamics.b2World.s_timestep2=new at,e.Dynamics.b2World.s_xf=new a,e.Dynamics.b2World.s_backupA=new u,e.Dynamics.b2World.s_backupB=new u,e.Dynamics.b2World.s_timestep=new at,e.Dynamics.b2World.s_queue=new t,e.Dynamics.b2World.s_jointColor=new c(.5,.8,.8),e.Dynamics.b2World.e_newFixture=1,e.Dynamics.b2World.e_locked=2})}(),function(){var r=e.Collision.Shapes.b2CircleShape,i=e.Collision.Shapes.b2EdgeChainDef,s=e.Collision.Shapes.b2EdgeShape,o=e.Collision.Shapes.b2MassData,u=e.Collision.Shapes.b2PolygonShape,a=e.Collision.Shapes.b2Shape,f=e.Dynamics.Contacts.b2CircleContact,l=e.Dynamics.Contacts.b2Contact,c=e.Dynamics.Contacts.b2ContactConstraint,h=e.Dynamics.Contacts.b2ContactConstraintPoint,p=e.Dynamics.Contacts.b2ContactEdge,d=e.Dynamics.Contacts.b2ContactFactory,v=e.Dynamics.Contacts.b2ContactRegister,m=e.Dynamics.Contacts.b2ContactResult,g=e.Dynamics.Contacts.b2ContactSolver,y=e.Dynamics.Contacts.b2EdgeAndCircleContact,b=e.Dynamics.Contacts.b2NullContact,w=e.Dynamics.Contacts.b2PolyAndCircleContact,E=e.Dynamics.Contacts.b2PolyAndEdgeContact,S=e.Dynamics.Contacts.b2PolygonContact,x=e.Dynamics.Contacts.b2PositionSolverManifold,T=e.Dynamics.b2Body,N=e.Dynamics.b2BodyDef,C=e.Dynamics.b2ContactFilter,k=e.Dynamics.b2ContactImpulse,L=e.Dynamics.b2ContactListener,A=e.Dynamics.b2ContactManager,O=e.Dynamics.b2DebugDraw,M=e.Dynamics.b2DestructionListener,_=e.Dynamics.b2FilterData,D=e.Dynamics.b2Fixture,P=e.Dynamics.b2FixtureDef,H=e.Dynamics.b2Island,B=e.Dynamics.b2TimeStep,j=e.Dynamics.b2World,F=e.Common.b2Color,I=e.Common.b2internal,q=e.Common.b2Settings,R=e.Common.Math.b2Mat22,U=e.Common.Math.b2Mat33,z=e.Common.Math.b2Math,W=e.Common.Math.b2Sweep,X=e.Common.Math.b2Transform,V=e.Common.Math.b2Vec2,$=e.Common.Math.b2Vec3,J=e.Collision.b2AABB,K=e.Collision.b2Bound,Q=e.Collision.b2BoundValues,G=e.Collision.b2Collision,Y=e.Collision.b2ContactID,Z=e.Collision.b2ContactPoint,et=e.Collision.b2Distance,tt=e.Collision.b2DistanceInput,nt=e.Collision.b2DistanceOutput,rt=e.Collision.b2DistanceProxy,it=e.Collision.b2DynamicTree,st=e.Collision.b2DynamicTreeBroadPhase,ot=e.Collision.b2DynamicTreeNode,ut=e.Collision.b2DynamicTreePair,at=e.Collision.b2Manifold,ft=e.Collision.b2ManifoldPoint,lt=e.Collision.b2Point,ct=e.Collision.b2RayCastInput,ht=e.Collision.b2RayCastOutput,pt=e.Collision.b2Segment,dt=e.Collision.b2SeparationFunction,vt=e.Collision.b2Simplex,mt=e.Collision.b2SimplexCache,gt=e.Collision.b2SimplexVertex,yt=e.Collision.b2TimeOfImpact,bt=e.Collision.b2TOIInput,wt=e.Collision.b2WorldManifold,Et=e.Collision.ClipVertex,St=e.Collision.Features,xt=e.Collision.IBroadPhase;e.inherit(f,e.Dynamics.Contacts.b2Contact),f.prototype.__super=e.Dynamics.Contacts.b2Contact.prototype,f.b2CircleContact=function(){e.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)},f.Create=function(e){return new f},f.Destroy=function(e,t){},f.prototype.Reset=function(e,t){this.__super.Reset.call(this,e,t)},f.prototype.Evaluate=function(){var e=this.m_fixtureA.GetBody(),t=this.m_fixtureB.GetBody();G.CollideCircles(this.m_manifold,this.m_fixtureA.GetShape()instanceof r?this.m_fixtureA.GetShape():null,e.m_xf,this.m_fixtureB.GetShape()instanceof r?this.m_fixtureB.GetShape():null,t.m_xf)},l.b2Contact=function(){this.m_nodeA=new p,this.m_nodeB=new p,this.m_manifold=new at,this.m_oldManifold=new at},l.prototype.GetManifold=function(){return this.m_manifold},l.prototype.GetWorldManifold=function(e){var t=this.m_fixtureA.GetBody(),n=this.m_fixtureB.GetBody(),r=this.m_fixtureA.GetShape(),i=this.m_fixtureB.GetShape();e.Initialize(this.m_manifold,t.GetTransform(),r.m_radius,n.GetTransform(),i.m_radius)},l.prototype.IsTouching=function(){return(this.m_flags&l.e_touchingFlag)==l.e_touchingFlag},l.prototype.IsContinuous=function(){return(this.m_flags&l.e_continuousFlag)==l.e_continuousFlag},l.prototype.SetSensor=function(e){e?this.m_flags|=l.e_sensorFlag:this.m_flags&=~l.e_sensorFlag},l.prototype.IsSensor=function(){return(this.m_flags&l.e_sensorFlag)==l.e_sensorFlag},l.prototype.SetEnabled=function(e){e?this.m_flags|=l.e_enabledFlag:this.m_flags&=~l.e_enabledFlag},l.prototype.IsEnabled=function(){return(this.m_flags&l.e_enabledFlag)==l.e_enabledFlag},l.prototype.GetNext=function(){return this.m_next},l.prototype.GetFixtureA=function(){return this.m_fixtureA},l.prototype.GetFixtureB=function(){return this.m_fixtureB},l.prototype.FlagForFiltering=function(){this.m_flags|=l.e_filterFlag},l.prototype.b2Contact=function(){},l.prototype.Reset=function(e,t){e===undefined&&(e=null),t===undefined&&(t=null),this.m_flags=l.e_enabledFlag;if(!e||!t){this.m_fixtureA=null,this.m_fixtureB=null;return}if(e.IsSensor()||t.IsSensor())this.m_flags|=l.e_sensorFlag;var n=e.GetBody(),r=t.GetBody();if(n.GetType()!=T.b2_dynamicBody||n.IsBullet()||r.GetType()!=T.b2_dynamicBody||r.IsBullet())this.m_flags|=l.e_continuousFlag;this.m_fixtureA=e,this.m_fixtureB=t,this.m_manifold.m_pointCount=0,this.m_prev=null,this.m_next=null,this.m_nodeA.contact=null,this.m_nodeA.prev=null,this.m_nodeA.next=null,this.m_nodeA.other=null,this.m_nodeB.contact=null,this.m_nodeB.prev=null,this.m_nodeB.next=null,this.m_nodeB.other=null},l.prototype.Update=function(e){var t=this.m_oldManifold;this.m_oldManifold=this.m_manifold,this.m_manifold=t,this.m_flags|=l.e_enabledFlag;var n=!1,r=(this.m_flags&l.e_touchingFlag)==l.e_touchingFlag,i=this.m_fixtureA.m_body,s=this.m_fixtureB.m_body,o=this.m_fixtureA.m_aabb.TestOverlap(this.m_fixtureB.m_aabb);if(this.m_flags&l.e_sensorFlag){if(o){var u=this.m_fixtureA.GetShape(),f=this.m_fixtureB.GetShape(),c=i.GetTransform(),h=s.GetTransform();n=a.TestOverlap(u,c,f,h)}this.m_manifold.m_pointCount=0}else{i.GetType()!=T.b2_dynamicBody||i.IsBullet()||s.GetType()!=T.b2_dynamicBody||s.IsBullet()?this.m_flags|=l.e_continuousFlag:this.m_flags&=~l.e_continuousFlag;if(o){this.Evaluate(),n=this.m_manifold.m_pointCount>0;for(var p=0;p<this.m_manifold.m_pointCount;++p){var d=this.m_manifold.m_points[p];d.m_normalImpulse=0,d.m_tangentImpulse=0;var v=d.m_id;for(var m=0;m<this.m_oldManifold.m_pointCount;++m){var g=this.m_oldManifold.m_points[m];if(g.m_id.key==v.key){d.m_normalImpulse=g.m_normalImpulse,d.m_tangentImpulse=g.m_tangentImpulse;break}}}}else this.m_manifold.m_pointCount=0;n!=r&&(i.SetAwake(!0),s.SetAwake(!0))}n?this.m_flags|=l.e_touchingFlag:this.m_flags&=~l.e_touchingFlag,r==0&&n==1&&e.BeginContact(this),r==1&&n==0&&e.EndContact(this),(this.m_flags&l.e_sensorFlag)==0&&e.PreSolve(this,this.m_oldManifold)},l.prototype.Evaluate=function(){},l.prototype.ComputeTOI=function(e,t){return l.s_input.proxyA.Set(this.m_fixtureA.GetShape()),l.s_input.proxyB.Set(this.m_fixtureB.GetShape()),l.s_input.sweepA=e,l.s_input.sweepB=t,l.s_input.tolerance=q.b2_linearSlop,yt.TimeOfImpact(l.s_input)},e.postDefs.push(function(){e.Dynamics.Contacts.b2Contact.e_sensorFlag=1,e.Dynamics.Contacts.b2Contact.e_continuousFlag=2,e.Dynamics.Contacts.b2Contact.e_islandFlag=4,e.Dynamics.Contacts.b2Contact.e_toiFlag=8,e.Dynamics.Contacts.b2Contact.e_touchingFlag=16,e.Dynamics.Contacts.b2Contact.e_enabledFlag=32,e.Dynamics.Contacts.b2Contact.e_filterFlag=64,e.Dynamics.Contacts.b2Contact.s_input=new bt}),c.b2ContactConstraint=function(){this.localPlaneNormal=new V,this.localPoint=new V,this.normal=new V,this.normalMass=new R,this.K=new R},c.prototype.b2ContactConstraint=function(){this.points=new t(q.b2_maxManifoldPoints);for(var e=0;e<q.b2_maxManifoldPoints;e++)this.points[e]=new h},h.b2ContactConstraintPoint=function(){this.localPoint=new V,this.rA=new V,this.rB=new V},p.b2ContactEdge=function(){},d.b2ContactFactory=function(){},d.prototype.b2ContactFactory=function(e){this.m_allocator=e,this.InitializeRegisters()},d.prototype.AddType=function(e,t,n,r){n===undefined&&(n=0),r===undefined&&(r=0),this.m_registers[n][r].createFcn=e,this.m_registers[n][r].destroyFcn=t,this.m_registers[n][r].primary=!0,n!=r&&(this.m_registers[r][n].createFcn=e,this.m_registers[r][n].destroyFcn=t,this.m_registers[r][n].primary=!1)},d.prototype.InitializeRegisters=function(){this.m_registers=new t(a.e_shapeTypeCount);for(var e=0;e<a.e_shapeTypeCount;e++){this.m_registers[e]=new t(a.e_shapeTypeCount);for(var n=0;n<a.e_shapeTypeCount;n++)this.m_registers[e][n]=new v}this.AddType(f.Create,f.Destroy,a.e_circleShape,a.e_circleShape),this.AddType(w.Create,w.Destroy,a.e_polygonShape,a.e_circleShape),this.AddType(S.Create,S.Destroy,a.e_polygonShape,a.e_polygonShape),this.AddType(y.Create,y.Destroy,a.e_edgeShape,a.e_circleShape),this.AddType(E.Create,E.Destroy,a.e_polygonShape,a.e_edgeShape)},d.prototype.Create=function(e,t){var n=parseInt(e.GetType()),r=parseInt(t.GetType()),i=this.m_registers[n][r],s;if(i.pool)return s=i.pool,i.pool=s.m_next,i.poolCount--,s.Reset(e,t),s;var o=i.createFcn;return o!=null?i.primary?(s=o(this.m_allocator),s.Reset(e,t),s):(s=o(this.m_allocator),s.Reset(t,e),s):null},d.prototype.Destroy=function(e){e.m_manifold.m_pointCount>0&&(e.m_fixtureA.m_body.SetAwake(!0),e.m_fixtureB.m_body.SetAwake(!0));var t=parseInt(e.m_fixtureA.GetType()),n=parseInt(e.m_fixtureB.GetType()),r=this.m_registers[t][n];r.poolCount++,e.m_next=r.pool,r.pool=e;var i=r.destroyFcn;i(e,this.m_allocator)},v.b2ContactRegister=function(){},m.b2ContactResult=function(){this.position=new V,this.normal=new V,this.id=new Y},g.b2ContactSolver=function(){this.m_step=new B,this.m_constraints=new t},g.prototype.b2ContactSolver=function(){},g.prototype.Initialize=function(e,t,n,r){n===undefined&&(n=0);var i;this.m_step.Set(e),this.m_allocator=r;var s=0,o,u;this.m_constraintCount=n;while(this.m_constraints.length<this.m_constraintCount)this.m_constraints[this.m_constraints.length]=new c;for(s=0;s<n;++s){i=t[s];var a=i.m_fixtureA,f=i.m_fixtureB,l=a.m_shape,h=f.m_shape,p=l.m_radius,d=h.m_radius,v=a.m_body,m=f.m_body,y=i.GetManifold(),b=q.b2MixFriction(a.GetFriction(),f.GetFriction()),w=q.b2MixRestitution(a.GetRestitution(),f.GetRestitution()),E=v.m_linearVelocity.x,S=v.m_linearVelocity.y,x=m.m_linearVelocity.x,T=m.m_linearVelocity.y,N=v.m_angularVelocity,C=m.m_angularVelocity;q.b2Assert(y.m_pointCount>0),g.s_worldManifold.Initialize(y,v.m_xf,p,m.m_xf,d);var k=g.s_worldManifold.m_normal.x,L=g.s_worldManifold.m_normal.y,A=this.m_constraints[s];A.bodyA=v,A.bodyB=m,A.manifold=y,A.normal.x=k,A.normal.y=L,A.pointCount=y.m_pointCount,A.friction=b,A.restitution=w,A.localPlaneNormal.x=y.m_localPlaneNormal.x,A.localPlaneNormal.y=y.m_localPlaneNormal.y,A.localPoint.x=y.m_localPoint.x,A.localPoint.y=y.m_localPoint.y,A.radius=p+d,A.type=y.m_type;for(var O=0;O<A.pointCount;++O){var M=y.m_points[O],_=A.points[O];_.normalImpulse=M.m_normalImpulse,_.tangentImpulse=M.m_tangentImpulse,_.localPoint.SetV(M.m_localPoint);var D=_.rA.x=g.s_worldManifold.m_points[O].x-v.m_sweep.c.x,P=_.rA.y=g.s_worldManifold.m_points[O].y-v.m_sweep.c.y,H=_.rB.x=g.s_worldManifold.m_points[O].x-m.m_sweep.c.x,B=_.rB.y=g.s_worldManifold.m_points[O].y-m.m_sweep.c.y,j=D*L-P*k,F=H*L-B*k;j*=j,F*=F;var I=v.m_invMass+m.m_invMass+v.m_invI*j+m.m_invI*F;_.normalMass=1/I;var R=v.m_mass*v.m_invMass+m.m_mass*m.m_invMass;R+=v.m_mass*v.m_invI*j+m.m_mass*m.m_invI*F,_.equalizedMass=1/R;var U=L,z=-k,W=D*z-P*U,X=H*z-B*U;W*=W,X*=X;var V=v.m_invMass+m.m_invMass+v.m_invI*W+m.m_invI*X;_.tangentMass=1/V,_.velocityBias=0;var $=x+ -C*B-E- -N*P,J=T+C*H-S-N*D,K=A.normal.x*$+A.normal.y*J;K<-q.b2_velocityThreshold&&(_.velocityBias+=-A.restitution*K)}if(A.pointCount==2){var Q=A.points[0],G=A.points[1],Y=v.m_invMass,Z=v.m_invI,et=m.m_invMass,tt=m.m_invI,nt=Q.rA.x*L-Q.rA.y*k,rt=Q.rB.x*L-Q.rB.y*k,it=G.rA.x*L-G.rA.y*k,st=G.rB.x*L-G.rB.y*k,ot=Y+et+Z*nt*nt+tt*rt*rt,ut=Y+et+Z*it*it+tt*st*st,at=Y+et+Z*nt*it+tt*rt*st,ft=100;ot*ot<ft*(ot*ut-at*at)?(A.K.col1.Set(ot,at),A.K.col2.Set(at,ut),A.K.GetInverse(A.normalMass)):A.pointCount=1}}},g.prototype.InitVelocityConstraints=function(e){var t,n,r;for(var i=0;i<this.m_constraintCount;++i){var s=this.m_constraints[i],o=s.bodyA,u=s.bodyB,a=o.m_invMass,f=o.m_invI,l=u.m_invMass,c=u.m_invI,h=s.normal.x,p=s.normal.y,d=p,v=-h,m=0,g=0,y=0;if(e.warmStarting){y=s.pointCount;for(g=0;g<y;++g){var b=s.points[g];b.normalImpulse*=e.dtRatio,b.tangentImpulse*=e.dtRatio;var w=b.normalImpulse*h+b.tangentImpulse*d,E=b.normalImpulse*p+b.tangentImpulse*v;o.m_angularVelocity-=f*(b.rA.x*E-b.rA.y*w),o.m_linearVelocity.x-=a*w,o.m_linearVelocity.y-=a*E,u.m_angularVelocity+=c*(b.rB.x*E-b.rB.y*w),u.m_linearVelocity.x+=l*w,u.m_linearVelocity.y+=l*E}}else{y=s.pointCount;for(g=0;g<y;++g){var S=s.points[g];S.normalImpulse=0,S.tangentImpulse=0}}}},g.prototype.SolveVelocityConstraints=function(){var e=0,t,n=0,r=0,i=0,s=0,o=0,u=0,a=0,f=0,l=0,c=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E,S;for(var x=0;x<this.m_constraintCount;++x){var T=this.m_constraints[x],N=T.bodyA,C=T.bodyB,k=N.m_angularVelocity,L=C.m_angularVelocity,A=N.m_linearVelocity,O=C.m_linearVelocity,M=N.m_invMass,_=N.m_invI,D=C.m_invMass,P=C.m_invI,H=T.normal.x,B=T.normal.y,j=B,F=-H,I=T.friction,q=0;for(e=0;e<T.pointCount;e++)t=T.points[e],o=O.x-L*t.rB.y-A.x+k*t.rA.y,u=O.y+L*t.rB.x-A.y-k*t.rA.x,f=o*j+u*F,l=t.tangentMass*-f,c=I*t.normalImpulse,h=z.Clamp(t.tangentImpulse+l,-c,c),l=h-t.tangentImpulse,p=l*j,d=l*F,A.x-=M*p,A.y-=M*d,k-=_*(t.rA.x*d-t.rA.y*p),O.x+=D*p,O.y+=D*d,L+=P*(t.rB.x*d-t.rB.y*p),t.tangentImpulse=h;var R=parseInt(T.pointCount);if(T.pointCount==1)t=T.points[0],o=O.x+ -L*t.rB.y-A.x- -k*t.rA.y,u=O.y+L*t.rB.x-A.y-k*t.rA.x,a=o*H+u*B,l=-t.normalMass*(a-t.velocityBias),h=t.normalImpulse+l,h=h>0?h:0,l=h-t.normalImpulse,p=l*H,d=l*B,A.x-=M*p,A.y-=M*d,k-=_*(t.rA.x*d-t.rA.y*p),O.x+=D*p,O.y+=D*d,L+=P*(t.rB.x*d-t.rB.y*p),t.normalImpulse=h;else{var U=T.points[0],W=T.points[1],X=U.normalImpulse,V=W.normalImpulse,$=O.x-L*U.rB.y-A.x+k*U.rA.y,J=O.y+L*U.rB.x-A.y-k*U.rA.x,K=O.x-L*W.rB.y-A.x+k*W.rA.y,Q=O.y+L*W.rB.x-A.y-k*W.rA.x,G=$*H+J*B,Y=K*H+Q*B,Z=G-U.velocityBias,et=Y-W.velocityBias;E=T.K,Z-=E.col1.x*X+E.col2.x*V,et-=E.col1.y*X+E.col2.y*V;var tt=.001;for(;;){E=T.normalMass;var nt=-(E.col1.x*Z+E.col2.x*et),rt=-(E.col1.y*Z+E.col2.y*et);if(nt>=0&&rt>=0){v=nt-X,m=rt-V,g=v*H,y=v*B,b=m*H,w=m*B,A.x-=M*(g+b),A.y-=M*(y+w),k-=_*(U.rA.x*y-U.rA.y*g+W.rA.x*w-W.rA.y*b),O.x+=D*(g+b),O.y+=D*(y+w),L+=P*(U.rB.x*y-U.rB.y*g+W.rB.x*w-W.rB.y*b),U.normalImpulse=nt,W.normalImpulse=rt;break}nt=-U.normalMass*Z,rt=0,G=0,Y=T.K.col1.y*nt+et;if(nt>=0&&Y>=0){v=nt-X,m=rt-V,g=v*H,y=v*B,b=m*H,w=m*B,A.x-=M*(g+b),A.y-=M*(y+w),k-=_*(U.rA.x*y-U.rA.y*g+W.rA.x*w-W.rA.y*b),O.x+=D*(g+b),O.y+=D*(y+w),L+=P*(U.rB.x*y-U.rB.y*g+W.rB.x*w-W.rB.y*b),U.normalImpulse=nt,W.normalImpulse=rt;break}nt=0,rt=-W.normalMass*et,G=T.K.col2.x*rt+Z,Y=0;if(rt>=0&&G>=0){v=nt-X,m=rt-V,g=v*H,y=v*B,b=m*H,w=m*B,A.x-=M*(g+b),A.y-=M*(y+w),k-=_*(U.rA.x*y-U.rA.y*g+W.rA.x*w-W.rA.y*b),O.x+=D*(g+b),O.y+=D*(y+w),L+=P*(U.rB.x*y-U.rB.y*g+W.rB.x*w-W.rB.y*b),U.normalImpulse=nt,W.normalImpulse=rt;break}nt=0,rt=0,G=Z,Y=et;if(G>=0&&Y>=0){v=nt-X,m=rt-V,g=v*H,y=v*B,b=m*H,w=m*B,A.x-=M*(g+b),A.y-=M*(y+w),k-=_*(U.rA.x*y-U.rA.y*g+W.rA.x*w-W.rA.y*b),O.x+=D*(g+b),O.y+=D*(y+w),L+=P*(U.rB.x*y-U.rB.y*g+W.rB.x*w-W.rB.y*b),U.normalImpulse=nt,W.normalImpulse=rt;break}break}}N.m_angularVelocity=k,C.m_angularVelocity=L}},g.prototype.FinalizeVelocityConstraints=function(){for(var e=0;e<this.m_constraintCount;++e){var t=this.m_constraints[e],n=t.manifold;for(var r=0;r<t.pointCount;++r){var i=n.m_points[r],s=t.points[r];i.m_normalImpulse=s.normalImpulse,i.m_tangentImpulse=s.tangentImpulse}}},g.prototype.SolvePositionConstraints=function(e){e===undefined&&(e=0);var t=0;for(var n=0;n<this.m_constraintCount;n++){var r=this.m_constraints[n],i=r.bodyA,s=r.bodyB,o=i.m_mass*i.m_invMass,u=i.m_mass*i.m_invI,a=s.m_mass*s.m_invMass,f=s.m_mass*s.m_invI;g.s_psm.Initialize(r);var l=g.s_psm.m_normal;for(var c=0;c<r.pointCount;c++){var h=r.points[c],p=g.s_psm.m_points[c],d=g.s_psm.m_separations[c],v=p.x-i.m_sweep.c.x,m=p.y-i.m_sweep.c.y,y=p.x-s.m_sweep.c.x,b=p.y-s.m_sweep.c.y;t=t<d?t:d;var w=z.Clamp(e*(d+q.b2_linearSlop),-q.b2_maxLinearCorrection,0),E=-h.equalizedMass*w,S=E*l.x,x=E*l.y;i.m_sweep.c.x-=o*S,i.m_sweep.c.y-=o*x,i.m_sweep.a-=u*(v*x-m*S),i.SynchronizeTransform(),s.m_sweep.c.x+=a*S,s.m_sweep.c.y+=a*x,s.m_sweep.a+=f*(y*x-b*S),s.SynchronizeTransform()}}return t>-1.5*q.b2_linearSlop},e.postDefs.push(function(){e.Dynamics.Contacts.b2ContactSolver.s_worldManifold=new wt,e.Dynamics.Contacts.b2ContactSolver.s_psm=new x}),e.inherit(y,e.Dynamics.Contacts.b2Contact),y.prototype.__super=e.Dynamics.Contacts.b2Contact.prototype,y.b2EdgeAndCircleContact=function(){e.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)},y.Create=function(e){return new y},y.Destroy=function(e,t){},y.prototype.Reset=function(e,t){this.__super.Reset.call(this,e,t)},y.prototype.Evaluate=function(){var e=this.m_fixtureA.GetBody(),t=this.m_fixtureB.GetBody();this.b2CollideEdgeAndCircle(this.m_manifold,this.m_fixtureA.GetShape()instanceof s?this.m_fixtureA.GetShape():null,e.m_xf,this.m_fixtureB.GetShape()instanceof r?this.m_fixtureB.GetShape():null,t.m_xf)},y.prototype.b2CollideEdgeAndCircle=function(e,t,n,r,i){},e.inherit(b,e.Dynamics.Contacts.b2Contact),b.prototype.__super=e.Dynamics.Contacts.b2Contact.prototype,b.b2NullContact=function(){e.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)},b.prototype.b2NullContact=function(){this.__super.b2Contact.call(this)},b.prototype.Evaluate=function(){},e.inherit(w,e.Dynamics.Contacts.b2Contact),w.prototype.__super=e.Dynamics.Contacts.b2Contact.prototype,w.b2PolyAndCircleContact=function(){e.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)},w.Create=function(e){return new w},w.Destroy=function(e,t){},w.prototype.Reset=function(e,t){this.__super.Reset.call(this,e,t),q.b2Assert(e.GetType()==a.e_polygonShape),q.b2Assert(t.GetType()==a.e_circleShape)},w.prototype.Evaluate=function(){var e=this.m_fixtureA.m_body,t=this.m_fixtureB.m_body;G.CollidePolygonAndCircle(this.m_manifold,this.m_fixtureA.GetShape()instanceof u?this.m_fixtureA.GetShape():null,e.m_xf,this.m_fixtureB.GetShape()instanceof r?this.m_fixtureB.GetShape():null,t.m_xf)},e.inherit(E,e.Dynamics.Contacts.b2Contact),E.prototype.__super=e.Dynamics.Contacts.b2Contact.prototype,E.b2PolyAndEdgeContact=function(){e.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)},E.Create=function(e){return new E},E.Destroy=function(e,t){},E.prototype.Reset=function(e,t){this.__super.Reset.call(this,e,t),q.b2Assert(e.GetType()==a.e_polygonShape),q.b2Assert(t.GetType()==a.e_edgeShape)},E.prototype.Evaluate=function(){var e=this.m_fixtureA.GetBody(),t=this.m_fixtureB.GetBody();this.b2CollidePolyAndEdge(this.m_manifold,this.m_fixtureA.GetShape()instanceof u?this.m_fixtureA.GetShape():null,e.m_xf,this.m_fixtureB.GetShape()instanceof s?this.m_fixtureB.GetShape():null,t.m_xf)},E.prototype.b2CollidePolyAndEdge=function(e,t,n,r,i){},e.inherit(S,e.Dynamics.Contacts.b2Contact),S.prototype.__super=e.Dynamics.Contacts.b2Contact.prototype,S.b2PolygonContact=function(){e.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)},S.Create=function(e){return new S},S.Destroy=function(e,t){},S.prototype.Reset=function(e,t){this.__super.Reset.call(this,e,t)},S.prototype.Evaluate=function(){var e=this.m_fixtureA.GetBody(),t=this.m_fixtureB.GetBody();G.CollidePolygons(this.m_manifold,this.m_fixtureA.GetShape()instanceof u?this.m_fixtureA.GetShape():null,e.m_xf,this.m_fixtureB.GetShape()instanceof u?this.m_fixtureB.GetShape():null,t.m_xf)},x.b2PositionSolverManifold=function(){},x.prototype.b2PositionSolverManifold=function(){this.m_normal=new V,this.m_separations=new n(q.b2_maxManifoldPoints),this.m_points=new t(q.b2_maxManifoldPoints);for(var e=0;e<q.b2_maxManifoldPoints;e++)this.m_points[e]=new V},x.prototype.Initialize=function(e){q.b2Assert(e.pointCount>0);var t=0,n=0,r=0,i,s,o=0,u=0;switch(e.type){case at.e_circles:i=e.bodyA.m_xf.R,s=e.localPoint;var a=e.bodyA.m_xf.position.x+(i.col1.x*s.x+i.col2.x*s.y),f=e.bodyA.m_xf.position.y+(i.col1.y*s.x+i.col2.y*s.y);i=e.bodyB.m_xf.R,s=e.points[0].localPoint;var l=e.bodyB.m_xf.position.x+(i.col1.x*s.x+i.col2.x*s.y),c=e.bodyB.m_xf.position.y+(i.col1.y*s.x+i.col2.y*s.y),h=l-a,p=c-f,d=h*h+p*p;if(d>Number.MIN_VALUE*Number.MIN_VALUE){var v=Math.sqrt(d);this.m_normal.x=h/v,this.m_normal.y=p/v}else this.m_normal.x=1,this.m_normal.y=0;this.m_points[0].x=.5*(a+l),this.m_points[0].y=.5*(f+c),this.m_separations[0]=h*this.m_normal.x+p*this.m_normal.y-e.radius;break;case at.e_faceA:i=e.bodyA.m_xf.R,s=e.localPlaneNormal,this.m_normal.x=i.col1.x*s.x+i.col2.x*s.y,this.m_normal.y=i.col1.y*s.x+i.col2.y*s.y,i=e.bodyA.m_xf.R,s=e.localPoint,o=e.bodyA.m_xf.position.x+(i.col1.x*s.x+i.col2.x*s.y),u=e.bodyA.m_xf.position.y+(i.col1.y*s.x+i.col2.y*s.y),i=e.bodyB.m_xf.R;for(t=0;t<e.pointCount;++t)s=e.points[t].localPoint,n=e.bodyB.m_xf.position.x+(i.col1.x*s.x+i.col2.x*s.y),r=e.bodyB.m_xf.position.y+(i.col1.y*s.x+i.col2.y*s.y),this.m_separations[t]=(n-o)*this.m_normal.x+(r-u)*this.m_normal.y-e.radius,this.m_points[t].x=n,this.m_points[t].y=r;break;case at.e_faceB:i=e.bodyB.m_xf.R,s=e.localPlaneNormal,this.m_normal.x=i.col1.x*s.x+i.col2.x*s.y,this.m_normal.y=i.col1.y*s.x+i.col2.y*s.y,i=e.bodyB.m_xf.R,s=e.localPoint,o=e.bodyB.m_xf.position.x+(i.col1.x*s.x+i.col2.x*s.y),u=e.bodyB.m_xf.position.y+(i.col1.y*s.x+i.col2.y*s.y),i=e.bodyA.m_xf.R;for(t=0;t<e.pointCount;++t)s=e.points[t].localPoint,n=e.bodyA.m_xf.position.x+(i.col1.x*s.x+i.col2.x*s.y),r=e.bodyA.m_xf.position.y+(i.col1.y*s.x+i.col2.y*s.y),this.m_separations[t]=(n-o)*this.m_normal.x+(r-u)*this.m_normal.y-e.radius,this.m_points[t].Set(n,r);this.m_normal.x*=-1,this.m_normal.y*=-1}},e.postDefs.push(function(){e.Dynamics.Contacts.b2PositionSolverManifold.circlePointA=new V,e.Dynamics.Contacts.b2PositionSolverManifold.circlePointB=new V})}(),function(){var t=e.Dynamics.b2Body,n=e.Dynamics.b2BodyDef,r=e.Dynamics.b2ContactFilter,i=e.Dynamics.b2ContactImpulse,s=e.Dynamics.b2ContactListener,o=e.Dynamics.b2ContactManager,u=e.Dynamics.b2DebugDraw,a=e.Dynamics.b2DestructionListener,f=e.Dynamics.b2FilterData,l=e.Dynamics.b2Fixture,c=e.Dynamics.b2FixtureDef,h=e.Dynamics.b2Island,p=e.Dynamics.b2TimeStep,d=e.Dynamics.b2World,v=e.Common.Math.b2Mat22,m=e.Common.Math.b2Mat33,g=e.Common.Math.b2Math,y=e.Common.Math.b2Sweep,b=e.Common.Math.b2Transform,w=e.Common.Math.b2Vec2,E=e.Common.Math.b2Vec3,S=e.Common.b2Color,x=e.Common.b2internal,T=e.Common.b2Settings,N=e.Collision.Shapes.b2CircleShape,C=e.Collision.Shapes.b2EdgeChainDef,k=e.Collision.Shapes.b2EdgeShape,L=e.Collision.Shapes.b2MassData,A=e.Collision.Shapes.b2PolygonShape,O=e.Collision.Shapes.b2Shape,M=e.Dynamics.Controllers.b2BuoyancyController,_=e.Dynamics.Controllers.b2ConstantAccelController,D=e.Dynamics.Controllers.b2ConstantForceController,P=e.Dynamics.Controllers.b2Controller,H=e.Dynamics.Controllers.b2ControllerEdge,B=e.Dynamics.Controllers.b2GravityController,j=e.Dynamics.Controllers.b2TensorDampingController;e.inherit(M,e.Dynamics.Controllers.b2Controller),M.prototype.__super=e.Dynamics.Controllers.b2Controller.prototype,M.b2BuoyancyController=function(){e.Dynamics.Controllers.b2Controller.b2Controller.apply(this,arguments),this.normal=new w(0,-1),this.offset=0,this.density=0,this.velocity=new w(0,0),this.linearDrag=2,this.angularDrag=1,this.useDensity=!1,this.useWorldGravity=!0,this.gravity=null},M.prototype.Step=function(e){if(!this.m_bodyList)return;this.useWorldGravity&&(this.gravity=this.GetWorld().GetGravity().Copy());for(var t=this.m_bodyList;t;t=t.nextBody){var n=t.body;if(n.IsAwake()==0)continue;var r=new w,i=new w,s=0,o=0;for(var u=n.GetFixtureList();u;u=u.GetNext()){var a=new w,f=u.GetShape().ComputeSubmergedArea(this.normal,this.offset,n.GetTransform(),a);s+=f,r.x+=f*a.x,r.y+=f*a.y;var l=0;this.useDensity?l=1:l=1,o+=f*l,i.x+=f*a.x*l,i.y+=f*a.y*l}r.x/=s,r.y/=s,i.x/=o,i.y/=o;if(s<Number.MIN_VALUE)continue;var c=this.gravity.GetNegative();c.Multiply(this.density*s),n.ApplyForce(c,i);var h=n.GetLinearVelocityFromWorldPoint(r);h.Subtract(this.velocity),h.Multiply(-this.linearDrag*s),n.ApplyForce(h,r),n.ApplyTorque(-n.GetInertia()/n.GetMass()*s*n.GetAngularVelocity()*this.angularDrag)}},M.prototype.Draw=function(e){var t=1e3,n=new w,r=new w;n.x=this.normal.x*this.offset+this.normal.y*t,n.y=this.normal.y*this.offset-this.normal.x*t,r.x=this.normal.x*this.offset-this.normal.y*t,r.y=this.normal.y*this.offset+this.normal.x*t;var i=new S(0,0,1);e.DrawSegment(n,r,i)},e.inherit(_,e.Dynamics.Controllers.b2Controller),_.prototype.__super=e.Dynamics.Controllers.b2Controller.prototype,_.b2ConstantAccelController=function(){e.Dynamics.Controllers.b2Controller.b2Controller.apply(this,arguments),this.A=new w(0,0)},_.prototype.Step=function(e){var t=new w(this.A.x*e.dt,this.A.y*e.dt);for(var n=this.m_bodyList;n;n=n.nextBody){var r=n.body;if(!r.IsAwake())continue;r.SetLinearVelocity(new w(r.GetLinearVelocity().x+t.x,r.GetLinearVelocity().y+t.y))}},e.inherit(D,e.Dynamics.Controllers.b2Controller),D.prototype.__super=e.Dynamics.Controllers.b2Controller.prototype,D.b2ConstantForceController=function(){e.Dynamics.Controllers.b2Controller.b2Controller.apply(this,arguments),this.F=new w(0,0)},D.prototype.Step=function(e){for(var t=this.m_bodyList;t;t=t.nextBody){var n=t.body;if(!n.IsAwake())continue;n.ApplyForce(this.F,n.GetWorldCenter())}},P.b2Controller=function(){},P.prototype.Step=function(e){},P.prototype.Draw=function(e){},P.prototype.AddBody=function(e){var t=new H;t.controller=this,t.body=e,t.nextBody=this.m_bodyList,t.prevBody=null,this.m_bodyList=t,t.nextBody&&(t.nextBody.prevBody=t),this.m_bodyCount++,t.nextController=e.m_controllerList,t.prevController=null,e.m_controllerList=t,t.nextController&&(t.nextController.prevController=t),e.m_controllerCount++},P.prototype.RemoveBody=function(e){var t=e.m_controllerList;while(t&&t.controller!=this)t=t.nextController;t.prevBody&&(t.prevBody.nextBody=t.nextBody),t.nextBody&&(t.nextBody.prevBody=t.prevBody),t.nextController&&(t.nextController.prevController=t.prevController),t.prevController&&(t.prevController.nextController=t.nextController),this.m_bodyList==t&&(this.m_bodyList=t.nextBody),e.m_controllerList==t&&(e.m_controllerList=t.nextController),e.m_controllerCount--,this.m_bodyCount--},P.prototype.Clear=function(){while(this.m_bodyList)this.RemoveBody(this.m_bodyList.body)},P.prototype.GetNext=function(){return this.m_next},P.prototype.GetWorld=function(){return this.m_world},P.prototype.GetBodyList=function(){return this.m_bodyList},H.b2ControllerEdge=function(){},e.inherit(B,e.Dynamics.Controllers.b2Controller),B.prototype.__super=e.Dynamics.Controllers.b2Controller.prototype,B.b2GravityController=function(){e.Dynamics.Controllers.b2Controller.b2Controller.apply(this,arguments),this.G=1,this.invSqr=!0},B.prototype.Step=function(e){var t=null,n=null,r=null,i=0,s=null,o=null,u=null,a=0,f=0,l=0,c=null;if(this.invSqr)for(t=this.m_bodyList;t;t=t.nextBody){n=t.body,r=n.GetWorldCenter(),i=n.GetMass();for(s=this.m_bodyList;s!=t;s=s.nextBody){o=s.body,u=o.GetWorldCenter(),a=u.x-r.x,f=u.y-r.y,l=a*a+f*f;if(l<Number.MIN_VALUE)continue;c=new w(a,f),c.Multiply(this.G/l/Math.sqrt(l)*i*o.GetMass()),n.IsAwake()&&n.ApplyForce(c,r),c.Multiply(-1),o.IsAwake()&&o.ApplyForce(c,u)}}else for(t=this.m_bodyList;t;t=t.nextBody){n=t.body,r=n.GetWorldCenter(),i=n.GetMass();for(s=this.m_bodyList;s!=t;s=s.nextBody){o=s.body,u=o.GetWorldCenter(),a=u.x-r.x,f=u.y-r.y,l=a*a+f*f;if(l<Number.MIN_VALUE)continue;c=new w(a,f),c.Multiply(this.G/l*i*o.GetMass()),n.IsAwake()&&n.ApplyForce(c,r),c.Multiply(-1),o.IsAwake()&&o.ApplyForce(c,u)}}},e.inherit(j,e.Dynamics.Controllers.b2Controller),j.prototype.__super=e.Dynamics.Controllers.b2Controller.prototype,j.b2TensorDampingController=function(){e.Dynamics.Controllers.b2Controller.b2Controller.apply(this,arguments),this.T=new v,this.maxTimestep=0},j.prototype.SetAxisAligned=function(e,t){e===undefined&&(e=0),t===undefined&&(t=0),this.T.col1.x=-e,this.T.col1.y=0,this.T.col2.x=0,this.T.col2.y=-t,e>0||t>0?this.maxTimestep=1/Math.max(e,t):this.maxTimestep=0},j.prototype.Step=function(e){var t=e.dt;if(t<=Number.MIN_VALUE)return;t>this.maxTimestep&&this.maxTimestep>0&&(t=this.maxTimestep);for(var n=this.m_bodyList;n;n=n.nextBody){var r=n.body;if(!r.IsAwake())continue;var i=r.GetWorldVector(g.MulMV(this.T,r.GetLocalVector(r.GetLinearVelocity())));r.SetLinearVelocity(new w(r.GetLinearVelocity().x+i.x*t,r.GetLinearVelocity().y+i.y*t))}}}(),function(){var t=e.Common.b2Color,n=e.Common.b2internal,r=e.Common.b2Settings,i=e.Common.Math.b2Mat22,s=e.Common.Math.b2Mat33,o=e.Common.Math.b2Math,u=e.Common.Math.b2Sweep,a=e.Common.Math.b2Transform,f=e.Common.Math.b2Vec2,l=e.Common.Math.b2Vec3,c=e.Dynamics.Joints.b2DistanceJoint,h=e.Dynamics.Joints.b2DistanceJointDef,p=e.Dynamics.Joints.b2FrictionJoint,d=e.Dynamics.Joints.b2FrictionJointDef,v=e.Dynamics.Joints.b2GearJoint,m=e.Dynamics.Joints.b2GearJointDef,g=e.Dynamics.Joints.b2Jacobian,y=e.Dynamics.Joints.b2Joint,b=e.Dynamics.Joints.b2JointDef,w=e.Dynamics.Joints.b2JointEdge,E=e.Dynamics.Joints.b2LineJoint,S=e.Dynamics.Joints.b2LineJointDef,x=e.Dynamics.Joints.b2MouseJoint,T=e.Dynamics.Joints.b2MouseJointDef,N=e.Dynamics.Joints.b2PrismaticJoint,C=e.Dynamics.Joints.b2PrismaticJointDef,k=e.Dynamics.Joints.b2PulleyJoint,L=e.Dynamics.Joints.b2PulleyJointDef,A=e.Dynamics.Joints.b2RevoluteJoint,O=e.Dynamics.Joints.b2RevoluteJointDef,M=e.Dynamics.Joints.b2WeldJoint,_=e.Dynamics.Joints.b2WeldJointDef,D=e.Dynamics.b2Body,P=e.Dynamics.b2BodyDef,H=e.Dynamics.b2ContactFilter,B=e.Dynamics.b2ContactImpulse,j=e.Dynamics.b2ContactListener,F=e.Dynamics.b2ContactManager,I=e.Dynamics.b2DebugDraw,q=e.Dynamics.b2DestructionListener,R=e.Dynamics.b2FilterData,U=e.Dynamics.b2Fixture,z=e.Dynamics.b2FixtureDef,W=e.Dynamics.b2Island,X=e.Dynamics.b2TimeStep,V=e.Dynamics.b2World;e.inherit(c,e.Dynamics.Joints.b2Joint),c.prototype.__super=e.Dynamics.Joints.b2Joint.prototype,c.b2DistanceJoint=function(){e.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.m_localAnchor1=new f,this.m_localAnchor2=new f,this.m_u=new f},c.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},c.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},c.prototype.GetReactionForce=function(e){return e===undefined&&(e=0),new f(e*this.m_impulse*this.m_u.x,e*this.m_impulse*this.m_u.y)},c.prototype.GetReactionTorque=function(e){return e===undefined&&(e=0),0},c.prototype.GetLength=function(){return this.m_length},c.prototype.SetLength=function(e){e===undefined&&(e=0),this.m_length=e},c.prototype.GetFrequency=function(){return this.m_frequencyHz},c.prototype.SetFrequency=function(e){e===undefined&&(e=0),this.m_frequencyHz=e},c.prototype.GetDampingRatio=function(){return this.m_dampingRatio},c.prototype.SetDampingRatio=function(e){e===undefined&&(e=0),this.m_dampingRatio=e},c.prototype.b2DistanceJoint=function(e){this.__super.b2Joint.call(this,e);var t,n=0,r=0;this.m_localAnchor1.SetV(e.localAnchorA),this.m_localAnchor2.SetV(e.localAnchorB),this.m_length=e.length,this.m_frequencyHz=e.frequencyHz,this.m_dampingRatio=e.dampingRatio,this.m_impulse=0,this.m_gamma=0,this.m_bias=0},c.prototype.InitVelocityConstraints=function(e){var t,n=0,i=this.m_bodyA,s=this.m_bodyB;t=i.m_xf.R;var o=this.m_localAnchor1.x-i.m_sweep.localCenter.x,u=this.m_localAnchor1.y-i.m_sweep.localCenter.y;n=t.col1.x*o+t.col2.x*u,u=t.col1.y*o+t.col2.y*u,o=n,t=s.m_xf.R;var a=this.m_localAnchor2.x-s.m_sweep.localCenter.x,f=this.m_localAnchor2.y-s.m_sweep.localCenter.y;n=t.col1.x*a+t.col2.x*f,f=t.col1.y*a+t.col2.y*f,a=n,this.m_u.x=s.m_sweep.c.x+a-i.m_sweep.c.x-o,this.m_u.y=s.m_sweep.c.y+f-i.m_sweep.c.y-u;var l=Math.sqrt(this.m_u.x*this.m_u.x+this.m_u.y*this.m_u.y);l>r.b2_linearSlop?this.m_u.Multiply(1/l):this.m_u.SetZero();var c=o*this.m_u.y-u*this.m_u.x,h=a*this.m_u.y-f*this.m_u.x,p=i.m_invMass+i.m_invI*c*c+s.m_invMass+s.m_invI*h*h;this.m_mass=p!=0?1/p:0;if(this.m_frequencyHz>0){var d=l-this.m_length,v=2*Math.PI*this.m_frequencyHz,m=2*this.m_mass*this.m_dampingRatio*v,g=this.m_mass*v*v;this.m_gamma=e.dt*(m+e.dt*g),this.m_gamma=this.m_gamma!=0?1/this.m_gamma:0,this.m_bias=d*e.dt*g*this.m_gamma,this.m_mass=p+this.m_gamma,this.m_mass=this.m_mass!=0?1/this.m_mass:0}if(e.warmStarting){this.m_impulse*=e.dtRatio;var y=this.m_impulse*this.m_u.x,b=this.m_impulse*this.m_u.y;i.m_linearVelocity.x-=i.m_invMass*y,i.m_linearVelocity.y-=i.m_invMass*b,i.m_angularVelocity-=i.m_invI*(o*b-u*y),s.m_linearVelocity.x+=s.m_invMass*y,s.m_linearVelocity.y+=s.m_invMass*b,s.m_angularVelocity+=s.m_invI*(a*b-f*y)}else this.m_impulse=0},c.prototype.SolveVelocityConstraints=function(e){var t,n=this.m_bodyA,r=this.m_bodyB;t=n.m_xf.R;var i=this.m_localAnchor1.x-n.m_sweep.localCenter.x,s=this.m_localAnchor1.y-n.m_sweep.localCenter.y,o=t.col1.x*i+t.col2.x*s;s=t.col1.y*i+t.col2.y*s,i=o,t=r.m_xf.R;var u=this.m_localAnchor2.x-r.m_sweep.localCenter.x,a=this.m_localAnchor2.y-r.m_sweep.localCenter.y;o=t.col1.x*u+t.col2.x*a,a=t.col1.y*u+t.col2.y*a,u=o;var f=n.m_linearVelocity.x+ -n.m_angularVelocity*s,l=n.m_linearVelocity.y+n.m_angularVelocity*i,c=r.m_linearVelocity.x+ -r.m_angularVelocity*a,h=r.m_linearVelocity.y+r.m_angularVelocity*u,p=this.m_u.x*(c-f)+this.m_u.y*(h-l),d=-this.m_mass*(p+this.m_bias+this.m_gamma*this.m_impulse);this.m_impulse+=d;var v=d*this.m_u.x,m=d*this.m_u.y;n.m_linearVelocity.x-=n.m_invMass*v,n.m_linearVelocity.y-=n.m_invMass*m,n.m_angularVelocity-=n.m_invI*(i*m-s*v),r.m_linearVelocity.x+=r.m_invMass*v,r.m_linearVelocity.y+=r.m_invMass*m,r.m_angularVelocity+=r.m_invI*(u*m-a*v)},c.prototype.SolvePositionConstraints=function(e){e===undefined&&(e=0);var t;if(this.m_frequencyHz>0)return!0;var n=this.m_bodyA,i=this.m_bodyB;t=n.m_xf.R;var s=this.m_localAnchor1.x-n.m_sweep.localCenter.x,u=this.m_localAnchor1.y-n.m_sweep.localCenter.y,a=t.col1.x*s+t.col2.x*u;u=t.col1.y*s+t.col2.y*u,s=a,t=i.m_xf.R;var f=this.m_localAnchor2.x-i.m_sweep.localCenter.x,l=this.m_localAnchor2.y-i.m_sweep.localCenter.y;a=t.col1.x*f+t.col2.x*l,l=t.col1.y*f+t.col2.y*l,f=a;var c=i.m_sweep.c.x+f-n.m_sweep.c.x-s,h=i.m_sweep.c.y+l-n.m_sweep.c.y-u,p=Math.sqrt(c*c+h*h);c/=p,h/=p;var d=p-this.m_length;d=o.Clamp(d,-r.b2_maxLinearCorrection,r.b2_maxLinearCorrection);var v=-this.m_mass*d;this.m_u.Set(c,h);var m=v*this.m_u.x,g=v*this.m_u.y;return n.m_sweep.c.x-=n.m_invMass*m,n.m_sweep.c.y-=n.m_invMass*g,n.m_sweep.a-=n.m_invI*(s*g-u*m),i.m_sweep.c.x+=i.m_invMass*m,i.m_sweep.c.y+=i.m_invMass*g,i.m_sweep.a+=i.m_invI*(f*g-l*m),n.SynchronizeTransform(),i.SynchronizeTransform(),o.Abs(d)<r.b2_linearSlop},e.inherit(h,e.Dynamics.Joints.b2JointDef),h.prototype.__super=e.Dynamics.Joints.b2JointDef.prototype,h.b2DistanceJointDef=function(){e.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.localAnchorA=new f,this.localAnchorB=new f},h.prototype.b2DistanceJointDef=function(){this.__super.b2JointDef.call(this),this.type=y.e_distanceJoint,this.length=1,this.frequencyHz=0,this.dampingRatio=0},h.prototype.Initialize=function(e,t,n,r){this.bodyA=e,this.bodyB=t,this.localAnchorA.SetV(this.bodyA.GetLocalPoint(n)),this.localAnchorB.SetV(this.bodyB.GetLocalPoint(r));var i=r.x-n.x,s=r.y-n.y;this.length=Math.sqrt(i*i+s*s),this.frequencyHz=0,this.dampingRatio=0},e.inherit(p,e.Dynamics.Joints.b2Joint),p.prototype.__super=e.Dynamics.Joints.b2Joint.prototype,p.b2FrictionJoint=function(){e.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.m_localAnchorA=new f,this.m_localAnchorB=new f,this.m_linearMass=new i,this.m_linearImpulse=new f},p.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA)},p.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB)},p.prototype.GetReactionForce=function(e){return e===undefined&&(e=0),new f(e*this.m_linearImpulse.x,e*this.m_linearImpulse.y)},p.prototype.GetReactionTorque=function(e){return e===undefined&&(e=0),e*this.m_angularImpulse},p.prototype.SetMaxForce=function(e){e===undefined&&(e=0),this.m_maxForce=e},p.prototype.GetMaxForce=function(){return this.m_maxForce},p.prototype.SetMaxTorque=function(e){e===undefined&&(e=0),this.m_maxTorque=e},p.prototype.GetMaxTorque=function(){return this.m_maxTorque},p.prototype.b2FrictionJoint=function(e){this.__super.b2Joint.call(this,e),this.m_localAnchorA.SetV(e.localAnchorA),this.m_localAnchorB.SetV(e.localAnchorB),this.m_linearMass.SetZero(),this.m_angularMass=0,this.m_linearImpulse.SetZero(),this.m_angularImpulse=0,this.m_maxForce=e.maxForce,this.m_maxTorque=e.maxTorque},p.prototype.InitVelocityConstraints=function(e){var t,n=0,r=this.m_bodyA,s=this.m_bodyB;t=r.m_xf.R;var o=this.m_localAnchorA.x-r.m_sweep.localCenter.x,u=this.m_localAnchorA.y-r.m_sweep.localCenter.y;n=t.col1.x*o+t.col2.x*u,u=t.col1.y*o+t.col2.y*u,o=n,t=s.m_xf.R;var a=this.m_localAnchorB.x-s.m_sweep.localCenter.x,f=this.m_localAnchorB.y-s.m_sweep.localCenter.y;n=t.col1.x*a+t.col2.x*f,f=t.col1.y*a+t.col2.y*f,a=n;var l=r.m_invMass,c=s.m_invMass,h=r.m_invI,p=s.m_invI,d=new i;d.col1.x=l+c,d.col2.x=0,d.col1.y=0,d.col2.y=l+c,d.col1.x+=h*u*u,d.col2.x+=-h*o*u,d.col1.y+=-h*o*u,d.col2.y+=h*o*o,d.col1.x+=p*f*f,d.col2.x+=-p*a*f,d.col1.y+=-p*a*f,d.col2.y+=p*a*a,d.GetInverse(this.m_linearMass),this.m_angularMass=h+p,this.m_angularMass>0&&(this.m_angularMass=1/this.m_angularMass);if(e.warmStarting){this.m_linearImpulse.x*=e.dtRatio,this.m_linearImpulse.y*=e.dtRatio,this.m_angularImpulse*=e.dtRatio;var v=this.m_linearImpulse;r.m_linearVelocity.x-=l*v.x,r.m_linearVelocity.y-=l*v.y,r.m_angularVelocity-=h*(o*v.y-u*v.x+this.m_angularImpulse),s.m_linearVelocity.x+=c*v.x,s.m_linearVelocity.y+=c*v.y,s.m_angularVelocity+=p*(a*v.y-f*v.x+this.m_angularImpulse)}else this.m_linearImpulse.SetZero(),this.m_angularImpulse=0},p.prototype.SolveVelocityConstraints=function(e){var t,n=0,r=this.m_bodyA,i=this.m_bodyB,s=r.m_linearVelocity,u=r.m_angularVelocity,a=i.m_linearVelocity,l=i.m_angularVelocity,c=r.m_invMass,h=i.m_invMass,p=r.m_invI,d=i.m_invI;t=r.m_xf.R;var v=this.m_localAnchorA.x-r.m_sweep.localCenter.x,m=this.m_localAnchorA.y-r.m_sweep.localCenter.y;n=t.col1.x*v+t.col2.x*m,m=t.col1.y*v+t.col2.y*m,v=n,t=i.m_xf.R;var g=this.m_localAnchorB.x-i.m_sweep.localCenter.x,y=this.m_localAnchorB.y-i.m_sweep.localCenter.y;n=t.col1.x*g+t.col2.x*y,y=t.col1.y*g+t.col2.y*y,g=n;var b=0,w=l-u,E=-this.m_angularMass*w,S=this.m_angularImpulse;b=e.dt*this.m_maxTorque,this.m_angularImpulse=o.Clamp(this.m_angularImpulse+E,-b,b),E=this.m_angularImpulse-S,u-=p*E,l+=d*E;var x=a.x-l*y-s.x+u*m,T=a.y+l*g-s.y-u*v,N=o.MulMV(this.m_linearMass,new f(-x,-T)),C=this.m_linearImpulse.Copy();this.m_linearImpulse.Add(N),b=e.dt*this.m_maxForce,this.m_linearImpulse.LengthSquared()>b*b&&(this.m_linearImpulse.Normalize(),this.m_linearImpulse.Multiply(b)),N=o.SubtractVV(this.m_linearImpulse,C),s.x-=c*N.x,s.y-=c*N.y,u-=p*(v*N.y-m*N.x),a.x+=h*N.x,a.y+=h*N.y,l+=d*(g*N.y-y*N.x),r.m_angularVelocity=u,i.m_angularVelocity=l},p.prototype.SolvePositionConstraints=function(e){return e===undefined&&(e=0),!0},e.inherit(d,e.Dynamics.Joints.b2JointDef),d.prototype.__super=e.Dynamics.Joints.b2JointDef.prototype,d.b2FrictionJointDef=function(){e.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.localAnchorA=new f,this.localAnchorB=new f},d.prototype.b2FrictionJointDef=function(){this.__super.b2JointDef.call(this),this.type=y.e_frictionJoint,this.maxForce=0,this.maxTorque=0},d.prototype.Initialize=function(e,t,n){this.bodyA=e,this.bodyB=t,this.localAnchorA.SetV(this.bodyA.GetLocalPoint(n)),this.localAnchorB.SetV(this.bodyB.GetLocalPoint(n))},e.inherit(v,e.Dynamics.Joints.b2Joint),v.prototype.__super=e.Dynamics.Joints.b2Joint.prototype,v.b2GearJoint=function(){e.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.m_groundAnchor1=new f,this.m_groundAnchor2=new f,this.m_localAnchor1=new f,this.m_localAnchor2=new f,this.m_J=new g},v.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},v.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},v.prototype.GetReactionForce=function(e){return e===undefined&&(e=0),new f(e*this.m_impulse*this.m_J.linearB.x,e*this.m_impulse*this.m_J.linearB.y)},v.prototype.GetReactionTorque=function(e){e===undefined&&(e=0);var t=this.m_bodyB.m_xf.R,n=this.m_localAnchor1.x-this.m_bodyB.m_sweep.localCenter.x,r=this.m_localAnchor1.y-this.m_bodyB.m_sweep.localCenter.y,i=t.col1.x*n+t.col2.x*r;r=t.col1.y*n+t.col2.y*r,n=i;var s=this.m_impulse*this.m_J.linearB.x,o=this.m_impulse*this.m_J.linearB.y;return e*(this.m_impulse*this.m_J.angularB-n*o+r*s)},v.prototype.GetRatio=function(){return this.m_ratio},v.prototype.SetRatio=function(e){e===undefined&&(e=0),this.m_ratio=e},v.prototype.b2GearJoint=function(e){this.__super.b2Joint.call(this,e);var t=parseInt(e.joint1.m_type),n=parseInt(e.joint2.m_type);this.m_revolute1=null,this.m_prismatic1=null,this.m_revolute2=null,this.m_prismatic2=null;var r=0,i=0;this.m_ground1=e.joint1.GetBodyA(),this.m_bodyA=e.joint1.GetBodyB(),t==y.e_revoluteJoint?(this.m_revolute1=e.joint1 instanceof A?e.joint1:null,this.m_groundAnchor1.SetV(this.m_revolute1.m_localAnchor1),this.m_localAnchor1.SetV(this.m_revolute1.m_localAnchor2),r=this.m_revolute1.GetJointAngle()):(this.m_prismatic1=e.joint1 instanceof N?e.joint1:null,this.m_groundAnchor1.SetV(this.m_prismatic1.m_localAnchor1),this.m_localAnchor1.SetV(this.m_prismatic1.m_localAnchor2),r=this.m_prismatic1.GetJointTranslation()),this.m_ground2=e.joint2.GetBodyA(),this.m_bodyB=e.joint2.GetBodyB(),n==y.e_revoluteJoint?(this.m_revolute2=e.joint2 instanceof A?e.joint2:null,this.m_groundAnchor2.SetV(this.m_revolute2.m_localAnchor1),this.m_localAnchor2.SetV(this.m_revolute2.m_localAnchor2),i=this.m_revolute2.GetJointAngle()):(this.m_prismatic2=e.joint2 instanceof N?e.joint2:null,this.m_groundAnchor2.SetV(this.m_prismatic2.m_localAnchor1),this.m_localAnchor2.SetV(this.m_prismatic2.m_localAnchor2),i=this.m_prismatic2.GetJointTranslation()),this.m_ratio=e.ratio,this.m_constant=r+this.m_ratio*i,this.m_impulse=0},v.prototype.InitVelocityConstraints=function(e){var t=this.m_ground1,n=this.m_ground2,r=this.m_bodyA,i=this.m_bodyB,s=0,o=0,u=0,a=0,f,l,c=0,h=0,p=0;this.m_J.SetZero(),this.m_revolute1?(this.m_J.angularA=-1,p+=r.m_invI):(f=t.m_xf.R,l=this.m_prismatic1.m_localXAxis1,s=f.col1.x*l.x+f.col2.x*l.y,o=f.col1.y*l.x+f.col2.y*l.y,f=r.m_xf.R,u=this.m_localAnchor1.x-r.m_sweep.localCenter.x,a=this.m_localAnchor1.y-r.m_sweep.localCenter.y,h=f.col1.x*u+f.col2.x*a,a=f.col1.y*u+f.col2.y*a,u=h,c=u*o-a*s,this.m_J.linearA.Set(-s,-o),this.m_J.angularA=-c,p+=r.m_invMass+r.m_invI*c*c),this.m_revolute2?(this.m_J.angularB=-this.m_ratio,p+=this.m_ratio*this.m_ratio*i.m_invI):(f=n.m_xf.R,l=this.m_prismatic2.m_localXAxis1,s=f.col1.x*l.x+f.col2.x*l.y,o=f.col1.y*l.x+f.col2.y*l.y,f=i.m_xf.R,u=this.m_localAnchor2.x-i.m_sweep.localCenter.x,a=this.m_localAnchor2.y-i.m_sweep.localCenter.y,h=f.col1.x*u+f.col2.x*a,a=f.col1.y*u+f.col2.y*a,u=h,c=u*o-a*s,this.m_J.linearB.Set(-this.m_ratio*s,-this.m_ratio*o),this.m_J.angularB=-this.m_ratio*c,p+=this.m_ratio*this.m_ratio*(i.m_invMass+i.m_invI*c*c)),this.m_mass=p>0?1/p:0,e.warmStarting?(r.m_linearVelocity.x+=r.m_invMass*this.m_impulse*this.m_J.linearA.x,r.m_linearVelocity.y+=r.m_invMass*this.m_impulse*this.m_J.linearA.y,r.m_angularVelocity+=r.m_invI*this.m_impulse*this.m_J.angularA,i.m_linearVelocity.x+=i.m_invMass*this.m_impulse*this.m_J.linearB.x,i.m_linearVelocity.y+=i.m_invMass*this.m_impulse*this.m_J.linearB.y,i.m_angularVelocity+=i.m_invI*this.m_impulse*this.m_J.angularB):this.m_impulse=0},v.prototype.SolveVelocityConstraints=function(e){var t=this.m_bodyA,n=this.m_bodyB,r=this.m_J.Compute(t.m_linearVelocity,t.m_angularVelocity,n.m_linearVelocity,n.m_angularVelocity),i=-this.m_mass*r;this.m_impulse+=i,t.m_linearVelocity.x+=t.m_invMass*i*this.m_J.linearA.x,t.m_linearVelocity.y+=t.m_invMass*i*this.m_J.linearA.y,t.m_angularVelocity+=t.m_invI*i*this.m_J.angularA,n.m_linearVelocity.x+=n.m_invMass*i*this.m_J.linearB.x,n.m_linearVelocity.y+=n.m_invMass*i*this.m_J.linearB.y,n.m_angularVelocity+=n.m_invI*i*this.m_J.angularB},v.prototype.SolvePositionConstraints=function(e){e===undefined&&(e=0);var t=0,n=this.m_bodyA,i=this.m_bodyB,s=0,o=0;this.m_revolute1?s=this.m_revolute1.GetJointAngle():s=this.m_prismatic1.GetJointTranslation(),this.m_revolute2?o=this.m_revolute2.GetJointAngle():o=this.m_prismatic2.GetJointTranslation();var u=this.m_constant-(s+this.m_ratio*o),a=-this.m_mass*u;return n.m_sweep.c.x+=n.m_invMass*a*this.m_J.linearA.x,n.m_sweep.c.y+=n.m_invMass*a*this.m_J.linearA.y,n.m_sweep.a+=n.m_invI*a*this.m_J.angularA,i.m_sweep.c.x+=i.m_invMass*a*this.m_J.linearB.x,i.m_sweep.c.y+=i.m_invMass*a*this.m_J.linearB.y,i.m_sweep.a+=i.m_invI*a*this.m_J.angularB,n.SynchronizeTransform(),i.SynchronizeTransform(),t<r.b2_linearSlop},e.inherit(m,e.Dynamics.Joints.b2JointDef),m.prototype.__super=e.Dynamics.Joints.b2JointDef.prototype,m.b2GearJointDef=function(){e.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments)},m.prototype.b2GearJointDef=function(){this.__super.b2JointDef.call(this),this.type=y.e_gearJoint,this.joint1=null,this.joint2=null,this.ratio=1},g.b2Jacobian=function(){this.linearA=new f,this.linearB=new f},g.prototype.SetZero=function(){this.linearA.SetZero(),this.angularA=0,this.linearB.SetZero(),this.angularB=0},g.prototype.Set=function(e,t,n,r){t===undefined&&(t=0),r===undefined&&(r=0),this.linearA.SetV(e),this.angularA=t,this.linearB.SetV(n),this.angularB=r},g.prototype.Compute=function(e,t,n,r){return t===undefined&&(t=0),r===undefined&&(r=0),this.linearA.x*e.x+this.linearA.y*e.y+this.angularA*t+(this.linearB.x*n.x+this.linearB.y*n.y)+this.angularB*r},y.b2Joint=function(){this.m_edgeA=new w,this.m_edgeB=new w,this.m_localCenterA=new f,this.m_localCenterB=new f},y.prototype.GetType=function(){return this.m_type},y.prototype.GetAnchorA=function(){return null},y.prototype.GetAnchorB=function(){return null},y.prototype.GetReactionForce=function(e){return e===undefined&&(e=0),null},y.prototype.GetReactionTorque=function(e){return e===undefined&&(e=0),0},y.prototype.GetBodyA=function(){return this.m_bodyA},y.prototype.GetBodyB=function(){return this.m_bodyB},y.prototype.GetNext=function(){return this.m_next},y.prototype.GetUserData=function(){return this.m_userData},y.prototype.SetUserData=function(e){this.m_userData=e},y.prototype.IsActive=function(){return this.m_bodyA.IsActive()&&this.m_bodyB.IsActive()},y.Create=function(e,t){var n=null;switch(e.type){case y.e_distanceJoint:n=new c(e instanceof h?e:null);break;case y.e_mouseJoint:n=new x(e instanceof T?e:null);break;case y.e_prismaticJoint:n=new N(e instanceof C?e:null);break;case y.e_revoluteJoint:n=new A(e instanceof O?e:null);break;case y.e_pulleyJoint:n=new k(e instanceof L?e:null);break;case y.e_gearJoint:n=new v(e instanceof m?e:null);break;case y.e_lineJoint:n=new E(e instanceof S?e:null);break;case y.e_weldJoint:n=new M(e instanceof _?e:null);break;case y.e_frictionJoint:n=new p(e instanceof d?e:null);break;default:}return n},y.Destroy=function(e,t){},y.prototype.b2Joint=function(e){r.b2Assert(e.bodyA!=e.bodyB),this.m_type=e.type,this.m_prev=null,this.m_next=null,this.m_bodyA=e.bodyA,this.m_bodyB=e.bodyB,this.m_collideConnected=e.collideConnected,this.m_islandFlag=!1,this.m_userData=e.userData},y.prototype.InitVelocityConstraints=function(e){},y.prototype.SolveVelocityConstraints=function(e){},y.prototype.FinalizeVelocityConstraints=function(){},y.prototype.SolvePositionConstraints=function(e){return e===undefined&&(e=0),!1},e.postDefs.push(function(){e.Dynamics.Joints.b2Joint.e_unknownJoint=0,e.Dynamics.Joints.b2Joint.e_revoluteJoint=1,e.Dynamics.Joints.b2Joint.e_prismaticJoint=2,e.Dynamics.Joints.b2Joint.e_distanceJoint=3,e.Dynamics.Joints.b2Joint.e_pulleyJoint=4,e.Dynamics.Joints.b2Joint.e_mouseJoint=5,e.Dynamics.Joints.b2Joint.e_gearJoint=6,e.Dynamics.Joints.b2Joint.e_lineJoint=7,e.Dynamics.Joints.b2Joint.e_weldJoint=8,e.Dynamics.Joints.b2Joint.e_frictionJoint=9,e.Dynamics.Joints.b2Joint.e_inactiveLimit=0,e.Dynamics.Joints.b2Joint.e_atLowerLimit=1,e.Dynamics.Joints.b2Joint.e_atUpperLimit=2,e.Dynamics.Joints.b2Joint.e_equalLimits=3}),b.b2JointDef=function(){},b.prototype.b2JointDef=function(){this.type=y.e_unknownJoint,this.userData=null,this.bodyA=null,this.bodyB=null,this.collideConnected=!1},w.b2JointEdge=function(){},e.inherit(E,e.Dynamics.Joints.b2Joint),E.prototype.__super=e.Dynamics.Joints.b2Joint.prototype,E.b2LineJoint=function(){e.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.m_localAnchor1=new f,this.m_localAnchor2=new f,this.m_localXAxis1=new f,this.m_localYAxis1=new f,this.m_axis=new f,this.m_perp=new f,this.m_K=new i,this.m_impulse=new f},E.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},E.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},E.prototype.GetReactionForce=function(e){return e===undefined&&(e=0),new f(e*(this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.y)*this.m_axis.x),e*(this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.y)*this.m_axis.y))},E.prototype.GetReactionTorque=function(e){return e===undefined&&(e=0),e*this.m_impulse.y},E.prototype.GetJointTranslation=function(){var e=this.m_bodyA,t=this.m_bodyB,n,r=e.GetWorldPoint(this.m_localAnchor1),i=t.GetWorldPoint(this.m_localAnchor2),s=i.x-r.x,o=i.y-r.y,u=e.GetWorldVector(this.m_localXAxis1),a=u.x*s+u.y*o;return a},E.prototype.GetJointSpeed=function(){var e=this.m_bodyA,t=this.m_bodyB,n;n=e.m_xf.R;var r=this.m_localAnchor1.x-e.m_sweep.localCenter.x,i=this.m_localAnchor1.y-e.m_sweep.localCenter.y,s=n.col1.x*r+n.col2.x*i;i=n.col1.y*r+n.col2.y*i,r=s,n=t.m_xf.R;var o=this.m_localAnchor2.x-t.m_sweep.localCenter.x,u=this.m_localAnchor2.y-t.m_sweep.localCenter.y;s=n.col1.x*o+n.col2.x*u,u=n.col1.y*o+n.col2.y*u,o=s;var a=e.m_sweep.c.x+r,f=e.m_sweep.c.y+i,l=t.m_sweep.c.x+o,c=t.m_sweep.c.y+u,h=l-a,p=c-f,d=e.GetWorldVector(this.m_localXAxis1),v=e.m_linearVelocity,m=t.m_linearVelocity,g=e.m_angularVelocity,y=t.m_angularVelocity,b=h*-g*d.y+p*g*d.x+(d.x*(m.x+ -y*u-v.x- -g*i)+d.y*(m.y+y*o-v.y-g*r));return b},E.prototype.IsLimitEnabled=function(){return this.m_enableLimit},E.prototype.EnableLimit=function(e){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableLimit=e},E.prototype.GetLowerLimit=function(){return this.m_lowerTranslation},E.prototype.GetUpperLimit=function(){return this.m_upperTranslation},E.prototype.SetLimits=function(e,t){e===undefined&&(e=0),t===undefined&&(t=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_lowerTranslation=e,this.m_upperTranslation=t},E.prototype.IsMotorEnabled=function(){return this.m_enableMotor},E.prototype.EnableMotor=function(e){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor=e},E.prototype.SetMotorSpeed=function(e){e===undefined&&(e=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=e},E.prototype.GetMotorSpeed=function(){return this.m_motorSpeed},E.prototype.SetMaxMotorForce=function(e){e===undefined&&(e=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_maxMotorForce=e},E.prototype.GetMaxMotorForce=function(){return this.m_maxMotorForce},E.prototype.GetMotorForce=function(){return this.m_motorImpulse},E.prototype.b2LineJoint=function(e){this.__super.b2Joint.call(this,e);var t,n=0,r=0;this.m_localAnchor1.SetV(e.localAnchorA),this.m_localAnchor2.SetV(e.localAnchorB),this.m_localXAxis1.SetV(e.localAxisA),this.m_localYAxis1.x=-this.m_localXAxis1.y,this.m_localYAxis1.y=this.m_localXAxis1.x,this.m_impulse.SetZero(),this.m_motorMass=0,this.m_motorImpulse=0,this.m_lowerTranslation=e.lowerTranslation,this.m_upperTranslation=e.upperTranslation,this.m_maxMotorForce=e.maxMotorForce,this.m_motorSpeed=e.motorSpeed,this.m_enableLimit=e.enableLimit,this.m_enableMotor=e.enableMotor,this.m_limitState=y.e_inactiveLimit,this.m_axis.SetZero(),this.m_perp.SetZero()},E.prototype.InitVelocityConstraints=function(e){var t=this.m_bodyA,n=this.m_bodyB,i,s=0;this.m_localCenterA.SetV(t.GetLocalCenter()),this.m_localCenterB.SetV(n.GetLocalCenter());var u=t.GetTransform(),a=n.GetTransform();i=t.m_xf.R;var f=this.m_localAnchor1.x-this.m_localCenterA.x,l=this.m_localAnchor1.y-this.m_localCenterA.y;s=i.col1.x*f+i.col2.x*l,l=i.col1.y*f+i.col2.y*l,f=s,i=n.m_xf.R;var c=this.m_localAnchor2.x-this.m_localCenterB.x,h=this.m_localAnchor2.y-this.m_localCenterB.y;s=i.col1.x*c+i.col2.x*h,h=i.col1.y*c+i.col2.y*h,c=s;var p=n.m_sweep.c.x+c-t.m_sweep.c.x-f,d=n.m_sweep.c.y+h-t.m_sweep.c.y-l;this.m_invMassA=t.m_invMass,this.m_invMassB=n.m_invMass,this.m_invIA=t.m_invI,this.m_invIB=n.m_invI,this.m_axis.SetV(o.MulMV(u.R,this.m_localXAxis1)),this.m_a1=(p+f)*this.m_axis.y-(d+l)*this.m_axis.x,this.m_a2=c*this.m_axis.y-h*this.m_axis.x,this.m_motorMass=this.m_invMassA+this.m_invMassB+this.m_invIA*this.m_a1*this.m_a1+this.m_invIB*this.m_a2*this.m_a2,this.m_motorMass=this.m_motorMass>Number.MIN_VALUE?1/this.m_motorMass:0,this.m_perp.SetV(o.MulMV(u.R,this.m_localYAxis1)),this.m_s1=(p+f)*this.m_perp.y-(d+l)*this.m_perp.x,this.m_s2=c*this.m_perp.y-h*this.m_perp.x;var v=this.m_invMassA,m=this.m_invMassB,g=this.m_invIA,b=this.m_invIB;this.m_K.col1.x=v+m+g*this.m_s1*this.m_s1+b*this.m_s2*this.m_s2,this.m_K.col1.y=g*this.m_s1*this.m_a1+b*this.m_s2*this.m_a2,this.m_K.col2.x=this.m_K.col1.y,this.m_K.col2.y=v+m+g*this.m_a1*this.m_a1+b*this.m_a2*this.m_a2;if(this.m_enableLimit){var w=this.m_axis.x*p+this.m_axis.y*d;o.Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*r.b2_linearSlop?this.m_limitState=y.e_equalLimits:w<=this.m_lowerTranslation?this.m_limitState!=y.e_atLowerLimit&&(this.m_limitState=y.e_atLowerLimit,this.m_impulse.y=0):w>=this.m_upperTranslation?this.m_limitState!=y.e_atUpperLimit&&(this.m_limitState=y.e_atUpperLimit,this.m_impulse.y=0):(this.m_limitState=y.e_inactiveLimit,this.m_impulse.y=0)}else this.m_limitState=y.e_inactiveLimit;this.m_enableMotor==0&&(this.m_motorImpulse=0);if(e.warmStarting){this.m_impulse.x*=e.dtRatio,this.m_impulse.y*=e.dtRatio,this.m_motorImpulse*=e.dtRatio;var E=this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.y)*this.m_axis.x,S=this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.y)*this.m_axis.y,x=this.m_impulse.x*this.m_s1+(this.m_motorImpulse+this.m_impulse.y)*this.m_a1,T=this.m_impulse.x*this.m_s2+(this.m_motorImpulse+this.m_impulse.y)*this.m_a2;t.m_linearVelocity.x-=this.m_invMassA*E,t.m_linearVelocity.y-=this.m_invMassA*S,t.m_angularVelocity-=this.m_invIA*x,n.m_linearVelocity.x+=this.m_invMassB*E,n.m_linearVelocity.y+=this.m_invMassB*S,n.m_angularVelocity+=this.m_invIB*T}else this.m_impulse.SetZero(),this.m_motorImpulse=0},E.prototype.SolveVelocityConstraints=function(e){var t=this.m_bodyA,n=this.m_bodyB,r=t.m_linearVelocity,i=t.m_angularVelocity,s=n.m_linearVelocity,u=n.m_angularVelocity,a=0,l=0,c=0,h=0;if(this.m_enableMotor&&this.m_limitState!=y.e_equalLimits){var p=this.m_axis.x*(s.x-r.x)+this.m_axis.y*(s.y-r.y)+this.m_a2*u-this.m_a1*i,d=this.m_motorMass*(this.m_motorSpeed-p),v=this.m_motorImpulse,m=e.dt*this.m_maxMotorForce;this.m_motorImpulse=o.Clamp(this.m_motorImpulse+d,-m,m),d=this.m_motorImpulse-v,a=d*this.m_axis.x,l=d*this.m_axis.y,c=d*this.m_a1,h=d*this.m_a2,r.x-=this.m_invMassA*a,r.y-=this.m_invMassA*l,i-=this.m_invIA*c,s.x+=this.m_invMassB*a,s.y+=this.m_invMassB*l,u+=this.m_invIB*h}var g=this.m_perp.x*(s.x-r.x)+this.m_perp.y*(s.y-r.y)+this.m_s2*u-this.m_s1*i;if(this.m_enableLimit&&this.m_limitState!=y.e_inactiveLimit){var b=this.m_axis.x*(s.x-r.x)+this.m_axis.y*(s.y-r.y)+this.m_a2*u-this.m_a1*i,w=this.m_impulse.Copy(),E=this.m_K.Solve(new f,-g,-b);this.m_impulse.Add(E),this.m_limitState==y.e_atLowerLimit?this.m_impulse.y=o.Max(this.m_impulse.y,0):this.m_limitState==y.e_atUpperLimit&&(this.m_impulse.y=o.Min(this.m_impulse.y,0));var S=-g-(this.m_impulse.y-w.y)*this.m_K.col2.x,x=0;this.m_K.col1.x!=0?x=S/this.m_K.col1.x+w.x:x=w.x,this.m_impulse.x=x,E.x=this.m_impulse.x-w.x,E.y=this.m_impulse.y-w.y,a=E.x*this.m_perp.x+E.y*this.m_axis.x,l=E.x*this.m_perp.y+E.y*this.m_axis.y,c=E.x*this.m_s1+E.y*this.m_a1,h=E.x*this.m_s2+E.y*this.m_a2,r.x-=this.m_invMassA*a,r.y-=this.m_invMassA*l,i-=this.m_invIA*c,s.x+=this.m_invMassB*a,s.y+=this.m_invMassB*l,u+=this.m_invIB*h}else{var T=0;this.m_K.col1.x!=0?T=-g/this.m_K.col1.x:T=0,this.m_impulse.x+=T,a=T*this.m_perp.x,l=T*this.m_perp.y,c=T*this.m_s1,h=T*this.m_s2,r.x-=this.m_invMassA*a,r.y-=this.m_invMassA*l,i-=this.m_invIA*c,s.x+=this.m_invMassB*a,s.y+=this.m_invMassB*l,u+=this.m_invIB*h}t.m_linearVelocity.SetV(r),t.m_angularVelocity=i,n.m_linearVelocity.SetV(s),n.m_angularVelocity=u},E.prototype.SolvePositionConstraints=function(e){e===undefined&&(e=0);var t=0,n=0,s=this.m_bodyA,u=this.m_bodyB,a=s.m_sweep.c,l=s.m_sweep.a,c=u.m_sweep.c,h=u.m_sweep.a,p,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=!1,S=0,x=i.FromAngle(l),T=i.FromAngle(h);p=x;var N=this.m_localAnchor1.x-this.m_localCenterA.x,C=this.m_localAnchor1.y-this.m_localCenterA.y;d=p.col1.x*N+p.col2.x*C,C=p.col1.y*N+p.col2.y*C,N=d,p=T;var k=this.m_localAnchor2.x-this.m_localCenterB.x,L=this.m_localAnchor2.y-this.m_localCenterB.y;d=p.col1.x*k+p.col2.x*L,L=p.col1.y*k+p.col2.y*L,k=d;var A=c.x+k-a.x-N,O=c.y+L-a.y-C;if(this.m_enableLimit){this.m_axis=o.MulMV(x,this.m_localXAxis1),this.m_a1=(A+N)*this.m_axis.y-(O+C)*this.m_axis.x,this.m_a2=k*this.m_axis.y-L*this.m_axis.x;var M=this.m_axis.x*A+this.m_axis.y*O;o.Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*r.b2_linearSlop?(S=o.Clamp(M,-r.b2_maxLinearCorrection,r.b2_maxLinearCorrection),b=o.Abs(M),E=!0):M<=this.m_lowerTranslation?(S=o.Clamp(M-this.m_lowerTranslation+r.b2_linearSlop,-r.b2_maxLinearCorrection,0),b=this.m_lowerTranslation-M,E=!0):M>=this.m_upperTranslation&&(S=o.Clamp(M-this.m_upperTranslation+r.b2_linearSlop,0,r.b2_maxLinearCorrection),b=M-this.m_upperTranslation,E=!0)}this.m_perp=o.MulMV(x,this.m_localYAxis1),this.m_s1=(A+N)*this.m_perp.y-(O+C)*this.m_perp.x,this.m_s2=k*this.m_perp.y-L*this.m_perp.x;var _=new f,D=this.m_perp.x*A+this.m_perp.y*O;b=o.Max(b,o.Abs(D)),w=0;if(E)v=this.m_invMassA,m=this.m_invMassB,g=this.m_invIA,y=this.m_invIB,this.m_K.col1.x=v+m+g*this.m_s1*this.m_s1+y*this.m_s2*this.m_s2,this.m_K.col1.y=g*this.m_s1*this.m_a1+y*this.m_s2*this.m_a2,this.m_K.col2.x=this.m_K.col1.y,this.m_K.col2.y=v+m+g*this.m_a1*this.m_a1+y*this.m_a2*this.m_a2,this.m_K.Solve(_,-D,-S);else{v=this.m_invMassA,m=this.m_invMassB,g=this.m_invIA,y=this.m_invIB;var P=v+m+g*this.m_s1*this.m_s1+y*this.m_s2*this.m_s2,H=0;P!=0?H=-D/P:H=0,_.x=H,_.y=0}var B=_.x*this.m_perp.x+_.y*this.m_axis.x,j=_.x*this.m_perp.y+_.y*this.m_axis.y,F=_.x*this.m_s1+_.y*this.m_a1,I=_.x*this.m_s2+_.y*this.m_a2;return a.x-=this.m_invMassA*B,a.y-=this.m_invMassA*j,l-=this.m_invIA*F,c.x+=this.m_invMassB*B,c.y+=this.m_invMassB*j,h+=this.m_invIB*I,s.m_sweep.a=l,u.m_sweep.a=h,s.SynchronizeTransform(),u.SynchronizeTransform(),b<=r.b2_linearSlop&&w<=r.b2_angularSlop},e.inherit(S,e.Dynamics.Joints.b2JointDef),S.prototype.__super=e.Dynamics.Joints.b2JointDef.prototype,S.b2LineJointDef=function(){e.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.localAnchorA=new f,this.localAnchorB=new f,this.localAxisA=new f},S.prototype.b2LineJointDef=function(){this.__super.b2JointDef.call(this),this.type=y.e_lineJoint,this.localAxisA.Set(1,0),this.enableLimit=!1,this.lowerTranslation=0,this.upperTranslation=0,this.enableMotor=!1,this.maxMotorForce=0,this.motorSpeed=0},S.prototype.Initialize=function(e,t,n,r){this.bodyA=e,this.bodyB=t,this.localAnchorA=this.bodyA.GetLocalPoint(n),this.localAnchorB=this.bodyB.GetLocalPoint(n),this.localAxisA=this.bodyA.GetLocalVector(r)},e.inherit(x,e.Dynamics.Joints.b2Joint),x.prototype.__super=e.Dynamics.Joints.b2Joint.prototype,x.b2MouseJoint=function(){e.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.K=new i,this.K1=new i,this.K2=new i,this.m_localAnchor=new f,this.m_target=new f,this.m_impulse=new f,this.m_mass=new i,this.m_C=new f},x.prototype.GetAnchorA=function(){return this.m_target},x.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor)},x.prototype.GetReactionForce=function(e){return e===undefined&&(e=0),new f(e*this.m_impulse.x,e*this.m_impulse.y)},x.prototype.GetReactionTorque=function(e){return e===undefined&&(e=0),0},x.prototype.GetTarget=function(){return this.m_target},x.prototype.SetTarget=function(e){this.m_bodyB.IsAwake()==0&&this.m_bodyB.SetAwake(!0),this.m_target=e},x.prototype.GetMaxForce=function(){return this.m_maxForce},x.prototype.SetMaxForce=function(e){e===undefined&&(e=0),this.m_maxForce=e},x.prototype.GetFrequency=function(){return this.m_frequencyHz},x.prototype.SetFrequency=function(e){e===undefined&&(e=0),this.m_frequencyHz=e},x.prototype.GetDampingRatio=function(){return this.m_dampingRatio},x.prototype.SetDampingRatio=function(e){e===undefined&&(e=0),this.m_dampingRatio=e},x.prototype.b2MouseJoint=function(e){this.__super.b2Joint.call(this,e),this.m_target.SetV(e.target);var t=this.m_target.x-this.m_bodyB.m_xf.position.x,n=this.m_target.y-this.m_bodyB.m_xf.position.y,r=this.m_bodyB.m_xf.R;this.m_localAnchor.x=t*r.col1.x+n*r.col1.y,this.m_localAnchor.y=t*r.col2.x+n*r.col2.y,this.m_maxForce=e.maxForce,this.m_impulse.SetZero(),this.m_frequencyHz=e.frequencyHz,this.m_dampingRatio=e.dampingRatio,this.m_beta=0,this.m_gamma=0},x.prototype.InitVelocityConstraints=function(e){var t=this.m_bodyB,n=t.GetMass(),r=2*Math.PI*this.m_frequencyHz,i=2*n*this.m_dampingRatio*r,s=n*r*r;this.m_gamma=e.dt*(i+e.dt*s),this.m_gamma=this.m_gamma!=0?1/this.m_gamma:0,this.m_beta=e.dt*s*this.m_gamma;var o;o=t.m_xf.R;var u=this.m_localAnchor.x-t.m_sweep.localCenter.x,a=this.m_localAnchor.y-t.m_sweep.localCenter.y,f=o.col1.x*u+o.col2.x*a;a=o.col1.y*u+o.col2.y*a,u=f;var l=t.m_invMass,c=t.m_invI;this.K1.col1.x=l,this.K1.col2.x=0,this.K1.col1.y=0,this.K1.col2.y=l,this.K2.col1.x=c*a*a,this.K2.col2.x=-c*u*a,this.K2.col1.y=-c*u*a,this.K2.col2.y=c*u*u,this.K.SetM(this.K1),this.K.AddM(this.K2),this.K.col1.x+=this.m_gamma,this.K.col2.y+=this.m_gamma,this.K.GetInverse(this.m_mass),this.m_C.x=t.m_sweep.c.x+u-this.m_target.x,this.m_C.y=t.m_sweep.c.y+a-this.m_target.y,t.m_angularVelocity*=.98,this.m_impulse.x*=e.dtRatio,this.m_impulse.y*=e.dtRatio,t.m_linearVelocity.x+=l*this.m_impulse.x,t.m_linearVelocity.y+=l*this.m_impulse.y,t.m_angularVelocity+=c*(u*this.m_impulse.y-a*this.m_impulse.x)},x.prototype.SolveVelocityConstraints=function(e){var t=this.m_bodyB,n,r=0,i=0;n=t.m_xf.R;var s=this.m_localAnchor.x-t.m_sweep.localCenter.x,o=this.m_localAnchor.y-t.m_sweep.localCenter.y;r=n.col1.x*s+n.col2.x*o,o=n.col1.y*s+n.col2.y*o,s=r;var u=t.m_linearVelocity.x+ -t.m_angularVelocity*o,a=t.m_linearVelocity.y+t.m_angularVelocity*s;n=this.m_mass,r=u+this.m_beta*this.m_C.x+this.m_gamma*this.m_impulse.x,i=a+this.m_beta*this.m_C.y+this.m_gamma*this.m_impulse.y;var f=-(n.col1.x*r+n.col2.x*i),l=-(n.col1.y*r+n.col2.y*i),c=this.m_impulse.x,h=this.m_impulse.y;this.m_impulse.x+=f,this.m_impulse.y+=l;var p=e.dt*this.m_maxForce;this.m_impulse.LengthSquared()>p*p&&this.m_impulse.Multiply(p/this.m_impulse.Length()),f=this.m_impulse.x-c,l=this.m_impulse.y-h,t.m_linearVelocity.x+=t.m_invMass*f,t.m_linearVelocity.y+=t.m_invMass*l,t.m_angularVelocity+=t.m_invI*(s*l-o*f)},x.prototype.SolvePositionConstraints=function(e){return e===undefined&&(e=0),!0},e.inherit(T,e.Dynamics.Joints.b2JointDef),T.prototype.__super=e.Dynamics.Joints.b2JointDef.prototype,T.b2MouseJointDef=function(){e.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.target=new f},T.prototype.b2MouseJointDef=function(){this.__super.b2JointDef.call(this),this.type=y.e_mouseJoint,this.maxForce=0,this.frequencyHz=5,this.dampingRatio=.7},e.inherit(N,e.Dynamics.Joints.b2Joint),N.prototype.__super=e.Dynamics.Joints.b2Joint.prototype,N.b2PrismaticJoint=function(){e.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.m_localAnchor1=new f,this.m_localAnchor2=new f,this.m_localXAxis1=new f,this.m_localYAxis1=new f,this.m_axis=new f,this.m_perp=new f,this.m_K=new s,this.m_impulse=new l},N.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},N.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},N.prototype.GetReactionForce=function(e){return e===undefined&&(e=0),new f(e*(this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.x),e*(this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.y))},N.prototype.GetReactionTorque=function(e){return e===undefined&&(e=0),e*this.m_impulse.y},N.prototype.GetJointTranslation=function(){var e=this.m_bodyA,t=this.m_bodyB,n,r=e.GetWorldPoint(this.m_localAnchor1),i=t.GetWorldPoint(this.m_localAnchor2),s=i.x-r.x,o=i.y-r.y,u=e.GetWorldVector(this.m_localXAxis1),a=u.x*s+u.y*o;return a},N.prototype.GetJointSpeed=function(){var e=this.m_bodyA,t=this.m_bodyB,n;n=e.m_xf.R;var r=this.m_localAnchor1.x-e.m_sweep.localCenter.x,i=this.m_localAnchor1.y-e.m_sweep.localCenter.y,s=n.col1.x*r+n.col2.x*i;i=n.col1.y*r+n.col2.y*i,r=s,n=t.m_xf.R;var o=this.m_localAnchor2.x-t.m_sweep.localCenter.x,u=this.m_localAnchor2.y-t.m_sweep.localCenter.y;s=n.col1.x*o+n.col2.x*u,u=n.col1.y*o+n.col2.y*u,o=s;var a=e.m_sweep.c.x+r,f=e.m_sweep.c.y+i,l=t.m_sweep.c.x+o,c=t.m_sweep.c.y+u,h=l-a,p=c-f,d=e.GetWorldVector(this.m_localXAxis1),v=e.m_linearVelocity,m=t.m_linearVelocity,g=e.m_angularVelocity,y=t.m_angularVelocity,b=h*-g*d.y+p*g*d.x+(d.x*(m.x+ -y*u-v.x- -g*i)+d.y*(m.y+y*o-v.y-g*r));return b},N.prototype.IsLimitEnabled=function(){return this.m_enableLimit},N.prototype.EnableLimit=function(e){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableLimit=e},N.prototype.GetLowerLimit=function(){return this.m_lowerTranslation},N.prototype.GetUpperLimit=function(){return this.m_upperTranslation},N.prototype.SetLimits=function(e,t){e===undefined&&(e=0),t===undefined&&(t=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_lowerTranslation=e,this.m_upperTranslation=t},N.prototype.IsMotorEnabled=function(){return this.m_enableMotor},N.prototype.EnableMotor=function(e){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor=e},N.prototype.SetMotorSpeed=function(e){e===undefined&&(e=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=e},N.prototype.GetMotorSpeed=function(){return this.m_motorSpeed},N.prototype.SetMaxMotorForce=function(e){e===undefined&&(e=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_maxMotorForce=e},N.prototype.GetMotorForce=function(){return this.m_motorImpulse},N.prototype.b2PrismaticJoint=function(e){this.__super.b2Joint.call(this,e);var t,n=0,r=0;this.m_localAnchor1.SetV(e.localAnchorA),this.m_localAnchor2.SetV(e.localAnchorB),this.m_localXAxis1.SetV(e.localAxisA),this.m_localYAxis1.x=-this.m_localXAxis1.y,this.m_localYAxis1.y=this.m_localXAxis1.x,this.m_refAngle=e.referenceAngle,this.m_impulse.SetZero(),this.m_motorMass=0,this.m_motorImpulse=0,this.m_lowerTranslation=e.lowerTranslation,this.m_upperTranslation=e.upperTranslation,this.m_maxMotorForce=e.maxMotorForce,this.m_motorSpeed=e.motorSpeed,this.m_enableLimit=e.enableLimit,this.m_enableMotor=e.enableMotor,this.m_limitState=y.e_inactiveLimit,this.m_axis.SetZero(),this.m_perp.SetZero()},N.prototype.InitVelocityConstraints=function(e){var t=this.m_bodyA,n=this.m_bodyB,i,s=0;this.m_localCenterA.SetV(t.GetLocalCenter()),this.m_localCenterB.SetV(n.GetLocalCenter());var u=t.GetTransform(),a=n.GetTransform();i=t.m_xf.R;var f=this.m_localAnchor1.x-this.m_localCenterA.x,l=this.m_localAnchor1.y-this.m_localCenterA.y;s=i.col1.x*f+i.col2.x*l,l=i.col1.y*f+i.col2.y*l,f=s,i=n.m_xf.R;var c=this.m_localAnchor2.x-this.m_localCenterB.x,h=this.m_localAnchor2.y-this.m_localCenterB.y;s=i.col1.x*c+i.col2.x*h,h=i.col1.y*c+i.col2.y*h,c=s;var p=n.m_sweep.c.x+c-t.m_sweep.c.x-f,d=n.m_sweep.c.y+h-t.m_sweep.c.y-l;this.m_invMassA=t.m_invMass,this.m_invMassB=n.m_invMass,this.m_invIA=t.m_invI,this.m_invIB=n.m_invI,this.m_axis.SetV(o.MulMV(u.R,this.m_localXAxis1)),this.m_a1=(p+f)*this.m_axis.y-(d+l)*this.m_axis.x,this.m_a2=c*this.m_axis.y-h*this.m_axis.x,this.m_motorMass=this.m_invMassA+this.m_invMassB+this.m_invIA*this.m_a1*this.m_a1+this.m_invIB*this.m_a2*this.m_a2,this.m_motorMass>Number.MIN_VALUE&&(this.m_motorMass=1/this.m_motorMass),this.m_perp.SetV(o.MulMV(u.R,this.m_localYAxis1)),this.m_s1=(p+f)*this.m_perp.y-(d+l)*this.m_perp.x,this.m_s2=c*this.m_perp.y-h*this.m_perp.x;var v=this.m_invMassA,m=this.m_invMassB,g=this.m_invIA,b=this.m_invIB;this.m_K.col1.x=v+m+g*this.m_s1*this.m_s1+b*this.m_s2*this.m_s2,this.m_K.col1.y=g*this.m_s1+b*this.m_s2,this.m_K.col1.z=g*this.m_s1*this.m_a1+b*this.m_s2*this.m_a2,this.m_K.col2.x=this.m_K.col1.y,this.m_K.col2.y=g+b,this.m_K.col2.z=g*this.m_a1+b*this.m_a2,this.m_K.col3.x=this.m_K.col1.z,this.m_K.col3.y=this.m_K.col2.z,this.m_K.col3.z=v+m+g*this.m_a1*this.m_a1+b*this.m_a2*this.m_a2;if(this.m_enableLimit){var w=this.m_axis.x*p+this.m_axis.y*d;o.Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*r.b2_linearSlop?this.m_limitState=y.e_equalLimits:w<=this.m_lowerTranslation?this.m_limitState!=y.e_atLowerLimit&&(this.m_limitState=y.e_atLowerLimit,this.m_impulse.z=0):w>=this.m_upperTranslation?this.m_limitState!=y.e_atUpperLimit&&(this.m_limitState=y.e_atUpperLimit,this.m_impulse.z=0):(this.m_limitState=y.e_inactiveLimit,this.m_impulse.z=0)}else this.m_limitState=y.e_inactiveLimit;this.m_enableMotor==0&&(this.m_motorImpulse=0);if(e.warmStarting){this.m_impulse.x*=e.dtRatio,this.m_impulse.y*=e.dtRatio,this.m_motorImpulse*=e.dtRatio;var E=this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.x,S=this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.y,x=this.m_impulse.x*this.m_s1+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a1,T=this.m_impulse.x*this.m_s2+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a2;t.m_linearVelocity.x-=this.m_invMassA*E,t.m_linearVelocity.y-=this.m_invMassA*S,t.m_angularVelocity-=this.m_invIA*x,n.m_linearVelocity.x+=this.m_invMassB*E,n.m_linearVelocity.y+=this.m_invMassB*S,n.m_angularVelocity+=this.m_invIB*T}else this.m_impulse.SetZero(),this.m_motorImpulse=0},N.prototype.SolveVelocityConstraints=function(e){var t=this.m_bodyA,n=this.m_bodyB,r=t.m_linearVelocity,i=t.m_angularVelocity,s=n.m_linearVelocity,u=n.m_angularVelocity,a=0,c=0,h=0,p=0;if(this.m_enableMotor&&this.m_limitState!=y.e_equalLimits){var d=this.m_axis.x*(s.x-r.x)+this.m_axis.y*(s.y-r.y)+this.m_a2*u-this.m_a1*i,v=this.m_motorMass*(this.m_motorSpeed-d),m=this.m_motorImpulse,g=e.dt*this.m_maxMotorForce;this.m_motorImpulse=o.Clamp(this.m_motorImpulse+v,-g,g),v=this.m_motorImpulse-m,a=v*this.m_axis.x,c=v*this.m_axis.y,h=v*this.m_a1,p=v*this.m_a2,r.x-=this.m_invMassA*a,r.y-=this.m_invMassA*c,i-=this.m_invIA*h,s.x+=this.m_invMassB*a,s.y+=this.m_invMassB*c,u+=this.m_invIB*p}var b=this.m_perp.x*(s.x-r.x)+this.m_perp.y*(s.y-r.y)+this.m_s2*u-this.m_s1*i,w=u-i;if(this.m_enableLimit&&this.m_limitState!=y.e_inactiveLimit){var E=this.m_axis.x*(s.x-r.x)+this.m_axis.y*(s.y-r.y)+this.m_a2*u-this.m_a1*i,S=this.m_impulse.Copy(),x=this.m_K.Solve33(new l,-b,-w,-E);this.m_impulse.Add(x),this.m_limitState==y.e_atLowerLimit?this.m_impulse.z=o.Max(this.m_impulse.z,0):this.m_limitState==y.e_atUpperLimit&&(this.m_impulse.z=o.Min(this.m_impulse.z,0));var T=-b-(this.m_impulse.z-S.z)*this.m_K.col3.x,N=-w-(this.m_impulse.z-S.z)*this.m_K.col3.y,C=this.m_K.Solve22(new f,T,N);C.x+=S.x,C.y+=S.y,this.m_impulse.x=C.x,this.m_impulse.y=C.y,x.x=this.m_impulse.x-S.x,x.y=this.m_impulse.y-S.y,x.z=this.m_impulse.z-S.z,a=x.x*this.m_perp.x+x.z*this.m_axis.x,c=x.x*this.m_perp.y+x.z*this.m_axis.y,h=x.x*this.m_s1+x.y+x.z*this.m_a1,p=x.x*this.m_s2+x.y+x.z*this.m_a2,r.x-=this.m_invMassA*a,r.y-=this.m_invMassA*c,i-=this.m_invIA*h,s.x+=this.m_invMassB*a,s.y+=this.m_invMassB*c,u+=this.m_invIB*p}else{var k=this.m_K.Solve22(new f,-b,-w);this.m_impulse.x+=k.x,this.m_impulse.y+=k.y,a=k.x*this.m_perp.x,c=k.x*this.m_perp.y,h=k.x*this.m_s1+k.y,p=k.x*this.m_s2+k.y,r.x-=this.m_invMassA*a,r.y-=this.m_invMassA*c,i-=this.m_invIA*h,s.x+=this.m_invMassB*a,s.y+=this.m_invMassB*c,u+=this.m_invIB*p}t.m_linearVelocity.SetV(r),t.m_angularVelocity=i,n.m_linearVelocity.SetV(s),n.m_angularVelocity=u},N.prototype.SolvePositionConstraints=function(e){e===undefined&&(e=0);var t=0,n=0,s=this.m_bodyA,u=this.m_bodyB,a=s.m_sweep.c,c=s.m_sweep.a,h=u.m_sweep.c,p=u.m_sweep.a,d,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=!1,x=0,T=i.FromAngle(c),N=i.FromAngle(p);d=T;var C=this.m_localAnchor1.x-this.m_localCenterA.x,k=this.m_localAnchor1.y-this.m_localCenterA.y;v=d.col1.x*C+d.col2.x*k,k=d.col1.y*C+d.col2.y*k,C=v,d=N;var L=this.m_localAnchor2.x-this.m_localCenterB.x,A=this.m_localAnchor2.y-this.m_localCenterB.y;v=d.col1.x*L+d.col2.x*A,A=d.col1.y*L+d.col2.y*A,L=v;var O=h.x+L-a.x-C,M=h.y+A-a.y-k;if(this.m_enableLimit){this.m_axis=o.MulMV(T,this.m_localXAxis1),this.m_a1=(O+C)*this.m_axis.y-(M+k)*this.m_axis.x,this.m_a2=L*this.m_axis.y-A*this.m_axis.x;var _=this.m_axis.x*O+this.m_axis.y*M;o.Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*r.b2_linearSlop?(x=o.Clamp(_,-r.b2_maxLinearCorrection,r.b2_maxLinearCorrection),w=o.Abs(_),S=!0):_<=this.m_lowerTranslation?(x=o.Clamp(_-this.m_lowerTranslation+r.b2_linearSlop,-r.b2_maxLinearCorrection,0),w=this.m_lowerTranslation-_,S=!0):_>=this.m_upperTranslation&&(x=o.Clamp(_-this.m_upperTranslation+r.b2_linearSlop,0,r.b2_maxLinearCorrection),w=_-this.m_upperTranslation,S=!0)}this.m_perp=o.MulMV(T,this.m_localYAxis1),this.m_s1=(O+C)*this.m_perp.y-(M+k)*this.m_perp.x,this.m_s2=L*this.m_perp.y-A*this.m_perp.x;var D=new l,P=this.m_perp.x*O+this.m_perp.y*M,H=p-c-this.m_refAngle;w=o.Max(w,o.Abs(P)),E=o.Abs(H);if(S)m=this.m_invMassA,g=this.m_invMassB,y=this.m_invIA,b=this.m_invIB,this.m_K.col1.x=m+g+y*this.m_s1*this.m_s1+b*this.m_s2*this.m_s2,this.m_K.col1.y=y*this.m_s1+b*this.m_s2,this.m_K.col1.z=y*this.m_s1*this.m_a1+b*this.m_s2*this.m_a2,this.m_K.col2.x=this.m_K.col1.y,this.m_K.col2.y=y+b,this.m_K.col2.z=y*this.m_a1+b*this.m_a2,this.m_K.col3.x=this.m_K.col1.z,this.m_K.col3.y=this.m_K.col2.z,this.m_K.col3.z=m+g+y*this.m_a1*this.m_a1+b*this.m_a2*this.m_a2,this.m_K.Solve33(D,-P,-H,-x);else{m=this.m_invMassA,g=this.m_invMassB,y=this.m_invIA,b=this.m_invIB;var B=m+g+y*this.m_s1*this.m_s1+b*this.m_s2*this.m_s2,j=y*this.m_s1+b*this.m_s2,F=y+b;this.m_K.col1.Set(B,j,0),this.m_K.col2.Set(j,F,0);var I=this.m_K.Solve22(new f,-P,-H);D.x=I.x,D.y=I.y,D.z=0}var q=D.x*this.m_perp.x+D.z*this.m_axis.x,R=D.x*this.m_perp.y+D.z*this.m_axis.y,U=D.x*this.m_s1+D.y+D.z*this.m_a1,z=D.x*this.m_s2+D.y+D.z*this.m_a2;return a.x-=this.m_invMassA*q,a.y-=this.m_invMassA*R,c-=this.m_invIA*U,h.x+=this.m_invMassB*q,h.y+=this.m_invMassB*R,p+=this.m_invIB*z,s.m_sweep.a=c,u.m_sweep.a=p,s.SynchronizeTransform(),u.SynchronizeTransform(),w<=r.b2_linearSlop&&E<=r.b2_angularSlop},e.inherit(C,e.Dynamics.Joints.b2JointDef),C.prototype.__super=e.Dynamics.Joints.b2JointDef.prototype,C.b2PrismaticJointDef=function(){e.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.localAnchorA=new f,this.localAnchorB=new f,this.localAxisA=new f},C.prototype.b2PrismaticJointDef=function(){this.__super.b2JointDef.call(this),this.type=y.e_prismaticJoint,this.localAxisA.Set(1,0),this.referenceAngle=0,this.enableLimit=!1,this.lowerTranslation=0,this.upperTranslation=0,this.enableMotor=!1,this.maxMotorForce=0,this.motorSpeed=0},C.prototype.Initialize=function(e,t,n,r){this.bodyA=e,this.bodyB=t,this.localAnchorA=this.bodyA.GetLocalPoint(n),this.localAnchorB=this.bodyB.GetLocalPoint(n),this.localAxisA=this.bodyA.GetLocalVector(r),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()},e.inherit(k,e.Dynamics.Joints.b2Joint),k.prototype.__super=e.Dynamics.Joints.b2Joint.prototype,k.b2PulleyJoint=function(){e.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.m_groundAnchor1=new f,this.m_groundAnchor2=new f,this.m_localAnchor1=new f,this.m_localAnchor2=new f,this.m_u1=new f,this.m_u2=new f},k.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},k.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},k.prototype.GetReactionForce=function(e){return e===undefined&&(e=0),new f(e*this.m_impulse*this.m_u2.x,e*this.m_impulse*this.m_u2.y)},k.prototype.GetReactionTorque=function(e){return e===undefined&&(e=0),0},k.prototype.GetGroundAnchorA=function(){var e=this.m_ground.m_xf.position.Copy();return e.Add(this.m_groundAnchor1),e},k.prototype.GetGroundAnchorB=function(){var e=this.m_ground.m_xf.position.Copy();return e.Add(this.m_groundAnchor2),e},k.prototype.GetLength1=function(){var e=this.m_bodyA.GetWorldPoint(this.m_localAnchor1),t=this.m_ground.m_xf.position.x+this.m_groundAnchor1.x,n=this.m_ground.m_xf.position.y+this.m_groundAnchor1.y,r=e.x-t,i=e.y-n;return Math.sqrt(r*r+i*i)},k.prototype.GetLength2=function(){var e=this.m_bodyB.GetWorldPoint(this.m_localAnchor2),t=this.m_ground.m_xf.position.x+this.m_groundAnchor2.x,n=this.m_ground.m_xf.position.y+this.m_groundAnchor2.y,r=e.x-t,i=e.y-n;return Math.sqrt(r*r+i*i)},k.prototype.GetRatio=function(){return this.m_ratio},k.prototype.b2PulleyJoint=function(e){this.__super.b2Joint.call(this,e);var t,n=0,r=0;this.m_ground=this.m_bodyA.m_world.m_groundBody,this.m_groundAnchor1.x=e.groundAnchorA.x-this.m_ground.m_xf.position.x,this.m_groundAnchor1.y=e.groundAnchorA.y-this.m_ground.m_xf.position.y,this.m_groundAnchor2.x=e.groundAnchorB.x-this.m_ground.m_xf.position.x,this.m_groundAnchor2.y=e.groundAnchorB.y-this.m_ground.m_xf.position.y,this.m_localAnchor1.SetV(e.localAnchorA),this.m_localAnchor2.SetV(e.localAnchorB),this.m_ratio=e.ratio,this.m_constant=e.lengthA+this.m_ratio*e.lengthB,this.m_maxLength1=o.Min(e.maxLengthA,this.m_constant-this.m_ratio*k.b2_minPulleyLength),this.m_maxLength2=o.Min(e.maxLengthB,(this.m_constant-k.b2_minPulleyLength)/this.m_ratio),this.m_impulse=0,this.m_limitImpulse1=0,this.m_limitImpulse2=0},k.prototype.InitVelocityConstraints=function(e){var t=this.m_bodyA,n=this.m_bodyB,i;i=t.m_xf.R;var s=this.m_localAnchor1.x-t.m_sweep.localCenter.x,o=this.m_localAnchor1.y-t.m_sweep.localCenter.y,u=i.col1.x*s+i.col2.x*o;o=i.col1.y*s+i.col2.y*o,s=u,i=n.m_xf.R;var a=this.m_localAnchor2.x-n.m_sweep.localCenter.x,f=this.m_localAnchor2.y-n.m_sweep.localCenter.y;u=i.col1.x*a+i.col2.x*f,f=i.col1.y*a+i.col2.y*f,a=u;var l=t.m_sweep.c.x+s,c=t.m_sweep.c.y+o,h=n.m_sweep.c.x+a,p=n.m_sweep.c.y+f,d=this.m_ground.m_xf.position.x+this.m_groundAnchor1.x,v=this.m_ground.m_xf.position.y+this.m_groundAnchor1.y,m=this.m_ground.m_xf.position.x+this.m_groundAnchor2.x,g=this.m_ground.m_xf.position.y+this.m_groundAnchor2.y;this.m_u1.Set(l-d,c-v),this.m_u2.Set(h-m,p-g);var b=this.m_u1.Length(),w=this.m_u2.Length();b>r.b2_linearSlop?this.m_u1.Multiply(1/b):this.m_u1.SetZero(),w>r.b2_linearSlop?this.m_u2.Multiply(1/w):this.m_u2.SetZero();var E=this.m_constant-b-this.m_ratio*w;E>0?(this.m_state=y.e_inactiveLimit,this.m_impulse=0):this.m_state=y.e_atUpperLimit,b<this.m_maxLength1?(this.m_limitState1=y.e_inactiveLimit,this.m_limitImpulse1=0):this.m_limitState1=y.e_atUpperLimit,w<this.m_maxLength2?(this.m_limitState2=y.e_inactiveLimit,this.m_limitImpulse2=0):this.m_limitState2=y.e_atUpperLimit;var S=s*this.m_u1.y-o*this.m_u1.x,x=a*this.m_u2.y-f*this.m_u2.x;this.m_limitMass1=t.m_invMass+t.m_invI*S*S,this.m_limitMass2=n.m_invMass+n.m_invI*x*x,this.m_pulleyMass=this.m_limitMass1+this.m_ratio*this.m_ratio*this.m_limitMass2,this.m_limitMass1=1/this.m_limitMass1,this.m_limitMass2=1/this.m_limitMass2,this.m_pulleyMass=1/this.m_pulleyMass;if(e.warmStarting){this.m_impulse*=e.dtRatio,this.m_limitImpulse1*=e.dtRatio,this.m_limitImpulse2*=e.dtRatio;var T=(-this.m_impulse-this.m_limitImpulse1)*this.m_u1.x,N=(-this.m_impulse-this.m_limitImpulse1)*this.m_u1.y,C=(-this.m_ratio*this.m_impulse-this.m_limitImpulse2)*this.m_u2.x,k=(-this.m_ratio*this.m_impulse-this.m_limitImpulse2)*this.m_u2.y;t.m_linearVelocity.x+=t.m_invMass*T,t.m_linearVelocity.y+=t.m_invMass*N,t.m_angularVelocity+=t.m_invI*(s*N-o*T),n.m_linearVelocity.x+=n.m_invMass*C,n.m_linearVelocity.y+=n.m_invMass*k,n.m_angularVelocity+=n.m_invI*(a*k-f*C)}else this.m_impulse=0,this.m_limitImpulse1=0,this.m_limitImpulse2=0},k.prototype.SolveVelocityConstraints=function(e){var t=this.m_bodyA,n=this.m_bodyB,r;r=t.m_xf.R;var i=this.m_localAnchor1.x-t.m_sweep.localCenter.x,s=this.m_localAnchor1.y-t.m_sweep.localCenter.y,u=r.col1.x*i+r.col2.x*s;s=r.col1.y*i+r.col2.y*s,i=u,r=n.m_xf.R;var a=this.m_localAnchor2.x-n.m_sweep.localCenter.x,f=this.m_localAnchor2.y-n.m_sweep.localCenter.y;u=r.col1.x*a+r.col2.x*f,f=r.col1.y*a+r.col2.y*f,a=u;var l=0,c=0,h=0,p=0,d=0,v=0,m=0,g=0,b=0,w=0,E=0;this.m_state==y.e_atUpperLimit&&(l=t.m_linearVelocity.x+ -t.m_angularVelocity*s,c=t.m_linearVelocity.y+t.m_angularVelocity*i,h=n.m_linearVelocity.x+ -n.m_angularVelocity*f,p=n.m_linearVelocity.y+n.m_angularVelocity*a,b=-(this.m_u1.x*l+this.m_u1.y*c)-this.m_ratio*(this.m_u2.x*h+this.m_u2.y*p),w=this.m_pulleyMass*-b,E=this.m_impulse,this.m_impulse=o.Max(0,this.m_impulse+w),w=this.m_impulse-E,d=-w*this.m_u1.x,v=-w*this.m_u1.y,m=-this.m_ratio*w*this.m_u2.x,g=-this.m_ratio*w*this.m_u2.y,t.m_linearVelocity.x+=t.m_invMass*d,t.m_linearVelocity.y+=t.m_invMass*v,t.m_angularVelocity+=t.m_invI*(i*v-s*d),n.m_linearVelocity.x+=n.m_invMass*m,n.m_linearVelocity.y+=n.m_invMass*g,n.m_angularVelocity+=n.m_invI*(a*g-f*m)),this.m_limitState1==y.e_atUpperLimit&&(l=t.m_linearVelocity.x+ -t.m_angularVelocity*s,c=t.m_linearVelocity.y+t.m_angularVelocity*i,b=-(this.m_u1.x*l+this.m_u1.y*c),w=-this.m_limitMass1*b,E=this.m_limitImpulse1,this.m_limitImpulse1=o.Max(0,this.m_limitImpulse1+w),w=this.m_limitImpulse1-E,d=-w*this.m_u1.x,v=-w*this.m_u1.y,t.m_linearVelocity.x+=t.m_invMass*d,t.m_linearVelocity.y+=t.m_invMass*v,t.m_angularVelocity+=t.m_invI*(i*v-s*d)),this.m_limitState2==y.e_atUpperLimit&&(h=n.m_linearVelocity.x+ -n.m_angularVelocity*f,p=n.m_linearVelocity.y+n.m_angularVelocity*a,b=-(this.m_u2.x*h+this.m_u2.y*p),w=-this.m_limitMass2*b,E=this.m_limitImpulse2,this.m_limitImpulse2=o.Max(0,this.m_limitImpulse2+w),w=this.m_limitImpulse2-E,m=-w*this.m_u2.x,g=-w*this.m_u2.y,n.m_linearVelocity.x+=n.m_invMass*m,n.m_linearVelocity.y+=n.m_invMass*g,n.m_angularVelocity+=n.m_invI*(a*g-f*m))},k.prototype.SolvePositionConstraints=function(e){e===undefined&&(e=0);var t=this.m_bodyA,n=this.m_bodyB,i,s=this.m_ground.m_xf.position.x+this.m_groundAnchor1.x,u=this.m_ground.m_xf.position.y+this.m_groundAnchor1.y,a=this.m_ground.m_xf.position.x+this.m_groundAnchor2.x,f=this.m_ground.m_xf.position.y+this.m_groundAnchor2.y,l=0,c=0,h=0,p=0,d=0,v=0,m=0,g=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0;return this.m_state==y.e_atUpperLimit&&(i=t.m_xf.R,l=this.m_localAnchor1.x-t.m_sweep.localCenter.x,c=this.m_localAnchor1.y-t.m_sweep.localCenter.y,N=i.col1.x*l+i.col2.x*c,c=i.col1.y*l+i.col2.y*c,l=N,i=n.m_xf.R,h=this.m_localAnchor2.x-n.m_sweep.localCenter.x,p=this.m_localAnchor2.y-n.m_sweep.localCenter.y,N=i.col1.x*h+i.col2.x*p,p=i.col1.y*h+i.col2.y*p,h=N,d=t.m_sweep.c.x+l,v=t.m_sweep.c.y+c,m=n.m_sweep.c.x+h,g=n.m_sweep.c.y+p,this.m_u1.Set(d-s,v-u),this.m_u2.Set(m-a,g-f),b=this.m_u1.Length(),w=this.m_u2.Length(),b>r.b2_linearSlop?this.m_u1.Multiply(1/b):this.m_u1.SetZero(),w>r.b2_linearSlop?this.m_u2.Multiply(1/w):this.m_u2.SetZero(),E=this.m_constant-b-this.m_ratio*w,C=o.Max(C,-E),E=o.Clamp(E+r.b2_linearSlop,-r.b2_maxLinearCorrection,0),S=-this.m_pulleyMass*E,d=-S*this.m_u1.x,v=-S*this.m_u1.y,m=-this.m_ratio*S*this.m_u2.x,g=-this.m_ratio*S*this.m_u2.y,t.m_sweep.c.x+=t.m_invMass*d,t.m_sweep.c.y+=t.m_invMass*v,t.m_sweep.a+=t.m_invI*(l*v-c*d),n.m_sweep.c.x+=n.m_invMass*m,n.m_sweep.c.y+=n.m_invMass*g,n.m_sweep.a+=n.m_invI*(h*g-p*m),t.SynchronizeTransform(),n.SynchronizeTransform()),this.m_limitState1==y.e_atUpperLimit&&(i=t.m_xf.R,l=this.m_localAnchor1.x-t.m_sweep.localCenter.x,c=this.m_localAnchor1.y-t.m_sweep.localCenter.y,N=i.col1.x*l+i.col2.x*c,c=i.col1.y*l+i.col2.y*c,l=N,d=t.m_sweep.c.x+l,v=t.m_sweep.c.y+c,this.m_u1.Set(d-s,v-u),b=this.m_u1.Length(),b>r.b2_linearSlop?(this.m_u1.x*=1/b,this.m_u1.y*=1/b):this.m_u1.SetZero(),E=this.m_maxLength1-b,C=o.Max(C,-E),E=o.Clamp(E+r.b2_linearSlop,-r.b2_maxLinearCorrection,0),S=-this.m_limitMass1*E,d=-S*this.m_u1.x,v=-S*this.m_u1.y,t.m_sweep.c.x+=t.m_invMass*d,t.m_sweep.c.y+=t.m_invMass*v,t.m_sweep.a+=t.m_invI*(l*v-c*d),t.SynchronizeTransform()),this.m_limitState2==y.e_atUpperLimit&&(i=n.m_xf.R,h=this.m_localAnchor2.x-n.m_sweep.localCenter.x,p=this.m_localAnchor2.y-n.m_sweep.localCenter.y,N=i.col1.x*h+i.col2.x*p,p=i.col1.y*h+i.col2.y*p,h=N,m=n.m_sweep.c.x+h,g=n.m_sweep.c.y+p,this.m_u2.Set(m-a,g-f),w=this.m_u2.Length(),w>r.b2_linearSlop?(this.m_u2.x*=1/w,this.m_u2.y*=1/w):this.m_u2.SetZero(),E=this.m_maxLength2-w,C=o.Max(C,-E),E=o.Clamp(E+r.b2_linearSlop,-r.b2_maxLinearCorrection,0),S=-this.m_limitMass2*E,m=-S*this.m_u2.x,g=-S*this.m_u2.y,n.m_sweep.c.x+=n.m_invMass*m,n.m_sweep.c.y+=n.m_invMass*g,n.m_sweep.a+=n.m_invI*(h*g-p*m),n.SynchronizeTransform()),C<r.b2_linearSlop},e.postDefs.push(function(){e.Dynamics.Joints.b2PulleyJoint.b2_minPulleyLength=2}),e.inherit(L,e.Dynamics.Joints.b2JointDef),L.prototype.__super=e.Dynamics.Joints.b2JointDef.prototype,L.b2PulleyJointDef=function(){e.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.groundAnchorA=new f,this.groundAnchorB=new f,this.localAnchorA=new f,this.localAnchorB=new f},L.prototype.b2PulleyJointDef=function(){this.__super.b2JointDef.call(this),this.type=y.e_pulleyJoint,this.groundAnchorA.Set(-1,1),this.groundAnchorB.Set(1,1),this.localAnchorA.Set(-1,0),this.localAnchorB.Set(1,0),this.lengthA=0,this.maxLengthA=0,this.lengthB=0,this.maxLengthB=0,this.ratio=1,this.collideConnected=!0},L.prototype.Initialize=function(e,t,n,r,i,s,o){o===undefined&&(o=0),this.bodyA=e,this.bodyB=t,this.groundAnchorA.SetV(n),this.groundAnchorB.SetV(r),this.localAnchorA=this.bodyA.GetLocalPoint(i),this.localAnchorB=this.bodyB.GetLocalPoint(s);var u=i.x-n.x,a=i.y-n.y;this.lengthA=Math.sqrt(u*u+a*a);var f=s.x-r.x,l=s.y-r.y;this.lengthB=Math.sqrt(f*f+l*l),this.ratio=o;var c=this.lengthA+this.ratio*this.lengthB;this.maxLengthA=c-this.ratio*k.b2_minPulleyLength,this.maxLengthB=(c-k.b2_minPulleyLength)/this.ratio},e.inherit(A,e.Dynamics.Joints.b2Joint),A.prototype.__super=e.Dynamics.Joints.b2Joint.prototype,A.b2RevoluteJoint=function(){e.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.K=new i,this.K1=new i,this.K2=new i,this.K3=new i,this.impulse3=new l,this.impulse2=new f,this.reduced=new f,this.m_localAnchor1=new f,this.m_localAnchor2=new f,this.m_impulse=new l,this.m_mass=new s},A.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},A.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},A.prototype.GetReactionForce=function(e){return e===undefined&&(e=0),new f(e*this.m_impulse.x,e*this.m_impulse.y)},A.prototype.GetReactionTorque=function(e){return e===undefined&&(e=0),e*this.m_impulse.z},A.prototype.GetJointAngle=function(){return this.m_bodyB.m_sweep.a-this.m_bodyA.m_sweep.a-this.m_referenceAngle},A.prototype.GetJointSpeed=function(){return this.m_bodyB.m_angularVelocity-this.m_bodyA.m_angularVelocity},A.prototype.IsLimitEnabled=function(){return this.m_enableLimit},A.prototype.EnableLimit=function(e){this.m_enableLimit=e},A.prototype.GetLowerLimit=function(){return this.m_lowerAngle},A.prototype.GetUpperLimit=function(){return this.m_upperAngle},A.prototype.SetLimits=function(e,t){e===undefined&&(e=0),t===undefined&&(t=0),this.m_lowerAngle=e,this.m_upperAngle=t},A.prototype.IsMotorEnabled=function(){return this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor},A.prototype.EnableMotor=function(e){this.m_enableMotor=e},A.prototype.SetMotorSpeed=function(e){e===undefined&&(e=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=e},A.prototype.GetMotorSpeed=function(){return this.m_motorSpeed},A.prototype.SetMaxMotorTorque=function(e){e===undefined&&(e=0),this.m_maxMotorTorque=e},A.prototype.GetMotorTorque=function(){return this.m_maxMotorTorque},A.prototype.b2RevoluteJoint=function(e){this.__super.b2Joint.call(this,e),this.m_localAnchor1.SetV(e.localAnchorA),this.m_localAnchor2.SetV(e.localAnchorB),this.m_referenceAngle=e.referenceAngle,this.m_impulse.SetZero(),this.m_motorImpulse=0,this.m_lowerAngle=e.lowerAngle,this.m_upperAngle=e.upperAngle,this.m_maxMotorTorque=e.maxMotorTorque,this.m_motorSpeed=e.motorSpeed,this.m_enableLimit=e.enableLimit,this.m_enableMotor=e.enableMotor,this.m_limitState=y.e_inactiveLimit},A.prototype.InitVelocityConstraints=function(e){var t=this.m_bodyA,n=this.m_bodyB,i,s=0;this.m_enableMotor||this.m_enableLimit,i=t.m_xf.R;var u=this.m_localAnchor1.x-t.m_sweep.localCenter.x,a=this.m_localAnchor1.y-t.m_sweep.localCenter.y;s=i.col1.x*u+i.col2.x*a,a=i.col1.y*u+i.col2.y*a,u=s,i=n.m_xf.R;var f=this.m_localAnchor2.x-n.m_sweep.localCenter.x,l=this.m_localAnchor2.y-n.m_sweep.localCenter.y;s=i.col1.x*f+i.col2.x*l,l=i.col1.y*f+i.col2.y*l,f=s;var c=t.m_invMass,h=n.m_invMass,p=t.m_invI,d=n.m_invI;this.m_mass.col1.x=c+h+a*a*p+l*l*d,this.m_mass.col2.x=-a*u*p-l*f*d,this.m_mass.col3.x=-a*p-l*d,this.m_mass.col1.y=this.m_mass.col2.x,this.m_mass.col2.y=c+h+u*u*p+f*f*d,this.m_mass.col3.y=u*p+f*d,this.m_mass.col1.z=this.m_mass.col3.x,this.m_mass.col2.z=this.m_mass.col3.y,this.m_mass.col3.z=p+d,this.m_motorMass=1/(p+d),this.m_enableMotor==0&&(this.m_motorImpulse=0);if(this.m_enableLimit){var v=n.m_sweep.a-t.m_sweep.a-this.m_referenceAngle;o.Abs(this.m_upperAngle-this.m_lowerAngle)<2*r.b2_angularSlop?this.m_limitState=y.e_equalLimits:v<=this.m_lowerAngle?(this.m_limitState!=y.e_atLowerLimit&&(this.m_impulse.z=0),this.m_limitState=y.e_atLowerLimit):v>=this.m_upperAngle?(this.m_limitState!=y.e_atUpperLimit&&(this.m_impulse.z=0),this.m_limitState=y.e_atUpperLimit):(this.m_limitState=y.e_inactiveLimit,this.m_impulse.z=0)}else this.m_limitState=y.e_inactiveLimit;if(e.warmStarting){this.m_impulse.x*=e.dtRatio,this.m_impulse.y*=e.dtRatio,this.m_motorImpulse*=e.dtRatio;var m=this.m_impulse.x,g=this.m_impulse.y;t.m_linearVelocity.x-=c*m,t.m_linearVelocity.y-=c*g,t.m_angularVelocity-=p*(u*g-a*m+this.m_motorImpulse+this.m_impulse.z),n.m_linearVelocity.x+=h*m,n.m_linearVelocity.y+=h*g,n.m_angularVelocity+=d*(f*g-l*m+this.m_motorImpulse+this.m_impulse.z)}else this.m_impulse.SetZero(),this.m_motorImpulse=0},A.prototype.SolveVelocityConstraints=function(e){var t=this.m_bodyA,n=this.m_bodyB,r,i=0,s=0,u=0,a=0,f=0,l=0,c=t.m_linearVelocity,h=t.m_angularVelocity,p=n.m_linearVelocity,d=n.m_angularVelocity,v=t.m_invMass,m=n.m_invMass,g=t.m_invI,b=n.m_invI;if(this.m_enableMotor&&this.m_limitState!=y.e_equalLimits){var w=d-h-this.m_motorSpeed,E=this.m_motorMass*-w,S=this.m_motorImpulse,x=e.dt*this.m_maxMotorTorque;this.m_motorImpulse=o.Clamp(this.m_motorImpulse+E,-x,x),E=this.m_motorImpulse-S,h-=g*E,d+=b*E}if(this.m_enableLimit&&this.m_limitState!=y.e_inactiveLimit){r=t.m_xf.R,u=this.m_localAnchor1.x-t.m_sweep.localCenter.x,a=this.m_localAnchor1.y-t.m_sweep.localCenter.y,i=r.col1.x*u+r.col2.x*a,a=r.col1.y*u+r.col2.y*a,u=i,r=n.m_xf.R,f=this.m_localAnchor2.x-n.m_sweep.localCenter.x,l=this.m_localAnchor2.y-n.m_sweep.localCenter.y,i=r.col1.x*f+r.col2.x*l,l=r.col1.y*f+r.col2.y*l,f=i;var T=p.x+ -d*l-c.x- -h*a,N=p.y+d*f-c.y-h*u,C=d-h;this.m_mass.Solve33(this.impulse3,-T,-N,-C),this.m_limitState==y.e_equalLimits?this.m_impulse.Add(this.impulse3):this.m_limitState==y.e_atLowerLimit?(s=this.m_impulse.z+this.impulse3.z,s<0&&(this.m_mass.Solve22(this.reduced,-T,-N),this.impulse3.x=this.reduced.x,this.impulse3.y=this.reduced.y,this.impulse3.z=-this.m_impulse.z,this.m_impulse.x+=this.reduced.x,this.m_impulse.y+=this.reduced.y,this.m_impulse.z=0)):this.m_limitState==y.e_atUpperLimit&&(s=this.m_impulse.z+this.impulse3.z,s>0&&(this.m_mass.Solve22(this.reduced,-T,-N),this.impulse3.x=this.reduced.x,this.impulse3.y=this.reduced.y,this.impulse3.z=-this.m_impulse.z,this.m_impulse.x+=this.reduced.x,this.m_impulse.y+=this.reduced.y,this.m_impulse.z=0)),c.x-=v*this.impulse3.x,c.y-=v*this.impulse3.y,h-=g*(u*this.impulse3.y-a*this.impulse3.x+this.impulse3.z),p.x+=m*this.impulse3.x,p.y+=m*this.impulse3.y,d+=b*(f*this.impulse3.y-l*this.impulse3.x+this.impulse3.z)}else{r=t.m_xf.R,u=this.m_localAnchor1.x-t.m_sweep.localCenter.x,a=this.m_localAnchor1.y-t.m_sweep.localCenter.y,i=r.col1.x*u+r.col2.x*a,a=r.col1.y*u+r.col2.y*a,u=i,r=n.m_xf.R,f=this.m_localAnchor2.x-n.m_sweep.localCenter.x,l=this.m_localAnchor2.y-n.m_sweep.localCenter.y,i=r.col1.x*f+r.col2.x*l,l=r.col1.y*f+r.col2.y*l,f=i;var k=p.x+ -d*l-c.x- -h*a,L=p.y+d*f-c.y-h*u;this.m_mass.Solve22(this.impulse2,-k,-L),this.m_impulse.x+=this.impulse2.x,this.m_impulse.y+=this.impulse2.y,c.x-=v*this.impulse2.x,c.y-=v*this.impulse2.y,h-=g*(u*this.impulse2.y-a*this.impulse2.x),p.x+=m*this.impulse2.x,p.y+=m*this.impulse2.y,d+=b*(f*this.impulse2.y-l*this.impulse2.x)}t.m_linearVelocity.SetV(c),t.m_angularVelocity=h,n.m_linearVelocity.SetV(p),n.m_angularVelocity=d},A.prototype.SolvePositionConstraints=function(e){e===undefined&&(e=0);var t=0,n=0,i,s=this.m_bodyA,u=this.m_bodyB,a=0,f=0,l=0,c=0,h=0;if(this.m_enableLimit&&this.m_limitState!=y.e_inactiveLimit){var p=u.m_sweep.a-s.m_sweep.a-this.m_referenceAngle,d=0;this.m_limitState==y.e_equalLimits?(n=o.Clamp(p-this.m_lowerAngle,-r.b2_maxAngularCorrection,r.b2_maxAngularCorrection),d=-this.m_motorMass*n,a=o.Abs(n)):this.m_limitState==y.e_atLowerLimit?(n=p-this.m_lowerAngle,a=-n,n=o.Clamp(n+r.b2_angularSlop,-r.b2_maxAngularCorrection,0),d=-this.m_motorMass*n):this.m_limitState==y.e_atUpperLimit&&(n=p-this.m_upperAngle,a=n,n=o.Clamp(n-r.b2_angularSlop,0,r.b2_maxAngularCorrection),d=-this.m_motorMass*n),s.m_sweep.a-=s.m_invI*d,u.m_sweep.a+=u.m_invI*d,s.SynchronizeTransform(),u.SynchronizeTransform()}i=s.m_xf.R;var v=this.m_localAnchor1.x-s.m_sweep.localCenter.x,m=this.m_localAnchor1.y-s.m_sweep.localCenter.y;l=i.col1.x*v+i.col2.x*m,m=i.col1.y*v+i.col2.y*m,v=l,i=u.m_xf.R;var g=this.m_localAnchor2.x-u.m_sweep.localCenter.x,b=this.m_localAnchor2.y-u.m_sweep.localCenter.y;l=i.col1.x*g+i.col2.x*b,b=i.col1.y*g+i.col2.y*b,g=l;var w=u.m_sweep.c.x+g-s.m_sweep.c.x-v,E=u.m_sweep.c.y+b-s.m_sweep.c.y-m,S=w*w+E*E,x=Math.sqrt(S);f=x;var T=s.m_invMass,N=u.m_invMass,C=s.m_invI,k=u.m_invI,L=10*r.b2_linearSlop;if(S>L*L){var O=w/x,M=E/x,_=T+N,D=1/_;c=D*-w,h=D*-E;var P=.5;s.m_sweep.c.x-=P*T*c,s.m_sweep.c.y-=P*T*h,u.m_sweep.c.x+=P*N*c,u.m_sweep.c.y+=P*N*h,w=u.m_sweep.c.x+g-s.m_sweep.c.x-v,E=u.m_sweep.c.y+b-s.m_sweep.c.y-m}return this.K1.col1.x=T+N,this.K1.col2.x=0,this.K1.col1.y=0,this.K1.col2.y=T+N,this.K2.col1.x=C*m*m,this.K2.col2.x=-C*v*m,this.K2.col1.y=-C*v*m,this.K2.col2.y=C*v*v,this.K3.col1.x=k*b*b,this.K3.col2.x=-k*g*b,this.K3.col1.y=-k*g*b,this.K3.col2.y=k*g*g,this.K.SetM(this.K1),this.K.AddM(this.K2),this.K.AddM(this.K3),this.K.Solve(A.tImpulse,-w,-E),c=A.tImpulse.x,h=A.tImpulse.y,s.m_sweep.c.x-=s.m_invMass*c,s.m_sweep.c.y-=s.m_invMass*h,s.m_sweep.a-=s.m_invI*(v*h-m*c),u.m_sweep.c.x+=u.m_invMass*c,u.m_sweep.c.y+=u.m_invMass*h,u.m_sweep.a+=u.m_invI*(g*h-b*c),s.SynchronizeTransform(),u.SynchronizeTransform(),f<=r.b2_linearSlop&&a<=r.b2_angularSlop},e.postDefs.push(function(){e.Dynamics.Joints.b2RevoluteJoint.tImpulse=new f}),e.inherit(O,e.Dynamics.Joints.b2JointDef),O.prototype.__super=e.Dynamics.Joints.b2JointDef.prototype,O.b2RevoluteJointDef=function(){e.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.localAnchorA=new f,this.localAnchorB=new f},O.prototype.b2RevoluteJointDef=function(){this.__super.b2JointDef.call(this),this.type=y.e_revoluteJoint,this.localAnchorA.Set(0,0),this.localAnchorB.Set(0,0),this.referenceAngle=0,this.lowerAngle=0,this.upperAngle=0,this.maxMotorTorque=0,this.motorSpeed=0,this.enableLimit=!1,this.enableMotor=!1},O.prototype.Initialize=function(e,t,n){this.bodyA=e,this.bodyB=t,this.localAnchorA=this.bodyA.GetLocalPoint(n),this.localAnchorB=this.bodyB.GetLocalPoint(n),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()},e.inherit(M,e.Dynamics.Joints.b2Joint),M.prototype.__super=e.Dynamics.Joints.b2Joint.prototype,M.b2WeldJoint=function(){e.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.m_localAnchorA=new f,this.m_localAnchorB=new f,this.m_impulse=new l,this.m_mass=new s},M.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA)},M.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB)},M.prototype.GetReactionForce=function(e){return e===undefined&&(e=0),new f(e*this.m_impulse.x,e*this.m_impulse.y)},M.prototype.GetReactionTorque=function(e){return e===undefined&&(e=0),e*this.m_impulse.z},M.prototype.b2WeldJoint=function(e){this.__super.b2Joint.call(this,e),this.m_localAnchorA.SetV(e.localAnchorA),this.m_localAnchorB.SetV(e.localAnchorB),this.m_referenceAngle=e.referenceAngle,this.m_impulse.SetZero(),this.m_mass=new s},M.prototype.InitVelocityConstraints=function(e){var t,n=0,r=this.m_bodyA,i=this.m_bodyB;t=r.m_xf.R;var s=this.m_localAnchorA.x-r.m_sweep.localCenter.x,o=this.m_localAnchorA.y-r.m_sweep.localCenter.y;n=t.col1.x*s+t.col2.x*o,o=t.col1.y*s+t.col2.y*o,s=n,t=i.m_xf.R;var u=this.m_localAnchorB.x-i.m_sweep.localCenter.x,a=this.m_localAnchorB.y-i.m_sweep.localCenter.y;n=t.col1.x*u+t.col2.x*a,a=t.col1.y*u+t.col2.y*a,u=n;var f=r.m_invMass,l=i.m_invMass,c=r.m_invI,h=i.m_invI;this.m_mass.col1.x=f+l+o*o*c+a*a*h,this.m_mass.col2.x=-o*s*c-a*u*h,this.m_mass.col3.x=-o*c-a*h,this.m_mass.col1.y=this.m_mass.col2.x,this.m_mass.col2.y=f+l+s*s*c+u*u*h,this.m_mass.col3.y=s*c+u*h,this.m_mass.col1.z=this.m_mass.col3.x,this.m_mass.col2.z=this.m_mass.col3.y,this.m_mass.col3.z=c+h,e.warmStarting?(this.m_impulse.x*=e.dtRatio,this.m_impulse.y*=e.dtRatio,this.m_impulse.z*=e.dtRatio,r.m_linearVelocity.x-=f*this.m_impulse.x,r.m_linearVelocity.y-=f*this.m_impulse.y,r.m_angularVelocity-=c*(s*this.m_impulse.y-o*this.m_impulse.x+this.m_impulse.z),i.m_linearVelocity.x+=l*this.m_impulse.x,i.m_linearVelocity.y+=l*this.m_impulse.y,i.m_angularVelocity+=h*(u*this.m_impulse.y-a*this.m_impulse.x+this.m_impulse.z)):this.m_impulse.SetZero()},M.prototype.SolveVelocityConstraints=function(e){var t,n=0,r=this.m_bodyA,i=this.m_bodyB,s=r.m_linearVelocity,o=r.m_angularVelocity,u=i.m_linearVelocity,a=i.m_angularVelocity,f=r.m_invMass,c=i.m_invMass,h=r.m_invI,p=i.m_invI;t=r.m_xf.R;var d=this.m_localAnchorA.x-r.m_sweep.localCenter.x,v=this.m_localAnchorA.y-r.m_sweep.localCenter.y;n=t.col1.x*d+t.col2.x*v,v=t.col1.y*d+t.col2.y*v,d=n,t=i.m_xf.R;var m=this.m_localAnchorB.x-i.m_sweep.localCenter.x,g=this.m_localAnchorB.y-i.m_sweep.localCenter.y;n=t.col1.x*m+t.col2.x*g,g=t.col1.y*m+t.col2.y*g,m=n;var y=u.x-a*g-s.x+o*v,b=u.y+a*m-s.y-o*d,w=a-o,E=new l;this.m_mass.Solve33(E,-y,-b,-w),this.m_impulse.Add(E),s.x-=f*E.x,s.y-=f*E.y,o-=h*(d*E.y-v*E.x+E.z),u.x+=c*E.x,u.y+=c*E.y,a+=p*(m*E.y-g*E.x+E.z),r.m_angularVelocity=o,i.m_angularVelocity=a},M.prototype.SolvePositionConstraints=function(e){e===undefined&&(e=0);var t,n=0,i=this.m_bodyA,s=this.m_bodyB;t=i.m_xf.R;var u=this.m_localAnchorA.x-i.m_sweep.localCenter.x,a=this.m_localAnchorA.y-i.m_sweep.localCenter.y;n=t.col1.x*u+t.col2.x*a,a=t.col1.y*u+t.col2.y*a,u=n,t=s.m_xf.R;var f=this.m_localAnchorB.x-s.m_sweep.localCenter.x,c=this.m_localAnchorB.y-s.m_sweep.localCenter.y;n=t.col1.x*f+t.col2.x*c,c=t.col1.y*f+t.col2.y*c,f=n;var h=i.m_invMass,p=s.m_invMass,d=i.m_invI,v=s.m_invI,m=s.m_sweep.c.x+f-i.m_sweep.c.x-u,g=s.m_sweep.c.y+c-i.m_sweep.c.y-a,y=s.m_sweep.a-i.m_sweep.a-this.m_referenceAngle,b=10*r.b2_linearSlop,w=Math.sqrt(m*m+g*g),E=o.Abs(y);w>b&&(d*=1,v*=1),this.m_mass.col1.x=h+p+a*a*d+c*c*v,this.m_mass.col2.x=-a*u*d-c*f*v,this.m_mass.col3.x=-a*d-c*v,this.m_mass.col1.y=this.m_mass.col2.x,this.m_mass.col2.y=h+p+u*u*d+f*f*v,this.m_mass.col3.y=u*d+f*v,this.m_mass.col1.z=this.m_mass.col3.x,this.m_mass.col2.z=this.m_mass.col3.y,this.m_mass.col3.z=d+v;var S=new l;return this.m_mass.Solve33(S,-m,-g,-y),i.m_sweep.c.x-=h*S.x,i.m_sweep.c.y-=h*S.y,i.m_sweep.a-=d*(u*S.y-a*S.x+S.z),s.m_sweep.c.x+=p*S.x,s.m_sweep.c.y+=p*S.y,s.m_sweep.a+=v*(f*S.y-c*S.x+S.z),i.SynchronizeTransform(),s.SynchronizeTransform(),w<=r.b2_linearSlop&&E<=r.b2_angularSlop},e.inherit(_,e.Dynamics.Joints.b2JointDef),_.prototype.__super=e.Dynamics.Joints.b2JointDef.prototype,_.b2WeldJointDef=function(){e.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.localAnchorA=new f,this.localAnchorB=new f},_.prototype.b2WeldJointDef=function(){this.__super.b2JointDef.call(this),this.type=y.e_weldJoint,this.referenceAngle=0},_.prototype.Initialize=function(e,t,n){this.bodyA=e,this.bodyB=t,this.localAnchorA.SetV(this.bodyA.GetLocalPoint(n)),this.localAnchorB.SetV(this.bodyB.GetLocalPoint(n)),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()}}(),function(){var t=e.Dynamics.b2DebugDraw;t.b2DebugDraw=function(){this.m_drawScale=1,this.m_lineThickness=1,this.m_alpha=1,this.m_fillAlpha=1,this.m_xformScale=1;var e=this;this.m_sprite={graphics:{clear:function(){e.m_ctx.clearRect(0,0,e.m_ctx.canvas.width,e.m_ctx.canvas.height)}}}},t.prototype._color=function(e,t){return"rgba("+((e&16711680)>>16)+","+((e&65280)>>8)+","+(e&255)+","+t+")"},t.prototype.b2DebugDraw=function(){this.m_drawFlags=0},t.prototype.SetFlags=function(e){e===undefined&&(e=0),this.m_drawFlags=e},t.prototype.GetFlags=function(){return this.m_drawFlags},t.prototype.AppendFlags=function(e){e===undefined&&(e=0),this.m_drawFlags|=e},t.prototype.ClearFlags=function(e){e===undefined&&(e=0),this.m_drawFlags&=~e},t.prototype.SetSprite=function(e){this.m_ctx=e},t.prototype.GetSprite=function(){return this.m_ctx},t.prototype.SetDrawScale=function(e){e===undefined&&(e=0),this.m_drawScale=e},t.prototype.GetDrawScale=function(){return this.m_drawScale},t.prototype.SetLineThickness=function(e){e===undefined&&(e=0),this.m_lineThickness=e,this.m_ctx.strokeWidth=e},t.prototype.GetLineThickness=function(){return this.m_lineThickness},t.prototype.SetAlpha=function(e){e===undefined&&(e=0),this.m_alpha=e},t.prototype.GetAlpha=function(){return this.m_alpha},t.prototype.SetFillAlpha=function(e){e===undefined&&(e=0),this.m_fillAlpha=e},t.prototype.GetFillAlpha=function(){return this.m_fillAlpha},t.prototype.SetXFormScale=function(e){e===undefined&&(e=0),this.m_xformScale=e},t.prototype.GetXFormScale=function(){return this.m_xformScale},t.prototype.DrawPolygon=function(e,t,n){if(!t)return;var r=this.m_ctx,i=this.m_drawScale;r.beginPath(),r.strokeStyle=this._color(n.color,this.m_alpha),r.moveTo(e[0].x*i,e[0].y*i);for(var s=1;s<t;s++)r.lineTo(e[s].x*i,e[s].y*i);r.lineTo(e[0].x*i,e[0].y*i),r.closePath(),r.stroke()},t.prototype.DrawSolidPolygon=function(e,t,n){if(!t)return;var r=this.m_ctx,i=this.m_drawScale;r.beginPath(),r.strokeStyle=this._color(n.color,this.m_alpha),r.fillStyle=this._color(n.color,this.m_fillAlpha),r.moveTo(e[0].x*i,e[0].y*i);for(var s=1;s<t;s++)r.lineTo(e[s].x*i,e[s].y*i);r.lineTo(e[0].x*i,e[0].y*i),r.closePath(),r.fill(),r.stroke()},t.prototype.DrawCircle=function(e,t,n){if(!t)return;var r=this.m_ctx,i=this.m_drawScale;r.beginPath(),r.strokeStyle=this._color(n.color,this.m_alpha),r.arc(e.x*i,e.y*i,t*i,0,Math.PI*2,!0),r.closePath(),r.stroke()},t.prototype.DrawSolidCircle=function(e,t,n,r){if(!t)return;var i=this.m_ctx,s=this.m_drawScale,o=e.x*s,u=e.y*s;i.moveTo(0,0),i.beginPath(),i.strokeStyle=this._color(r.color,this.m_alpha),i.fillStyle=this._color(r.color,this.m_fillAlpha),i.arc(o,u,t*s,0,Math.PI*2,!0),i.moveTo(o,u),i.lineTo((e.x+n.x*t)*s,(e.y+n.y*t)*s),i.closePath(),i.fill(),i.stroke()},t.prototype.DrawSegment=function(e,t,n){var r=this.m_ctx,i=this.m_drawScale;r.strokeStyle=this._color(n.color,this.m_alpha),r.beginPath(),r.moveTo(e.x*i,e.y*i),r.lineTo(t.x*i,t.y*i),r.closePath(),r.stroke()},t.prototype.DrawTransform=function(e){var t=this.m_ctx,n=this.m_drawScale;t.beginPath(),t.strokeStyle=this._color(16711680,this.m_alpha),t.moveTo(e.position.x*n,e.position.y*n),t.lineTo((e.position.x+this.m_xformScale*e.R.col1.x)*n,(e.position.y+this.m_xformScale*e.R.col1.y)*n),t.strokeStyle=this._color(65280,this.m_alpha),t.moveTo(e.position.x*n,e.position.y*n),t.lineTo((e.position.x+this.m_xformScale*e.R.col2.x)*n,(e.position.y+this.m_xformScale*e.R.col2.y)*n),t.closePath(),t.stroke()}}();var r;for(r=0;r<e.postDefs.length;++r)e.postDefs[r]();return delete e.postDefs,e}),function(){define("lib/physics/physics",["box2d"],function(e){var t,n,r,i,s,o,u,a,f,l,c;return c=!0,f=e.Common.Math.b2Vec2,n=e.Dynamics.b2BodyDef,t=e.Dynamics.b2Body,u=e.Dynamics.b2FixtureDef,o=e.Dynamics.b2Fixture,l=e.Dynamics.b2World,a=e.Collision.Shapes.b2PolygonShape,s=e.Collision.Shapes.b2EdgeShape,r=e.Collision.Shapes.b2CircleShape,i=e.Dynamics.b2DebugDraw,{createWorld:function(){var e;return e=new f(0,10),this.world=new l(e,!0),c&&this.setupDebugDraw(document.getElementById("canvas")),this.fixDef=new u,this.fixDef.density=1,this.fixDef.friction=.5,this.fixDef.restitution=.2,this.bodyDef=new n},addStaticPolygon:function(e){var n,r,i,s;return this.bodyDef.type=t.b2_kinematicBody,this.fixDef.shape=new a,i=function(){var t,n,i;i=[];for(t=0,n=e.length;t<n;t++)s=e[t],r=new f,r.Set(s.x,s.y),i.push(r);return i}(),this.fixDef.shape.SetAsArray(i,i.length),this.bodyDef.position.x=0,this.bodyDef.position.y=0,n=this.world.CreateBody(this.bodyDef),n.CreateFixture(this.fixDef),n},addCircle:function(e){return this.createCircle(e,t.b2_dynamicBody)},addStaticCircle:function(e){return this.createCircle(e,t.b2_staticBody)},setListeners:function(t,n){var r;return r=new e.Dynamics.b2ContactListener,r.PreSolve=function(e){var n,r;n=e.GetFixtureA().GetBody().userdata,r=e.GetFixtureB().GetBody().userdata;if(!t(n,r))return e.SetEnabled(!1)},r.PostSolve=function(e){var t,r;return t=e.GetFixtureA().GetBody().userdata,r=e.GetFixtureB().GetBody().userdata,n(t,r)},this.world.SetContactListener(r)},freeze:function(e){return e.SetType(t.b2_staticBody)},update:function(){this.world.Step(1/60,10,10);if(c)return this.world.DrawDebugData()},createCircle:function(e,t){var n;return this.bodyDef.type=t,this.fixDef.shape=new r(e.r),this.bodyDef.position.x=e.x,this.bodyDef.position.y=e.y,n=this.world.CreateBody(this.bodyDef),n.CreateFixture(this.fixDef),n},setupDebugDraw:function(e){var t;if(e)return t=new i,t.SetSprite(e.getContext("2d")),t.SetDrawScale(30),t.SetFillAlpha(.3),t.SetLineThickness(1),t.SetFlags(i.e_shapeBit|i.e_jointBit),this.world.SetDebugDraw(t)}}})}.call(this),function(){define("lib/physics/circle",["lib/physics/physics"],function(e){var t;return t=function(){function t(t){var n;n=t.isStatic?"addStaticCircle":"addCircle",this.physicalCircle=e[n](t),this.physicalCircle.userdata=this}return t.prototype.x=function(e){return e?this.physicalCircle.SetPosition({x:e,y:this.y()}):this.physicalCircle.GetPosition().x},t.prototype.y=function(e){return e?this.physicalCircle.SetPosition({y:e,x:this.x()}):this.physicalCircle.GetPosition().y},t.prototype.a=function(e){return e?this.physicalCircle.SetAngle(e):this.physicalCircle.GetAngle()},t.prototype.r=function(e){return e?this.physicalCircle.GetFixtureList().GetShape().SetRadius(e):this.physicalCircle.GetFixtureList().GetShape().GetRadius()},t.prototype.freeze=function(){return e.freeze(this.physicalCircle)},t.prototype.update=function(){var e;if(this.melted)return e=this.physicalCircle.GetLinearVelocityFromWorldPoint({x:this.x(),y:this.y()}),e.x*=.99,this.physicalCircle.SetLinearVelocity(e)},t}()})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("models/clone",["lib/physics/circle"],function(e){var n,r,i;return r=.2,n=.05,i=function(e){function i(e,t){this.parentRad=t.r(),e.r=r*this.parentRad,i.__super__.constructor.call(this,e)}return t(i,e),i.prototype.spike=function(){return this.spiked=this.dead=!0,this.freeze()},i.prototype.melt=function(){return this.melted=this.dead=!0},i.prototype.update=function(){i.__super__.update.call(this);if(!this.dead)return this.grow()},i.prototype.grow=function(){var e,t;t=this.r();if(t<this.parentRad)return e=t+n,e>this.parentRad&&(e=this.parentRad),this.r(e)},i}(e)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("models/player",["lib/physics/circle","models/clone","jquery"],function(e,n,r){var i,s,o;return s=.5,i=10,o=function(e){function o(e){e.r=s,o.__super__.constructor.call(this,e),this.stamina=0,this.clones=[],this.clonesLeft=void 0}return t(o,e),o.prototype.spike=function(){return this.spiked=this.dead=!0,this.freeze()},o.prototype.spook=function(){return this.spooked=this.dead=!0},o.prototype.melt=function(){return this.melted=this.dead=!0},o.prototype.update=function(){o.__super__.update.call(this);if(!this.dead){this.stamina++;if(this.stamina>=i&&(this.clonesLeft==null||this.clonesLeft>0)&&(this.cloningRight||this.cloningLeft||this.cloningDown||this.cloningUp))return this.makeClone()}},o.prototype.displayClonesLeftInit=function(){return this.clonesLeft!=null?(r(".clonesLeftContainer").show(),this.displayClonesLeft()):r(".clonesLeftContainer").hide()},o.prototype.displayClonesLeft=function(){return r(".clonesLeft").text(this.clonesLeft)},o.prototype.makeClone=function(){var e,t;return this.clonesLeft!=null&&this.clonesLeft--,this.stamina=0,e=this.x(),t=this.y(),this.cloningRight&&(e+=s),this.cloningLeft&&(e-=s),this.cloningDown&&(t+=s),this.cloningUp&&(t-=s),this.clones.push(new n({x:e,y:t},this)),this.displayClonesLeft()},o}(e)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("models/goal",["lib/physics/circle"],function(e){var n,r;return n=.01,r=function(e){function r(e){e.r=n,e.isStatic=!0,r.__super__.constructor.call(this,e)}return t(r,e),r}(e)})}.call(this),function(){define("lib/physics/polygon",["lib/physics/physics"],function(e){var t;return t=function(){function t(t){this.physicalPolygon=e.addStaticPolygon(t),this.physicalPolygon.userdata=this}return t.prototype.transform=function(e){return this.physicalPolygon.SetLinearVelocity({x:e.x||0,y:e.y||0})},t.prototype.vertices=function(){var e,t,n,r,i,s;e=this.physicalPolygon.GetTransform().position,i=this.physicalPolygon.GetFixtureList().GetShape().GetVertices(),s=[];for(n=0,r=i.length;n<r;n++)t=i[n],s.push({x:t.x+e.x,y:t.y+e.y});return s},t.prototype.x=function(){return this.vertices()[0].x},t.prototype.y=function(){return this.vertices()[0].y},t}()})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("models/platform",["lib/physics/polygon"],function(e){var n;return n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n}(e)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("models/spikes",["models/platform","lib/physics/physics"],function(e,n){var r;return r=function(e){function r(e){this.x1=e[0].x,this.y1=e[0].y,this.x2=e[1].x,this.y2=e[1].y,this.physicalPolygon=n.addStaticPolygon(e),this.physicalPolygon.userdata=this}return t(r,e),r}(e)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("models/ghost",["lib/physics/circle"],function(e){var n,r,i;return n=.2,r=.04,i=function(e){function i(e,t){this.target=t,this.speed=r,e.r=n,e.isStatic=!0,i.__super__.constructor.call(this,e)}return t(i,e),i.prototype.update=function(){return this.chaseTarget()},i.prototype.gigafy=function(){return this.r(.5),this.speed=.01},i.prototype.chaseTarget=function(){var e,t,n,r,i,s,o,u,a;return r=this.target.x(),i=this.target.y(),s=this.x(),u=this.y(),e=r-s,t=i-u,n=Math.atan2(e,t),o=Math.sin(n)*this.speed,a=Math.cos(n)*this.speed,this.x(s+o),this.y(u+a)},i}(e)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("models/mover",["lib/physics/polygon"],function(e){var n,r;return r=3,n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.update=function(){return this.rising&&this.y()<this.minHeight?this.rising=!1:!this.rising&&this.y()>this.maxHeight&&(this.rising=!0),this.rising?this.transform({y:-r}):this.transform({y:r})},n}(e)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("models/lava",["lib/physics/polygon"],function(e){var n;return n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n}(e)})}.call(this),define("text",["module"],function(e){var t,n,r=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],i=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,s=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,o=typeof location!="undefined"&&location.href,u=o&&location.protocol&&location.protocol.replace(/\:/,""),a=o&&location.hostname,f=o&&(location.port||undefined),l=[],c=e.config&&e.config()||{};t={version:"2.0.3",strip:function(e){if(e){e=e.replace(i,"");var t=e.match(s);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:c.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=r[t];try{e=new ActiveXObject(n)}catch(i){}if(e){r=[n];break}}return e},parseName:function(e){var t=!1,n=e.indexOf("."),r=e.substring(0,n),i=e.substring(n+1,e.length);return n=i.indexOf("!"),n!==-1&&(t=i.substring(n+1,i.length),t=t==="strip",i=i.substring(0,n)),{moduleName:r,ext:i,strip:t}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,c.isBuild&&(l[e]=r),i(r)},load:function(e,n,r,i){if(i.isBuild&&!i.inlineText){r();return}c.isBuild=i.isBuild;var s=t.parseName(e),l=s.moduleName+"."+s.ext,h=n.toUrl(l),p=c.useXhr||t.useXhr;!o||p(h,u,a,f)?t.get(h,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([l],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(l.hasOwnProperty(n)){var s=t.jsEscape(l[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.moduleName+"."+o.ext,a=r.toUrl(o.moduleName+"."+o.ext)+".js";t.load(u,r,function(n){var r=function(e){return i(a,e)};r.asModule=function(e,t){return i.asModule(e,a,t)},t.write(e,u,r,s)},s)}};if(c.env==="node"||!c.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node)n=require.nodeRequire("fs"),t.get=function(e,t){var r=n.readFileSync(e,"utf8");r.indexOf("﻿")===0&&(r=r.substring(1)),t(r)};else if(c.env==="xhr"||!c.env&&t.createXhr())t.get=function(e,n,r){var i=t.createXhr();i.open("GET",e,!0),c.onXhr&&c.onXhr(i,e),i.onreadystatechange=function(t){var s,o;i.readyState===4&&(s=i.status,s>399&&s<600?(o=new Error(e+" HTTP status: "+s),o.xhr=i,r(o)):n(i.responseText))},i.send(null)};else if(c.env==="rhino"||!c.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};return t}),define("text!data/levelMaps/1.svg",[],function(){return'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<!-- Created with Inkscape (http://www.inkscape.org/) -->\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   id="svg2989"\n   height="400"\n   width="600"\n   version="1.1"\n   inkscape:version="0.48.2 r9819"\n   sodipodi:docname="1.svg">\n  <defs\n     id="defs8603" />\n  <sodipodi:namedview\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1"\n     objecttolerance="10"\n     gridtolerance="10"\n     guidetolerance="10"\n     inkscape:pageopacity="0"\n     inkscape:pageshadow="2"\n     inkscape:window-width="1163"\n     inkscape:window-height="768"\n     id="namedview8601"\n     showgrid="false"\n     inkscape:zoom="0.59"\n     inkscape:cx="300"\n     inkscape:cy="200"\n     inkscape:window-x="0"\n     inkscape:window-y="0"\n     inkscape:window-maximized="0"\n     inkscape:current-layer="layer1" />\n  <metadata\n     id="metadata2994">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     id="layer1">\n    <rect\n       id="rect2997"\n       style="stroke-linejoin:miter;fill-rule:evenodd;stroke:#000000;stroke-linecap:butt;stroke-width:0.44748709px;fill:#0000ff;"\n       clip-path="none"\n       mask="none"\n       height="400"\n       width="10"\n       y="0"\n       x="0" />\n    <rect\n       id="rect3056"\n       style="stroke-linejoin:miter;fill-rule:evenodd;stroke:#000000;stroke-linecap:butt;stroke-width:0.31657982px;fill:#0000ff;"\n       clip-path="none"\n       mask="none"\n       height="10"\n       width="600"\n       y="390"\n       x="0" />\n    <rect\n       id="rect3224"\n       style="stroke-linejoin:miter;fill-rule:evenodd;stroke:#000000;stroke-linecap:butt;stroke-width:0.44748709px;fill:#0000ff;"\n       clip-path="none"\n       mask="none"\n       height="400"\n       width="10"\n       y="0"\n       x="590" />\n    <rect\n       id="rect3226"\n       style="stroke-linejoin:miter;fill-rule:evenodd;stroke:#000000;stroke-linecap:butt;stroke-width:0.31657991px;fill:#0000ff;"\n       clip-path="none"\n       mask="none"\n       height="10"\n       width="600"\n       y="0"\n       x="0" />\n    <rect\n       id="rect3003"\n       style="stroke:#424100;stroke-miterlimit:4;stroke-dasharray:none;stroke-width:1;fill:#333333;"\n       height="300"\n       width="210"\n       y="5"\n       x="5" />\n    <rect\n       id="rect3005"\n       style="stroke:#424100;stroke-miterlimit:4;stroke-dasharray:none;stroke-width:1;fill:#333333;"\n       height="155"\n       width="250"\n       y="238"\n       x="340" />\n    <rect\n       id="rect3013"\n       style="fill:#333333;stroke:#424100;stroke-width:1.26560247;stroke-miterlimit:4;stroke-dasharray:none"\n       height="197.57001"\n       width="204.85081"\n       y="63.213001"\n       x="339.70999" />\n    <circle\n       id="circle3036"\n       style="fill:#00ff00;"\n       clip-path="none"\n       mask="none"\n       transform="translate(44.223744,320.5)"\n       cy="0"\n       cx="0"\n       x="30"\n       r="15" />\n    <circle\n       id="circle3095"\n       style="fill:#00ffff;"\n       clip-path="none"\n       cx="0"\n       cy="0"\n       mask="none"\n       transform="translate(560.22374,37.15829)"\n       x="30"\n       r="15" />\n    <text\n       id="text3065"\n       style="font-size:24px;font-family:Sans;letter-spacing:0px;line-height:125%;word-spacing:0px;font-weight:normal;font-style:normal;fill:#c8b7b7;"\n       xml:space="preserve"\n       y="82"\n       x="47"><tspan\n         id="tspan3067"\n         x="47"\n         y="82">You have</tspan><tspan\n         id="tspan3069"\n         x="47"\n         y="112">no limbs...</tspan></text>\n    <text\n       id="text3071"\n       style="font-size:24px;font-family:Sans;letter-spacing:0px;line-height:125%;word-spacing:0px;font-weight:normal;font-style:normal;fill:#ac9393;"\n       xml:space="preserve"\n       y="199"\n       x="34.223743"><tspan\n         id="tspan3073"\n         x="34.223743"\n         y="199">but you need</tspan><tspan\n         id="tspan3075"\n         x="34.223743"\n         y="229">not be alone.</tspan></text>\n    <text\n       id="text3077"\n       style="font-size:24px;font-family:Sans;letter-spacing:0px;line-height:125%;word-spacing:0px;font-weight:normal;font-style:normal;fill:#ac9393;"\n       xml:space="preserve"\n       y="306.91016"\n       x="379.58398"><tspan\n         id="tspan3079"\n         x="379.58398"\n         y="306.91016">WASD or arrows,</tspan><tspan\n         id="tspan3081"\n         x="379.58398"\n         y="336.91016">it\'s up to you.</tspan></text>\n  </g>\n</svg>\n'}),define("text!data/levelMaps/2.svg",[],function(){return'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<!-- Created with Inkscape (http://www.inkscape.org/) -->\n<svg id="svg2989" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="400" width="600" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/">\n <metadata id="metadata2994">\n  <rdf:RDF>\n   <cc:Work rdf:about="">\n    <dc:format>image/svg+xml</dc:format>\n    <dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/>\n    <dc:title/>\n   </cc:Work>\n  </rdf:RDF>\n </metadata>\n <g id="layer1">\n  <rect id="rect2997" style="stroke-linejoin:miter;fill-rule:evenodd;stroke:#000000;stroke-linecap:butt;stroke-width:0.44748709px;fill:#0000ff;" clip-path="none" mask="none" height="400" width="10" y="0" x="0"/>\n  <rect id="rect3056" style="stroke-linejoin:miter;fill-rule:evenodd;stroke:#000000;stroke-linecap:butt;stroke-width:0.31657982px;fill:#0000ff;" clip-path="none" mask="none" height="10" width="600" y="390" x="0"/>\n  <rect id="rect3224" style="stroke-linejoin:miter;fill-rule:evenodd;stroke:#000000;stroke-linecap:butt;stroke-width:0.44748709px;fill:#0000ff;" clip-path="none" mask="none" height="400" width="10" y="0" x="590"/>\n  <rect id="rect3226" style="stroke-linejoin:miter;fill-rule:evenodd;stroke:#000000;stroke-linecap:butt;stroke-width:0.31657991px;fill:#0000ff;" clip-path="none" mask="none" height="10" width="600" y="0" x="0"/>\n  <circle id="circle3036" style="fill:#00ff00;" clip-path="none" mask="none" transform="translate(65.22374,65.5)" cy="0" cx="0" x="30" r="15"/>\n  <circle id="circle3095" style="fill:#00ffff;" clip-path="none" cx="0" cy="0" mask="none" transform="translate(534.22374,76.5)" x="30" r="15"/>\n  <rect id="rect3125" style="stroke:#424100;stroke-miterlimit:4;stroke-dasharray:none;stroke-width:1;fill:#666666;" height="271" width="138" y="129" x="0"/>\n  <rect id="rect3127" style="stroke:#424100;stroke-miterlimit:4;stroke-dasharray:none;stroke-width:1;fill:#666666;" height="46" width="103" y="129" x="188"/>\n  <rect id="rect3131" style="stroke:#424100;stroke-miterlimit:4;stroke-dasharray:none;stroke-width:1;fill:#666666;" height="288.5" width="142" y="128.5" x="477"/>\n  <rect id="rect3133" style="stroke:#424100;stroke-miterlimit:4;stroke-dasharray:none;stroke-width:1;fill:#666666;" height="44.5" width="90" y="128.5" x="339"/>\n  <text id="text3061" style="font-size:24px;font-family:Sans;letter-spacing:0px;line-height:125%;word-spacing:0px;font-weight:normal;font-style:normal;fill:#000000;" xml:space="preserve" y="55" x="166"><tspan id="tspan3063" x="166" y="55">Well, you clearly have</tspan><tspan id="tspan3065" x="166" y="85">a thing for shiny objects.</tspan></text>\n  <text id="text3067" style="font-size:24px;font-family:Sans;letter-spacing:0px;line-height:125%;word-spacing:0px;font-weight:normal;font-style:normal;fill:#000000;" xml:space="preserve" y="273" x="192"><tspan id="tspan3069" x="192" y="273">It&apos;s okay if you fall.</tspan><tspan id="tspan3071" x="192" y="303">There&apos;s strength</tspan><tspan id="tspan3073" x="192" y="333">in numbers.</tspan></text>\n </g>\n</svg>\n'}),define("text!data/levelMaps/3.svg",[],function(){return'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<!-- Created with Inkscape (http://www.inkscape.org/) -->\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   id="svg2989"\n   height="400"\n   width="600"\n   version="1.1"\n   inkscape:version="0.48.2 r9819"\n   sodipodi:docname="3.svg">\n  <sodipodi:namedview\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1"\n     objecttolerance="10"\n     gridtolerance="10"\n     guidetolerance="10"\n     inkscape:pageopacity="0"\n     inkscape:pageshadow="2"\n     inkscape:window-width="1142"\n     inkscape:window-height="712"\n     id="namedview3162"\n     showgrid="false"\n     inkscape:zoom="0.82967196"\n     inkscape:cx="296.50525"\n     inkscape:cy="202.32983"\n     inkscape:window-x="0"\n     inkscape:window-y="0"\n     inkscape:window-maximized="0"\n     inkscape:current-layer="svg2989" />\n  <defs\n     id="defs2991" />\n  <metadata\n     id="metadata2994">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     id="layer1">\n    <rect\n       id="rect2997"\n       style="stroke-linejoin:miter;fill-rule:evenodd;stroke:#000000;stroke-linecap:butt;stroke-width:0.44748709px;fill:#0000ff;"\n       height="400"\n       width="10"\n       y="0"\n       x="0" />\n    <rect\n       id="rect3056"\n       style="stroke-linejoin:miter;fill-rule:evenodd;stroke:#000000;stroke-linecap:butt;stroke-width:0.31657982px;fill:#0000ff;"\n       height="10"\n       width="600"\n       y="390"\n       x="0" />\n    <rect\n       id="rect3224"\n       style="stroke-linejoin:miter;fill-rule:evenodd;stroke:#000000;stroke-linecap:butt;stroke-width:0.44748709px;fill:#0000ff;"\n       height="400"\n       width="10"\n       y="0"\n       x="590" />\n    <rect\n       id="rect3226"\n       style="stroke-linejoin:miter;fill-rule:evenodd;stroke:#000000;stroke-linecap:butt;stroke-width:0.31657991px;fill:#0000ff;"\n       height="10"\n       width="600"\n       y="0"\n       x="0" />\n    <circle\n       id="circle3036"\n       style="fill:#00ff00;"\n       transform="translate(27.223744,27.5)"\n       cy="0"\n       cx="0"\n       r="15" />\n    <circle\n       id="circle3095"\n       style="fill:#00ffff;"\n       transform="translate(316.7773,183)"\n       cy="0"\n       cx="0"\n       r="15" />\n    <path\n       id="path3950"\n       d="m334.62,174.4,8.392,3.8947-0.15562,7.9732-9.778,10.02-12.147,3.691-17.318-1.1854-15.738-7.3743-10.21-9.5976-6.7341-12.246-1.4222-13.664,3.6568-13.266,9.8087-13.713,13.257-10.511,22.7-10.442,24.487-5.091,25.531,0.10018,25.018,5.0906,29.568,13.958,24.019,22.108,11.882,20.901,4.7542,23.517-3.4315,23.511-10.371,21.413-20.012,22.106-24.753,16.734-39.591,15.529-42.042,6.604-39.889-1.6883-38.869-9.1043-40.421-19.312-18.048-13.3-16.02-15.702-19.207-28.371-10.568-32.535-0.0373-32.244,9.4289-30.873,20.504-31.419,27.57-25.543,42.493-24.813,46.621-15.88,39.076-6.7098,39.624-1.377,39.459,3.9064,38.58,9.1402,27.128,10.055,25.875,12.983,24.143,15.921,21.934,18.869,28.109,34.915,10.565,19.784,7.7024,21.082,5.3662,34.066-3.1258,34.34-14.353,39.398-23.681,34.665-18.476,18.949-20.504,16.712-45.468,27.023-33.937,14.011-35.219,10.354-36.097,6.7709-36.569,3.2622-37.001-0.29413-36.807-3.8584-36.248-7.433l-35.29-11.02-30.61-13.04-29.17-16.06-27.239-19.08-24.844-22.14-32.288-40.36-12.431-22.68-9.397-24.11-7.9641-44.89"\n       style="opacity:0.98999999;stroke-linejoin:miter;stroke:#0000ff;stroke-linecap:butt;stroke-miterlimit:4;stroke-dasharray:none;stroke-width:7.45710373;fill:none;" />\n  </g>\n  <text\n     xml:space="preserve"\n     style="font-size:24px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;font-family:Sans"\n     x="20.49003"\n     y="36.000713"\n     id="text3164"\n     sodipodi:linespacing="125%"><tspan\n       sodipodi:role="line"\n       x="20.49003"\n       y="36.000713"\n       id="tspan3186">To restart a level, </tspan><tspan\n       sodipodi:role="line"\n       x="20.49003"\n       y="66.000717"\n       id="tspan3200">use \'r\'.</tspan></text>\n  <text\n     xml:space="preserve"\n     style="font-size:24px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;font-family:Sans"\n     x="422.97934"\n     y="30.411304"\n     id="text3206"\n     sodipodi:linespacing="125%"><tspan\n       sodipodi:role="line"\n       id="tspan3208"\n       x="422.97934"\n       y="30.411304">To pause, </tspan><tspan\n       sodipodi:role="line"\n       x="422.97934"\n       y="60.411304"\n       id="tspan3210">use \'p\' or \'esc\'.</tspan></text>\n</svg>\n'}),define("text!data/levelMaps/4.svg",[],function(){return'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<!-- Created with Inkscape (http://www.inkscape.org/) -->\n<svg id="svg2989" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="400" width="600" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/">\n <metadata id="metadata2994">\n  <rdf:RDF>\n   <cc:Work rdf:about="">\n    <dc:format>image/svg+xml</dc:format>\n    <dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/>\n    <dc:title/>\n   </cc:Work>\n  </rdf:RDF>\n </metadata>\n <g id="layer1">\n  <rect id="rect2997" style="stroke-linejoin:miter;fill-rule:evenodd;stroke:#000000;stroke-linecap:butt;stroke-width:0.44748709px;fill:#0000ff;" clip-path="none" mask="none" height="400" width="10" y="0" x="0"/>\n  <rect id="rect3056" style="stroke-linejoin:miter;fill-rule:evenodd;stroke:#000000;stroke-linecap:butt;stroke-width:0.31657982px;fill:#0000ff;" clip-path="none" mask="none" height="10" width="600" y="390" x="0"/>\n  <rect id="rect3224" style="stroke-linejoin:miter;fill-rule:evenodd;stroke:#000000;stroke-linecap:butt;stroke-width:0.44748709px;fill:#0000ff;" clip-path="none" mask="none" height="400" width="10" y="0" x="590"/>\n  <rect id="rect3226" style="stroke-linejoin:miter;fill-rule:evenodd;stroke:#000000;stroke-linecap:butt;stroke-width:0.31657991px;fill:#0000ff;" clip-path="none" mask="none" height="10" width="600" y="0" x="0"/>\n </g>\n <g id="layer3">\n  <circle id="circle3036" style="fill:#00ff00;" clip-path="none" mask="none" transform="translate(57.22374,91.5)" cy="0" cx="0" x="30" r="15"/>\n  <circle id="circle3095" style="fill:#00ffff;" clip-path="none" cx="0" cy="0" mask="none" transform="translate(534.22374,76.5)" x="30" r="15"/>\n  <rect id="rect3175" style="opacity:0.98999999;fill:#666666;" height="198" width="103" y="214" x="5"/>\n  <rect id="rect3945" style="opacity:0.98999999;fill:#666666;" height="196" width="142" y="214" x="504"/>\n  <path id="path3953" style="stroke-linejoin:miter;stroke:#ff00ff;stroke-linecap:butt;stroke-width:1.05216634px;fill:#ff00ff;" d="m96.052,223,416.25,0"/>\n  <rect id="rect3955" style="opacity:0.98999999;fill:#666666;" height="168" width="435" y="225" x="88"/>\n  <text id="text4058" style="font-size:24px;font-family:Sans;letter-spacing:0px;line-height:125%;word-spacing:0px;font-weight:normal;font-style:normal;fill:#000000;" xml:space="preserve" y="69" x="146"><tspan id="tspan4060" x="146" y="69">Caution: Spikes are sharp.</tspan><tspan id="tspan4072" x="146" y="99">Avoid contact with skin.</tspan></text>\n  <text id="text4081" style="font-size:24px;font-family:Sans;letter-spacing:0px;line-height:125%;word-spacing:0px;font-weight:normal;font-style:normal;fill:#000000;" xml:space="preserve" y="279" x="164"><tspan id="tspan4083" x="164" y="279">Impalement is a leading</tspan><tspan id="tspan4085" x="164" y="309">preventable cause of</tspan><tspan id="tspan4087" x="164" y="339">death for this level.</tspan></text>\n </g>\n</svg>\n'}),define("text!data/levelMaps/5.svg",[],function(){return'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<!-- Created with Inkscape (http://www.inkscape.org/) -->\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   id="svg2989"\n   height="400"\n   width="600"\n   version="1.1"\n   inkscape:version="0.48.2 r9819"\n   sodipodi:docname="5.svg">\n  <defs\n     id="defs3008" />\n  <sodipodi:namedview\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1"\n     objecttolerance="10"\n     gridtolerance="10"\n     guidetolerance="10"\n     inkscape:pageopacity="0"\n     inkscape:pageshadow="2"\n     inkscape:window-width="1420"\n     inkscape:window-height="784"\n     id="namedview3006"\n     showgrid="false"\n     inkscape:zoom="0.9375"\n     inkscape:cx="324.53333"\n     inkscape:cy="200"\n     inkscape:window-x="0"\n     inkscape:window-y="0"\n     inkscape:window-maximized="0"\n     inkscape:current-layer="svg2989" />\n  <metadata\n     id="metadata2994">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     id="layer1">\n    <rect\n       id="rect2997"\n       style="stroke-linejoin:miter;fill-rule:evenodd;stroke:#000000;stroke-linecap:butt;stroke-width:0.44748709px;fill:#0000ff;"\n       clip-path="none"\n       mask="none"\n       height="400"\n       width="10"\n       y="0"\n       x="0" />\n    <rect\n       id="rect3056"\n       style="stroke-linejoin:miter;fill-rule:evenodd;stroke:#000000;stroke-linecap:butt;stroke-width:0.31657982px;fill:#0000ff;"\n       clip-path="none"\n       mask="none"\n       height="10"\n       width="600"\n       y="390"\n       x="0" />\n    <rect\n       id="rect3224"\n       style="stroke-linejoin:miter;fill-rule:evenodd;stroke:#000000;stroke-linecap:butt;stroke-width:0.44748709px;fill:#0000ff;"\n       clip-path="none"\n       mask="none"\n       height="400"\n       width="10"\n       y="0"\n       x="590" />\n    <rect\n       id="rect3226"\n       style="stroke-linejoin:miter;fill-rule:evenodd;stroke:#000000;stroke-linecap:butt;stroke-width:0.31657991px;fill:#0000ff;"\n       clip-path="none"\n       mask="none"\n       height="10"\n       width="600"\n       y="0"\n       x="0" />\n  </g>\n  <circle\n     sodipodi:ry="15"\n     sodipodi:rx="15"\n     sodipodi:cy="0"\n     sodipodi:cx="0"\n     d="M 15,0 C 15,8.2842712 8.2842712,15 0,15 -8.2842712,15 -15,8.2842712 -15,0 c 0,-8.2842712 6.7157288,-15 15,-15 8.2842712,0 15,6.7157288 15,15 z"\n     r="15"\n     x="30"\n     cx="0"\n     cy="0"\n     transform="translate(282.2904,41.366667)"\n     mask="none"\n     clip-path="none"\n     style="fill:#00ff00"\n     id="circle3036" />\n  <circle\n     sodipodi:ry="15"\n     sodipodi:rx="15"\n     sodipodi:cy="0"\n     sodipodi:cx="0"\n     d="M 15,0 C 15,8.2842712 8.2842712,15 0,15 -8.2842712,15 -15,8.2842712 -15,0 c 0,-8.2842712 6.7157288,-15 15,-15 8.2842712,0 15,6.7157288 15,15 z"\n     r="15"\n     x="30"\n     transform="translate(294.22374,240.76666)"\n     mask="none"\n     cy="0"\n     cx="0"\n     clip-path="none"\n     style="fill:#00ffff"\n     id="circle3095" />\n  <rect\n     x="6.0666685"\n     y="281.20001"\n     width="586.20001"\n     height="112.66666"\n     style="opacity:0.98999999;fill:#666666"\n     id="rect3175" />\n  <path\n     inkscape:connector-curvature="0"\n     d="m 88.585333,279.53333 416.249997,0"\n     style="fill:#ff00ff;stroke:#ff00ff;stroke-width:1.05216634px;stroke-linecap:butt;stroke-linejoin:miter"\n     id="path3953" />\n  <rect\n     style="opacity:0.98999999;fill:#999999;fill-opacity:1;stroke:none"\n     id="rect3061"\n     width="24.533333"\n     height="72.533333"\n     x="225.06667"\n     y="60.800003" />\n  <rect\n     y="58.666668"\n     x="315.73334"\n     height="72.533333"\n     width="24.533333"\n     id="rect3831"\n     style="opacity:0.98999999;fill:#999999;fill-opacity:1;stroke:none" />\n  <rect\n     style="opacity:0.98999999;fill:#999999;fill-opacity:1;stroke:none"\n     id="rect3833"\n     width="113.06667"\n     height="33.066666"\n     x="226.13333"\n     y="100.26667" />\n  <path\n     id="path3835"\n     style="fill:#ff00ff;stroke:#ff00ff;stroke-width:1.05216634px;stroke-linecap:butt;stroke-linejoin:miter"\n     d="m 89.652,201.66666 416.25,0"\n     inkscape:connector-curvature="0" />\n  <text\n     xml:space="preserve"\n     style="font-size:24px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;font-family:Sans"\n     x="47.200001"\n     y="333.60001"\n     id="text3837"\n     sodipodi:linespacing="125%"><tspan\n       sodipodi:role="line"\n       id="tspan3839"\n       x="47.200001"\n       y="333.60001">Wow, you\'re willing to sacrifice a lot for shinies.</tspan><tspan\n       sodipodi:role="line"\n       x="47.200001"\n       y="363.60001"\n       id="tspan3841">That\'s... um... admirable... I guess...</tspan></text>\n</svg>\n'}),define("text!data/levelMaps/6.svg",[],function(){return'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<!-- Created with Inkscape (http://www.inkscape.org/) -->\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="600"\n   height="400"\n   id="svg2989"\n   version="1.1"\n   inkscape:version="0.48.2 r9819"\n   sodipodi:docname="6.svg">\n  <defs\n     id="defs2991" />\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1"\n     inkscape:cx="332.44719"\n     inkscape:cy="231.03784"\n     inkscape:current-layer="layer3"\n     inkscape:document-units="px"\n     showgrid="false"\n     inkscape:window-width="1172"\n     inkscape:window-height="690"\n     inkscape:window-x="43"\n     inkscape:window-y="45"\n     inkscape:window-maximized="0"\n     inkscape:snap-global="true"\n     inkscape:snap-bbox="false"\n     inkscape:snap-bbox-midpoints="true"\n     inkscape:bbox-paths="true"\n     inkscape:bbox-nodes="true"\n     inkscape:snap-page="true"\n     inkscape:snap-bbox-edge-midpoints="true"\n     inkscape:snap-center="true"\n     inkscape:snap-object-midpoints="true"\n     showguides="true"\n     inkscape:guide-bbox="true"\n     inkscape:snap-nodes="false" />\n  <metadata\n     id="metadata2994">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     id="layer1"\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     sodipodi:insensitive="true">\n    <rect\n       style="fill:#0000ff;fill-rule:evenodd;stroke:#000000;stroke-width:0.44748709px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       id="rect2997"\n       width="10"\n       height="400"\n       x="0"\n       y="0"\n       clip-path="none"\n       mask="none" />\n    <rect\n       style="fill:#0000ff;fill-rule:evenodd;stroke:#000000;stroke-width:0.31657982px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       id="rect3056"\n       width="600"\n       height="10"\n       x="0"\n       y="390"\n       clip-path="none"\n       mask="none" />\n    <rect\n       y="0"\n       x="590"\n       height="400"\n       width="10"\n       id="rect3224"\n       style="fill:#0000ff;fill-rule:evenodd;stroke:#000000;stroke-width:0.44748709px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       clip-path="none"\n       mask="none" />\n    <rect\n       y="0"\n       x="0"\n       height="10"\n       width="600"\n       id="rect3226"\n       style="fill:#0000ff;fill-rule:evenodd;stroke:#000000;stroke-width:0.31657991px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       clip-path="none"\n       mask="none" />\n  </g>\n  <g\n     inkscape:groupmode="layer"\n     id="layer3"\n     inkscape:label="vars">\n    <circle\n       id="circle3036"\n       x="30"\n       cx="0"\n       cy="0"\n       r="15"\n       sodipodi:cx="0"\n       sodipodi:cy="0"\n       sodipodi:rx="15"\n       sodipodi:ry="15"\n       style="fill:#00ff00"\n       mask="none"\n       clip-path="none"\n       transform="translate(26.22374,26.5)" />\n    <circle\n       transform="translate(541.22374,282.5)"\n       clip-path="none"\n       mask="none"\n       style="fill:#00ffff"\n       sodipodi:ry="15"\n       sodipodi:rx="15"\n       sodipodi:cy="0"\n       sodipodi:cx="0"\n       r="15"\n       cy="0"\n       cx="0"\n       x="30"\n       id="circle3095" />\n    <path\n       style="fill:#ff00ff;stroke:#ff00ff;stroke-width:1.05216634px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="m 589.17809,-8.126155 0,416.252305"\n       id="path3953"\n       inkscape:connector-curvature="0" />\n    <path\n       style="fill:#00ff00;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="m 7,46 79,346 -94,5 z"\n       id="path5089"\n       inkscape:connector-curvature="0" />\n    <path\n       style="fill:#00ff00;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="M 21,129 163,395 37,399 z"\n       id="path5599"\n       inkscape:connector-curvature="0" />\n    <path\n       style="fill:#00ff00;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="M 63,216 264,395 82,398 z"\n       id="path5601"\n       inkscape:connector-curvature="0" />\n    <path\n       style="fill:#00ff00;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="m 141,291 328,101 -303,2 z"\n       id="path5603"\n       inkscape:connector-curvature="0" />\n    <text\n       xml:space="preserve"\n       style="font-size:24px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;font-family:Sans"\n       x="354"\n       y="70"\n       id="text3921"\n       sodipodi:linespacing="125%"><tspan\n         sodipodi:role="line"\n         x="354"\n         y="70"\n         id="tspan3925">Think fast!</tspan></text>\n  </g>\n</svg>\n'}),define("text!data/levelMaps/7.svg",[],function(){return'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<!-- Created with Inkscape (http://www.inkscape.org/) -->\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="600"\n   height="400"\n   id="svg2989"\n   version="1.1"\n   inkscape:version="0.48.2 r9819"\n   sodipodi:docname="7.svg">\n  <defs\n     id="defs2991" />\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1"\n     inkscape:cx="269.44719"\n     inkscape:cy="232.15385"\n     inkscape:current-layer="layer3"\n     inkscape:document-units="px"\n     showgrid="false"\n     inkscape:window-width="1172"\n     inkscape:window-height="690"\n     inkscape:window-x="141"\n     inkscape:window-y="55"\n     inkscape:window-maximized="0"\n     inkscape:snap-global="true"\n     inkscape:snap-bbox="false"\n     inkscape:snap-bbox-midpoints="true"\n     inkscape:bbox-paths="true"\n     inkscape:bbox-nodes="true"\n     inkscape:snap-page="true"\n     inkscape:snap-bbox-edge-midpoints="true"\n     inkscape:snap-center="true"\n     inkscape:snap-object-midpoints="true"\n     showguides="true"\n     inkscape:guide-bbox="true"\n     inkscape:snap-nodes="false" />\n  <metadata\n     id="metadata2994">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     id="layer1"\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     sodipodi:insensitive="true">\n    <rect\n       style="fill:#0000ff;fill-rule:evenodd;stroke:#000000;stroke-width:0.44748709px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       id="rect2997"\n       width="10"\n       height="400"\n       x="0"\n       y="0"\n       clip-path="none"\n       mask="none" />\n    <rect\n       style="fill:#0000ff;fill-rule:evenodd;stroke:#000000;stroke-width:0.31657982px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       id="rect3056"\n       width="600"\n       height="10"\n       x="0"\n       y="390"\n       clip-path="none"\n       mask="none" />\n    <rect\n       y="0"\n       x="590"\n       height="400"\n       width="10"\n       id="rect3224"\n       style="fill:#0000ff;fill-rule:evenodd;stroke:#000000;stroke-width:0.44748709px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       clip-path="none"\n       mask="none" />\n    <rect\n       y="0"\n       x="0"\n       height="10"\n       width="600"\n       id="rect3226"\n       style="fill:#0000ff;fill-rule:evenodd;stroke:#000000;stroke-width:0.31657991px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       clip-path="none"\n       mask="none" />\n  </g>\n  <g\n     inkscape:groupmode="layer"\n     id="layer3"\n     inkscape:label="vars">\n    <rect\n       style="opacity:0.98999999;fill:#ff0000;fill-opacity:1;stroke:none"\n       id="rect4810"\n       width="418"\n       height="44"\n       x="88"\n       y="352" />\n    <circle\n       id="circle3036"\n       x="30"\n       cx="0"\n       cy="0"\n       r="15"\n       sodipodi:cx="0"\n       sodipodi:cy="0"\n       sodipodi:rx="15"\n       sodipodi:ry="15"\n       style="fill:#00ff00"\n       mask="none"\n       clip-path="none"\n       transform="translate(42.22374,303.5)" />\n    <circle\n       transform="translate(567.22374,54.5)"\n       clip-path="none"\n       mask="none"\n       style="fill:#00ffff"\n       sodipodi:ry="15"\n       sodipodi:rx="15"\n       sodipodi:cy="0"\n       sodipodi:cx="0"\n       r="15"\n       cy="0"\n       cx="0"\n       x="30"\n       id="circle3095" />\n    <rect\n       style="opacity:0.98999999;fill:#000080;fill-opacity:1;stroke:none"\n       id="rect4788"\n       width="90"\n       height="64"\n       x="6"\n       y="330" />\n    <rect\n       style="opacity:0.98999999;fill:#000080;fill-opacity:1;stroke:none"\n       id="rect4790"\n       width="104"\n       height="316"\n       x="491"\n       y="78" />\n    <rect\n       style="opacity:0.98999999;fill:#000080;fill-opacity:1;stroke:none"\n       id="mover3"\n       width="118"\n       height="23"\n       x="367"\n       y="50"\n       inkscape:label="mover" />\n    <rect\n       y="51"\n       x="100"\n       height="23"\n       width="118"\n       id="mover1"\n       style="opacity:0.98999999;fill:#000080;fill-opacity:1;stroke:none"\n       inkscape:label="mover" />\n    <rect\n       style="opacity:0.98999999;fill:#000080;fill-opacity:1;stroke:none"\n       id="mover2"\n       width="118"\n       height="23"\n       x="229"\n       y="321"\n       inkscape:label="mover" />\n    <text\n       xml:space="preserve"\n       style="font-size:24px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;font-family:Sans"\n       x="22"\n       y="39"\n       id="text4036"\n       sodipodi:linespacing="125%"><tspan\n         sodipodi:role="line"\n         id="tspan4038"\n         x="22"\n         y="39">Lava: Like spikes,</tspan><tspan\n         sodipodi:role="line"\n         x="22"\n         y="69"\n         id="tspan4040">... but warmer.</tspan></text>\n  </g>\n</svg>\n'}),define("text!data/levelMaps/8.svg",[],function(){return'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<!-- Created with Inkscape (http://www.inkscape.org/) -->\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   id="svg2989"\n   height="400"\n   width="600"\n   version="1.1"\n   inkscape:version="0.48.2 r9819"\n   sodipodi:docname="8.svg">\n  <defs\n     id="defs3008" />\n  <sodipodi:namedview\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1"\n     objecttolerance="10"\n     gridtolerance="10"\n     guidetolerance="10"\n     inkscape:pageopacity="0"\n     inkscape:pageshadow="2"\n     inkscape:window-width="1420"\n     inkscape:window-height="784"\n     id="namedview3006"\n     showgrid="false"\n     inkscape:zoom="0.70710678"\n     inkscape:cx="360.54315"\n     inkscape:cy="163.43413"\n     inkscape:window-x="0"\n     inkscape:window-y="0"\n     inkscape:window-maximized="0"\n     inkscape:current-layer="svg2989" />\n  <metadata\n     id="metadata2994">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title></dc:title>\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     id="layer1">\n    <rect\n       id="rect2997"\n       style="stroke-linejoin:miter;fill-rule:evenodd;stroke:#000000;stroke-linecap:butt;stroke-width:0.44748709px;fill:#0000ff;"\n       clip-path="none"\n       mask="none"\n       height="400"\n       width="10"\n       y="0"\n       x="0" />\n    <rect\n       id="rect3056"\n       style="stroke-linejoin:miter;fill-rule:evenodd;stroke:#000000;stroke-linecap:butt;stroke-width:0.31657982px;fill:#0000ff;"\n       clip-path="none"\n       mask="none"\n       height="10"\n       width="600"\n       y="390"\n       x="0" />\n    <rect\n       id="rect3224"\n       style="stroke-linejoin:miter;fill-rule:evenodd;stroke:#000000;stroke-linecap:butt;stroke-width:0.44748709px;fill:#0000ff;"\n       clip-path="none"\n       mask="none"\n       height="400"\n       width="10"\n       y="0"\n       x="590" />\n    <rect\n       id="rect3226"\n       style="stroke-linejoin:miter;fill-rule:evenodd;stroke:#000000;stroke-linecap:butt;stroke-width:0.31657991px;fill:#0000ff;"\n       clip-path="none"\n       mask="none"\n       height="10"\n       width="600"\n       y="0"\n       x="0" />\n  </g>\n  <circle\n     sodipodi:ry="15"\n     sodipodi:rx="15"\n     sodipodi:cy="0"\n     sodipodi:cx="0"\n     d="M 15,0 C 15,8.2842712 8.2842712,15 0,15 -8.2842712,15 -15,8.2842712 -15,0 c 0,-8.2842712 6.7157288,-15 15,-15 8.2842712,0 15,6.7157288 15,15 z"\n     r="15"\n     x="30"\n     cx="0"\n     cy="0"\n     transform="translate(109.75634,290.26825)"\n     mask="none"\n     clip-path="none"\n     style="fill:#00ff00"\n     id="circle3036" />\n  <circle\n     sodipodi:ry="15"\n     sodipodi:rx="15"\n     sodipodi:cy="0"\n     sodipodi:cx="0"\n     d="M 15,0 C 15,8.2842712 8.2842712,15 0,15 -8.2842712,15 -15,8.2842712 -15,0 c 0,-8.2842712 6.7157288,-15 15,-15 8.2842712,0 15,6.7157288 15,15 z"\n     r="15"\n     x="30"\n     transform="translate(109.66887,42.776766)"\n     mask="none"\n     cy="0"\n     cx="0"\n     clip-path="none"\n     style="fill:#00ffff;stroke:none"\n     id="circle3095" />\n  <rect\n     x="48.493076"\n     y="309.65247"\n     width="114.73335"\n     height="82.799988"\n     style="opacity:0.98999999;fill:#666666"\n     id="rect3175" />\n  <rect\n     style="opacity:0.98999999;fill:#ff0000;fill-opacity:1;stroke:none"\n     id="rect4126"\n     width="589.93707"\n     height="31.149574"\n     x="6.3295827"\n     y="363.51712" />\n  <text\n     xml:space="preserve"\n     style="font-size:24px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;font-family:Sans"\n     x="186.67618"\n     y="65.538498"\n     id="text4175"\n     sodipodi:linespacing="125%"><tspan\n       sodipodi:role="line"\n       x="186.67618"\n       y="65.538498"\n       id="tspan4183">Aren\'t you ever scared...</tspan><tspan\n       sodipodi:role="line"\n       x="186.67618"\n       y="95.538498"\n       id="tspan4199" /><tspan\n       sodipodi:role="line"\n       x="186.67618"\n       y="125.5385"\n       id="tspan4187">that the clones you sacrificed...</tspan><tspan\n       sodipodi:role="line"\n       x="186.67618"\n       y="155.5385"\n       id="tspan4201" /><tspan\n       sodipodi:role="line"\n       x="186.67618"\n       y="185.5385"\n       id="tspan4189">would come back to haunt you?</tspan></text>\n  <text\n     xml:space="preserve"\n     style="font-size:24px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;font-family:Sans"\n     x="207.1823"\n     y="297.46954"\n     id="text4191"\n     sodipodi:linespacing="125%"><tspan\n       sodipodi:role="line"\n       id="tspan4193"\n       x="207.1823"\n       y="297.46954">No, I guess that\'d be silly...</tspan></text>\n</svg>\n'}),define("text!data/levelMaps/9.svg",[],function(){return'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<!-- Created with Inkscape (http://www.inkscape.org/) -->\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="600"\n   height="400"\n   id="svg2989"\n   version="1.1"\n   inkscape:version="0.48.2 r9819"\n   sodipodi:docname="9.svg">\n  <defs\n     id="defs2991" />\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1"\n     inkscape:cx="269.44719"\n     inkscape:cy="231.03784"\n     inkscape:current-layer="layer3"\n     inkscape:document-units="px"\n     showgrid="false"\n     inkscape:window-width="1172"\n     inkscape:window-height="690"\n     inkscape:window-x="20"\n     inkscape:window-y="20"\n     inkscape:window-maximized="0"\n     inkscape:snap-global="true"\n     inkscape:snap-bbox="false"\n     inkscape:snap-bbox-midpoints="true"\n     inkscape:bbox-paths="true"\n     inkscape:bbox-nodes="true"\n     inkscape:snap-page="true"\n     inkscape:snap-bbox-edge-midpoints="true"\n     inkscape:snap-center="true"\n     inkscape:snap-object-midpoints="true"\n     showguides="true"\n     inkscape:guide-bbox="true"\n     inkscape:snap-nodes="false" />\n  <metadata\n     id="metadata2994">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     id="layer1"\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     sodipodi:insensitive="true">\n    <rect\n       style="fill:#0000ff;fill-rule:evenodd;stroke:#000000;stroke-width:0.44748709px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       id="rect2997"\n       width="10"\n       height="400"\n       x="0"\n       y="0"\n       clip-path="none"\n       mask="none" />\n    <rect\n       style="fill:#0000ff;fill-rule:evenodd;stroke:#000000;stroke-width:0.31657982px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       id="rect3056"\n       width="600"\n       height="10"\n       x="0"\n       y="390"\n       clip-path="none"\n       mask="none" />\n    <rect\n       y="0"\n       x="590"\n       height="400"\n       width="10"\n       id="rect3224"\n       style="fill:#0000ff;fill-rule:evenodd;stroke:#000000;stroke-width:0.44748709px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       clip-path="none"\n       mask="none" />\n    <rect\n       y="0"\n       x="0"\n       height="10"\n       width="600"\n       id="rect3226"\n       style="fill:#0000ff;fill-rule:evenodd;stroke:#000000;stroke-width:0.31657991px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       clip-path="none"\n       mask="none" />\n  </g>\n  <g\n     inkscape:groupmode="layer"\n     id="layer3"\n     inkscape:label="vars">\n    <circle\n       id="circle3036"\n       x="30"\n       cx="0"\n       cy="0"\n       r="15"\n       sodipodi:cx="0"\n       sodipodi:cy="0"\n       sodipodi:rx="15"\n       sodipodi:ry="15"\n       style="fill:#00ff00"\n       mask="none"\n       clip-path="none"\n       transform="translate(26.22374,354.5)" />\n    <circle\n       transform="translate(548.22374,363.5)"\n       clip-path="none"\n       mask="none"\n       style="fill:#00ffff"\n       sodipodi:ry="15"\n       sodipodi:rx="15"\n       sodipodi:cy="0"\n       sodipodi:cx="0"\n       r="15"\n       cy="0"\n       cx="0"\n       x="30"\n       id="circle3095" />\n    <circle\n       id="circle4759"\n       x="30"\n       cx="0"\n       cy="0"\n       r="15"\n       sodipodi:cx="0"\n       sodipodi:cy="0"\n       sodipodi:rx="15"\n       sodipodi:ry="15"\n       style="fill:#ff0000"\n       mask="none"\n       clip-path="none"\n       transform="translate(503.22374,362.5)" />\n    <text\n       xml:space="preserve"\n       style="font-size:24px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;font-family:Sans"\n       x="171"\n       y="43"\n       id="text5020"\n       sodipodi:linespacing="125%"><tspan\n         sodipodi:role="line"\n         id="tspan5022"\n         x="171"\n         y="43">IT\'S THE GHOST OF CLONES PAST!</tspan><tspan\n         sodipodi:role="line"\n         x="171"\n         y="73"\n         id="tspan5026">AND IT THIRSTS FOR VENGEANCE!</tspan></text>\n    <text\n       xml:space="preserve"\n       style="font-size:24px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;font-family:Sans"\n       x="236"\n       y="132"\n       id="text5030"\n       sodipodi:linespacing="125%"><tspan\n         sodipodi:role="line"\n         id="tspan5032"\n         x="236"\n         y="132">... I mean, I\'m just assuming.</tspan><tspan\n         sodipodi:role="line"\n         x="236"\n         y="162"\n         id="tspan5034">Maybe it just wants a hug?</tspan></text>\n    <text\n       xml:space="preserve"\n       style="font-size:24px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;font-family:Sans"\n       x="216"\n       y="221"\n       id="text5036"\n       sodipodi:linespacing="125%"><tspan\n         sodipodi:role="line"\n         id="tspan5038"\n         x="216"\n         y="221">Oh right, you have no limbs.</tspan><tspan\n         sodipodi:role="line"\n         x="216"\n         y="251"\n         id="tspan5040">It\'s likely trying to kill you, then.</tspan></text>\n  </g>\n</svg>\n'}),define("text!data/levelMaps/10.svg",[],function(){return'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<!-- Created with Inkscape (http://www.inkscape.org/) -->\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   id="svg2989"\n   height="400"\n   width="600"\n   version="1.1"\n   inkscape:version="0.48.2 r9819"\n   sodipodi:docname="10.svg">\n  <defs\n     id="defs3008" />\n  <sodipodi:namedview\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1"\n     objecttolerance="10"\n     gridtolerance="10"\n     guidetolerance="10"\n     inkscape:pageopacity="0"\n     inkscape:pageshadow="2"\n     inkscape:window-width="1420"\n     inkscape:window-height="784"\n     id="namedview3006"\n     showgrid="false"\n     inkscape:zoom="0.93"\n     inkscape:cx="247.69389"\n     inkscape:cy="162.2627"\n     inkscape:window-x="0"\n     inkscape:window-y="0"\n     inkscape:window-maximized="0"\n     inkscape:current-layer="svg2989" />\n  <metadata\n     id="metadata2994">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <rect\n     x="0"\n     y="0"\n     width="10"\n     height="400"\n     mask="none"\n     clip-path="none"\n     style="fill:#0000ff;fill-rule:evenodd;stroke:#000000;stroke-width:0.44748709px;stroke-linecap:butt;stroke-linejoin:miter"\n     id="rect2997" />\n  <rect\n     x="48.003448"\n     y="390"\n     width="551.99652"\n     height="10"\n     mask="none"\n     clip-path="none"\n     style="fill:#0000ff;fill-rule:evenodd;stroke:#000000;stroke-width:0.30365175px;stroke-linecap:butt;stroke-linejoin:miter"\n     id="rect3056" />\n  <rect\n     x="590"\n     y="0"\n     width="10"\n     height="400"\n     mask="none"\n     clip-path="none"\n     style="fill:#0000ff;fill-rule:evenodd;stroke:#000000;stroke-width:0.44748709px;stroke-linecap:butt;stroke-linejoin:miter"\n     id="rect3224" />\n  <rect\n     x="0"\n     y="0"\n     width="600"\n     height="10"\n     mask="none"\n     clip-path="none"\n     style="fill:#0000ff;fill-rule:evenodd;stroke:#000000;stroke-width:0.31657991px;stroke-linecap:butt;stroke-linejoin:miter"\n     id="rect3226" />\n  <circle\n     sodipodi:ry="15"\n     sodipodi:rx="15"\n     sodipodi:cy="0"\n     sodipodi:cx="0"\n     d="M 15,0 C 15,8.2842712 8.2842712,15 0,15 -8.2842712,15 -15,8.2842712 -15,0 c 0,-8.2842712 6.7157288,-15 15,-15 8.2842712,0 15,6.7157288 15,15 z"\n     r="15"\n     x="30"\n     cx="0"\n     cy="0"\n     transform="translate(100.58759,372.20474)"\n     mask="none"\n     clip-path="none"\n     style="fill:#00ff00"\n     id="circle3036" />\n  <circle\n     sodipodi:ry="15"\n     sodipodi:rx="15"\n     sodipodi:cy="0"\n     sodipodi:cx="0"\n     d="M 15,0 C 15,8.2842712 8.2842712,15 0,15 -8.2842712,15 -15,8.2842712 -15,0 c 0,-8.2842712 6.7157288,-15 15,-15 8.2842712,0 15,6.7157288 15,15 z"\n     r="15"\n     x="30"\n     transform="translate(559.38878,37.119912)"\n     mask="none"\n     cy="0"\n     cx="0"\n     clip-path="none"\n     style="fill:#00ffff;stroke:none"\n     id="circle3095" />\n  <rect\n     id="rect5042"\n     style="opacity:0.98999999;fill:#666666"\n     height="132.29745"\n     width="476.77203"\n     y="60.650383"\n     x="123.44639" />\n  <rect\n     style="opacity:0.98999999;fill:#ff0000;fill-opacity:1;stroke:none"\n     id="rect5101"\n     width="59.396973"\n     height="19.798994"\n     x="-2.8700562"\n     y="397.1716" />\n  <text\n     xml:space="preserve"\n     style="font-size:24px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;font-family:Sans"\n     x="42.325901"\n     y="299.83347"\n     id="text5107"\n     sodipodi:linespacing="125%"><tspan\n       sodipodi:role="line"\n       id="tspan5109"\n       x="42.325901"\n       y="299.83347">RUN RUN RUN RUN RUN RUN RUN</tspan></text>\n  <text\n     xml:space="preserve"\n     style="font-size:24px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;font-family:Sans"\n     x="171.11984"\n     y="133.50043"\n     id="text5111"\n     sodipodi:linespacing="125%"><tspan\n       sodipodi:role="line"\n       id="tspan5113"\n       x="171.11984"\n       y="133.50043">AAAAAAAAAAAAAAAAAAAAAAHHHHHHHHH</tspan></text>\n  <rect\n     id="rect5115"\n     style="opacity:0.98999999;fill:#666666"\n     height="160.58174"\n     width="35.537399"\n     y="234.356"\n     x="515.18359" />\n  <rect\n     x="546.29626"\n     y="262.64029"\n     width="118.976"\n     height="133.71169"\n     style="opacity:0.98999999;fill:#666666"\n     id="rect5117" />\n  <rect\n     y="235.95125"\n     x="545.84479"\n     height="46.669048"\n     width="59.396973"\n     id="rect5130"\n     style="opacity:0.98999999;fill:#ff0000;fill-opacity:1;stroke:none" />\n  <rect\n     x="53.729687"\n     y="59.537678"\n     width="35.537399"\n     height="178.80602"\n     style="opacity:0.98999999;fill:#666666"\n     id="rect5132" />\n  <rect\n     id="rect5134"\n     style="opacity:0.98999999;fill:#666666"\n     height="148.88651"\n     width="49.679535"\n     y="91.031921"\n     x="6.8423538" />\n  <rect\n     style="opacity:0.98999999;fill:#ff0000;fill-opacity:1;stroke:none"\n     id="rect5136"\n     width="59.396973"\n     height="51.965477"\n     x="-5.6091232"\n     y="61.313965" />\n  <circle\n     id="circle5138"\n     style="fill:#ff0000"\n     clip-path="none"\n     mask="none"\n     transform="translate(16.112473,344.99015)"\n     cy="0"\n     cx="0"\n     x="30"\n     r="15"\n     d="M 15,0 C 15,8.2842712 8.2842712,15 0,15 -8.2842712,15 -15,8.2842712 -15,0 c 0,-8.2842712 6.7157288,-15 15,-15 8.2842712,0 15,6.7157288 15,15 z"\n     sodipodi:cx="0"\n     sodipodi:cy="0"\n     sodipodi:rx="15"\n     sodipodi:ry="15" />\n  <circle\n     sodipodi:ry="15"\n     sodipodi:rx="15"\n     sodipodi:cy="0"\n     sodipodi:cx="0"\n     d="M 15,0 C 15,8.2842712 8.2842712,15 0,15 -8.2842712,15 -15,8.2842712 -15,0 c 0,-8.2842712 6.7157288,-15 15,-15 8.2842712,0 15,6.7157288 15,15 z"\n     r="15"\n     x="30"\n     cx="0"\n     cy="0"\n     transform="translate(361.70297,31.718207)"\n     mask="none"\n     clip-path="none"\n     style="fill:#ff0000"\n     id="circle5140" />\n  <rect\n     x="1.6399367"\n     y="236.37082"\n     width="476.77203"\n     height="119.39422"\n     style="opacity:0.98999999;fill:#666666"\n     id="rect3021" />\n</svg>\n'}),define("text!data/levelMaps/11.svg",[],function(){return'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<!-- Created with Inkscape (http://www.inkscape.org/) -->\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="600"\n   height="400"\n   id="svg2989"\n   version="1.1"\n   inkscape:version="0.48.2 r9819"\n   sodipodi:docname="11.svg">\n  <defs\n     id="defs2991" />\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1"\n     inkscape:cx="277.57759"\n     inkscape:cy="202.6198"\n     inkscape:current-layer="layer3"\n     inkscape:document-units="px"\n     showgrid="false"\n     inkscape:window-width="1172"\n     inkscape:window-height="690"\n     inkscape:window-x="20"\n     inkscape:window-y="20"\n     inkscape:window-maximized="0"\n     inkscape:snap-global="true"\n     inkscape:snap-bbox="false"\n     inkscape:snap-bbox-midpoints="true"\n     inkscape:bbox-paths="true"\n     inkscape:bbox-nodes="true"\n     inkscape:snap-page="true"\n     inkscape:snap-bbox-edge-midpoints="true"\n     inkscape:snap-center="true"\n     inkscape:snap-object-midpoints="true"\n     showguides="true"\n     inkscape:guide-bbox="true"\n     inkscape:snap-nodes="false" />\n  <metadata\n     id="metadata2994">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title></dc:title>\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     id="layer1"\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     sodipodi:insensitive="true">\n    <rect\n       style="fill:#0000ff;fill-rule:evenodd;stroke:#000000;stroke-width:0.44748709px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       id="rect2997"\n       width="10"\n       height="400"\n       x="0"\n       y="0"\n       clip-path="none"\n       mask="none" />\n    <rect\n       style="fill:#0000ff;fill-rule:evenodd;stroke:#000000;stroke-width:0.31657982px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       id="rect3056"\n       width="600"\n       height="10"\n       x="0"\n       y="390"\n       clip-path="none"\n       mask="none" />\n    <rect\n       y="0"\n       x="590"\n       height="400"\n       width="10"\n       id="rect3224"\n       style="fill:#0000ff;fill-rule:evenodd;stroke:#000000;stroke-width:0.44748709px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       clip-path="none"\n       mask="none" />\n    <rect\n       y="0"\n       x="0"\n       height="10"\n       width="600"\n       id="rect3226"\n       style="fill:#0000ff;fill-rule:evenodd;stroke:#000000;stroke-width:0.31657991px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       clip-path="none"\n       mask="none" />\n  </g>\n  <g\n     inkscape:groupmode="layer"\n     id="layer3"\n     inkscape:label="vars">\n    <circle\n       id="circle3036"\n       x="30"\n       cx="0"\n       cy="0"\n       r="15"\n       sodipodi:cx="0"\n       sodipodi:cy="0"\n       sodipodi:rx="15"\n       sodipodi:ry="15"\n       style="fill:#00ff00"\n       mask="none"\n       clip-path="none"\n       transform="translate(221.99834,371.85891)" />\n    <circle\n       transform="translate(28.28261,368.79111)"\n       clip-path="none"\n       mask="none"\n       style="fill:#00ffff"\n       sodipodi:ry="15"\n       sodipodi:rx="15"\n       sodipodi:cy="0"\n       sodipodi:cx="0"\n       r="15"\n       cy="0"\n       cx="0"\n       x="30"\n       id="circle3095" />\n    <rect\n       style="opacity:0.98999999;fill:#666666;fill-opacity:1;stroke:none"\n       id="rect3071"\n       width="81"\n       height="30"\n       x="121.7"\n       y="362" />\n    <rect\n       y="362"\n       x="382"\n       height="30"\n       width="81"\n       id="rect3852"\n       style="opacity:0.98999999;fill:#666666;fill-opacity:1;stroke:none" />\n    <rect\n       y="333.00864"\n       x="105.7"\n       height="30"\n       width="81"\n       id="rect3858"\n       style="opacity:0.98999999;fill:#666666;fill-opacity:1;stroke:none" />\n    <rect\n       style="opacity:0.98999999;fill:#666666;fill-opacity:1;stroke:none"\n       id="rect3860"\n       width="81"\n       height="30"\n       x="396.17874"\n       y="333.36218" />\n    <rect\n       y="303.36218"\n       x="410.17874"\n       height="30"\n       width="81"\n       id="rect3862"\n       style="opacity:0.98999999;fill:#666666;fill-opacity:1;stroke:none" />\n    <rect\n       style="opacity:0.98999999;fill:#666666;fill-opacity:1;stroke:none"\n       id="rect3864"\n       width="81"\n       height="30"\n       x="91.699997"\n       y="303.00864" />\n    <text\n       xml:space="preserve"\n       style="font-size:24px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;font-family:Sans"\n       x="123"\n       y="59"\n       id="text3921"\n       sodipodi:linespacing="125%"><tspan\n         sodipodi:role="line"\n         id="tspan3923"\n         x="123"\n         y="59">For your own safety, I\'m limiting</tspan><tspan\n         sodipodi:role="line"\n         x="123"\n         y="89"\n         id="tspan3925">how many times you can clone.</tspan></text>\n    <text\n       xml:space="preserve"\n       style="font-size:24px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;font-family:Sans"\n       x="66"\n       y="165"\n       id="text3931"\n       sodipodi:linespacing="125%"><tspan\n         sodipodi:role="line"\n         x="66"\n         y="165"\n         id="tspan3935">Remember, you can always hit \'r\' to restart.</tspan></text>\n  </g>\n</svg>\n'}),define("text!data/levelMaps/12.svg",[],function(){return'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<!-- Created with Inkscape (http://www.inkscape.org/) -->\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="600"\n   height="400"\n   id="svg2989"\n   version="1.1"\n   inkscape:version="0.48.2 r9819"\n   sodipodi:docname="12.svg">\n  <defs\n     id="defs2991" />\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1"\n     inkscape:cx="300.57759"\n     inkscape:cy="202.6198"\n     inkscape:current-layer="layer3"\n     inkscape:document-units="px"\n     showgrid="false"\n     inkscape:window-width="1172"\n     inkscape:window-height="690"\n     inkscape:window-x="20"\n     inkscape:window-y="20"\n     inkscape:window-maximized="0"\n     inkscape:snap-global="true"\n     inkscape:snap-bbox="false"\n     inkscape:snap-bbox-midpoints="true"\n     inkscape:bbox-paths="true"\n     inkscape:bbox-nodes="true"\n     inkscape:snap-page="true"\n     inkscape:snap-bbox-edge-midpoints="true"\n     inkscape:snap-center="true"\n     inkscape:snap-object-midpoints="true"\n     showguides="true"\n     inkscape:guide-bbox="true"\n     inkscape:snap-nodes="false" />\n  <metadata\n     id="metadata2994">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     id="layer1"\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     sodipodi:insensitive="true">\n    <rect\n       style="fill:#0000ff;fill-rule:evenodd;stroke:#000000;stroke-width:0.44748709px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       id="rect2997"\n       width="10"\n       height="400"\n       x="0"\n       y="0"\n       clip-path="none"\n       mask="none" />\n    <rect\n       style="fill:#0000ff;fill-rule:evenodd;stroke:#000000;stroke-width:0.31657982px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       id="rect3056"\n       width="600"\n       height="10"\n       x="0"\n       y="390"\n       clip-path="none"\n       mask="none" />\n    <rect\n       y="0"\n       x="590"\n       height="400"\n       width="10"\n       id="rect3224"\n       style="fill:#0000ff;fill-rule:evenodd;stroke:#000000;stroke-width:0.44748709px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       clip-path="none"\n       mask="none" />\n    <rect\n       y="0"\n       x="0"\n       height="10"\n       width="600"\n       id="rect3226"\n       style="fill:#0000ff;fill-rule:evenodd;stroke:#000000;stroke-width:0.31657991px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       clip-path="none"\n       mask="none" />\n  </g>\n  <g\n     inkscape:groupmode="layer"\n     id="layer3"\n     inkscape:label="vars">\n    <path\n       inkscape:connector-curvature="0"\n       id="path4680"\n       d="M 449.88557,7.380972 629.34199,-41.44684 629.12385,122.10114 449.66743,170.92888 z"\n       style="fill:#00ff00;stroke:#000000;stroke-width:1.48664021px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" />\n    <path\n       style="fill:#00ff00;stroke:#000000;stroke-width:1.99664402px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="m 420.28255,125.06324 193.74995,1.27011 -19.30564,273.01922 -193.74993,-1.27025 z"\n       id="path4682"\n       inkscape:connector-curvature="0" />\n    <circle\n       id="circle3036"\n       x="30"\n       cx="0"\n       cy="0"\n       r="15"\n       sodipodi:cx="0"\n       sodipodi:cy="0"\n       sodipodi:rx="15"\n       sodipodi:ry="15"\n       style="fill:#00ff00"\n       mask="none"\n       clip-path="none"\n       transform="translate(117.99834,24.85891)" />\n    <circle\n       transform="translate(158.28261,363.79111)"\n       clip-path="none"\n       mask="none"\n       style="fill:#00ffff"\n       sodipodi:ry="15"\n       sodipodi:rx="15"\n       sodipodi:cy="0"\n       sodipodi:cx="0"\n       r="15"\n       cy="0"\n       cx="0"\n       x="30"\n       id="circle3095" />\n    <path\n       style="fill:#00ff00;stroke:#000000;stroke-width:0.45278233px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="M 66.887124,66.454513 377.12997,72.947438 377.00164,81.71702 66.758798,75.224091 z"\n       id="path3872"\n       inkscape:connector-curvature="0" />\n    <path\n       inkscape:connector-curvature="0"\n       id="path3896"\n       d="M 69.718536,173.36179 589.93527,98.895694 592.3631,107.80974 72.146366,182.27583 z"\n       style="fill:#00ff00;stroke:#000000;stroke-width:0.60244489px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" />\n    <path\n       inkscape:connector-curvature="0"\n       id="path3898"\n       d="M 4.6294562,224.10579 275.63053,259.35691 274.59389,268.06574 3.5928189,232.81462 z"\n       style="fill:#00ff00;stroke:#000000;stroke-width:0.42489782px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" />\n    <path\n       inkscape:connector-curvature="0"\n       id="path3900"\n       d="M 71.283503,-17.384809 125.41166,72.92044 120.52287,73.73361 66.394714,-16.571633 z"\n       style="fill:#00ff00;stroke:#000000;stroke-width:0.19123925px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" />\n    <path\n       style="fill:none;stroke:#ff00ff;stroke-width:1.11997485px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="M 449,18.126437 449,126"\n       id="path4152"\n       inkscape:connector-curvature="0" />\n    <path\n       inkscape:connector-curvature="0"\n       id="path4662"\n       d="m 302.34267,388.06322 -29.27945,0"\n       style="fill:none;stroke:#ff00ff;stroke-width:0.58348835px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" />\n    <path\n       style="fill:#00ff00;stroke:#000000;stroke-width:0.33491629px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="M 316.02137,366.08153 447.48192,240.14665 449.785,249.26727 318.32447,375.20215 z"\n       id="path4664"\n       inkscape:connector-curvature="0" />\n    <path\n       inkscape:connector-curvature="0"\n       id="path4666"\n       d="M 12,116.12644 12,224"\n       style="fill:none;stroke:#ff00ff;stroke-width:1.11997485px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" />\n    <path\n       inkscape:connector-curvature="0"\n       id="path4678"\n       d="m 381.38246,305.83447 -37.92643,-163.60697 8.96788,2.60984 37.92644,163.60694 z"\n       style="fill:#00ff00;stroke:#000000;stroke-width:0.32104203px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" />\n    <path\n       style="fill:#00ff00;stroke:#000000;stroke-width:1.80763924px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="M 349.87801,140.95541 500.14125,106.6879 541.13143,386.01267 390.86817,420.28006 z"\n       id="path4684"\n       inkscape:connector-curvature="0" />\n    <text\n       xml:space="preserve"\n       style="font-size:24px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;font-family:Sans"\n       x="405"\n       y="181"\n       id="text4668"\n       sodipodi:linespacing="125%"><tspan\n         sodipodi:role="line"\n         id="tspan4670"\n         x="405"\n         y="181">So what\'s with</tspan><tspan\n         sodipodi:role="line"\n         x="405"\n         y="211"\n         id="tspan4672">that pained</tspan><tspan\n         sodipodi:role="line"\n         x="405"\n         y="241"\n         id="tspan4674">expression</tspan><tspan\n         sodipodi:role="line"\n         x="405"\n         y="271"\n         id="tspan4676">on your face?</tspan></text>\n  </g>\n</svg>\n'}),define("text!data/levelMaps/13.svg",[],function(){return'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<!-- Created with Inkscape (http://www.inkscape.org/) -->\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="600"\n   height="400"\n   id="svg2989"\n   version="1.1"\n   inkscape:version="0.48.2 r9819"\n   sodipodi:docname="13.svg">\n  <defs\n     id="defs2991" />\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1"\n     inkscape:cx="300.57759"\n     inkscape:cy="198.25073"\n     inkscape:current-layer="layer3"\n     inkscape:document-units="px"\n     showgrid="false"\n     inkscape:window-width="1172"\n     inkscape:window-height="690"\n     inkscape:window-x="20"\n     inkscape:window-y="20"\n     inkscape:window-maximized="0"\n     inkscape:snap-global="true"\n     inkscape:snap-bbox="false"\n     inkscape:snap-bbox-midpoints="true"\n     inkscape:bbox-paths="true"\n     inkscape:bbox-nodes="true"\n     inkscape:snap-page="true"\n     inkscape:snap-bbox-edge-midpoints="true"\n     inkscape:snap-center="true"\n     inkscape:snap-object-midpoints="true"\n     showguides="true"\n     inkscape:guide-bbox="true"\n     inkscape:snap-nodes="false" />\n  <metadata\n     id="metadata2994">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title></dc:title>\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     id="layer1"\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     sodipodi:insensitive="true">\n    <rect\n       style="fill:#0000ff;fill-rule:evenodd;stroke:#000000;stroke-width:0.44748709px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       id="rect2997"\n       width="10"\n       height="400"\n       x="0"\n       y="0"\n       clip-path="none"\n       mask="none" />\n    <rect\n       style="fill:#0000ff;fill-rule:evenodd;stroke:#000000;stroke-width:0.31657982px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       id="rect3056"\n       width="600"\n       height="10"\n       x="0"\n       y="390"\n       clip-path="none"\n       mask="none" />\n    <rect\n       y="0"\n       x="590"\n       height="400"\n       width="10"\n       id="rect3224"\n       style="fill:#0000ff;fill-rule:evenodd;stroke:#000000;stroke-width:0.44748709px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       clip-path="none"\n       mask="none" />\n    <rect\n       y="0"\n       x="0"\n       height="10"\n       width="600"\n       id="rect3226"\n       style="fill:#0000ff;fill-rule:evenodd;stroke:#000000;stroke-width:0.31657991px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       clip-path="none"\n       mask="none" />\n  </g>\n  <g\n     inkscape:groupmode="layer"\n     id="layer3"\n     inkscape:label="vars">\n    <circle\n       id="circle3036"\n       x="30"\n       cx="0"\n       cy="0"\n       r="15"\n       sodipodi:cx="0"\n       sodipodi:cy="0"\n       sodipodi:rx="15"\n       sodipodi:ry="15"\n       style="fill:#00ff00"\n       mask="none"\n       clip-path="none"\n       transform="translate(96.99834,29.85891)" />\n    <circle\n       transform="translate(559.28261,198.79111)"\n       clip-path="none"\n       mask="none"\n       style="fill:#00ffff"\n       sodipodi:ry="15"\n       sodipodi:rx="15"\n       sodipodi:cy="0"\n       sodipodi:cx="0"\n       r="15"\n       cy="0"\n       cx="0"\n       x="30"\n       id="circle3095" />\n    <path\n       inkscape:connector-curvature="0"\n       id="path4678"\n       d="M 222.62748,186.10306 10.56039,54.88587 33.1789,54.56875 245.24599,185.78591 z"\n       style="fill:#00ff00;stroke:#000000;stroke-width:0.47816274px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" />\n    <path\n       inkscape:connector-curvature="0"\n       id="path4707"\n       d="M 480.01739,399.20768 217.84034,398.92922 348.18002,182.33878 z"\n       style="fill:#00ff00;stroke:#000000;stroke-width:0.2498053px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       sodipodi:nodetypes="cccc" />\n    <path\n       sodipodi:nodetypes="cccc"\n       style="fill:#00ff00;stroke:#000000;stroke-width:0.24422859px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="M 379.33631,393.20768 117.15926,392.94152 247.49894,185.91353 z"\n       id="path4709"\n       inkscape:connector-curvature="0" />\n    <rect\n       style="opacity:0.98999999;fill:#ff0000;fill-opacity:1;stroke:none"\n       id="rect4711"\n       width="72.234238"\n       height="66.991783"\n       x="258.36295"\n       y="202.50713" />\n    <path\n       style="fill:#00ff00;stroke:#000000;stroke-width:0.64867175px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="m 621.23934,258.79709 -282.50685,-59.81013 9.654,-17.72833 282.50682,59.81009 z"\n       id="path4713"\n       inkscape:connector-curvature="0" />\n    <text\n       xml:space="preserve"\n       style="font-size:24px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;font-family:Sans"\n       x="280"\n       y="41"\n       id="text4717"\n       sodipodi:linespacing="125%"><tspan\n         sodipodi:role="line"\n         id="tspan4719"\n         x="280"\n         y="41">Well, at least your clones</tspan><tspan\n         sodipodi:role="line"\n         x="280"\n         y="71"\n         id="tspan4727">seem to be content.</tspan></text>\n    <text\n       xml:space="preserve"\n       style="font-size:24px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;font-family:Sans"\n       x="108"\n       y="326"\n       id="text4721"\n       sodipodi:linespacing="125%"><tspan\n         sodipodi:role="line"\n         id="tspan4723"\n         x="108"\n         y="326">They aren\'t vegetables or anything.</tspan><tspan\n         sodipodi:role="line"\n         x="108"\n         y="356"\n         id="tspan4725">I think they\'re just content, is all.</tspan></text>\n  </g>\n</svg>\n'}),define("text!data/levelMaps/14.svg",[],function(){return'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<!-- Created with Inkscape (http://www.inkscape.org/) -->\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="600"\n   height="400"\n   id="svg2989"\n   version="1.1"\n   inkscape:version="0.48.2 r9819"\n   sodipodi:docname="14.svg">\n  <defs\n     id="defs2991" />\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1"\n     inkscape:cx="269.44719"\n     inkscape:cy="232.15385"\n     inkscape:current-layer="layer3"\n     inkscape:document-units="px"\n     showgrid="false"\n     inkscape:window-width="1172"\n     inkscape:window-height="690"\n     inkscape:window-x="141"\n     inkscape:window-y="55"\n     inkscape:window-maximized="0"\n     inkscape:snap-global="true"\n     inkscape:snap-bbox="false"\n     inkscape:snap-bbox-midpoints="true"\n     inkscape:bbox-paths="true"\n     inkscape:bbox-nodes="true"\n     inkscape:snap-page="true"\n     inkscape:snap-bbox-edge-midpoints="true"\n     inkscape:snap-center="true"\n     inkscape:snap-object-midpoints="true"\n     showguides="true"\n     inkscape:guide-bbox="true"\n     inkscape:snap-nodes="false" />\n  <metadata\n     id="metadata2994">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     id="layer1"\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     sodipodi:insensitive="true">\n    <rect\n       style="fill:#0000ff;fill-rule:evenodd;stroke:#000000;stroke-width:0.44748709px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       id="rect2997"\n       width="10"\n       height="400"\n       x="0"\n       y="0"\n       clip-path="none"\n       mask="none" />\n    <rect\n       style="fill:#0000ff;fill-rule:evenodd;stroke:#000000;stroke-width:0.31657982px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       id="rect3056"\n       width="600"\n       height="10"\n       x="0"\n       y="390"\n       clip-path="none"\n       mask="none" />\n    <rect\n       y="0"\n       x="590"\n       height="400"\n       width="10"\n       id="rect3224"\n       style="fill:#0000ff;fill-rule:evenodd;stroke:#000000;stroke-width:0.44748709px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       clip-path="none"\n       mask="none" />\n    <rect\n       y="0"\n       x="0"\n       height="10"\n       width="600"\n       id="rect3226"\n       style="fill:#0000ff;fill-rule:evenodd;stroke:#000000;stroke-width:0.31657991px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       clip-path="none"\n       mask="none" />\n  </g>\n  <g\n     inkscape:groupmode="layer"\n     id="layer3"\n     inkscape:label="vars">\n    <rect\n       style="opacity:0.98999999;fill:#ff0000;fill-opacity:1;stroke:none"\n       id="rect4810"\n       width="418"\n       height="44"\n       x="88"\n       y="352" />\n    <circle\n       id="circle3036"\n       x="30"\n       cx="0"\n       cy="0"\n       r="15"\n       sodipodi:cx="0"\n       sodipodi:cy="0"\n       sodipodi:rx="15"\n       sodipodi:ry="15"\n       style="fill:#00ff00"\n       mask="none"\n       clip-path="none"\n       transform="translate(42.22374,303.5)" />\n    <circle\n       transform="translate(567.22374,54.5)"\n       clip-path="none"\n       mask="none"\n       style="fill:#00ffff"\n       sodipodi:ry="15"\n       sodipodi:rx="15"\n       sodipodi:cy="0"\n       sodipodi:cx="0"\n       r="15"\n       cy="0"\n       cx="0"\n       x="30"\n       id="circle3095" />\n    <rect\n       style="opacity:0.98999999;fill:#000080;fill-opacity:1;stroke:none"\n       id="rect4788"\n       width="85"\n       height="64"\n       x="6"\n       y="330" />\n    <rect\n       style="opacity:0.98999999;fill:#000080;fill-opacity:1;stroke:none"\n       id="rect4790"\n       width="104"\n       height="316"\n       x="491"\n       y="78" />\n    <rect\n       style="opacity:0.98999999;fill:#000080;fill-opacity:1;stroke:none"\n       id="mover3"\n       width="58.54026"\n       height="23"\n       x="232.45975"\n       y="50"\n       inkscape:label="mover" />\n    <rect\n       y="51"\n       x="100"\n       height="23"\n       width="58.54026"\n       id="mover1"\n       style="opacity:0.98999999;fill:#000080;fill-opacity:1;stroke:none"\n       inkscape:label="mover" />\n    <rect\n       style="opacity:0.98999999;fill:#000080;fill-opacity:1;stroke:none"\n       id="mover2"\n       width="58.54026"\n       height="23"\n       x="163.99741"\n       y="321"\n       inkscape:label="mover" />\n    <rect\n       inkscape:label="mover"\n       y="318"\n       x="425.45975"\n       height="23"\n       width="58.54026"\n       id="mover6"\n       style="opacity:0.98999999;fill:#000080;fill-opacity:1;stroke:none" />\n    <rect\n       inkscape:label="mover"\n       style="opacity:0.98999999;fill:#000080;fill-opacity:1;stroke:none"\n       id="mover4"\n       width="58.54026"\n       height="23"\n       x="293"\n       y="319" />\n    <rect\n       inkscape:label="mover"\n       y="50"\n       x="356.99741"\n       height="23"\n       width="58.54026"\n       id="mover5"\n       style="opacity:0.98999999;fill:#000080;fill-opacity:1;stroke:none" />\n    <text\n       xml:space="preserve"\n       style="font-size:24px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;font-family:Sans"\n       x="261"\n       y="351"\n       id="text4960"\n       sodipodi:linespacing="125%"><tspan\n         sodipodi:role="line"\n         id="tspan4962"\n         x="261"\n         y="351">You should be the happy one.</tspan><tspan\n         sodipodi:role="line"\n         x="261"\n         y="381"\n         id="tspan4964">You\'re the one with free will.</tspan></text>\n  </g>\n</svg>\n'}),define("text!data/levelMaps/15.svg",[],function(){return'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<!-- Created with Inkscape (http://www.inkscape.org/) -->\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="600"\n   height="400"\n   id="svg2989"\n   version="1.1"\n   inkscape:version="0.48.2 r9819"\n   sodipodi:docname="15.svg">\n  <defs\n     id="defs2991" />\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1"\n     inkscape:cx="309.34267"\n     inkscape:cy="184.69378"\n     inkscape:current-layer="layer3"\n     inkscape:document-units="px"\n     showgrid="false"\n     inkscape:window-width="1172"\n     inkscape:window-height="690"\n     inkscape:window-x="20"\n     inkscape:window-y="20"\n     inkscape:window-maximized="0"\n     inkscape:snap-global="true"\n     inkscape:snap-bbox="false"\n     inkscape:snap-bbox-midpoints="true"\n     inkscape:bbox-paths="true"\n     inkscape:bbox-nodes="true"\n     inkscape:snap-page="true"\n     inkscape:snap-bbox-edge-midpoints="true"\n     inkscape:snap-center="true"\n     inkscape:snap-object-midpoints="true"\n     showguides="true"\n     inkscape:guide-bbox="true"\n     inkscape:snap-nodes="false" />\n  <metadata\n     id="metadata2994">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title></dc:title>\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     id="layer1"\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     sodipodi:insensitive="true">\n    <rect\n       style="fill:#0000ff;fill-rule:evenodd;stroke:#000000;stroke-width:0.44748709px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       id="rect2997"\n       width="10"\n       height="400"\n       x="0"\n       y="0"\n       clip-path="none"\n       mask="none" />\n    <rect\n       style="fill:#0000ff;fill-rule:evenodd;stroke:#000000;stroke-width:0.31657982px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       id="rect3056"\n       width="600"\n       height="10"\n       x="0"\n       y="390"\n       clip-path="none"\n       mask="none" />\n    <rect\n       y="0"\n       x="590"\n       height="400"\n       width="10"\n       id="rect3224"\n       style="fill:#0000ff;fill-rule:evenodd;stroke:#000000;stroke-width:0.44748709px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       clip-path="none"\n       mask="none" />\n    <rect\n       y="0"\n       x="0"\n       height="10"\n       width="600"\n       id="rect3226"\n       style="fill:#0000ff;fill-rule:evenodd;stroke:#000000;stroke-width:0.31657991px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       clip-path="none"\n       mask="none" />\n  </g>\n  <g\n     inkscape:groupmode="layer"\n     id="layer3"\n     inkscape:label="vars">\n    <circle\n       id="circle3036"\n       x="30"\n       cx="0"\n       cy="0"\n       r="15"\n       sodipodi:cx="0"\n       sodipodi:cy="0"\n       sodipodi:rx="15"\n       sodipodi:ry="15"\n       style="fill:#00ff00"\n       mask="none"\n       clip-path="none"\n       transform="translate(48.99834,305.85891)" />\n    <circle\n       transform="translate(566.28261,319.79111)"\n       clip-path="none"\n       mask="none"\n       style="fill:#00ffff"\n       sodipodi:ry="15"\n       sodipodi:rx="15"\n       sodipodi:cy="0"\n       sodipodi:cx="0"\n       r="15"\n       cy="0"\n       cx="0"\n       x="30"\n       id="circle3095" />\n    <path\n       inkscape:connector-curvature="0"\n       id="path4666"\n       d="m 52.189397,389.06322 464.154663,0"\n       style="fill:none;stroke:#ff00ff;stroke-width:2.32317591px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" />\n    <rect\n       style="opacity:0.98999999;fill:#00ff00;fill-opacity:1;stroke:none"\n       id="rect5131"\n       width="102"\n       height="131"\n       x="-31"\n       y="337" />\n    <rect\n       y="339"\n       x="524"\n       height="131"\n       width="133"\n       id="rect5133"\n       style="opacity:0.98999999;fill:#00ff00;fill-opacity:1;stroke:none" />\n    <text\n       xml:space="preserve"\n       style="font-size:24px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;font-family:Sans"\n       x="103"\n       y="33"\n       id="text5135"\n       sodipodi:linespacing="125%"><tspan\n         sodipodi:role="line"\n         id="tspan5137"\n         x="103"\n         y="33">Or maybe that\'s the reason why you look</tspan><tspan\n         sodipodi:role="line"\n         x="103"\n         y="63"\n         id="tspan5139">miserable. Maybe free will is a burden, and</tspan><tspan\n         sodipodi:role="line"\n         x="103"\n         y="93"\n         id="tspan5165">innocence is a gift? Is ignorance truly bliss?</tspan></text>\n    <text\n       xml:space="preserve"\n       style="font-size:24px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;font-family:Sans"\n       x="42"\n       y="141"\n       id="text5189"\n       sodipodi:linespacing="125%"><tspan\n         sodipodi:role="line"\n         id="tspan5191"\n         x="42"\n         y="141">Or perhaps you\'re the one enslaved. After</tspan><tspan\n         sodipodi:role="line"\n         x="42"\n         y="171"\n         id="tspan5193">all, you\'re just being pushed around by your</tspan><tspan\n         sodipodi:role="line"\n         x="42"\n         y="201"\n         id="tspan5195">clones. Maybe they\'re the free ones?</tspan><tspan\n         sodipodi:role="line"\n         x="42"\n         y="231"\n         id="tspan5197">Or what if free will is an illusion? Who\'s to say</tspan><tspan\n         sodipodi:role="line"\n         x="42"\n         y="261"\n         id="tspan5199">you aren\'t being controlled by a machine,</tspan><tspan\n         sodipodi:role="line"\n         x="42"\n         y="291"\n         id="tspan5201">and that machine\'s controlled by someone else?</tspan></text>\n  </g>\n</svg>\n'}),define("text!data/levelMaps/16.svg",[],function(){return'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<!-- Created with Inkscape (http://www.inkscape.org/) -->\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="600"\n   height="400"\n   id="svg2989"\n   version="1.1"\n   inkscape:version="0.48.2 r9819"\n   sodipodi:docname="16.svg">\n  <defs\n     id="defs2991" />\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1"\n     inkscape:cx="265.50154"\n     inkscape:cy="186.59471"\n     inkscape:current-layer="layer3"\n     inkscape:document-units="px"\n     showgrid="false"\n     inkscape:window-width="1172"\n     inkscape:window-height="690"\n     inkscape:window-x="20"\n     inkscape:window-y="20"\n     inkscape:window-maximized="0"\n     inkscape:snap-global="true"\n     inkscape:snap-bbox="false"\n     inkscape:snap-bbox-midpoints="true"\n     inkscape:bbox-paths="true"\n     inkscape:bbox-nodes="true"\n     inkscape:snap-page="true"\n     inkscape:snap-bbox-edge-midpoints="true"\n     inkscape:snap-center="true"\n     inkscape:snap-object-midpoints="true"\n     showguides="true"\n     inkscape:guide-bbox="true"\n     inkscape:snap-nodes="false" />\n  <metadata\n     id="metadata2994">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title></dc:title>\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     id="layer1"\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     sodipodi:insensitive="true">\n    <rect\n       style="fill:#0000ff;fill-rule:evenodd;stroke:#000000;stroke-width:0.44748709px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       id="rect2997"\n       width="10"\n       height="400"\n       x="0"\n       y="0"\n       clip-path="none"\n       mask="none" />\n    <rect\n       style="fill:#0000ff;fill-rule:evenodd;stroke:#000000;stroke-width:0.31657982px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       id="rect3056"\n       width="600"\n       height="10"\n       x="0"\n       y="390"\n       clip-path="none"\n       mask="none" />\n    <rect\n       y="0"\n       x="590"\n       height="400"\n       width="10"\n       id="rect3224"\n       style="fill:#0000ff;fill-rule:evenodd;stroke:#000000;stroke-width:0.44748709px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       clip-path="none"\n       mask="none" />\n    <rect\n       y="0"\n       x="0"\n       height="10"\n       width="600"\n       id="rect3226"\n       style="fill:#0000ff;fill-rule:evenodd;stroke:#000000;stroke-width:0.31657991px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       clip-path="none"\n       mask="none" />\n  </g>\n  <g\n     inkscape:groupmode="layer"\n     id="layer3"\n     inkscape:label="vars">\n    <rect\n       style="opacity:0.98999999;fill:#00ff00;fill-opacity:1;stroke:none"\n       id="rect5809"\n       width="606"\n       height="100"\n       x="-8"\n       y="308" />\n    <circle\n       id="circle3036"\n       x="30"\n       cx="0"\n       cy="0"\n       r="15"\n       sodipodi:cx="0"\n       sodipodi:cy="0"\n       sodipodi:rx="15"\n       sodipodi:ry="15"\n       style="fill:#00ff00"\n       mask="none"\n       clip-path="none"\n       transform="translate(321.99834,26.85891)" />\n    <circle\n       transform="translate(309.28261,299.79111)"\n       clip-path="none"\n       mask="none"\n       style="fill:#00ffff"\n       sodipodi:ry="15"\n       sodipodi:rx="15"\n       sodipodi:cy="0"\n       sodipodi:cx="0"\n       r="15"\n       cy="0"\n       cx="0"\n       x="30"\n       id="circle3095" />\n    <text\n       sodipodi:linespacing="125%"\n       id="text5246"\n       y="121"\n       x="32"\n       style="font-size:24px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;font-family:Sans"\n       xml:space="preserve"><tspan\n         id="tspan5252"\n         y="121"\n         x="32"\n         sodipodi:role="line">Oh, sorry.</tspan></text>\n    <path\n       style="fill:#00ff00;stroke:#000000;stroke-width:3.42302918px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="m 321,47.291199 38.7088,21.417602 -77.4176,0 z"\n       id="path5263"\n       inkscape:connector-curvature="0"\n       sodipodi:nodetypes="cccc" />\n    <path\n       sodipodi:nodetypes="cccc"\n       inkscape:connector-curvature="0"\n       id="path5269"\n       d="m 414,93.2912 38.7088,21.4176 -77.4176,0 z"\n       style="fill:#00ff00;stroke:#000000;stroke-width:3.42302918px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" />\n    <path\n       style="fill:#00ff00;stroke:#000000;stroke-width:3.42302918px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="m 230,105.2912 38.7088,21.4176 -77.4176,0 z"\n       id="path5271"\n       inkscape:connector-curvature="0"\n       sodipodi:nodetypes="cccc" />\n    <path\n       style="fill:#00ff00;stroke:#000000;stroke-width:3.42302918px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="m 504,163.2912 38.7088,21.4176 -77.4176,0 z"\n       id="path5273"\n       inkscape:connector-curvature="0"\n       sodipodi:nodetypes="cccc" />\n    <path\n       style="fill:#00ff00;stroke:#000000;stroke-width:3.42302918px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="m 316,164.2912 38.7088,21.4176 -77.4176,0 z"\n       id="path5275"\n       inkscape:connector-curvature="0"\n       sodipodi:nodetypes="cccc" />\n    <path\n       sodipodi:nodetypes="cccc"\n       inkscape:connector-curvature="0"\n       id="path5277"\n       d="m 124,162.2912 38.7088,21.4176 -77.4176,0 z"\n       style="fill:#00ff00;stroke:#000000;stroke-width:3.42302918px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" />\n    <path\n       sodipodi:nodetypes="cccc"\n       inkscape:connector-curvature="0"\n       id="path5279"\n       d="m 426,240.2912 38.7088,21.4176 -77.4176,0 z"\n       style="fill:#00ff00;stroke:#000000;stroke-width:3.42302918px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" />\n    <path\n       sodipodi:nodetypes="cccc"\n       inkscape:connector-curvature="0"\n       id="path5281"\n       d="m 212,237.2912 38.7088,21.4176 -77.4176,0 z"\n       style="fill:#00ff00;stroke:#000000;stroke-width:3.42302918px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" />\n    <path\n       style="fill:#ff00ff;stroke:#ff00ff;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="m 237,76 17,0 -1.93301,1.11603"\n       id="path5283"\n       inkscape:connector-curvature="0" />\n    <path\n       inkscape:connector-curvature="0"\n       id="path5793"\n       d="m 309,147 17,0 -1.93301,1.11603"\n       style="fill:#ff00ff;stroke:#ff00ff;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" />\n    <path\n       inkscape:connector-curvature="0"\n       id="path5795"\n       d="m 536,150 17,0 -1.93301,1.11603"\n       style="fill:#ff00ff;stroke:#ff00ff;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" />\n    <path\n       style="fill:#ff00ff;stroke:#ff00ff;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="m 364,246 17,0 -1.93301,1.11603"\n       id="path5799"\n       inkscape:connector-curvature="0" />\n    <path\n       inkscape:connector-curvature="0"\n       id="path5801"\n       d="m 127,274 17,0 -1.93301,1.11603"\n       style="fill:#ff00ff;stroke:#ff00ff;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" />\n    <path\n       style="fill:#00ff00;stroke:none"\n       d="m 273.00027,284.3956 83.70907,96.3132 -167.41814,0 z"\n       id="path5803"\n       inkscape:connector-curvature="0"\n       sodipodi:nodetypes="cccc" />\n    <path\n       sodipodi:nodetypes="cccc"\n       inkscape:connector-curvature="0"\n       id="path5811"\n       d="m 346.00027,282.3956 83.70907,96.3132 -167.41814,0 z"\n       style="fill:#00ff00;stroke:none" />\n    <text\n       xml:space="preserve"\n       style="font-size:24px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;font-family:Sans"\n       x="84"\n       y="350.62109"\n       id="text5189"\n       sodipodi:linespacing="125%"><tspan\n         sodipodi:role="line"\n         x="84"\n         y="350.62109"\n         id="tspan5242">I didn\'t mean to get so metaphysical,</tspan><tspan\n         sodipodi:role="line"\n         x="84"\n         y="380.62109"\n         id="tspan5244">but being omnipresent here gets boring.</tspan></text>\n  </g>\n</svg>\n'}),define("text!data/levelMaps/17.svg",[],function(){return'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<!-- Created with Inkscape (http://www.inkscape.org/) -->\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="600"\n   height="400"\n   id="svg2989"\n   version="1.1"\n   inkscape:version="0.48.2 r9819"\n   sodipodi:docname="17.svg">\n  <defs\n     id="defs2991" />\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1"\n     inkscape:cx="331.01324"\n     inkscape:cy="161.8292"\n     inkscape:current-layer="layer3"\n     inkscape:document-units="px"\n     showgrid="false"\n     inkscape:window-width="1172"\n     inkscape:window-height="690"\n     inkscape:window-x="43"\n     inkscape:window-y="45"\n     inkscape:window-maximized="0"\n     inkscape:snap-global="true"\n     inkscape:snap-bbox="false"\n     inkscape:snap-bbox-midpoints="true"\n     inkscape:bbox-paths="true"\n     inkscape:bbox-nodes="true"\n     inkscape:snap-page="true"\n     inkscape:snap-bbox-edge-midpoints="true"\n     inkscape:snap-center="true"\n     inkscape:snap-object-midpoints="true"\n     showguides="true"\n     inkscape:guide-bbox="true"\n     inkscape:snap-nodes="false" />\n  <metadata\n     id="metadata2994">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title></dc:title>\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     id="layer1"\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     sodipodi:insensitive="true">\n    <rect\n       style="fill:#0000ff;fill-rule:evenodd;stroke:#000000;stroke-width:0.44748709px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       id="rect2997"\n       width="10"\n       height="400"\n       x="0"\n       y="0"\n       clip-path="none"\n       mask="none" />\n    <rect\n       style="fill:#0000ff;fill-rule:evenodd;stroke:#000000;stroke-width:0.31657982px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       id="rect3056"\n       width="600"\n       height="10"\n       x="0"\n       y="390"\n       clip-path="none"\n       mask="none" />\n    <rect\n       y="0"\n       x="590"\n       height="400"\n       width="10"\n       id="rect3224"\n       style="fill:#0000ff;fill-rule:evenodd;stroke:#000000;stroke-width:0.44748709px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       clip-path="none"\n       mask="none" />\n    <rect\n       y="0"\n       x="0"\n       height="10"\n       width="600"\n       id="rect3226"\n       style="fill:#0000ff;fill-rule:evenodd;stroke:#000000;stroke-width:0.31657991px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       clip-path="none"\n       mask="none" />\n  </g>\n  <g\n     inkscape:groupmode="layer"\n     id="layer3"\n     inkscape:label="vars">\n    <circle\n       id="circle3036"\n       x="30"\n       cx="0"\n       cy="0"\n       r="15"\n       sodipodi:cx="0"\n       sodipodi:cy="0"\n       sodipodi:rx="15"\n       sodipodi:ry="15"\n       style="fill:#00ff00"\n       mask="none"\n       clip-path="none"\n       transform="translate(219.22374,35.5)" />\n    <circle\n       transform="translate(567.22374,365.5)"\n       clip-path="none"\n       mask="none"\n       style="fill:#00ffff"\n       sodipodi:ry="15"\n       sodipodi:rx="15"\n       sodipodi:cy="0"\n       sodipodi:cx="0"\n       r="15"\n       cy="0"\n       cx="0"\n       x="30"\n       id="circle3095" />\n    <rect\n       style="opacity:0.98999999;fill:#00ff00;fill-opacity:1;stroke:none"\n       id="rect6093"\n       width="301"\n       height="284"\n       x="10"\n       y="110" />\n    <path\n       style="fill:#ff00ff;stroke:#ff00ff;stroke-width:1.05899382px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="m 242.56144,108 72.89541,0"\n       id="path6095"\n       inkscape:connector-curvature="0" />\n    <path\n       inkscape:connector-curvature="0"\n       id="path6097"\n       d="m 312.5,105.92418 0,73.84295"\n       style="fill:#ff00ff;stroke:#ff00ff;stroke-width:1.06585431px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" />\n    <path\n       inkscape:connector-curvature="0"\n       id="path6099"\n       d="m 241.43863,176 73.94841,0"\n       style="fill:#ff00ff;stroke:#ff00ff;stroke-width:1.0666151px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" />\n    <path\n       style="fill:#ff00ff;stroke:#ff00ff;stroke-width:1.06458414px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="m 244.5,105.57472 0,73.66707"\n       id="path6101"\n       inkscape:connector-curvature="0" />\n    <rect\n       y="178"\n       x="-56"\n       height="212"\n       width="432"\n       id="rect6133"\n       style="opacity:0.98999999;fill:#00ff00;fill-opacity:1;stroke:none" />\n    <path\n       inkscape:connector-curvature="0"\n       id="path6135"\n       d="m 307.56144,176 72.89541,0"\n       style="fill:#ff00ff;stroke:#ff00ff;stroke-width:1.05899382px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" />\n    <path\n       style="fill:#ff00ff;stroke:#ff00ff;stroke-width:1.06585431px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="m 377.5,173.92418 0,73.84295"\n       id="path6137"\n       inkscape:connector-curvature="0" />\n    <path\n       style="fill:#ff00ff;stroke:#ff00ff;stroke-width:1.0666151px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="m 306.43863,244 73.94841,0"\n       id="path6139"\n       inkscape:connector-curvature="0" />\n    <path\n       inkscape:connector-curvature="0"\n       id="path6141"\n       d="m 309.5,173.57472 0,73.66707"\n       style="fill:#ff00ff;stroke:#ff00ff;stroke-width:1.06458414px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" />\n    <rect\n       style="opacity:0.98999999;fill:#00ff00;fill-opacity:1;stroke:none"\n       id="rect6143"\n       width="470"\n       height="150"\n       x="-28"\n       y="246" />\n    <path\n       style="fill:#ff00ff;stroke:#ff00ff;stroke-width:1.05899382px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="m 373.56144,244 72.89541,0"\n       id="path6145"\n       inkscape:connector-curvature="0" />\n    <path\n       inkscape:connector-curvature="0"\n       id="path6147"\n       d="m 443.5,241.92418 0,73.84295"\n       style="fill:#ff00ff;stroke:#ff00ff;stroke-width:1.06585431px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" />\n    <path\n       inkscape:connector-curvature="0"\n       id="path6149"\n       d="m 372.43863,312 73.94841,0"\n       style="fill:#ff00ff;stroke:#ff00ff;stroke-width:1.0666151px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" />\n    <path\n       style="fill:#ff00ff;stroke:#ff00ff;stroke-width:1.06458414px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="m 375.5,241.57472 0,73.66707"\n       id="path6151"\n       inkscape:connector-curvature="0" />\n    <path\n       inkscape:connector-curvature="0"\n       id="path6155"\n       d="m 440.56144,311 72.89541,0"\n       style="fill:#ff00ff;stroke:#ff00ff;stroke-width:1.05899382px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" />\n    <path\n       style="fill:#ff00ff;stroke:#ff00ff;stroke-width:1.06585431px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="m 510.5,308.92418 0,73.84295"\n       id="path6157"\n       inkscape:connector-curvature="0" />\n    <path\n       style="fill:#ff00ff;stroke:#ff00ff;stroke-width:1.0666151px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="m 439.43863,379 73.94841,0"\n       id="path6159"\n       inkscape:connector-curvature="0" />\n    <path\n       inkscape:connector-curvature="0"\n       id="path6161"\n       d="m 442.5,308.57472 0,73.66707"\n       style="fill:#ff00ff;stroke:#ff00ff;stroke-width:1.06458414px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" />\n    <rect\n       y="313"\n       x="39"\n       height="150"\n       width="470"\n       id="rect6163"\n       style="opacity:0.98999999;fill:#00ff00;fill-opacity:1;stroke:none" />\n    <rect\n       y="1"\n       x="-106.5"\n       height="284"\n       width="301"\n       id="rect6165"\n       style="opacity:0.98999999;fill:#00ff00;fill-opacity:1;stroke:none" />\n    <rect\n       y="68"\n       x="-56"\n       height="284"\n       width="301"\n       id="rect6167"\n       style="opacity:0.98999999;fill:#00ff00;fill-opacity:1;stroke:none" />\n    <text\n       xml:space="preserve"\n       style="font-size:24px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;font-family:Sans"\n       x="36"\n       y="154"\n       id="text6169"\n       sodipodi:linespacing="125%"><tspan\n         sodipodi:role="line"\n         x="36"\n         y="154"\n         id="tspan6173">I think the ghosts</tspan><tspan\n         sodipodi:role="line"\n         x="36"\n         y="184"\n         id="tspan6177">have calmed down.</tspan></text>\n    <text\n       xml:space="preserve"\n       style="font-size:24px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;font-family:Sans"\n       x="36"\n       y="255"\n       id="text6179"\n       sodipodi:linespacing="125%"><tspan\n         sodipodi:role="line"\n         id="tspan6181"\n         x="36"\n         y="255">You\'ve been much more</tspan><tspan\n         sodipodi:role="line"\n         x="36"\n         y="285"\n         id="tspan6183">conservative in your clone</tspan><tspan\n         sodipodi:role="line"\n         x="36"\n         y="315"\n         id="tspan6185">slaughters, too. I\'m sure</tspan><tspan\n         sodipodi:role="line"\n         x="36"\n         y="345"\n         id="tspan6187">they appreciate that.</tspan></text>\n  </g>\n</svg>\n'}),define("text!data/levelMaps/18.svg",[],function(){return'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<!-- Created with Inkscape (http://www.inkscape.org/) -->\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="600"\n   height="400"\n   id="svg2989"\n   version="1.1"\n   inkscape:version="0.48.2 r9819"\n   sodipodi:docname="18.svg">\n  <defs\n     id="defs2991" />\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1"\n     inkscape:cx="320.51324"\n     inkscape:cy="161.97319"\n     inkscape:current-layer="layer3"\n     inkscape:document-units="px"\n     showgrid="false"\n     inkscape:window-width="1172"\n     inkscape:window-height="690"\n     inkscape:window-x="43"\n     inkscape:window-y="45"\n     inkscape:window-maximized="0"\n     inkscape:snap-global="true"\n     inkscape:snap-bbox="false"\n     inkscape:snap-bbox-midpoints="true"\n     inkscape:bbox-paths="true"\n     inkscape:bbox-nodes="true"\n     inkscape:snap-page="true"\n     inkscape:snap-bbox-edge-midpoints="true"\n     inkscape:snap-center="true"\n     inkscape:snap-object-midpoints="true"\n     showguides="true"\n     inkscape:guide-bbox="true"\n     inkscape:snap-nodes="false" />\n  <metadata\n     id="metadata2994">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title></dc:title>\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     id="layer1"\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     sodipodi:insensitive="true">\n    <rect\n       style="fill:#0000ff;fill-rule:evenodd;stroke:#000000;stroke-width:0.44748709px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       id="rect2997"\n       width="10"\n       height="400"\n       x="0"\n       y="0"\n       clip-path="none"\n       mask="none" />\n    <rect\n       style="fill:#0000ff;fill-rule:evenodd;stroke:#000000;stroke-width:0.31657982px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       id="rect3056"\n       width="600"\n       height="10"\n       x="0"\n       y="390"\n       clip-path="none"\n       mask="none" />\n    <rect\n       y="0"\n       x="590"\n       height="400"\n       width="10"\n       id="rect3224"\n       style="fill:#0000ff;fill-rule:evenodd;stroke:#000000;stroke-width:0.44748709px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       clip-path="none"\n       mask="none" />\n    <rect\n       y="0"\n       x="0"\n       height="10"\n       width="600"\n       id="rect3226"\n       style="fill:#0000ff;fill-rule:evenodd;stroke:#000000;stroke-width:0.31657991px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       clip-path="none"\n       mask="none" />\n  </g>\n  <g\n     inkscape:groupmode="layer"\n     id="layer3"\n     inkscape:label="vars">\n    <path\n       style="fill:#00ff00;stroke:#000000;stroke-width:1.69120812px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="m 197.33777,197.50924 327.18849,6.07018 -143.22119,51.19004 z"\n       id="path6804"\n       inkscape:connector-curvature="0"\n       sodipodi:nodetypes="cccc" />\n    <circle\n       id="circle3036"\n       x="30"\n       cx="0"\n       cy="0"\n       r="15"\n       sodipodi:cx="0"\n       sodipodi:cy="0"\n       sodipodi:rx="15"\n       sodipodi:ry="15"\n       style="fill:#ff0000"\n       mask="none"\n       clip-path="none"\n       transform="translate(355.22374,345.5)" />\n    <circle\n       transform="translate(573.22374,373.5)"\n       clip-path="none"\n       mask="none"\n       style="fill:#00ffff"\n       sodipodi:ry="15"\n       sodipodi:rx="15"\n       sodipodi:cy="0"\n       sodipodi:cx="0"\n       r="15"\n       cy="0"\n       cx="0"\n       x="30"\n       id="circle3095" />\n    <path\n       style="fill:#00ff00;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="m 595,44 2,111 -220,-15 z"\n       id="path6764"\n       inkscape:connector-curvature="0"\n       sodipodi:nodetypes="cccc" />\n    <path\n       inkscape:connector-curvature="0"\n       id="path6766"\n       d="M 8,217 283,392 4,397 z"\n       style="fill:#00ff00;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       sodipodi:nodetypes="cccc" />\n    <path\n       style="fill:#00ff00;stroke:#000000;stroke-width:1.5950098px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="m 154.31479,211.84383 153.02284,-73.26938 -47.51784,77.25002 z"\n       id="path6768"\n       inkscape:connector-curvature="0"\n       sodipodi:nodetypes="cccc" />\n    <path\n       sodipodi:nodetypes="cccc"\n       inkscape:connector-curvature="0"\n       id="path6780"\n       d="M 23.540641,161.35944 67.332376,267.21385 -0.4334091,244.07008 z"\n       style="fill:#00ff00;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" />\n    <path\n       style="fill:#00ff00;stroke:#000000;stroke-width:2.88809729px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="M 238.64107,-16.940721 7.2724124,218.83378 2.6285477,1.4981341 z"\n       id="path6782"\n       inkscape:connector-curvature="0"\n       sodipodi:nodetypes="cccc" />\n    <circle\n       transform="translate(565.22374,31.5)"\n       clip-path="none"\n       mask="none"\n       style="fill:#00ff00"\n       sodipodi:ry="15"\n       sodipodi:rx="15"\n       sodipodi:cy="0"\n       sodipodi:cx="0"\n       r="15"\n       cy="0"\n       cx="0"\n       x="30"\n       id="circle6790" />\n    <circle\n       transform="translate(555.22374,227.5)"\n       clip-path="none"\n       mask="none"\n       style="fill:#ff0000"\n       sodipodi:ry="15"\n       sodipodi:rx="15"\n       sodipodi:cy="0"\n       sodipodi:cx="0"\n       r="15"\n       cy="0"\n       cx="0"\n       x="30"\n       id="circle6794" />\n    <circle\n       id="circle6796"\n       x="30"\n       cx="0"\n       cy="0"\n       r="15"\n       sodipodi:cx="0"\n       sodipodi:cy="0"\n       sodipodi:rx="15"\n       sodipodi:ry="15"\n       style="fill:#ff0000"\n       mask="none"\n       clip-path="none"\n       transform="translate(42.22374,33.5)" />\n    <circle\n       clip-path="none"\n       mask="none"\n       style="fill:#ff0000"\n       sodipodi:ry="15"\n       sodipodi:rx="15"\n       sodipodi:cy="0"\n       sodipodi:cx="0"\n       r="15"\n       cy="0"\n       cx="0"\n       x="30"\n       id="circle6798"\n       transform="translate(42.22374,33.5)" />\n    <path\n       style="fill:#00ff00;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="M 54.391023,138.17443 41.487848,252.00053 -6.614718,198.95358 z"\n       id="path6800"\n       inkscape:connector-curvature="0"\n       sodipodi:nodetypes="cccc" />\n    <rect\n       style="opacity:0.98999999000000005;fill:#00ff00;fill-opacity:1;stroke:none"\n       id="rect6812"\n       width="369"\n       height="59"\n       x="154"\n       y="211" />\n    <text\n       xml:space="preserve"\n       style="font-size:24px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;font-family:Sans"\n       x="120"\n       y="39"\n       id="text6814"\n       sodipodi:linespacing="125%"><tspan\n         sodipodi:role="line"\n         x="120"\n         y="39"\n         id="tspan6820">OH NO, THEY\'VE RETURNED</tspan></text>\n    <text\n       xml:space="preserve"\n       style="font-size:24px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;font-family:Sans"\n       x="213"\n       y="246"\n       id="text6830"\n       sodipodi:linespacing="125%"><tspan\n         sodipodi:role="line"\n         x="213"\n         y="246"\n         id="tspan6834">I DON\'T KNOW WHY</tspan></text>\n    <text\n       xml:space="preserve"\n       style="font-size:24px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;font-family:Sans"\n       x="26"\n       y="299"\n       id="text6838"\n       sodipodi:linespacing="125%"><tspan\n         sodipodi:role="line"\n         x="26"\n         y="299"\n         id="tspan6844">I\'M.</tspan></text>\n    <text\n       xml:space="preserve"\n       style="font-size:24px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;font-family:Sans"\n       x="6"\n       y="345"\n       id="text6850"\n       sodipodi:linespacing="125%"><tspan\n         sodipodi:role="line"\n         id="tspan6852"\n         x="6"\n         y="345">FREAKING.</tspan></text>\n    <text\n       xml:space="preserve"\n       style="font-size:24px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;font-family:Sans"\n       x="63"\n       y="386.73633"\n       id="text6854"\n       sodipodi:linespacing="125%"><tspan\n         sodipodi:role="line"\n         id="tspan6856"\n         x="63"\n         y="386.73633">OUT.</tspan></text>\n  </g>\n</svg>\n'}),define("text!data/levelMaps/19.svg",[],function(){return'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<!-- Created with Inkscape (http://www.inkscape.org/) -->\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   id="svg2989"\n   height="400"\n   width="600"\n   version="1.1"\n   inkscape:version="0.48.2 r9819"\n   sodipodi:docname="19.svg">\n  <sodipodi:namedview\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1"\n     objecttolerance="10"\n     gridtolerance="10"\n     guidetolerance="10"\n     inkscape:pageopacity="0"\n     inkscape:pageshadow="2"\n     inkscape:window-width="1142"\n     inkscape:window-height="712"\n     id="namedview3162"\n     showgrid="false"\n     inkscape:zoom="1.1733333"\n     inkscape:cx="238.24454"\n     inkscape:cy="211.18478"\n     inkscape:window-x="0"\n     inkscape:window-y="0"\n     inkscape:window-maximized="0"\n     inkscape:current-layer="svg2989" />\n  <defs\n     id="defs2991" />\n  <metadata\n     id="metadata2994">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <rect\n     x="0"\n     y="0"\n     width="10"\n     height="400"\n     style="fill:#0000ff;fill-rule:evenodd;stroke:#000000;stroke-width:0.44748709px;stroke-linecap:butt;stroke-linejoin:miter"\n     id="rect2997" />\n  <rect\n     x="0"\n     y="390"\n     width="600"\n     height="10"\n     style="fill:#0000ff;fill-rule:evenodd;stroke:#000000;stroke-width:0.31657982px;stroke-linecap:butt;stroke-linejoin:miter"\n     id="rect3056" />\n  <rect\n     x="590"\n     y="0"\n     width="10"\n     height="400"\n     style="fill:#0000ff;fill-rule:evenodd;stroke:#000000;stroke-width:0.44748709px;stroke-linecap:butt;stroke-linejoin:miter"\n     id="rect3224" />\n  <rect\n     x="0"\n     y="0"\n     width="600"\n     height="10"\n     style="fill:#0000ff;fill-rule:evenodd;stroke:#000000;stroke-width:0.31657991px;stroke-linecap:butt;stroke-linejoin:miter"\n     id="rect3226" />\n  <circle\n     sodipodi:ry="15"\n     sodipodi:rx="15"\n     sodipodi:cy="0"\n     sodipodi:cx="0"\n     d="M 15,0 C 15,8.2842712 8.2842712,15 0,15 -8.2842712,15 -15,8.2842712 -15,0 c 0,-8.2842712 6.7157288,-15 15,-15 8.2842712,0 15,6.7157288 15,15 z"\n     r="15"\n     cx="0"\n     cy="0"\n     transform="translate(312.44265,169.99656)"\n     style="fill:#00ff00"\n     id="circle3036" />\n  <circle\n     sodipodi:ry="15"\n     sodipodi:rx="15"\n     sodipodi:cy="0"\n     sodipodi:cx="0"\n     d="M 15,0 C 15,8.2842712 8.2842712,15 0,15 -8.2842712,15 -15,8.2842712 -15,0 c 0,-8.2842712 6.7157288,-15 15,-15 8.2842712,0 15,6.7157288 15,15 z"\n     r="15"\n     cx="0"\n     cy="0"\n     transform="translate(69.61821,254.59091)"\n     style="fill:#00ffff"\n     id="circle3095" />\n  <path\n     inkscape:connector-curvature="0"\n     style="opacity:0.98999999;fill:none;stroke:#0000ff;stroke-width:7.45710373;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none"\n     d="m 334.62,174.4 8.392,3.8947 -0.15562,7.9732 -9.778,10.02 -12.147,3.691 -17.318,-1.1854 -15.738,-7.3743 -10.21,-9.5976 -6.7341,-12.246 -1.4222,-13.664 3.6568,-13.266 9.8087,-13.713 13.257,-10.511 22.7,-10.442 24.487,-5.091 25.531,0.10018 25.018,5.0906 29.568,13.958 24.019,22.108 11.882,20.901 4.7542,23.517 -3.4315,23.511 -10.371,21.413 -20.012,22.106 -24.753,16.734 -39.591,15.529 -42.042,6.604 -39.889,-1.6883 -38.869,-9.1043 -40.421,-19.312 -18.048,-13.3 -16.02,-15.702 -19.207,-28.371 -10.568,-32.535 -0.0373,-32.244 9.4289,-30.873 20.504,-31.419 27.57,-25.543 42.493,-24.813 46.621,-15.88 39.076,-6.7098 39.624,-1.377 39.459,3.9064 38.58,9.1402 27.128,10.055 25.875,12.983 24.143,15.921 21.934,18.869 28.109,34.915 10.565,19.784 7.7024,21.082 5.3662,34.066 -3.1258,34.34 -14.353,39.398 -23.681,34.665 -18.476,18.949 -20.504,16.712 -45.468,27.023 -33.937,14.011 -35.219,10.354 -36.097,6.7709 -36.569,3.2622 -37.001,-0.29413 -36.807,-3.8584 -36.248,-7.433 -35.29,-11.02 -30.61,-13.04 -29.17,-16.06 -27.239,-19.08 -24.844,-22.14 -32.288,-40.36 -12.431,-22.68 -9.397,-24.11 -7.9641,-44.89"\n     id="path3950" />\n  <circle\n     id="circle7052"\n     style="fill:#ff0000"\n     transform="translate(25.872216,277.92196)"\n     cy="0"\n     cx="0"\n     r="15"\n     d="M 15,0 C 15,8.2842712 8.2842712,15 0,15 -8.2842712,15 -15,8.2842712 -15,0 c 0,-8.2842712 6.7157288,-15 15,-15 8.2842712,0 15,6.7157288 15,15 z"\n     sodipodi:cx="0"\n     sodipodi:cy="0"\n     sodipodi:rx="15"\n     sodipodi:ry="15" />\n  <path\n     style="fill:#00ff00;stroke:none"\n     d="m 14.225555,321.87698 49.65107,-37.68027 52.721095,-14.41698 -43.729162,34.68161 z"\n     id="path7074"\n     inkscape:connector-curvature="0"\n     sodipodi:nodetypes="ccccc" />\n  <path\n     sodipodi:nodetypes="ccccc"\n     inkscape:connector-curvature="0"\n     id="path7584"\n     d="m 124.45912,406.25351 34.55234,-51.87647 45.07996,-30.90566 -29.94094,47.10195 z"\n     style="fill:#00ff00;stroke:none" />\n  <path\n     style="fill:#00ff00;stroke:none"\n     d="m 305.24134,452.12269 -10.51626,-61.43648 11.53868,-53.42491 10.58871,54.79902 z"\n     id="path7586"\n     inkscape:connector-curvature="0"\n     sodipodi:nodetypes="ccccc" />\n  <path\n     sodipodi:nodetypes="ccccc"\n     inkscape:connector-curvature="0"\n     id="path7590"\n     d="m 545.79138,195.78062 52.81484,-9.99647 46.65292,7.20576 -47.06647,9.84548 z"\n     style="fill:#00ff00;stroke:none" />\n  <path\n     style="fill:#00ff00;stroke:none"\n     d="M 484.03562,87.673461 521.56884,49.19497 563.91967,28.342501 531.00895,63.400608 z"\n     id="path7592"\n     inkscape:connector-curvature="0"\n     sodipodi:nodetypes="ccccc" />\n  <path\n     sodipodi:nodetypes="ccccc"\n     inkscape:connector-curvature="0"\n     id="path7594"\n     d="M 342.94655,54.300706 331.77593,1.7216785 337.94056,-45.080198 348.83216,1.7552519 z"\n     style="fill:#00ff00;stroke:none" />\n  <path\n     style="fill:#00ff00;stroke:none"\n     d="M 231.42551,83.280818 193.33339,53.544276 170.24575,17.404734 204.80898,43.327883 z"\n     id="path7596"\n     inkscape:connector-curvature="0"\n     sodipodi:nodetypes="ccccc" />\n  <path\n     sodipodi:nodetypes="ccccc"\n     inkscape:connector-curvature="0"\n     id="path7598"\n     d="m 186.6698,163.70549 -47.49492,8.91653 -42.37796,-6.57378 42.30078,-8.7904 z"\n     style="fill:#00ff00;stroke:none" />\n  <path\n     style="fill:#00ff00;stroke:none"\n     d="m 251.29159,235.07567 -32.15141,36.07712 -37.56483,20.68791 28.11654,-32.80376 z"\n     id="path7600"\n     inkscape:connector-curvature="0"\n     sodipodi:nodetypes="ccccc" />\n  <path\n     sodipodi:nodetypes="ccccc"\n     inkscape:connector-curvature="0"\n     id="path7602"\n     d="m 336.12958,240.03314 12.35114,46.7196 -3.47064,42.74413 -11.84714,-41.54843 z"\n     style="fill:#00ff00;stroke:none" />\n  <path\n     sodipodi:nodetypes="ccccc"\n     inkscape:connector-curvature="0"\n     id="path7606"\n     d="m 422.11185,169.22303 44.27001,-10.3917 40.76156,5.34524 -39.35486,10.10936 z"\n     style="fill:#00ff00;stroke:none" />\n  <path\n     style="fill:#00ff00;stroke:none"\n     d="m 382.91628,137.17878 9.53232,-29.39961 17.04114,-22.540191 -7.99109,26.400131 z"\n     id="path7608"\n     inkscape:connector-curvature="0"\n     sodipodi:nodetypes="ccccc" />\n  <path\n     sodipodi:nodetypes="ccccc"\n     inkscape:connector-curvature="0"\n     id="path7610"\n     d="m 318.41497,132.10096 -17.5576,-17.36864 -10.17315,-20.4837 15.95842,15.17782 z"\n     style="fill:#00ff00;stroke:none" />\n  <rect\n     style="opacity:0.98999999;fill:#ff0000;fill-opacity:1;stroke:none"\n     id="rect7614"\n     width="47.727264"\n     height="46.022724"\n     x="132.76138"\n     y="72.045448" />\n  <rect\n     y="178.99998"\n     x="439.77274"\n     height="46.022724"\n     width="47.727264"\n     id="rect7616"\n     style="opacity:0.98999999;fill:#ff0000;fill-opacity:1;stroke:none" />\n  <path\n     sodipodi:nodetypes="ccccc"\n     inkscape:connector-curvature="0"\n     id="path7620"\n     d="m 520.31686,391.26808 -37.83471,-49.5335 -14.5811,-52.67593 34.81762,43.62094 z"\n     style="fill:#00ff00;stroke:none" />\n  <rect\n     style="opacity:0.98999999;fill:#ff0000;fill-opacity:1;stroke:none"\n     id="rect7622"\n     width="32.386356"\n     height="34.94318"\n     x="467.63638"\n     y="348.82953" />\n  <text\n     xml:space="preserve"\n     style="font-size:24px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;font-family:Sans"\n     x="7.6704559"\n     y="29.261353"\n     id="text8337"\n     sodipodi:linespacing="125%"><tspan\n       sodipodi:role="line"\n       id="tspan8339"\n       x="7.6704559"\n       y="29.261353">FORGET THE LIMIT</tspan><tspan\n       sodipodi:role="line"\n       x="7.6704559"\n       y="59.261353"\n       id="tspan8341">JUST GET THAT SHINY</tspan></text>\n</svg>\n'}),define("text!data/levelMaps/20.svg",[],function(){return'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<!-- Created with Inkscape (http://www.inkscape.org/) -->\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   id="svg2989"\n   height="400"\n   width="600"\n   version="1.1"\n   inkscape:version="0.48.2 r9819"\n   sodipodi:docname="20.svg">\n  <sodipodi:namedview\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1"\n     objecttolerance="10"\n     gridtolerance="10"\n     guidetolerance="10"\n     inkscape:pageopacity="0"\n     inkscape:pageshadow="2"\n     inkscape:window-width="1142"\n     inkscape:window-height="712"\n     id="namedview3162"\n     showgrid="false"\n     inkscape:zoom="1.1733333"\n     inkscape:cx="238.24454"\n     inkscape:cy="191.7559"\n     inkscape:window-x="0"\n     inkscape:window-y="0"\n     inkscape:window-maximized="0"\n     inkscape:current-layer="svg2989" />\n  <defs\n     id="defs2991" />\n  <metadata\n     id="metadata2994">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title></dc:title>\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <rect\n     x="0"\n     y="0"\n     width="10"\n     height="400"\n     style="fill:#0000ff;fill-rule:evenodd;stroke:#000000;stroke-width:0.44748709px;stroke-linecap:butt;stroke-linejoin:miter"\n     id="rect2997" />\n  <rect\n     x="590"\n     y="0"\n     width="10"\n     height="400"\n     style="fill:#0000ff;fill-rule:evenodd;stroke:#000000;stroke-width:0.44748709px;stroke-linecap:butt;stroke-linejoin:miter"\n     id="rect3224" />\n  <rect\n     x="0"\n     y="0"\n     width="600"\n     height="10"\n     style="fill:#0000ff;fill-rule:evenodd;stroke:#000000;stroke-width:0.31657991px;stroke-linecap:butt;stroke-linejoin:miter"\n     id="rect3226" />\n  <circle\n     sodipodi:ry="15"\n     sodipodi:rx="15"\n     sodipodi:cy="0"\n     sodipodi:cx="0"\n     d="M 15,0 C 15,8.2842712 8.2842712,15 0,15 -8.2842712,15 -15,8.2842712 -15,0 c 0,-8.2842712 6.7157288,-15 15,-15 8.2842712,0 15,6.7157288 15,15 z"\n     r="15"\n     cx="0"\n     cy="0"\n     transform="translate(565.67505,404.81819)"\n     style="fill:#00ffff"\n     id="circle3095" />\n  <circle\n     id="circle7052"\n     style="fill:#00ff00"\n     transform="translate(480.98587,55.47878)"\n     cy="0"\n     cx="0"\n     r="15"\n     d="M 15,0 C 15,8.2842712 8.2842712,15 0,15 -8.2842712,15 -15,8.2842712 -15,0 c 0,-8.2842712 6.7157288,-15 15,-15 8.2842712,0 15,6.7157288 15,15 z"\n     sodipodi:cx="0"\n     sodipodi:cy="0"\n     sodipodi:rx="15"\n     sodipodi:ry="15" />\n  <path\n     inkscape:connector-curvature="0"\n     id="path8364"\n     d="m 602.04628,123.82954 -483.23865,3.40908 481.5341,-51.13636 z"\n     style="fill:#00ff00;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n     sodipodi:nodetypes="cccc" />\n  <path\n     inkscape:connector-curvature="0"\n     id="path8366"\n     d="M 528.75082,205.15909 0.34171009,210.27272 8.8644401,160.8409 z"\n     style="fill:#00ff00;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n     sodipodi:nodetypes="cccc" />\n  <path\n     inkscape:connector-curvature="0"\n     id="path8368"\n     d="M 601.194,304.64773 124.77353,299.53409 598.63718,247.54545 z"\n     style="fill:#00ff00;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n     sodipodi:nodetypes="cccc" />\n  <path\n     sodipodi:nodetypes="cccc"\n     style="fill:#00ff00;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n     d="M 526.194,395.11364 4.6030738,414.71591 2.8985308,341.42045 z"\n     id="path8370"\n     inkscape:connector-curvature="0" />\n  <rect\n     id="rect8372"\n     style="fill:#0000ff;fill-rule:evenodd;stroke:#000000;stroke-width:0.31657991px;stroke-linecap:butt;stroke-linejoin:miter"\n     height="10"\n     width="600"\n     y="0"\n     x="0" />\n  <rect\n     x="0"\n     y="391.19321"\n     width="539.54181"\n     height="10"\n     style="fill:#0000ff;fill-rule:evenodd;stroke:#000000;stroke-width:0.30020663px;stroke-linecap:butt;stroke-linejoin:miter"\n     id="rect8374" />\n  <circle\n     id="circle8376"\n     style="fill:#00ffff"\n     transform="translate(565.67505,404.81819)"\n     cy="0"\n     cx="0"\n     r="15"\n     d="M 15,0 C 15,8.2842712 8.2842712,15 0,15 -8.2842712,15 -15,8.2842712 -15,0 c 0,-8.2842712 6.7157288,-15 15,-15 8.2842712,0 15,6.7157288 15,15 z"\n     sodipodi:cx="0"\n     sodipodi:cy="0"\n     sodipodi:rx="15"\n     sodipodi:ry="15" />\n</svg>\n'}),function(){var e=[].slice;define("lib/levelUtil",["text!data/levelMaps/1.svg","text!data/levelMaps/2.svg","text!data/levelMaps/3.svg","text!data/levelMaps/4.svg","text!data/levelMaps/5.svg","text!data/levelMaps/6.svg","text!data/levelMaps/7.svg","text!data/levelMaps/8.svg","text!data/levelMaps/9.svg","text!data/levelMaps/10.svg","text!data/levelMaps/11.svg","text!data/levelMaps/12.svg","text!data/levelMaps/13.svg","text!data/levelMaps/14.svg","text!data/levelMaps/15.svg","text!data/levelMaps/16.svg","text!data/levelMaps/17.svg","text!data/levelMaps/18.svg","text!data/levelMaps/19.svg","text!data/levelMaps/20.svg"],function(){var t;return t=1<=arguments.length?e.call(arguments,0):[],{load:function(e){var n,r;return n={rects:[],polygons:[],circles:[]},r=t[e-1],this.svg=(new DOMParser).parseFromString(r,"text/xml"),n.start=this.findStart(),n.goal=this.findGoal(),n.spikes=this.findSpikes(),n.ghosts=this.findGhosts(),n.movers=this.findMovers(),n.platforms=this.findPlatforms().concat(this.findRectifiedPaths()).concat(this.findPolygons()),n.lavas=this.findLavas(),n.texts=this.findTexts(),n},findStart:function(){var e,t,n,r;r=this.svg.getElementsByTagName("circle");for(t=0,n=r.length;t<n;t++){e=r[t];if(this.isGreen(e.style.fill))return this.locateCircle(e)}},findGoal:function(){var e,t,n,r;r=this.svg.getElementsByTagName("circle");for(t=0,n=r.length;t<n;t++){e=r[t];if(this.isLightBlue(e.style.fill))return this.locateCircle(e)}},findGhosts:function(){var e,t,n,r,i;t=[],i=this.svg.getElementsByTagName("circle");for(n=0,r=i.length;n<r;n++)e=i[n],this.isRed(e.style.fill)&&t.push(this.locateCircle(e));return t},findPlatforms:function(){var e,t,n,r,i;e=[],i=this.svg.getElementsByTagName("rect");for(n=0,r=i.length;n<r;n++)t=i[n],this.isPlatform(t)&&e.push(this.verticesFromRect(t));return e},findMovers:function(){var e,t,n,r,i;e=[],i=this.svg.getElementsByTagName("rect");for(n=0,r=i.length;n<r;n++)t=i[n],this.isMover(t)&&e.push(this.verticesFromRect(t));return e},findLavas:function(){var e,t,n,r,i;e=[],i=this.svg.getElementsByTagName("rect");for(n=0,r=i.length;n<r;n++)t=i[n],this.isLava(t)&&e.push(this.verticesFromRect(t));return e},findRectifiedPaths:function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d;a=.1,u=[],d=this.svg.getElementsByTagName("path");for(h=0,p=d.length;h<p;h++)o=d[h],this.isBlue(o.style.stroke)&&(n=this.getCoordinatesForPath(o),u=function(){var o,u,h;h=[];for(i=o=0,u=n.length-1;0<=u?o<u:o>u;i=0<=u?++o:--o)e=n[i],t=n[i+1],f=t.x-e.x,r=t.y-e.y,s=Math.sqrt(Math.pow(f,2)+Math.pow(r,2)),l=a*r/s,c=a*f/s,h.push([{x:e.x-l,y:e.y+c},{x:e.x+l,y:e.y-c},{x:t.x+l,y:t.y-c},{x:t.x-l,y:t.y+c}]);return h}());return u},findPolygons:function(){var e,t,n,r,i;t=[],i=this.svg.getElementsByTagName("path");for(n=0,r=i.length;n<r;n++)e=i[n],this.isGreen(e.style.fill)&&t.push(this.getCoordinatesForPath(e));return t},findSpikes:function(){var e,t,n,r,i;t=[],i=this.svg.getElementsByTagName("path");for(n=0,r=i.length;n<r;n++)e=i[n],(this.isPink(e.style.color)||this.isPink(e.style.stroke))&&t.push(this.getCoordinatesForPath(e));return t},findTexts:function(){var e,t,n,r,i,s,o;s=this.svg.getElementsByTagName("text"),o=[];for(r=0,i=s.length;r<i;r++)n=s[r],t=function(){var t,r,i,s;i=n.getElementsByTagName("tspan"),s=[];for(t=0,r=i.length;t<r;t++)e=i[t],s.push(e.textContent);return s}(),o.push({x:this.scale(n.x.baseVal.getItem(0).value),y:this.scale(n.y.baseVal.getItem(0).value),text:t.join("\n")});return o},locateCircle:function(e){var t,n,r,i,s;return t=e.getAttribute("transform"),n=new RegExp("\\((.*),"),r=new RegExp(",(.*)\\)"),i=n.exec(t)[1],s=r.exec(t)[1],{x:this.scale(e.cx.baseVal.value+i),y:this.scale(e.cy.baseVal.value+s)}},verticesFromRect:function(e){var t,n,r,i,s;return i=this.scale(e.x.baseVal.value),s=this.scale(e.y.baseVal.value),r=this.scale(e.width.baseVal.value),t=this.scale(e.height.baseVal.value),n=[],n[0]={x:i,y:s},n[1]={x:i+r,y:s},n[2]={x:i+r,y:s+t},n[3]={x:i,y:s+t},n},isPlatform:function(e){return!this.isLava(e)&&!this.isMover(e)},isMover:function(e){return!this.isLava(e)&&e.id.indexOf("mover")===0},isLava:function(e){return this.isRed(e.style.fill)},getCoordinatesForPath:function(e){var t,n,r,i,s,o,u,a,f,l,c;r=e.getAttribute("d");if(r.indexOf("M")===0){o=r.match(/(-?\d+\.?\d*)/g),c=[];for(i=u=0,f=o.length;u<f;i=u+=2)c.push({x:this.scale(parseFloat(o[i])),y:this.scale(parseFloat(o[i+1]))});return c}o=function(){var e,t,n,i;n=r.match(/(-?\d+\.?\d*)/g),i=[];for(e=0,t=n.length;e<t;e++)s=n[e],i.push(this.scale(parseFloat(s)));return i}.call(this),n={x:o[0],y:o[1]},t=[n];for(i=a=2,l=o.length;a<l;i=a+=2)n={x:n.x+o[i],y:n.y+o[i+1]},t.push(n);return t},scale:function(e){return e/30},isGreen:function(e){return e==="rgb(0, 255, 0)"||e==="#00ff00"},isLightBlue:function(e){return e==="rgb(0, 255, 255)"||e==="#00ffff"},isRed:function(e){return e==="rgb(255, 0, 0)"||e==="#ff0000"},isBlue:function(e){return e==="rgb(0, 0, 255)"||e==="#0000ff"},isPink:function(e){return e==="rgb(255, 0, 255)"||e==="#ff00ff"}}})}.call(this),function(){define("data/levelConfigs",[],function(){return{configFor:function(e){switch(e){case 7:return{tweak:function(e){var t,n,r,i,s;i=e.movers,s=[];for(n=0,r=i.length;n<r;n++)t=i[n],t.minHeight=2,s.push(t.maxHeight=11);return s}};case 11:return{numClones:20};case 12:return{numClones:3};case 13:return{numClones:5};case 14:return{numClones:30,tweak:function(e){var t,n,r,i,s;i=e.movers,s=[];for(n=0,r=i.length;n<r;n++)t=i[n],t.minHeight=2,s.push(t.maxHeight=11);return s}};case 15:return{numClones:40};case 16:return{numClones:3};case 17:return{numClones:15};case 18:return{numClones:1};case 19:return{tweak:function(e){var t,n,r,i,s;i=e.ghosts,s=[];for(n=0,r=i.length;n<r;n++)t=i[n],s.push(t.gigafy());return s}};case 20:return{numClones:-1};default:return{}}}}})}.call(this),function(){define("models/world",["lib/physics/physics","models/player","models/goal","models/spikes","models/ghost","models/mover","models/platform","models/lava","lib/levelUtil","data/levelConfigs"],function(e,t,n,r,i,s,o,u,a,f){return{startLevel:function(t){var n;return this.levelNumber=t,e.createWorld(),this.levelWinCallbacks=[],this.loadLevel(),n=f.configFor(this.levelNumber),n.tweak&&n.tweak(this),n.numClones&&(this.player.clonesLeft=n.numClones),this.player.displayClonesLeftInit()},update:function(){var t,n,r,i,s,o,u,a,f,l,c,h,p;if(this.levelNumber){e.update(),this.player.update(),l=this.player.clones;for(i=0,u=l.length;i<u;i++)t=l[i],t.update();c=this.ghosts;for(s=0,a=c.length;s<a;s++)n=c[s],n.update();h=this.movers,p=[];for(o=0,f=h.length;o<f;o++)r=h[o],p.push(r.update());return p}},drawables:function(){return{platforms:this.platforms,movers:this.movers,spikes:this.spikes,clones:this.player.clones,player:this.player,goal:this.goal,ghosts:this.ghosts,lavas:this.lavas,texts:this.texts,levelNumber:this.levelNumber}},setListeners:function(t,n){return e.setListeners(t,n)},loadLevel:function(){var e,f,l,c,h,p;return l=a.load(this.levelNumber),this.player=new t({x:l.start.x,y:l.start.y}),this.goal=new n({x:l.goal.x,y:l.goal.y}),this.platforms=function(){var e,t,n,r;n=l.platforms,r=[];for(e=0,t=n.length;e<t;e++)h=n[e],r.push(new o(h));return r}(),this.spikes=function(){var e,t,n,i;n=l.spikes,i=[];for(e=0,t=n.length;e<t;e++)p=n[e],i.push(new r(p));return i}(),this.ghosts=function(){var t,n,r,s;r=l.ghosts,s=[];for(t=0,n=r.length;t<n;t++)e=r[t],s.push(new i({x:e.x,y:e.y},this.player));return s}.call(this),this.movers=function(){var e,t,n,r;n=l.movers,r=[];for(e=0,t=n.length;e<t;e++)c=n[e],r.push(new s(c));return r}(),this.lavas=function(){var e,t,n,r;n=l.lavas,r=[];for(e=0,t=n.length;e<t;e++)f=n[e],r.push(new u(f));return r}(),this.texts=l.texts}}})}.call(this),function(){define("models/interactions",[],function(){var e,t;return e={},t={},{preCollision:function(){return t=this,function(e,n){return t.playerTouchesGoal(e,n),t.lavaMeltsPlayer(e,n),t.lavaMeltsClone(e,n),t.ghostsSpookPlayer(e,n),t.isSolid(e,n)}},postCollision:function(n){return t=this,e=n,function(e,n){return t.playerTouchesSpikes(e,n),t.cloneTouchesSpikes(e,n)}},playerTouchesGoal:function(n,r){var i,s,o;o=t.checkContact(n,r,"Goal","Player"),s=o[0],i=o[1];if(s&&i)return e.winLevel()},playerTouchesSpikes:function(n,r){var i,s,o;o=t.checkContact(n,r,"Player","Spikes"),i=o[0],s=o[1];if(i&&s)return i.spike(),e.loseLevel()},cloneTouchesSpikes:function(e,n){var r,i,s;s=t.checkContact(e,n,"Clone","Spikes"),r=s[0],i=s[1];if(r&&i)return r.spike()},ghostsSpookPlayer:function(n,r){var i,s,o;o=t.checkContact(n,r,"Ghost","Player"),i=o[0],s=o[1];if(i&&s)return s.spook(),e.loseLevel()},lavaMeltsPlayer:function(n,r){var i,s,o;o=t.checkContact(n,r,"Lava","Player"),i=o[0],s=o[1];if(i&&s)return s.melt(),e.loseLevel()},lavaMeltsClone:function(e,n){var r,i,s;s=t.checkContact(e,n,"Lava","Clone"),i=s[0],r=s[1];if(i&&r)return r.melt()},isSolid:function(e,n){return!(t.isGoal(e,n)||t.isGhost(e,n)||t.isLava(e,n)||t.isMelted(e,n))},isGhost:function(e,t){return e&&e.constructor.name==="Ghost"||t&&t.constructor.name==="Ghost"},isLava:function(e,t){return e&&e.constructor.name==="Lava"||t&&t.constructor.name==="Lava"},isGoal:function(e,t){return e&&e.constructor.name==="Goal"||t&&t.constructor.name==="Goal"},isMelted:function(e,t){return e&&e.melted||t&&t.melted},checkContact:function(e,t,n,r){var i,s;if(e&&t){i=e.constructor.name,s=t.constructor.name;if(i===n&&s===r)return[e,t];if(i===r&&s===n)return[t,e]}return[null,null]}}})}.call(this),function(){define("models/playground",["models/world","models/interactions"],function(e,t){return{startLevel:function(n){return this.paused=!1,this.levelWinCallbacks=[],this.levelLoseCallbacks=[],e.startLevel(n),e.setListeners(t.preCollision(this),t.postCollision(this)),this.player=e.player},update:function(){if(!this.paused)return e.update()},onLevelWin:function(e){return this.levelWinCallbacks.push(e)},onLevelLose:function(e){return this.levelLoseCallbacks.push(e)},winLevel:function(){var e,t,n,r,i;r=this.levelWinCallbacks,i=[];for(t=0,n=r.length;t<n;t++)e=r[t],i.push(e());return i},loseLevel:function(){var e,t,n,r,i;r=this.levelLoseCallbacks,i=[];for(t=0,n=r.length;t<n;t++)e=r[t],i.push(e());return i},drawables:function(){return e.drawables()},togglePause:function(){return this.paused=!this.paused},cloningUp:function(){return e.player.cloningUp=!0},cloningLeft:function(){return e.player.cloningLeft=!0},cloningDown:function(){return e.player.cloningDown=!0},cloningRight:function(){return e.player.cloningRight=!0},stopCloningUp:function(){return e.player.cloningUp=!1},stopCloningLeft:function(){return e.player.cloningLeft=!1},stopCloningDown:function(){return e.player.cloningDown=!1},stopCloningRight:function(){return e.player.cloningRight=!1}}})}.call(this),function(){define("views/canvasPainter",[],function(){var e,t,n,r,i;return n=30,i=20,e=5,r=24,t=30,{init:function(e,t,n,r){var i,s,o,u,a,f,l;o=this,this.time=0,this.canvasWidth=e.width,this.canvasHeight=e.height,this.ctx1=e.getContext("2d"),this.ctx2=t.getContext("2d"),this.ctx3=n.getContext("2d"),this.ctx4=r.getContext("2d"),this.playerImg=new Image,this.playerImg.src="assets/images/player.png",this.cloneImg=new Image,this.cloneImg.src="assets/images/clone.png",this.spikedPlayerImg=new Image,this.spikedPlayerImg.src="assets/images/spiked_player.png",this.spikedCloneImg=new Image,this.spikedCloneImg.src="assets/images/spiked_clone.png",this.platformImg=new Image,this.platformImg.src="assets/images/platform2.png",this.ghostImage=new Image,this.ghostImage.src="assets/images/ghost.png",this.imagesToLoad=[this.playerImg,this.cloneImg,this.spikedPlayerImg,this.spikedCloneImg,this.platformImg,this.ghostImage],this.totalImagesLoaded=0,f=this.imagesToLoad,l=[];for(u=0,a=f.length;u<a;u++)i=f[u],s=i.onload,l.push(i.onload=function(){o.totalImagesLoaded++;if(this.src.indexOf("assets/images/platform2.png")>=0)return o.platformPattern=o.ctx3.createPattern(this,"repeat")});return l},represent:function(e){var t,n,r,i,s,o,u,a,f;this.drawables=e;if(this.drawables){this.ctx=this.ctx1,this.ctx.clearRect(0,0,this.canvasWidth,this.canvasHeight),this.paintSpikes(this.drawables.spikes),this.ctx=this.ctx3,this.ctx.clearRect(0,0,this.canvasWidth,this.canvasHeight),this.paintPlatforms(this.drawables.platforms),this.paintTexts(this.drawables.texts),u=this.drawables.lavas,f=[];for(r=0,s=u.length;r<s;r++){t=u[r],t.minX=t.minY=9e3,t.maxX=t.maxY=0,a=t.vertices();for(i=0,o=a.length;i<o;i++)n=a[i],n.x>t.maxX&&(t.maxX=n.x),n.x<t.minX&&(t.minX=n.x),n.y>t.maxY&&(t.maxY=n.y),n.y<t.minY&&(t.minY=n.y);t.minX=this.scale(t.minX),t.minY=this.scale(t.minY),t.maxX=this.scale(t.maxX),t.maxY=this.scale(t.maxY),t.drawingWidth=t.maxX-t.minX,f.push(t.drawingHeight=t.maxY-t.minY)}return f}},paint:function(){if(!this.drawables||!this.staticsPainted)return this.totalImagesLoaded===this.imagesToLoad.length&&(this.staticsPainted=!0),this.represent(this.drawables);this.time++,this.ctx=this.ctx2,this.ctx.clearRect(0,0,this.canvasWidth,this.canvasHeight),this.paintPlayer(this.drawables.player),this.paintClones(this.drawables.clones),this.drawables.movers&&this.paintMovers(this.drawables.movers),this.paintGoal(this.drawables.goal),this.drawables.lavas&&this.paintLavas(this.drawables.lavas),this.ctx=this.ctx4,this.ctx.clearRect(0,0,this.canvasWidth,this.canvasHeight);if(this.drawables.ghosts)return this.paintGhosts(this.drawables.ghosts)},paintPlatforms:function(e){return this.ctx.lineWidth=0,this.ctx.strokeStyle="rgba(100, 100, 100, 0)",this.ctx.fillStyle=this.platformPattern||"rgb(50,50,50)",this.paintPolygons(e)},paintLavas:function(e){var t,n,r,i,s,o,u,a,f,l,c,h;h=[];for(l=0,c=e.length;l<c;l++)s=e[l],r=this.ctx.createLinearGradient(0,s.minY,0,s.maxY),r.addColorStop(0,"rgba(255, 0, 0, 0.0)"),r.addColorStop(.3,"rgba(255, 0, 0, 1.0)"),this.ctx.fillStyle=r,this.ctx.fillRect(s.minX,s.minY,s.drawingWidth,s.drawingHeight),h.push(function(){var e,r;r=[];for(i=e=1;e<=50;i=++e)n=parseInt(255*Math.random()),t=Math.sqrt(Math.random()),this.ctx.fillStyle="rgba(255, "+n+", 0, "+t+")",u=(100+s.drawingWidth*Math.random())/10,o=s.drawingHeight*Math.random(),a=s.minX+s.drawingWidth*Math.random()-.5*u,f=s.minY+s.drawingHeight*Math.random()-.5*o,r.push(this.ctx.fillRect(a,f,u,o));return r}.call(this));return h},paintMovers:function(e){return this.ctx.fillStyle="rgb(200, 200, 200)",this.paintPolygons(e)},paintPolygons:function(e){var t,n,r,i,s,o,u,a,f;f=[];for(i=0,o=e.length;i<o;i++){n=e[i],t=n.vertices()[0],this.ctx.beginPath(),this.ctx.moveTo(this.scale(t.x),this.scale(t.y)),a=n.vertices();for(s=0,u=a.length;s<u;s++)r=a[s],this.ctx.lineTo(this.scale(r.x),this.scale(r.y));this.ctx.closePath(),this.ctx.stroke(),f.push(this.ctx.fill())}return f},paintSpikes:function(e){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g;this.ctx.lineWidth=1,this.ctx.strokeStyle="gray",this.ctx.fillStyle="white",f=10,a=20,g=[];for(v=0,m=e.length;v<m;v++)l=e[v],c=this.scale(l.x1),p=this.scale(l.y1),r=this.scale(l.x2),i=this.scale(l.y2),t=r-c,n=i-p,o=Math.sqrt(Math.pow(t,2)+Math.pow(n,2)),u=1+o/a,h=t/u,d=n/u,g.push(function(){var e,t,n;n=[];for(s=e=0,t=u-1;0<=t?e<t:e>t;s=0<=t?++e:--e)c+=h,p+=d,c>r&&(c=r),p>i&&(p=i),this.ctx.beginPath(),this.ctx.lineTo(c,p+f),this.ctx.lineTo(c+f,p),this.ctx.lineTo(c,p-f),this.ctx.lineTo(c-f,p),this.ctx.closePath(),n.push(this.ctx.fill());return n}.call(this));return g},paintClones:function(e){var t,n,r,i;i=[];for(n=0,r=e.length;n<r;n++)t=e[n],t.dead?i.push(this.paintObject(t,this.spikedCloneImg)):i.push(this.paintObject(t,this.cloneImg));return i},paintPlayer:function(e){return e.dead?this.paintObject(e,this.spikedPlayerImg):this.paintObject(e,this.playerImg)},paintGoal:function(e){var t,n,r,i,s;return this.ctx.beginPath(),i=this.scale(e.x()),s=this.scale(e.y()),this.drawables.levelNumber===20?r=this.scale(.5):r=this.scale(.1),t=Math.abs(Math.sin(this.time/15))*3+1,n=this.ctx.createRadialGradient(i,s,r,i,s,r+r*t),n.addColorStop(0,"rgba(255, 255, 255, 1.0)"),n.addColorStop(.2,"rgba(255, 255, 255, 0.9)"),n.addColorStop(.4,"rgba(255, 255, 255, 0.2)"),n.addColorStop(1,"rgba(255, 255, 255, 0.0)"),this.ctx.arc(i,s,r+r*t,0,2*Math.PI,!1),this.ctx.fillStyle=n,this.ctx.fill()},paintGhosts:function(e){var t,n,r,i,s,o,u;this.ctx.globalAlpha=.7;for(o=0,u=e.length;o<u;o++)t=e[o],r=this.scale(t.r()*7)+3*Math.sin(this.time/10),n=this.scale(t.r()*7)+3*Math.cos(this.time/10),i=this.scale(t.x())-.5*r,s=this.scale(t.y())-.5*n,this.ctx.drawImage(this.ghostImage,i,s,r,n);return this.ctx.globalAlpha=1},paintTexts:function(n){var s,o,u,a,f,l,c,h,p,d,v,m,g;this.ctx.font=""+r+"px sans-serif",g=[];for(p=0,v=n.length;p<v;p++){o=n[p],l=this.scale(o.x),c=this.scale(o.y),a=o.text.split("\n"),s=0;for(d=0,m=a.length;d<m;d++)u=a[d],f=this.ctx.measureText(u),f.width>s&&(s=f.width);this.ctx.fillStyle="rgba(0, 0, 0, .7)",this.ctx.fillRect(l-i,c-t-e,s+i*2,30*(a.length-1)+t*1.5+e*2),h=0,this.ctx.fillStyle="rgba(255, 255, 255, 1.0)",g.push(function(){var e,n,r;r=[];for(e=0,n=a.length;e<n;e++)u=a[e],this.ctx.fillText(u,this.scale(o.x),this.scale(o.y)+h),r.push(h+=t);return r}.call(this))}return g},paintObject:function(e,t){var n;return this.ctx.save(),this.ctx.translate(this.scale(e.x()),this.scale(e.y())),this.ctx.rotate(e.a()),n=this.scale(e.r()),this.ctx.drawImage(t,-n,-n,2*n,2*n),this.ctx.restore()},scale:function(e){return e*n}}})}.call(this),function(){define("lib/gameLoop",[],function(){var e;return e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return window.setTimeout(e,1e3/60)},{loop:function(t){var n;return n=function(){return t(),e(n)},n()},loopThis:function(t,n){var r;return r=function(){return t[n](),e(r)},r()}}})}.call(this),function(){var e=[].slice;define("lib/webgl",["lib/gameLoop"],function(t){return{initGl:function(e){return this.canvas=e,this.initialize()},animate:function(){return this.compile(),this.paused=!1,t.loopThis(this,"render")},addFragmentShaders:function(e){return this.addShaders(e,this.fragmentShaderStrategy)},addVertexShaders:function(e){return this.addShaders(e,this.vertexShaderStrategy)},setDimensions:function(e,t){return this.containerWidth=e,this.containerHeight=t,this.resetViewport()},resetViewport:function(){return this.width=this.containerWidth/this.pixelSize,this.height=this.containerHeight/this.pixelSize,this.canvas.width=this.width,this.canvas.height=this.height,this.gl.viewport(0,0,this.width,this.height),this.createTargets()},setMouse:function(e,t){return this.mouse={x:e,y:t}},pause:function(){return this.paused=!0},reset:function(){return this.createTargets()},setVar:function(e,t){return this.customVars[e]=t},setPixelSize:function(e){return this.pixelSize=e,this.resetViewport()},squareData:new Float32Array([-1,-1,1,-1,-1,1,1,-1,1,1,-1,1]),customVars:{},pixelSize:1,containerWidth:100,containerHeight:100,initialize:function(){try{this.gl=this.canvas.getContext("experimental-webgl")}catch(e){}if(!this.gl)throw"cannot create webgl context";return this.buffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.buffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.squareData,this.gl.STATIC_DRAW),this.currentProgram=this.gl.createProgram(),this.resetViewport(),this.start_time=(new Date).getTime()},compile:function(){return this.gl.linkProgram(this.currentProgram),this.gl.getProgramParameter(this.currentProgram,this.gl.LINK_STATUS)||console.error("VALIDATE_STATUS: "+this.gl.getProgramParameter(this.currentProgram,this.gl.VALIDATE_STATUS),"ERROR: "+this.gl.getError()),this.gl.useProgram(this.currentProgram),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.buffer),this.gl.vertexAttribPointer(this.someVertexPosition,2,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.someVertexPosition)},createTargets:function(){return this.frontTarget=this.createTarget(),this.backTarget=this.createTarget()},createTarget:function(){var e;return e={},e.framebuffer=this.gl.createFramebuffer(),e.renderbuffer=this.gl.createRenderbuffer(),e.texture=this.gl.createTexture(),this.gl.bindTexture(this.gl.TEXTURE_2D,e.texture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.width,this.height,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,e.framebuffer),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,e.texture,0),this.gl.bindRenderbuffer(this.gl.RENDERBUFFER,e.renderbuffer),this.gl.renderbufferStorage(this.gl.RENDERBUFFER,this.gl.DEPTH_COMPONENT16,this.width,this.height),this.gl.framebufferRenderbuffer(this.gl.FRAMEBUFFER,this.gl.DEPTH_ATTACHMENT,this.gl.RENDERBUFFER,e.renderbuffer),this.gl.bindTexture(this.gl.TEXTURE_2D,null),this.gl.bindRenderbuffer(this.gl.RENDERBUFFER,null),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),e},addShaders:function(e,t){var n,r,i,s,o,u;u=[];for(s=0,o=e.length;s<o;s++)r=e[s],i=t.call(this,r),n=this.gl.getShaderInfoLog(i),n?u.push(console.log("SHADER ERROR: "+n)):u.push(this.gl.attachShader(this.currentProgram,i));return u},vertexShaderStrategy:function(e){return this.createShader(e,this.gl.VERTEX_SHADER)},fragmentShaderStrategy:function(e){return this.createShader(e,this.gl.FRAGMENT_SHADER)},createShader:function(e,t){var n;return n=this.gl.createShader(t),this.gl.shaderSource(n,e),this.gl.compileShader(n),n},render:function(){var t,n,r,i,s;if(this.paused||!this.currentProgram)return;this.gl.useProgram(this.currentProgram),this.gl.uniform1f(this.gl.getUniformLocation(this.currentProgram,"time"),((new Date).getTime()-this.start_time)/1e3),this.gl.uniform2f(this.gl.getUniformLocation(this.currentProgram,"resolution"),this.width,this.height),this.gl.uniform1i(this.gl.getUniformLocation(this.currentProgram,"backbuffer"),0),this.mouse&&this.gl.uniform2f(this.gl.getUniformLocation(this.currentProgram,"mouse"),this.mouse.x/this.pixelSize,this.mouse.y/this.pixelSize),r=this.customVars;for(t in r)n=r[t],n.length===4?(i=this.gl).uniform4f.apply(i,[this.gl.getUniformLocation(this.currentProgram,t)].concat(e.call(n))):this.gl.uniform1f(this.gl.getUniformLocation(this.currentProgram,t),n);return this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.backTarget.texture),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.frontTarget.framebuffer),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.gl.drawArrays(this.gl.TRIANGLES,0,6),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.gl.drawArrays(this.gl.TRIANGLES,0,6),s=[this.backTarget,this.frontTarget],this.frontTarget=s[0],this.backTarget=s[1],s}}})}.call(this),function(){define("views/trippyBackground",["lib/webgl"],function(e){return{setup:function(t){var n;try{return e.initGl(t),e.addVertexShaders(["attribute vec3 position;\n\nvoid main() {\n    gl_Position = vec4(position, 1.0);\n}"]),n=Math.floor(Math.random()*3),e.addFragmentShaders(["#ifdef GL_ES\n  precision mediump float;\n#endif\n  uniform float time;  uniform vec2 resolution;  void main( void ) {    vec2 position = gl_FragCoord.xy / resolution.xy;    float t = time + 500.0;    float color = 0.0;    color += sin( position.x * cos( t / "+(this.rand(20)+10)+" ) * "+(this.rand(100)+5)+" ) + cos( position.y * cos( t / "+(this.rand(40)+5)+" ) * "+(this.rand(100)+5)+" );    color += sin( position.y * sin( t / "+(this.rand(20)+10)+" ) * "+(this.rand(100)+5)+" ) + cos( position.x * sin( t / "+(this.rand(40)+5)+" ) * "+(this.rand(100)+5)+" );    color += sin( position.x * sin( t / "+(this.rand(20)+10)+" ) * "+(this.rand(100)+5)+" ) + sin( position.y * sin( t / "+(this.rand(40)+5)+" ) * "+(this.rand(100)+5)+" );    color *= sin( t / "+(this.rand(10)+10)+" ) * 0.9;    float r = abs(sin(color + t / "+(this.rand(5)+1)+" ) * "+(this.rand(.5)+1)+");    float g = abs(sin(color + t / "+(this.rand(5)+1)+" ) * "+(this.rand(.5)+1)+");    float b = abs(sin(color + t / "+(this.rand(5)+1)+" ) * "+(this.rand(.5)+1)+");    if ("+(n===0)+") { r = color; }    if ("+(n===1)+") { g = color; }    if ("+(n===2)+") { b = color; }    gl_FragColor = vec4( vec3( r, g, b ), 1.0 );  }      "]),this.setDimensions(600,400),this.start()}catch(r){return console.log("WebGL error: "+r)}},start:function(){return e.animate()},pause:function(){return e.pause()},setDimensions:function(t,n){return e.setDimensions(t,n)},setMouse:function(t,n){return e.setMouse(t,n)},reset:function(){return e.reset()},rand:function(e){return e=Math.pow(Math.random()*e,.9),(""+e).substring(0,5)},numBetween:function(e,t){return e+Math.random()*(t-e)}}})}.call(this),function(){define("lib/persistence",[],function(){return{get:function(e){return JSON.parse(localStorage.getItem(e))},set:function(e,t){return localStorage.setItem(e,JSON.stringify(t))}}})}.call(this),function(e,t){e.fn.jPlayer=function(n){var r="string"==typeof n,i=Array.prototype.slice.call(arguments,1),s=this,n=!r&&i.length?e.extend.apply(null,[!0,n].concat(i)):n;return r&&"_"===n.charAt(0)?s:(r?this.each(function(){var r=e.data(this,"jPlayer"),o=r&&e.isFunction(r[n])?r[n].apply(r,i):r;if(o!==r&&o!==t)return s=o,!1}):this.each(function(){var t=e.data(this,"jPlayer");t?t.option(n||{}):e.data(this,"jPlayer",new e.jPlayer(n,this))}),s)},e.jPlayer=function(t,n){if(arguments.length){this.element=e(n),this.options=e.extend(!0,{},this.options,t);var r=this;this.element.bind("remove.jPlayer",function(){r.destroy()}),this._init()}},e.jPlayer.emulateMethods="load play pause",e.jPlayer.emulateStatus="src readyState networkState currentTime duration paused ended playbackRate",e.jPlayer.emulateOptions="muted volume",e.jPlayer.reservedEvent="ready flashreset resize repeat error warning",e.jPlayer.event={ready:"jPlayer_ready",flashreset:"jPlayer_flashreset",resize:"jPlayer_resize",repeat:"jPlayer_repeat",click:"jPlayer_click",error:"jPlayer_error",warning:"jPlayer_warning",loadstart:"jPlayer_loadstart",progress:"jPlayer_progress",suspend:"jPlayer_suspend",abort:"jPlayer_abort",emptied:"jPlayer_emptied",stalled:"jPlayer_stalled",play:"jPlayer_play",pause:"jPlayer_pause",loadedmetadata:"jPlayer_loadedmetadata",loadeddata:"jPlayer_loadeddata",waiting:"jPlayer_waiting",playing:"jPlayer_playing",canplay:"jPlayer_canplay",canplaythrough:"jPlayer_canplaythrough",seeking:"jPlayer_seeking",seeked:"jPlayer_seeked",timeupdate:"jPlayer_timeupdate",ended:"jPlayer_ended",ratechange:"jPlayer_ratechange",durationchange:"jPlayer_durationchange",volumechange:"jPlayer_volumechange"},e.jPlayer.htmlEvent="loadstart abort emptied stalled loadedmetadata loadeddata canplay canplaythrough ratechange".split(" "),e.jPlayer.pause=function(){e.each(e.jPlayer.prototype.instances,function(e,t){t.data("jPlayer").status.srcSet&&t.jPlayer("pause")})},e.jPlayer.timeFormat={showHour:!1,showMin:!0,showSec:!0,padHour:!1,padMin:!0,padSec:!0,sepHour:":",sepMin:":",sepSec:""},e.jPlayer.convertTime=function(t){var n=new Date(1e3*t),r=n.getUTCHours(),t=n.getUTCMinutes(),n=n.getUTCSeconds(),r=e.jPlayer.timeFormat.padHour&&10>r?"0"+r:r,t=e.jPlayer.timeFormat.padMin&&10>t?"0"+t:t,n=e.jPlayer.timeFormat.padSec&&10>n?"0"+n:n;return(e.jPlayer.timeFormat.showHour?r+e.jPlayer.timeFormat.sepHour:"")+(e.jPlayer.timeFormat.showMin?t+e.jPlayer.timeFormat.sepMin:"")+(e.jPlayer.timeFormat.showSec?n+e.jPlayer.timeFormat.sepSec:"")},e.jPlayer.uaBrowser=function(e){var e=e.toLowerCase(),t=/(opera)(?:.*version)?[ \/]([\w.]+)/,n=/(msie) ([\w.]+)/,r=/(mozilla)(?:.*? rv:([\w.]+))?/,e=/(webkit)[ \/]([\w.]+)/.exec(e)||t.exec(e)||n.exec(e)||0>e.indexOf("compatible")&&r.exec(e)||[];return{browser:e[1]||"",version:e[2]||"0"}},e.jPlayer.uaPlatform=function(e){var t=e.toLowerCase(),n=/(android)/,r=/(mobile)/,e=/(ipad|iphone|ipod|android|blackberry|playbook|windows ce|webos)/.exec(t)||[],t=/(ipad|playbook)/.exec(t)||!r.exec(t)&&n.exec(t)||[];return e[1]&&(e[1]=e[1].replace(/\s/g,"_")),{platform:e[1]||"",tablet:t[1]||""}},e.jPlayer.browser={},e.jPlayer.platform={};var n=e.jPlayer.uaBrowser(navigator.userAgent);n.browser&&(e.jPlayer.browser[n.browser]=!0,e.jPlayer.browser.version=n.version),n=e.jPlayer.uaPlatform(navigator.userAgent),n.platform&&(e.jPlayer.platform[n.platform]=!0,e.jPlayer.platform.mobile=!n.tablet,e.jPlayer.platform.tablet=!!n.tablet),e.jPlayer.prototype={count:0,version:{script:"2.2.0",needFlash:"2.2.0",flash:"unknown"},options:{swfPath:"js",solution:"html, flash",supplied:"mp3",preload:"metadata",volume:.8,muted:!1,wmode:"opaque",backgroundColor:"#000000",cssSelectorAncestor:"#jp_container_1",cssSelector:{videoPlay:".jp-video-play",play:".jp-play",pause:".jp-pause",stop:".jp-stop",seekBar:".jp-seek-bar",playBar:".jp-play-bar",mute:".jp-mute",unmute:".jp-unmute",volumeBar:".jp-volume-bar",volumeBarValue:".jp-volume-bar-value",volumeMax:".jp-volume-max",currentTime:".jp-current-time",duration:".jp-duration",fullScreen:".jp-full-screen",restoreScreen:".jp-restore-screen",repeat:".jp-repeat",repeatOff:".jp-repeat-off",gui:".jp-gui",noSolution:".jp-no-solution"},fullScreen:!1,autohide:{restored:!1,full:!0,fadeIn:200,fadeOut:600,hold:1e3},loop:!1,repeat:function(t){t.jPlayer.options.loop?e(this).unbind(".jPlayerRepeat").bind(e.jPlayer.event.ended+".jPlayer.jPlayerRepeat",function(){e(this).jPlayer("play")}):e(this).unbind(".jPlayerRepeat")},nativeVideoControls:{},noFullScreen:{msie:/msie [0-6]/,ipad:/ipad.*?os [0-4]/,iphone:/iphone/,ipod:/ipod/,android_pad:/android [0-3](?!.*?mobile)/,android_phone:/android.*?mobile/,blackberry:/blackberry/,windows_ce:/windows ce/,webos:/webos/},noVolume:{ipad:/ipad/,iphone:/iphone/,ipod:/ipod/,android_pad:/android(?!.*?mobile)/,android_phone:/android.*?mobile/,blackberry:/blackberry/,windows_ce:/windows ce/,webos:/webos/,playbook:/playbook/},verticalVolume:!1,idPrefix:"jp",noConflict:"jQuery",emulateHtml:!1,errorAlerts:!1,warningAlerts:!1},optionsAudio:{size:{width:"0px",height:"0px",cssClass:""},sizeFull:{width:"0px",height:"0px",cssClass:""}},optionsVideo:{size:{width:"480px",height:"270px",cssClass:"jp-video-270p"},sizeFull:{width:"100%",height:"100%",cssClass:"jp-video-full"}},instances:{},status:{src:"",media:{},paused:!0,format:{},formatType:"",waitForPlay:!0,waitForLoad:!0,srcSet:!1,video:!1,seekPercent:0,currentPercentRelative:0,currentPercentAbsolute:0,currentTime:0,duration:0,readyState:0,networkState:0,playbackRate:1,ended:0},internal:{ready:!1},solution:{html:!0,flash:!0},format:{mp3:{codec:'audio/mpeg; codecs="mp3"',flashCanPlay:!0,media:"audio"},m4a:{codec:'audio/mp4; codecs="mp4a.40.2"',flashCanPlay:!0,media:"audio"},oga:{codec:'audio/ogg; codecs="vorbis"',flashCanPlay:!1,media:"audio"},wav:{codec:'audio/wav; codecs="1"',flashCanPlay:!1,media:"audio"},webma:{codec:'audio/webm; codecs="vorbis"',flashCanPlay:!1,media:"audio"},fla:{codec:"audio/x-flv",flashCanPlay:!0,media:"audio"},rtmpa:{codec:'audio/rtmp; codecs="rtmp"',flashCanPlay:!0,media:"audio"},m4v:{codec:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"',flashCanPlay:!0,media:"video"},ogv:{codec:'video/ogg; codecs="theora, vorbis"',flashCanPlay:!1,media:"video"},webmv:{codec:'video/webm; codecs="vorbis, vp8"',flashCanPlay:!1,media:"video"},flv:{codec:"video/x-flv",flashCanPlay:!0,media:"video"},rtmpv:{codec:'video/rtmp; codecs="rtmp"',flashCanPlay:!0,media:"video"}},_init:function(){var n=this;this.element.empty(),this.status=e.extend({},this.status),this.internal=e.extend({},this.internal),this.internal.domNode=this.element.get(0),this.formats=[],this.solutions=[],this.require={},this.htmlElement={},this.html={},this.html.audio={},this.html.video={},this.flash={},this.css={},this.css.cs={},this.css.jq={},this.ancestorJq=[],this.options.volume=this._limitValue(this.options.volume,0,1),e.each(this.options.supplied.toLowerCase().split(","),function(t,r){var i=r.replace(/^\s+|\s+$/g,"");if(n.format[i]){var s=!1;e.each(n.formats,function(e,t){if(i===t)return s=!0,!1}),s||n.formats.push(i)}}),e.each(this.options.solution.toLowerCase().split(","),function(t,r){var i=r.replace(/^\s+|\s+$/g,"");if(n.solution[i]){var s=!1;e.each(n.solutions,function(e,t){if(i===t)return s=!0,!1}),s||n.solutions.push(i)}}),this.internal.instance="jp_"+this.count,this.instances[this.internal.instance]=this.element,this.element.attr("id")||this.element.attr("id",this.options.idPrefix+"_jplayer_"+this.count),this.internal.self=e.extend({},{id:this.element.attr("id"),jq:this.element}),this.internal.audio=e.extend({},{id:this.options.idPrefix+"_audio_"+this.count,jq:t}),this.internal.video=e.extend({},{id:this.options.idPrefix+"_video_"+this.count,jq:t}),this.internal.flash=e.extend({},{id:this.options.idPrefix+"_flash_"+this.count,jq:t,swf:this.options.swfPath+(this.options.swfPath.toLowerCase().slice(-4)!==".swf"?(this.options.swfPath&&this.options.swfPath.slice(-1)!=="/"?"/":"")+"Jplayer.swf":"")}),this.internal.poster=e.extend({},{id:this.options.idPrefix+"_poster_"+this.count,jq:t}),e.each(e.jPlayer.event,function(e,r){n.options[e]!==t&&(n.element.bind(r+".jPlayer",n.options[e]),n.options[e]=t)}),this.require.audio=!1,this.require.video=!1,e.each(this.formats,function(e,t){n.require[n.format[t].media]=!0}),this.options=this.require.video?e.extend(!0,{},this.optionsVideo,this.options):e.extend(!0,{},this.optionsAudio,this.options),this._setSize(),this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls),this.status.noFullScreen=this._uaBlocklist(this.options.noFullScreen),this.status.noVolume=this._uaBlocklist(this.options.noVolume),this._restrictNativeVideoControls(),this.htmlElement.poster=document.createElement("img"),this.htmlElement.poster.id=this.internal.poster.id,this.htmlElement.poster.onload=function(){(!n.status.video||n.status.waitForPlay)&&n.internal.poster.jq.show()},this.element.append(this.htmlElement.poster),this.internal.poster.jq=e("#"+this.internal.poster.id),this.internal.poster.jq.css({width:this.status.width,height:this.status.height}),this.internal.poster.jq.hide(),this.internal.poster.jq.bind("click.jPlayer",function(){n._trigger(e.jPlayer.event.click)}),this.html.audio.available=!1,this.require.audio&&(this.htmlElement.audio=document.createElement("audio"),this.htmlElement.audio.id=this.internal.audio.id,this.html.audio.available=!!this.htmlElement.audio.canPlayType&&this._testCanPlayType(this.htmlElement.audio)),this.html.video.available=!1,this.require.video&&(this.htmlElement.video=document.createElement("video"),this.htmlElement.video.id=this.internal.video.id,this.html.video.available=!!this.htmlElement.video.canPlayType&&this._testCanPlayType(this.htmlElement.video)),this.flash.available=this._checkForFlash(10),this.html.canPlay={},this.flash.canPlay={},e.each(this.formats,function(e,t){n.html.canPlay[t]=n.html[n.format[t].media].available&&""!==n.htmlElement[n.format[t].media].canPlayType(n.format[t].codec),n.flash.canPlay[t]=n.format[t].flashCanPlay&&n.flash.available}),this.html.desired=!1,this.flash.desired=!1,e.each(this.solutions,function(t,r){if(t===0)n[r].desired=!0;else{var i=!1,s=!1;e.each(n.formats,function(e,t){n[n.solutions[0]].canPlay[t]&&(n.format[t].media==="video"?s=!0:i=!0)}),n[r].desired=n.require.audio&&!i||n.require.video&&!s}}),this.html.support={},this.flash.support={},e.each(this.formats,function(e,t){n.html.support[t]=n.html.canPlay[t]&&n.html.desired,n.flash.support[t]=n.flash.canPlay[t]&&n.flash.desired}),this.html.used=!1,this.flash.used=!1,e.each(this.solutions,function(t,r){e.each(n.formats,function(e,t){if(n[r].support[t])return n[r].used=!0,!1})}),this._resetActive(),this._resetGate(),this._cssSelectorAncestor(this.options.cssSelectorAncestor),!this.html.used&&!this.flash.used?(this._error({type:e.jPlayer.error.NO_SOLUTION,context:"{solution:'"+this.options.solution+"', supplied:'"+this.options.supplied+"'}",message:e.jPlayer.errorMsg.NO_SOLUTION,hint:e.jPlayer.errorHint.NO_SOLUTION}),this.css.jq.noSolution.length&&this.css.jq.noSolution.show()):this.css.jq.noSolution.length&&this.css.jq.noSolution.hide();if(this.flash.used){var r,i="jQuery="+encodeURI(this.options.noConflict)+"&id="+encodeURI(this.internal.self.id)+"&vol="+this.options.volume+"&muted="+this.options.muted;if(e.jPlayer.browser.msie&&Number(e.jPlayer.browser.version)<=8){i=['<param name="movie" value="'+this.internal.flash.swf+'" />','<param name="FlashVars" value="'+i+'" />','<param name="allowScriptAccess" value="always" />','<param name="bgcolor" value="'+this.options.backgroundColor+'" />','<param name="wmode" value="'+this.options.wmode+'" />'],r=document.createElement('<object id="'+this.internal.flash.id+'" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="0" height="0"></object>');for(var s=0;s<i.length;s++)r.appendChild(document.createElement(i[s]))}else s=function(e,t,n){var r=document.createElement("param");r.setAttribute("name",t),r.setAttribute("value",n),e.appendChild(r)},r=document.createElement("object"),r.setAttribute("id",this.internal.flash.id),r.setAttribute("data",this.internal.flash.swf),r.setAttribute("type","application/x-shockwave-flash"),r.setAttribute("width","1"),r.setAttribute("height","1"),s(r,"flashvars",i),s(r,"allowscriptaccess","always"),s(r,"bgcolor",this.options.backgroundColor),s(r,"wmode",this.options.wmode);this.element.append(r),this.internal.flash.jq=e(r)}this.html.used&&(this.html.audio.available&&(this._addHtmlEventListeners(this.htmlElement.audio,this.html.audio),this.element.append(this.htmlElement.audio),this.internal.audio.jq=e("#"+this.internal.audio.id)),this.html.video.available&&(this._addHtmlEventListeners(this.htmlElement.video,this.html.video),this.element.append(this.htmlElement.video),this.internal.video.jq=e("#"+this.internal.video.id),this.status.nativeVideoControls?this.internal.video.jq.css({width:this.status.width,height:this.status.height}):this.internal.video.jq.css({width:"0px",height:"0px"}),this.internal.video.jq.bind("click.jPlayer",function(){n._trigger(e.jPlayer.event.click)}))),this.options.emulateHtml&&this._emulateHtmlBridge(),this.html.used&&!this.flash.used&&setTimeout(function(){n.internal.ready=!0,n.version.flash="n/a",n._trigger(e.jPlayer.event.repeat),n._trigger(e.jPlayer.event.ready)},100),this._updateNativeVideoControls(),this._updateInterface(),this._updateButtons(!1),this._updateAutohide(),this._updateVolume(this.options.volume),this._updateMute(this.options.muted),this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),e.jPlayer.prototype.count++},destroy:function(){this.clearMedia(),this._removeUiClass(),this.css.jq.currentTime.length&&this.css.jq.currentTime.text(""),this.css.jq.duration.length&&this.css.jq.duration.text(""),e.each(this.css.jq,function(e,t){t.length&&t.unbind(".jPlayer")}),this.internal.poster.jq.unbind(".jPlayer"),this.internal.video.jq&&this.internal.video.jq.unbind(".jPlayer"),this.options.emulateHtml&&this._destroyHtmlBridge(),this.element.removeData("jPlayer"),this.element.unbind(".jPlayer"),this.element.empty(),delete this.instances[this.internal.instance]},enable:function(){},disable:function(){},_testCanPlayType:function(e){try{return e.canPlayType(this.format.mp3.codec),!0}catch(t){return!1}},_uaBlocklist:function(t){var n=navigator.userAgent.toLowerCase(),r=!1;return e.each(t,function(e,t){if(t&&t.test(n))return r=!0,!1}),r},_restrictNativeVideoControls:function(){this.require.audio&&this.status.nativeVideoControls&&(this.status.nativeVideoControls=!1,this.status.noFullScreen=!0)},_updateNativeVideoControls:function(){this.html.video.available&&this.html.used&&(this.htmlElement.video.controls=this.status.nativeVideoControls,this._updateAutohide(),this.status.nativeVideoControls&&this.require.video?(this.internal.poster.jq.hide(),this.internal.video.jq.css({width:this.status.width,height:this.status.height})):this.status.waitForPlay&&this.status.video&&(this.internal.poster.jq.show(),this.internal.video.jq.css({width:"0px",height:"0px"})))},_addHtmlEventListeners:function(t,n){var r=this;t.preload=this.options.preload,t.muted=this.options.muted,t.volume=this.options.volume,t.addEventListener("progress",function(){n.gate&&(r._getHtmlStatus(t),r._updateInterface(),r._trigger(e.jPlayer.event.progress))},!1),t.addEventListener("timeupdate",function(){n.gate&&(r._getHtmlStatus(t),r._updateInterface(),r._trigger(e.jPlayer.event.timeupdate))},!1),t.addEventListener("durationchange",function(){n.gate&&(r._getHtmlStatus(t),r._updateInterface(),r._trigger(e.jPlayer.event.durationchange))},!1),t.addEventListener("play",function(){n.gate&&(r._updateButtons(!0),r._html_checkWaitForPlay(),r._trigger(e.jPlayer.event.play))},!1),t.addEventListener("playing",function(){n.gate&&(r._updateButtons(!0),r._seeked(),r._trigger(e.jPlayer.event.playing))},!1),t.addEventListener("pause",function(){n.gate&&(r._updateButtons(!1),r._trigger(e.jPlayer.event.pause))},!1),t.addEventListener("waiting",function(){n.gate&&(r._seeking(),r._trigger(e.jPlayer.event.waiting))},!1),t.addEventListener("seeking",function(){n.gate&&(r._seeking(),r._trigger(e.jPlayer.event.seeking))},!1),t.addEventListener("seeked",function(){n.gate&&(r._seeked(),r._trigger(e.jPlayer.event.seeked))},!1),t.addEventListener("volumechange",function(){n.gate&&(r.options.volume=t.volume,r.options.muted=t.muted,r._updateMute(),r._updateVolume(),r._trigger(e.jPlayer.event.volumechange))},!1),t.addEventListener("suspend",function(){n.gate&&(r._seeked(),r._trigger(e.jPlayer.event.suspend))},!1),t.addEventListener("ended",function(){n.gate&&(e.jPlayer.browser.webkit||(r.htmlElement.media.currentTime=0),r.htmlElement.media.pause(),r._updateButtons(!1),r._getHtmlStatus(t,!0),r._updateInterface(),r._trigger(e.jPlayer.event.ended))},!1),t.addEventListener("error",function(){n.gate&&(r._updateButtons(!1),r._seeked(),r.status.srcSet&&(clearTimeout(r.internal.htmlDlyCmdId),r.status.waitForLoad=!0,r.status.waitForPlay=!0,r.status.video&&!r.status.nativeVideoControls&&r.internal.video.jq.css({width:"0px",height:"0px"}),r._validString(r.status.media.poster)&&!r.status.nativeVideoControls&&r.internal.poster.jq.show(),r.css.jq.videoPlay.length&&r.css.jq.videoPlay.show(),r._error({type:e.jPlayer.error.URL,context:r.status.src,message:e.jPlayer.errorMsg.URL,hint:e.jPlayer.errorHint.URL})))},!1),e.each(e.jPlayer.htmlEvent,function(i,s){t.addEventListener(this,function(){n.gate&&r._trigger(e.jPlayer.event[s])},!1)})},_getHtmlStatus:function(e,t){var n=0,r=0,i=0,s=0;isFinite(e.duration)&&(this.status.duration=e.duration),n=e.currentTime,r=this.status.duration>0?100*n/this.status.duration:0,typeof e.seekable=="object"&&e.seekable.length>0?(i=this.status.duration>0?100*e.seekable.end(e.seekable.length-1)/this.status.duration:100,s=this.status.duration>0?100*e.currentTime/e.seekable.end(e.seekable.length-1):0):(i=100,s=r),t&&(r=s=n=0),this.status.seekPercent=i,this.status.currentPercentRelative=s,this.status.currentPercentAbsolute=r,this.status.currentTime=n,this.status.readyState=e.readyState,this.status.networkState=e.networkState,this.status.playbackRate=e.playbackRate,this.status.ended=e.ended},_resetStatus:function(){this.status=e.extend({},this.status,e.jPlayer.prototype.status)},_trigger:function(t,n,r){t=e.Event(t),t.jPlayer={},t.jPlayer.version=e.extend({},this.version),t.jPlayer.options=e.extend(!0,{},this.options),t.jPlayer.status=e.extend(!0,{},this.status),t.jPlayer.html=e.extend(!0,{},this.html),t.jPlayer.flash=e.extend(!0,{},this.flash),n&&(t.jPlayer.error=e.extend({},n)),r&&(t.jPlayer.warning=e.extend({},r)),this.element.trigger(t)},jPlayerFlashEvent:function(t,n){if(t===e.jPlayer.event.ready)if(this.internal.ready){if(this.flash.gate){if(this.status.srcSet){var r=this.status.currentTime,i=this.status.paused;this.setMedia(this.status.media),r>0&&(i?this.pause(r):this.play(r))}this._trigger(e.jPlayer.event.flashreset)}}else this.internal.ready=!0,this.internal.flash.jq.css({width:"0px",height:"0px"}),this.version.flash=n.version,this.version.needFlash!==this.version.flash&&this._error({type:e.jPlayer.error.VERSION,context:this.version.flash,message:e.jPlayer.errorMsg.VERSION+this.version.flash,hint:e.jPlayer.errorHint.VERSION}),this._trigger(e.jPlayer.event.repeat),this._trigger(t);if(this.flash.gate)switch(t){case e.jPlayer.event.progress:this._getFlashStatus(n),this._updateInterface(),this._trigger(t);break;case e.jPlayer.event.timeupdate:this._getFlashStatus(n),this._updateInterface(),this._trigger(t);break;case e.jPlayer.event.play:this._seeked(),this._updateButtons(!0),this._trigger(t);break;case e.jPlayer.event.pause:this._updateButtons(!1),this._trigger(t);break;case e.jPlayer.event.ended:this._updateButtons(!1),this._trigger(t);break;case e.jPlayer.event.click:this._trigger(t);break;case e.jPlayer.event.error:this.status.waitForLoad=!0,this.status.waitForPlay=!0,this.status.video&&this.internal.flash.jq.css({width:"0px",height:"0px"}),this._validString(this.status.media.poster)&&this.internal.poster.jq.show(),this.css.jq.videoPlay.length&&this.status.video&&this.css.jq.videoPlay.show(),this.status.video?this._flash_setVideo(this.status.media):this._flash_setAudio(this.status.media),this._updateButtons(!1),this._error({type:e.jPlayer.error.URL,context:n.src,message:e.jPlayer.errorMsg.URL,hint:e.jPlayer.errorHint.URL});break;case e.jPlayer.event.seeking:this._seeking(),this._trigger(t);break;case e.jPlayer.event.seeked:this._seeked(),this._trigger(t);break;case e.jPlayer.event.ready:break;default:this._trigger(t)}return!1},_getFlashStatus:function(e){this.status.seekPercent=e.seekPercent,this.status.currentPercentRelative=e.currentPercentRelative,this.status.currentPercentAbsolute=e.currentPercentAbsolute,this.status.currentTime=e.currentTime,this.status.duration=e.duration,this.status.readyState=4,this.status.networkState=0,this.status.playbackRate=1,this.status.ended=!1},_updateButtons:function(e){e!==t&&(this.status.paused=!e,this.css.jq.play.length&&this.css.jq.pause.length&&(e?(this.css.jq.play.hide(),this.css.jq.pause.show()):(this.css.jq.play.show(),this.css.jq.pause.hide()))),this.css.jq.restoreScreen.length&&this.css.jq.fullScreen.length&&(this.status.noFullScreen?(this.css.jq.fullScreen.hide(),this.css.jq.restoreScreen.hide()):this.options.fullScreen?(this.css.jq.fullScreen.hide(),this.css.jq.restoreScreen.show()):(this.css.jq.fullScreen.show(),this.css.jq.restoreScreen.hide())),this.css.jq.repeat.length&&this.css.jq.repeatOff.length&&(this.options.loop?(this.css.jq.repeat.hide(),this.css.jq.repeatOff.show()):(this.css.jq.repeat.show(),this.css.jq.repeatOff.hide()))},_updateInterface:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.width(this.status.seekPercent+"%"),this.css.jq.playBar.length&&this.css.jq.playBar.width(this.status.currentPercentRelative+"%"),this.css.jq.currentTime.length&&this.css.jq.currentTime.text(e.jPlayer.convertTime(this.status.currentTime)),this.css.jq.duration.length&&this.css.jq.duration.text(e.jPlayer.convertTime(this.status.duration))},_seeking:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.addClass("jp-seeking-bg")},_seeked:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.removeClass("jp-seeking-bg")},_resetGate:function(){this.html.audio.gate=!1,this.html.video.gate=!1,this.flash.gate=!1},_resetActive:function(){this.html.active=!1,this.flash.active=!1},setMedia:function(t){var n=this,r=!1,i=this.status.media.poster!==t.poster;this._resetMedia(),this._resetGate(),this._resetActive(),e.each(this.formats,function(i,s){var o=n.format[s].media==="video";e.each(n.solutions,function(e,i){if(n[i].support[s]&&n._validString(t[s])){var u=i==="html";return o?(u?(n.html.video.gate=!0,n._html_setVideo(t),n.html.active=!0):(n.flash.gate=!0,n._flash_setVideo(t),n.flash.active=!0),n.css.jq.videoPlay.length&&n.css.jq.videoPlay.show(),n.status.video=!0):(u?(n.html.audio.gate=!0,n._html_setAudio(t),n.html.active=!0):(n.flash.gate=!0,n._flash_setAudio(t),n.flash.active=!0),n.css.jq.videoPlay.length&&n.css.jq.videoPlay.hide(),n.status.video=!1),r=!0,!1}});if(r)return!1}),r?((!this.status.nativeVideoControls||!this.html.video.gate)&&this._validString(t.poster)&&(i?this.htmlElement.poster.src=t.poster:this.internal.poster.jq.show()),this.status.srcSet=!0,this.status.media=e.extend({},t),this._updateButtons(!1),this._updateInterface()):this._error({type:e.jPlayer.error.NO_SUPPORT,context:"{supplied:'"+this.options.supplied+"'}",message:e.jPlayer.errorMsg.NO_SUPPORT,hint:e.jPlayer.errorHint.NO_SUPPORT})},_resetMedia:function(){this._resetStatus(),this._updateButtons(!1),this._updateInterface(),this._seeked(),this.internal.poster.jq.hide(),clearTimeout(this.internal.htmlDlyCmdId),this.html.active?this._html_resetMedia():this.flash.active&&this._flash_resetMedia()},clearMedia:function(){this._resetMedia(),this.html.active?this._html_clearMedia():this.flash.active&&this._flash_clearMedia(),this._resetGate(),this._resetActive()},load:function(){this.status.srcSet?this.html.active?this._html_load():this.flash.active&&this._flash_load():this._urlNotSetError("load")},play:function(e){e=typeof e=="number"?e:NaN,this.status.srcSet?this.html.active?this._html_play(e):this.flash.active&&this._flash_play(e):this._urlNotSetError("play")},videoPlay:function(){this.play()},pause:function(e){e=typeof e=="number"?e:NaN,this.status.srcSet?this.html.active?this._html_pause(e):this.flash.active&&this._flash_pause(e):this._urlNotSetError("pause")},pauseOthers:function(){var t=this;e.each(this.instances,function(e,n){t.element!==n&&n.data("jPlayer").status.srcSet&&n.jPlayer("pause")})},stop:function(){this.status.srcSet?this.html.active?this._html_pause(0):this.flash.active&&this._flash_pause(0):this._urlNotSetError("stop")},playHead:function(e){e=this._limitValue(e,0,100),this.status.srcSet?this.html.active?this._html_playHead(e):this.flash.active&&this._flash_playHead(e):this._urlNotSetError("playHead")},_muted:function(t){this.options.muted=t,this.html.used&&this._html_mute(t),this.flash.used&&this._flash_mute(t),!this.html.video.gate&&!this.html.audio.gate&&(this._updateMute(t),this._updateVolume(this.options.volume),this._trigger(e.jPlayer.event.volumechange))},mute:function(e){e=e===t?!0:!!e,this._muted(e)},unmute:function(e){e=e===t?!0:!!e,this._muted(!e)},_updateMute:function(e){e===t&&(e=this.options.muted),this.css.jq.mute.length&&this.css.jq.unmute.length&&(this.status.noVolume?(this.css.jq.mute.hide(),this.css.jq.unmute.hide()):e?(this.css.jq.mute.hide(),this.css.jq.unmute.show()):(this.css.jq.mute.show(),this.css.jq.unmute.hide()))},volume:function(t){t=this._limitValue(t,0,1),this.options.volume=t,this.html.used&&this._html_volume(t),this.flash.used&&this._flash_volume(t),!this.html.video.gate&&!this.html.audio.gate&&(this._updateVolume(t),this._trigger(e.jPlayer.event.volumechange))},volumeBar:function(e){if(this.css.jq.volumeBar.length){var t=this.css.jq.volumeBar.offset(),n=e.pageX-t.left,r=this.css.jq.volumeBar.width(),e=this.css.jq.volumeBar.height()-e.pageY+t.top,t=this.css.jq.volumeBar.height();this.options.verticalVolume?this.volume(e/t):this.volume(n/r)}this.options.muted&&this._muted(!1)},volumeBarValue:function(e){this.volumeBar(e)},_updateVolume:function(e){e===t&&(e=this.options.volume),e=this.options.muted?0:e,this.status.noVolume?(this.css.jq.volumeBar.length&&this.css.jq.volumeBar.hide(),this.css.jq.volumeBarValue.length&&this.css.jq.volumeBarValue.hide(),this.css.jq.volumeMax.length&&this.css.jq.volumeMax.hide()):(this.css.jq.volumeBar.length&&this.css.jq.volumeBar.show(),this.css.jq.volumeBarValue.length&&(this.css.jq.volumeBarValue.show(),this.css.jq.volumeBarValue[this.options.verticalVolume?"height":"width"](e*100+"%")),this.css.jq.volumeMax.length&&this.css.jq.volumeMax.show())},volumeMax:function(){this.volume(1),this.options.muted&&this._muted(!1)},_cssSelectorAncestor:function(t){var n=this;this.options.cssSelectorAncestor=t,this._removeUiClass(),this.ancestorJq=t?e(t):[],t&&this.ancestorJq.length!==1&&this._warning({type:e.jPlayer.warning.CSS_SELECTOR_COUNT,context:t,message:e.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.ancestorJq.length+" found for cssSelectorAncestor.",hint:e.jPlayer.warningHint.CSS_SELECTOR_COUNT}),this._addUiClass(),e.each(this.options.cssSelector,function(e,t){n._cssSelector(e,t)})},_cssSelector:function(t,n){var r=this;typeof n=="string"?e.jPlayer.prototype.options.cssSelector[t]?(this.css.jq[t]&&this.css.jq[t].length&&this.css.jq[t].unbind(".jPlayer"),this.options.cssSelector[t]=n,this.css.cs[t]=this.options.cssSelectorAncestor+" "+n,this.css.jq[t]=n?e(this.css.cs[t]):[],this.css.jq[t].length&&this.css.jq[t].bind("click.jPlayer",function(n){return r[t](n),e(this).blur(),!1}),n&&this.css.jq[t].length!==1&&this._warning({type:e.jPlayer.warning.CSS_SELECTOR_COUNT,context:this.css.cs[t],message:e.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.css.jq[t].length+" found for "+t+" method.",hint:e.jPlayer.warningHint.CSS_SELECTOR_COUNT})):this._warning({type:e.jPlayer.warning.CSS_SELECTOR_METHOD,context:t,message:e.jPlayer.warningMsg.CSS_SELECTOR_METHOD,hint:e.jPlayer.warningHint.CSS_SELECTOR_METHOD}):this._warning({type:e.jPlayer.warning.CSS_SELECTOR_STRING,context:n,message:e.jPlayer.warningMsg.CSS_SELECTOR_STRING,hint:e.jPlayer.warningHint.CSS_SELECTOR_STRING})},seekBar:function(e){if(this.css.jq.seekBar){var t=this.css.jq.seekBar.offset(),e=e.pageX-t.left,t=this.css.jq.seekBar.width();this.playHead(100*e/t)}},playBar:function(e){this.seekBar(e)},repeat:function(){this._loop(!0)},repeatOff:function(){this._loop(!1)},_loop:function(t){this.options.loop!==t&&(this.options.loop=t,this._updateButtons(),this._trigger(e.jPlayer.event.repeat))},currentTime:function(){},duration:function(){},gui:function(){},noSolution:function(){},option:function(n,r){var i=n;if(arguments.length===0)return e.extend(!0,{},this.options);if(typeof n=="string"){var s=n.split(".");if(r===t){for(var i=e.extend(!0,{},this.options),o=0;o<s.length;o++){if(i[s[o]]===t)return this._warning({type:e.jPlayer.warning.OPTION_KEY,context:n,message:e.jPlayer.warningMsg.OPTION_KEY,hint:e.jPlayer.warningHint.OPTION_KEY}),t;i=i[s[o]]}return i}for(var o=i={},u=0;u<s.length;u++)u<s.length-1?(o[s[u]]={},o=o[s[u]]):o[s[u]]=r}return this._setOptions(i),this},_setOptions:function(t){var n=this;return e.each(t,function(e,t){n._setOption(e,t)}),this},_setOption:function(t,n){var r=this;switch(t){case"volume":this.volume(n);break;case"muted":this._muted(n);break;case"cssSelectorAncestor":this._cssSelectorAncestor(n);break;case"cssSelector":e.each(n,function(e,t){r._cssSelector(e,t)});break;case"fullScreen":this.options[t]!==n&&(this._removeUiClass(),this.options[t]=n,this._refreshSize());break;case"size":!this.options.fullScreen&&this.options[t].cssClass!==n.cssClass&&this._removeUiClass(),this.options[t]=e.extend({},this.options[t],n),this._refreshSize();break;case"sizeFull":this.options.fullScreen&&this.options[t].cssClass!==n.cssClass&&this._removeUiClass(),this.options[t]=e.extend({},this.options[t],n),this._refreshSize();break;case"autohide":this.options[t]=e.extend({},this.options[t],n),this._updateAutohide();break;case"loop":this._loop(n);break;case"nativeVideoControls":this.options[t]=e.extend({},this.options[t],n),this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls),this._restrictNativeVideoControls(),this._updateNativeVideoControls();break;case"noFullScreen":this.options[t]=e.extend({},this.options[t],n),this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls),this.status.noFullScreen=this._uaBlocklist(this.options.noFullScreen),this._restrictNativeVideoControls(),this._updateButtons();break;case"noVolume":this.options[t]=e.extend({},this.options[t],n),this.status.noVolume=this._uaBlocklist(this.options.noVolume),this._updateVolume(),this._updateMute();break;case"emulateHtml":this.options[t]!==n&&((this.options[t]=n)?this._emulateHtmlBridge():this._destroyHtmlBridge())}return this},_refreshSize:function(){this._setSize(),this._addUiClass(),this._updateSize(),this._updateButtons(),this._updateAutohide(),this._trigger(e.jPlayer.event.resize)},_setSize:function(){this.options.fullScreen?(this.status.width=this.options.sizeFull.width,this.status.height=this.options.sizeFull.height,this.status.cssClass=this.options.sizeFull.cssClass):(this.status.width=this.options.size.width,this.status.height=this.options.size.height,this.status.cssClass=this.options.size.cssClass),this.element.css({width:this.status.width,height:this.status.height})},_addUiClass:function(){this.ancestorJq.length&&this.ancestorJq.addClass(this.status.cssClass)},_removeUiClass:function(){this.ancestorJq.length&&this.ancestorJq.removeClass(this.status.cssClass)},_updateSize:function(){this.internal.poster.jq.css({width:this.status.width,height:this.status.height}),!this.status.waitForPlay&&this.html.active&&this.status.video||this.html.video.available&&this.html.used&&this.status.nativeVideoControls?this.internal.video.jq.css({width:this.status.width,height:this.status.height}):!this.status.waitForPlay&&this.flash.active&&this.status.video&&this.internal.flash.jq.css({width:this.status.width,height:this.status.height})},_updateAutohide:function(){var e=this,t=function(){e.css.jq.gui.fadeIn(e.options.autohide.fadeIn,function(){clearTimeout(e.internal.autohideId),e.internal.autohideId=setTimeout(function(){e.css.jq.gui.fadeOut(e.options.autohide.fadeOut)},e.options.autohide.hold)})};this.css.jq.gui.length&&(this.css.jq.gui.stop(!0,!0),clearTimeout(this.internal.autohideId),this.element.unbind(".jPlayerAutohide"),this.css.jq.gui.unbind(".jPlayerAutohide"),this.status.nativeVideoControls?this.css.jq.gui.hide():this.options.fullScreen&&this.options.autohide.full||!this.options.fullScreen&&this.options.autohide.restored?(this.element.bind("mousemove.jPlayer.jPlayerAutohide",t),this.css.jq.gui.bind("mousemove.jPlayer.jPlayerAutohide",t),this.css.jq.gui.hide()):this.css.jq.gui.show())},fullScreen:function(){this._setOption("fullScreen",!0)},restoreScreen:function(){this._setOption("fullScreen",!1)},_html_initMedia:function(){this.htmlElement.media.src=this.status.src,this.options.preload!=="none"&&this._html_load(),this._trigger(e.jPlayer.event.timeupdate)},_html_setAudio:function(t){var n=this;e.each(this.formats,function(e,r){if(n.html.support[r]&&t[r])return n.status.src=t[r],n.status.format[r]=!0,n.status.formatType=r,!1}),this.htmlElement.media=this.htmlElement.audio,this._html_initMedia()},_html_setVideo:function(t){var n=this;e.each(this.formats,function(e,r){if(n.html.support[r]&&t[r])return n.status.src=t[r],n.status.format[r]=!0,n.status.formatType=r,!1}),this.status.nativeVideoControls&&(this.htmlElement.video.poster=this._validString(t.poster)?t.poster:""),this.htmlElement.media=this.htmlElement.video,this._html_initMedia()},_html_resetMedia:function(){this.htmlElement.media&&(this.htmlElement.media.id===this.internal.video.id&&!this.status.nativeVideoControls&&this.internal.video.jq.css({width:"0px",height:"0px"}),this.htmlElement.media.pause())},_html_clearMedia:function(){this.htmlElement.media&&(this.htmlElement.media.src="",this.htmlElement.media.load())},_html_load:function(){this.status.waitForLoad&&(this.status.waitForLoad=!1,this.htmlElement.media.load()),clearTimeout(this.internal.htmlDlyCmdId)},_html_play:function(e){var t=this;this._html_load(),this.htmlElement.media.play();if(!isNaN(e))try{this.htmlElement.media.currentTime=e}catch(n){this.internal.htmlDlyCmdId=setTimeout(function(){t.play(e)},100);return}this._html_checkWaitForPlay()},_html_pause:function(e){var t=this;e>0?this._html_load():clearTimeout(this.internal.htmlDlyCmdId),this.htmlElement.media.pause();if(!isNaN(e))try{this.htmlElement.media.currentTime=e}catch(n){this.internal.htmlDlyCmdId=setTimeout(function(){t.pause(e)},100);return}e>0&&this._html_checkWaitForPlay()},_html_playHead:function(e){var t=this;this._html_load();try{if(typeof this.htmlElement.media.seekable=="object"&&this.htmlElement.media.seekable.length>0)this.htmlElement.media.currentTime=e*this.htmlElement.media.seekable.end(this.htmlElement.media.seekable.length-1)/100;else{if(!(this.htmlElement.media.duration>0&&!isNaN(this.htmlElement.media.duration)))throw"e";this.htmlElement.media.currentTime=e*this.htmlElement.media.duration/100}}catch(n){this.internal.htmlDlyCmdId=setTimeout(function(){t.playHead(e)},100);return}this.status.waitForLoad||this._html_checkWaitForPlay()},_html_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1,this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),this.status.video&&(this.internal.poster.jq.hide(),this.internal.video.jq.css({width:this.status.width,height:this.status.height})))},_html_volume:function(e){this.html.audio.available&&(this.htmlElement.audio.volume=e),this.html.video.available&&(this.htmlElement.video.volume=e)},_html_mute:function(e){this.html.audio.available&&(this.htmlElement.audio.muted=e),this.html.video.available&&(this.htmlElement.video.muted=e)},_flash_setAudio:function(t){var n=this;try{e.each(this.formats,function(e,r){if(n.flash.support[r]&&t[r]){switch(r){case"m4a":case"fla":n._getMovie().fl_setAudio_m4a(t[r]);break;case"mp3":n._getMovie().fl_setAudio_mp3(t[r]);break;case"rtmpa":n._getMovie().fl_setAudio_rtmp(t[r])}return n.status.src=t[r],n.status.format[r]=!0,n.status.formatType=r,!1}}),this.options.preload==="auto"&&(this._flash_load(),this.status.waitForLoad=!1)}catch(r){this._flashError(r)}},_flash_setVideo:function(t){var n=this;try{e.each(this.formats,function(e,r){if(n.flash.support[r]&&t[r]){switch(r){case"m4v":case"flv":n._getMovie().fl_setVideo_m4v(t[r]);break;case"rtmpv":n._getMovie().fl_setVideo_rtmp(t[r])}return n.status.src=t[r],n.status.format[r]=!0,n.status.formatType=r,!1}}),this.options.preload==="auto"&&(this._flash_load(),this.status.waitForLoad=!1)}catch(r){this._flashError(r)}},_flash_resetMedia:function(){this.internal.flash.jq.css({width:"0px",height:"0px"}),this._flash_pause(NaN)},_flash_clearMedia:function(){try{this._getMovie().fl_clearMedia()}catch(e){this._flashError(e)}},_flash_load:function(){try{this._getMovie().fl_load()}catch(e){this._flashError(e)}this.status.waitForLoad=!1},_flash_play:function(e){try{this._getMovie().fl_play(e)}catch(t){this._flashError(t)}this.status.waitForLoad=!1,this._flash_checkWaitForPlay()},_flash_pause:function(e){try{this._getMovie().fl_pause(e)}catch(t){this._flashError(t)}e>0&&(this.status.waitForLoad=!1,this._flash_checkWaitForPlay())},_flash_playHead:function(e){try{this._getMovie().fl_play_head(e)}catch(t){this._flashError(t)}this.status.waitForLoad||this._flash_checkWaitForPlay()},_flash_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1,this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),this.status.video&&(this.internal.poster.jq.hide(),this.internal.flash.jq.css({width:this.status.width,height:this.status.height})))},_flash_volume:function(e){try{this._getMovie().fl_volume(e)}catch(t){this._flashError(t)}},_flash_mute:function(e){try{this._getMovie().fl_mute(e)}catch(t){this._flashError(t)}},_getMovie:function(){return document[this.internal.flash.id]},_checkForFlash:function(e){var t=!1,n;if(window.ActiveXObject)try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+e),t=!0}catch(r){}else navigator.plugins&&navigator.mimeTypes.length>0&&(n=navigator.plugins["Shockwave Flash"])&&navigator.plugins["Shockwave Flash"].description.replace(/.*\s(\d+\.\d+).*/,"$1")>=e&&(t=!0);return t},_validString:function(e){return e&&typeof e=="string"},_limitValue:function(e,t,n){return e<t?t:e>n?n:e},_urlNotSetError:function(t){this._error({type:e.jPlayer.error.URL_NOT_SET,context:t,message:e.jPlayer.errorMsg.URL_NOT_SET,hint:e.jPlayer.errorHint.URL_NOT_SET})},_flashError:function(t){var n;n=this.internal.ready?"FLASH_DISABLED":"FLASH",this._error({type:e.jPlayer.error[n],context:this.internal.flash.swf,message:e.jPlayer.errorMsg[n]+t.message,hint:e.jPlayer.errorHint[n]}),this.internal.flash.jq.css({width:"1px",height:"1px"})},_error:function(t){this._trigger(e.jPlayer.event.error,t),this.options.errorAlerts&&this._alert("Error!"+(t.message?"\n\n"+t.message:"")+(t.hint?"\n\n"+t.hint:"")+"\n\nContext: "+t.context)},_warning:function(n){this._trigger(e.jPlayer.event.warning,t,n),this.options.warningAlerts&&this._alert("Warning!"+(n.message?"\n\n"+n.message:"")+(n.hint?"\n\n"+n.hint:"")+"\n\nContext: "+n.context)},_alert:function(e){alert("jPlayer "+this.version.script+" : id='"+this.internal.self.id+"' : "+e)},_emulateHtmlBridge:function(){var t=this;e.each(e.jPlayer.emulateMethods.split(/\s+/g),function(e,n){t.internal.domNode[n]=function(e){t[n](e)}}),e.each(e.jPlayer.event,function(n,r){var i=!0;e.each(e.jPlayer.reservedEvent.split(/\s+/g),function(e,t){if(t===n)return i=!1}),i&&t.element.bind(r+".jPlayer.jPlayerHtml",function(){t._emulateHtmlUpdate();var e=document.createEvent("Event");e.initEvent(n,!1,!0),t.internal.domNode.dispatchEvent(e)})})},_emulateHtmlUpdate:function(){var t=this;e.each(e.jPlayer.emulateStatus.split(/\s+/g),function(e,n){t.internal.domNode[n]=t.status[n]}),e.each(e.jPlayer.emulateOptions.split(/\s+/g),function(e,n){t.internal.domNode[n]=t.options[n]})},_destroyHtmlBridge:function(){var t=this;this.element.unbind(".jPlayerHtml"),e.each((e.jPlayer.emulateMethods+" "+e.jPlayer.emulateStatus+" "+e.jPlayer.emulateOptions).split(/\s+/g),function(e,n){delete t.internal.domNode[n]})}},e.jPlayer.error={FLASH:"e_flash",FLASH_DISABLED:"e_flash_disabled",NO_SOLUTION:"e_no_solution",NO_SUPPORT:"e_no_support",URL:"e_url",URL_NOT_SET:"e_url_not_set",VERSION:"e_version"},e.jPlayer.errorMsg={FLASH:"jPlayer's Flash fallback is not configured correctly, or a command was issued before the jPlayer Ready event. Details: ",FLASH_DISABLED:"jPlayer's Flash fallback has been disabled by the browser due to the CSS rules you have used. Details: ",NO_SOLUTION:"No solution can be found by jPlayer in this browser. Neither HTML nor Flash can be used.",NO_SUPPORT:"It is not possible to play any media format provided in setMedia() on this browser using your current options.",URL:"Media URL could not be loaded.",URL_NOT_SET:"Attempt to issue media playback commands, while no media url is set.",VERSION:"jPlayer "+e.jPlayer.prototype.version.script+" needs Jplayer.swf version "+e.jPlayer.prototype.version.needFlash+" but found "},e.jPlayer.errorHint={FLASH:"Check your swfPath option and that Jplayer.swf is there.",FLASH_DISABLED:"Check that you have not display:none; the jPlayer entity or any ancestor.",NO_SOLUTION:"Review the jPlayer options: support and supplied.",NO_SUPPORT:"Video or audio formats defined in the supplied option are missing.",URL:"Check media URL is valid.",URL_NOT_SET:"Use setMedia() to set the media URL.",VERSION:"Update jPlayer files."},e.jPlayer.warning={CSS_SELECTOR_COUNT:"e_css_selector_count",CSS_SELECTOR_METHOD:"e_css_selector_method",CSS_SELECTOR_STRING:"e_css_selector_string",OPTION_KEY:"e_option_key"},e.jPlayer.warningMsg={CSS_SELECTOR_COUNT:"The number of css selectors found did not equal one: ",CSS_SELECTOR_METHOD:"The methodName given in jPlayer('cssSelector') is not a valid jPlayer method.",CSS_SELECTOR_STRING:"The methodCssSelector given in jPlayer('cssSelector') is not a String or is empty.",OPTION_KEY:"The option requested in jPlayer('option') is undefined."},e.jPlayer.warningHint={CSS_SELECTOR_COUNT:"Check your css selector and the ancestor.",CSS_SELECTOR_METHOD:"Check your method name.",CSS_SELECTOR_STRING:"Check your css selector is a string.",OPTION_KEY:"Check your option name."}}(jQuery),define("jplayer",function(){}),function(){define("lib/sound",["jquery","jplayer","lib/persistence"],function(e,t,n){var r;return r=[{downloadUrl:"https://s3.amazonaws.com/james_gary/Pietnastka_-_01_-_Dalia.mp3",title:"Dalia"},{downloadUrl:"https://s3.amazonaws.com/james_gary/Pietnastka_-_02_-_School_Boy.mp3",title:"School Boy"},{downloadUrl:"https://s3.amazonaws.com/james_gary/Pietnastka_-_03_-_Dice.mp3",title:"Dice"},{downloadUrl:"https://s3.amazonaws.com/james_gary/Pietnastka_-_04_-_Pitnastka.mp3",title:"Pietnastka"},{downloadUrl:"https://s3.amazonaws.com/james_gary/Pietnastka_-_05_-_Salto.mp3",title:"Salto"},{downloadUrl:"https://s3.amazonaws.com/james_gary/Pietnastka_-_06_-_Czterdzieci_cztery.mp3",title:"Czterdziesci Cztery"},{downloadUrl:"https://s3.amazonaws.com/james_gary/Pietnastka_-_07_-_Noakowski.mp3",title:"Noakowski"},{downloadUrl:"https://s3.amazonaws.com/james_gary/Pietnastka_-_08_-_Podchody.mp3",title:"Podchody"},{downloadUrl:"https://s3.amazonaws.com/james_gary/Pietnastka_-_09_-_Keymonica.mp3",title:"Keymonica"},{downloadUrl:"https://s3.amazonaws.com/james_gary/Pietnastka_-_10_-_Superator.mp3",title:"Superator"},{downloadUrl:"https://s3.amazonaws.com/james_gary/Pietnastka_-_11_-_Tape_Eater.mp3",title:"Tape Eater"}],{start:function(){var t;return t=this,this.currentIndex=0,e(".songTitle").text(this.currentTitle()),this.init(),this.$player.bind(e.jPlayer.event.ended,function(e){return t.advanceTrack(),t.playSong()}),this.$player.bind(e.jPlayer.event.pause,function(t){return e(".songInfo").fadeOut(200),n.set("mute",!0)}),this.$player.bind(e.jPlayer.event.play,function(t){return e(".songInfo").fadeIn(200),n.set("mute",!1)})},init:function(){var t;return t=this,this.$player=e(".musicPlayer").jPlayer({cssSelectorAncestor:".audioManager",cssSelector:{play:".playing",pause:".paused"},loop:!0,preload:!0,supplied:"mp3",swfPath:"/assets/",ready:function(){return e(this).jPlayer("setMedia",{mp3:t.currentDownloadUrl()}),n.get("mute")||(e(".songInfo").show(),t.playSong()),e(".audioManager").slideDown(500)}})},playSong:function(){return this.$player.jPlayer("setMedia",{mp3:this.currentDownloadUrl()}).jPlayer("play"),e(".songTitle").text(this.currentTitle())},currentTitle:function(){return this.currentSong().title},currentDownloadUrl:function(){return this.currentSong().downloadUrl},currentSong:function(){return r[this.currentIndex]},advanceTrack:function(){this.currentIndex++;if(this.currentIndex>=r.length)return this.currentIndex=0}}})}.call(this),function(){define("controller",["jquery","models/playground","views/canvasPainter","lib/gameLoop","views/trippyBackground","lib/persistence","lib/sound"],function(e,t,n,r,i,s,o){var u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N;return d=N=h=!1,a=1,T=[87,38],c=[65,37],f=[83,40],m=[68,39],v=[82],p=[80,27],u=[32,82],l=[32,37,38,39,40],g=function(){return a=parseInt(location.href.split("level=")[1])||1,n.init(document.getElementById("canvas1"),document.getElementById("canvas2"),document.getElementById("canvas3"),document.getElementById("canvas4"))},S=function(){return t.startLevel(a),n.represent(t.drawables()),t.player.clonesLeft!=null&&e(".clonesLeftContainer").show(),d=!0,N=h=!1,e(".popup").fadeOut(200),t.onLevelWin(function(){var t;if(!N&&!h)return t=(s.get("levelsCompleted")||[]).concat(a),s.set("levelsCompleted",t),d=!1,N=!0,a===20?e(".game-complete").show():e(".level-complete").show()}),t.onLevelLose(function(){if(!N&&!h)return e(".level-fail").fadeIn(1e3),d=!1,h=!0})},y=function(){return e("body").keyup(function(e){var n;n=e.keyCode;try{T.indexOf(n)!==-1&&t.stopCloningUp(),c.indexOf(n)!==-1&&t.stopCloningLeft(),f.indexOf(n)!==-1&&t.stopCloningDown();if(m.indexOf(n)!==-1)return t.stopCloningRight()}catch(r){return console.log("Possible error: "+r)}}),e("body").keydown(function(n){var r;return r=n.keyCode,d?(T.indexOf(r)!==-1&&t.cloningUp(),c.indexOf(r)!==-1&&t.cloningLeft(),f.indexOf(r)!==-1&&t.cloningDown(),m.indexOf(r)!==-1&&t.cloningRight(),v.indexOf(r)!==-1&&S(),p.indexOf(r)!==-1&&x()):N&&u.indexOf(r)!==-1?(a+=1,S(),e(".level-complete").fadeOut(200),d=!0):h&&u.indexOf(r)!==-1&&(S(),e(".level-fail").fadeOut(200),d=!0),l.indexOf(r)!==-1&&n.preventDefault(),!0}),e("a.start").click(function(){return w()}),e(".level").click(function(){return a=e(this).data().level,S(),b("playground")}),e("a.credits").click(function(){return b("credits")}),e("a.resume").click(function(){return x()}),e("a.restart").click(function(){return S()}),e("a.level-select").click(function(){return w()})},E=function(){return r.loop(function(){return t.update(),n.paint()})},b=function(t){return e("."+t).fadeIn(200),e(".gameContainer > div:not(."+t+"):not(.audioManager)").fadeOut(200)},w=function(){var t,n,r,i,o,u,a,f,l,c;n=s.get("levelsCompleted")||[],l=e(".level");for(o=0,a=l.length;o<a;o++)r=l[o],t=e(r),t.removeClass("available");c=e(".level");for(u=0,f=c.length;u<f;u++)r=c[u],t=e(r),i=t.data("level"),n.indexOf(i)!==-1&&(t.addClass("done"),t.addClass("available"),e(".level[data-level="+(i+1)+"]").addClass("available"));return e(".level[data-level=1]").addClass("available"),b("level-select")},x=function(){return t.togglePause(),t.paused?e(".popup.paused").fadeIn(200):e(".popup.paused").fadeOut(200)},{setup:function(){return e("document").ready(function(){return i.setup(document.getElementById("trippyBackground")),o.start(),g(),y(),E()})}}})}.call(this),function(){requirejs.config({paths:{box2d:"vendor/Box2dWeb-2.1.a.3",jplayer:"vendor/jplayer/jquery.jplayer.min",jquery:"vendor/jquery-1.8.2",text:"vendor/text",shim:{jplayer:{deps:["jquery"]}}}}),require(["controller"],function(e){return e.setup()})}.call(this),define("bootstrap",function(){});